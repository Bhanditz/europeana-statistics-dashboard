/*! jQuery v1.7.2 jquery.com | jquery.org/license */
function generate_notify(t){t.text||(t.text="Opps something went wrong."),t.notify||(t.notify="success"),t.position||(t.position="bottomRight"),t.timeout||(t.timeout=!1),$.noty.closeAll();var e=noty({text:t.text,type:t.notify,dismissQueue:!1,layout:t.position,theme:"defaultTheme",timeout:t.timeout,animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:1e3}});return e}function showAllValidationErrors(t){for(i in t)error=t[i],noty({text:error,type:"error",dismissQueue:!1,layout:"bottomRight",theme:"defaultTheme"})}/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(function(t,e){function n(t){return z.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}function a(t){if(!ve[t]){var e=F.body,n=z("<"+t+">").appendTo(e),a=n.css("display");n.remove(),("none"===a||""===a)&&(fe||(fe=F.createElement("iframe"),fe.frameBorder=fe.width=fe.height=0),e.appendChild(fe),_e&&fe.createElement||(_e=(fe.contentWindow||fe.contentDocument).document,_e.write((z.support.boxModel?"<!doctype html>":"")+"<html><body>"),_e.close()),n=_e.createElement(t),_e.body.appendChild(n),a=z.css(n,"display"),e.removeChild(fe)),ve[t]=a}return ve[t]}function r(t,e){var n={};return z.each(be.concat.apply([],be.slice(0,e)),function(){n[this]=t}),n}function i(){me=e}function o(){return setTimeout(i,0),me=z.now()}function s(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function l(){try{return new t.XMLHttpRequest}catch(e){}}function c(t,n){t.dataFilter&&(n=t.dataFilter(n,t.dataType));var a,r,i,o,s,l,c,u,h=t.dataTypes,d={},p=h.length,f=h[0];for(a=1;p>a;a++){if(1===a)for(r in t.converters)"string"==typeof r&&(d[r.toLowerCase()]=t.converters[r]);if(o=f,f=h[a],"*"===f)f=o;else if("*"!==o&&o!==f){if(s=o+" "+f,l=d[s]||d["* "+f],!l){u=e;for(c in d)if(i=c.split(" "),(i[0]===o||"*"===i[0])&&(u=d[i[1]+" "+f])){c=d[c],c===!0?l=u:u===!0&&(l=c);break}}!l&&!u&&z.error("No conversion from "+s.replace(" "," to ")),l!==!0&&(n=l?l(n):u(c(n)))}}return n}function u(t,n,a){var r,i,o,s,l=t.contents,c=t.dataTypes,u=t.responseFields;for(i in u)i in a&&(n[u[i]]=a[i]);for(;"*"===c[0];)c.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("content-type"));if(r)for(i in l)if(l[i]&&l[i].test(r)){c.unshift(i);break}if(c[0]in a)o=c[0];else{for(i in a){if(!c[0]||t.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==c[0]&&c.unshift(o),a[o]):void 0}function h(t,e,n,a){if(z.isArray(e))z.each(e,function(e,r){n||Gt.test(t)?a(t,r):h(t+"["+("object"==typeof r?e:"")+"]",r,n,a)});else if(n||"object"!==z.type(e))a(t,e);else for(var r in e)h(t+"["+r+"]",e[r],n,a)}function d(t,n){var a,r,i=z.ajaxSettings.flatOptions||{};for(a in n)n[a]!==e&&((i[a]?t:r||(r={}))[a]=n[a]);r&&z.extend(!0,t,r)}function p(t,n,a,r,i,o){i=i||n.dataTypes[0],o=o||{},o[i]=!0;for(var s,l=t[i],c=0,u=l?l.length:0,h=t===ie;u>c&&(h||!s);c++)s=l[c](n,a,r),"string"==typeof s&&(!h||o[s]?s=e:(n.dataTypes.unshift(s),s=p(t,n,a,r,s,o)));return(h||!s)&&!o["*"]&&(s=p(t,n,a,r,"*",o)),s}function f(t){return function(e,n){if("string"!=typeof e&&(n=e,e="*"),z.isFunction(n))for(var a,r,i,o=e.toLowerCase().split(ee),s=0,l=o.length;l>s;s++)a=o[s],i=/^\+/.test(a),i&&(a=a.substr(1)||"*"),r=t[a]=t[a]||[],r[i?"unshift":"push"](n)}}function _(t,e,n){var a="width"===e?t.offsetWidth:t.offsetHeight,r="width"===e?1:0,i=4;if(a>0){if("border"!==n)for(;i>r;r+=2)n||(a-=parseFloat(z.css(t,"padding"+Ot[r]))||0),"margin"===n?a+=parseFloat(z.css(t,n+Ot[r]))||0:a-=parseFloat(z.css(t,"border"+Ot[r]+"Width"))||0;return a+"px"}if(a=Et(t,e),(0>a||null==a)&&(a=t.style[e]),Ht.test(a))return a;if(a=parseFloat(a)||0,n)for(;i>r;r+=2)a+=parseFloat(z.css(t,"padding"+Ot[r]))||0,"padding"!==n&&(a+=parseFloat(z.css(t,"border"+Ot[r]+"Width"))||0),"margin"===n&&(a+=parseFloat(z.css(t,n+Ot[r]))||0);return a+"px"}function g(t){var e=F.createElement("div");return At.appendChild(e),e.innerHTML=t.outerHTML,e.firstChild}function m(t){var e=(t.nodeName||"").toLowerCase();"input"===e?v(t):"script"!==e&&"undefined"!=typeof t.getElementsByTagName&&z.grep(t.getElementsByTagName("input"),v)}function v(t){("checkbox"===t.type||"radio"===t.type)&&(t.defaultChecked=t.checked)}function y(t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll("*"):[]}function x(t,e){var n;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),n=e.nodeName.toLowerCase(),"object"===n?e.outerHTML=t.outerHTML:"input"!==n||"checkbox"!==t.type&&"radio"!==t.type?"option"===n?e.selected=t.defaultSelected:"input"===n||"textarea"===n?e.defaultValue=t.defaultValue:"script"===n&&e.text!==t.text&&(e.text=t.text):(t.checked&&(e.defaultChecked=e.checked=t.checked),e.value!==t.value&&(e.value=t.value)),e.removeAttribute(z.expando),e.removeAttribute("_submit_attached"),e.removeAttribute("_change_attached"))}function b(t,e){if(1===e.nodeType&&z.hasData(t)){var n,a,r,i=z._data(t),o=z._data(e,i),s=i.events;if(s){delete o.handle,o.events={};for(n in s)for(a=0,r=s[n].length;r>a;a++)z.event.add(e,n,s[n][a])}o.data&&(o.data=z.extend({},o.data))}}function w(t,e){return z.nodeName(t,"table")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function k(t){var e=ft.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function C(t,e,n){if(e=e||0,z.isFunction(e))return z.grep(t,function(t,a){var r=!!e.call(t,a,t);return r===n});if(e.nodeType)return z.grep(t,function(t,a){return t===e===n});if("string"==typeof e){var a=z.grep(t,function(t){return 1===t.nodeType});if(ut.test(e))return z.filter(e,a,!n);e=z.filter(e,a)}return z.grep(t,function(t,a){return z.inArray(t,e)>=0===n})}function D(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function P(){return!0}function S(){return!1}function A(t,e,n){var a=e+"defer",r=e+"queue",i=e+"mark",o=z._data(t,a);o&&("queue"===n||!z._data(t,r))&&("mark"===n||!z._data(t,i))&&setTimeout(function(){!z._data(t,r)&&!z._data(t,i)&&(z.removeData(t,a,!0),o.fire())},0)}function E(t){for(var e in t)if(("data"!==e||!z.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function T(t,n,a){if(a===e&&1===t.nodeType){var r="data-"+n.replace(j,"-$1").toLowerCase();if(a=t.getAttribute(r),"string"==typeof a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:z.isNumeric(a)?+a:B.test(a)?z.parseJSON(a):a}catch(i){}z.data(t,n,a)}else a=e}return a}function M(t){var e,n,a=H[t]={};for(t=t.split(/\s+/),e=0,n=t.length;n>e;e++)a[t[e]]=!0;return a}var F=t.document,N=t.navigator,I=t.location,z=function(){function n(){if(!s.isReady){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(n,1)}s.ready()}}var a,r,i,o,s=function(t,e){return new s.fn.init(t,e,a)},l=t.jQuery,c=t.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,d=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,_=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,y=/(webkit)[ \/]([\w.]+)/,x=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,C=/^-ms-/,D=function(t,e){return(e+"").toUpperCase()},P=N.userAgent,S=Object.prototype.toString,A=Object.prototype.hasOwnProperty,E=Array.prototype.push,T=Array.prototype.slice,M=String.prototype.trim,I=Array.prototype.indexOf,z={};return s.fn=s.prototype={constructor:s,init:function(t,n,a){var r,i,o,l;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("body"===t&&!n&&F.body)return this.context=F,this[0]=F.body,this.selector=t,this.length=1,this;if("string"==typeof t){if(r="<"!==t.charAt(0)||">"!==t.charAt(t.length-1)||t.length<3?u.exec(t):[null,t,null],r&&(r[1]||!n)){if(r[1])return n=n instanceof s?n[0]:n,l=n?n.ownerDocument||n:F,o=f.exec(t),o?s.isPlainObject(n)?(t=[F.createElement(o[1])],s.fn.attr.call(t,n,!0)):t=[l.createElement(o[1])]:(o=s.buildFragment([r[1]],[l]),t=(o.cacheable?s.clone(o.fragment):o.fragment).childNodes),s.merge(this,t);if(i=F.getElementById(r[2]),i&&i.parentNode){if(i.id!==r[2])return a.find(t);this.length=1,this[0]=i}return this.context=F,this.selector=t,this}return!n||n.jquery?(n||a).find(t):this.constructor(n).find(t)}return s.isFunction(t)?a.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),s.makeArray(t,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return T.call(this,0)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,n){var a=this.constructor();return s.isArray(t)?E.apply(a,t):s.merge(a,t),a.prevObject=this,a.context=this.context,"find"===e?a.selector=this.selector+(this.selector?" ":"")+n:e&&(a.selector=this.selector+"."+e+"("+n+")"),a},each:function(t,e){return s.each(this,t,e)},ready:function(t){return s.bindReady(),i.add(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(T.apply(this,arguments),"slice",T.call(arguments).join(","))},map:function(t){return this.pushStack(s.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},s.fn.init.prototype=s.fn,s.extend=s.fn.extend=function(){var t,n,a,r,i,o,l=arguments[0]||{},c=1,u=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[1]||{},c=2),"object"!=typeof l&&!s.isFunction(l)&&(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(t=arguments[c]))for(n in t)a=l[n],r=t[n],l!==r&&(h&&r&&(s.isPlainObject(r)||(i=s.isArray(r)))?(i?(i=!1,o=a&&s.isArray(a)?a:[]):o=a&&s.isPlainObject(a)?a:{},l[n]=s.extend(h,o,r)):r!==e&&(l[n]=r));return l},s.extend({noConflict:function(e){return t.$===s&&(t.$=c),e&&t.jQuery===s&&(t.jQuery=l),s},isReady:!1,readyWait:1,holdReady:function(t){t?s.readyWait++:s.ready(!0)},ready:function(t){if(t===!0&&!--s.readyWait||t!==!0&&!s.isReady){if(!F.body)return setTimeout(s.ready,1);if(s.isReady=!0,t!==!0&&--s.readyWait>0)return;i.fireWith(F,[s]),s.fn.trigger&&s(F).trigger("ready").off("ready")}},bindReady:function(){if(!i){if(i=s.Callbacks("once memory"),"complete"===F.readyState)return setTimeout(s.ready,1);if(F.addEventListener)F.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",s.ready,!1);else if(F.attachEvent){F.attachEvent("onreadystatechange",o),t.attachEvent("onload",s.ready);var e=!1;try{e=null==t.frameElement}catch(a){}F.documentElement.doScroll&&e&&n()}}},isFunction:function(t){return"function"===s.type(t)},isArray:Array.isArray||function(t){return"array"===s.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):z[S.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==s.type(t)||t.nodeType||s.isWindow(t))return!1;try{if(t.constructor&&!A.call(t,"constructor")&&!A.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var a;for(a in t);return a===e||A.call(t,a)},isEmptyObject:function(t){for(var e in t)return!1;return!0},error:function(t){throw new Error(t)},parseJSON:function(e){return"string"==typeof e&&e?(e=s.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):_.test(e.replace(g,"@").replace(m,"]").replace(v,""))?new Function("return "+e)():void s.error("Invalid JSON: "+e)):null},parseXML:function(n){if("string"!=typeof n||!n)return null;var a,r;try{t.DOMParser?(r=new DOMParser,a=r.parseFromString(n,"text/xml")):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(n))}catch(i){a=e}return(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)&&s.error("Invalid XML: "+n),a},noop:function(){},globalEval:function(e){e&&h.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(C,"ms-").replace(k,D)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toUpperCase()===e.toUpperCase()},each:function(t,n,a){var r,i=0,o=t.length,l=o===e||s.isFunction(t);if(a)if(l){for(r in t)if(n.apply(t[r],a)===!1)break}else for(;o>i&&n.apply(t[i++],a)!==!1;);else if(l){for(r in t)if(n.call(t[r],r,t[r])===!1)break}else for(;o>i&&n.call(t[i],i,t[i++])!==!1;);return t},trim:M?function(t){return null==t?"":M.call(t)}:function(t){return null==t?"":(t+"").replace(d,"").replace(p,"")},makeArray:function(t,e){var n=e||[];if(null!=t){var a=s.type(t);null==t.length||"string"===a||"function"===a||"regexp"===a||s.isWindow(t)?E.call(n,t):s.merge(n,t)}return n},inArray:function(t,e,n){var a;if(e){if(I)return I.call(e,t,n);for(a=e.length,n=n?0>n?Math.max(0,a+n):n:0;a>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var a=t.length,r=0;if("number"==typeof n.length)for(var i=n.length;i>r;r++)t[a++]=n[r];else for(;n[r]!==e;)t[a++]=n[r++];return t.length=a,t},grep:function(t,e,n){var a,r=[];n=!!n;for(var i=0,o=t.length;o>i;i++)a=!!e(t[i],i),n!==a&&r.push(t[i]);return r},map:function(t,n,a){var r,i,o=[],l=0,c=t.length,u=t instanceof s||c!==e&&"number"==typeof c&&(c>0&&t[0]&&t[c-1]||0===c||s.isArray(t));if(u)for(;c>l;l++)r=n(t[l],l,a),null!=r&&(o[o.length]=r);else for(i in t)r=n(t[i],i,a),null!=r&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(t,n){if("string"==typeof n){var a=t[n];n=t,t=a}if(!s.isFunction(t))return e;var r=T.call(arguments,2),i=function(){return t.apply(n,r.concat(T.call(arguments)))};return i.guid=t.guid=t.guid||i.guid||s.guid++,i},access:function(t,n,a,r,i,o,l){var c,u=null==a,h=0,d=t.length;if(a&&"object"==typeof a){for(h in a)s.access(t,n,h,a[h],1,o,r);i=1}else if(r!==e){if(c=l===e&&s.isFunction(r),u&&(c?(c=n,n=function(t,e,n){return c.call(s(t),n)}):(n.call(t,r),n=null)),n)for(;d>h;h++)n(t[h],a,c?r.call(t[h],h,n(t[h],a)):r,l);i=1}return i?t:u?n.call(t):d?n(t[0],a):o},now:function(){return(new Date).getTime()},uaMatch:function(t){t=t.toLowerCase();var e=y.exec(t)||x.exec(t)||b.exec(t)||t.indexOf("compatible")<0&&w.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},sub:function(){function t(e,n){return new t.fn.init(e,n)}s.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,a){return a&&a instanceof s&&!(a instanceof t)&&(a=t(a)),s.fn.init.call(this,n,a,e)},t.fn.init.prototype=t.fn;var e=t(F);return t},browser:{}}),s.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){z["[object "+e+"]"]=e.toLowerCase()}),r=s.uaMatch(P),r.browser&&(s.browser[r.browser]=!0,s.browser.version=r.version),s.browser.webkit&&(s.browser.safari=!0),h.test(" ")&&(d=/^[\s\xA0]+/,p=/[\s\xA0]+$/),a=s(F),F.addEventListener?o=function(){F.removeEventListener("DOMContentLoaded",o,!1),s.ready()}:F.attachEvent&&(o=function(){"complete"===F.readyState&&(F.detachEvent("onreadystatechange",o),s.ready())}),s}(),H={};z.Callbacks=function(t){t=t?H[t]||M(t):{};var n,a,r,i,o,s,l=[],c=[],u=function(e){var n,a,r,i;for(n=0,a=e.length;a>n;n++)r=e[n],i=z.type(r),"array"===i?u(r):"function"===i&&(!t.unique||!d.has(r))&&l.push(r)},h=function(e,u){for(u=u||[],n=!t.memory||[e,u],a=!0,r=!0,s=i||0,i=0,o=l.length;l&&o>s;s++)if(l[s].apply(e,u)===!1&&t.stopOnFalse){n=!0;break}r=!1,l&&(t.once?n===!0?d.disable():l=[]:c&&c.length&&(n=c.shift(),d.fireWith(n[0],n[1])))},d={add:function(){if(l){var t=l.length;u(arguments),r?o=l.length:n&&n!==!0&&(i=t,h(n[0],n[1]))}return this},remove:function(){if(l)for(var e=arguments,n=0,a=e.length;a>n;n++)for(var i=0;i<l.length&&(e[n]!==l[i]||(r&&o>=i&&(o--,s>=i&&s--),l.splice(i--,1),!t.unique));i++);return this},has:function(t){if(l)for(var e=0,n=l.length;n>e;e++)if(t===l[e])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=c=n=e,this},disabled:function(){return!l},lock:function(){return c=e,(!n||n===!0)&&d.disable(),this},locked:function(){return!c},fireWith:function(e,a){return c&&(r?t.once||c.push([e,a]):(!t.once||!n)&&h(e,a)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d};var L=[].slice;z.extend({Deferred:function(t){var e,n=z.Callbacks("once memory"),a=z.Callbacks("once memory"),r=z.Callbacks("memory"),i="pending",o={resolve:n,reject:a,notify:r},s={done:n.add,fail:a.add,progress:r.add,state:function(){return i},isResolved:n.fired,isRejected:a.fired,then:function(t,e,n){return l.done(t).fail(e).progress(n),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(t,e,n){return z.Deferred(function(a){z.each({done:[t,"resolve"],fail:[e,"reject"],progress:[n,"notify"]},function(t,e){var n,r=e[0],i=e[1];z.isFunction(r)?l[t](function(){n=r.apply(this,arguments),n&&z.isFunction(n.promise)?n.promise().then(a.resolve,a.reject,a.notify):a[i+"With"](this===l?a:this,[n])}):l[t](a[i])})}).promise()},promise:function(t){if(null==t)t=s;else for(var e in s)t[e]=s[e];return t}},l=s.promise({});for(e in o)l[e]=o[e].fire,l[e+"With"]=o[e].fireWith;return l.done(function(){i="resolved"},a.disable,r.lock).fail(function(){i="rejected"},n.disable,r.lock),t&&t.call(l,l),l},when:function(t){function e(t){return function(e){o[t]=arguments.length>1?L.call(arguments,0):e,l.notifyWith(c,o)}}function n(t){return function(e){a[t]=arguments.length>1?L.call(arguments,0):e,--s||l.resolveWith(l,a)}}var a=L.call(arguments,0),r=0,i=a.length,o=Array(i),s=i,l=1>=i&&t&&z.isFunction(t.promise)?t:z.Deferred(),c=l.promise();if(i>1){for(;i>r;r++)a[r]&&a[r].promise&&z.isFunction(a[r].promise)?a[r].promise().then(n(r),l.reject,e(r)):--s;s||l.resolveWith(l,a)}else l!==t&&l.resolveWith(l,i?[t]:[]);return c}}),z.support=function(){var e,n,a,r,i,o,s,l,c,u,h,d=F.createElement("div");F.documentElement;if(d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),a=d.getElementsByTagName("a")[0],!n||!n.length||!a)return{};r=F.createElement("select"),i=r.appendChild(F.createElement("option")),o=d.getElementsByTagName("input")[0],e={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===o.value,optSelected:i.selected,getSetAttribute:"t"!==d.className,enctype:!!F.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==F.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},z.boxModel=e.boxModel="CSS1Compat"===F.compatMode,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!i.disabled;try{delete d.test}catch(p){e.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=F.createElement("input"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),s=F.createDocumentFragment(),s.appendChild(d.lastChild),e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=o.checked,s.removeChild(o),s.appendChild(d),d.attachEvent)for(u in{submit:1,change:1,focusin:1})c="on"+u,h=c in d,h||(d.setAttribute(c,"return;"),h="function"==typeof d[c]),e[u+"Bubbles"]=h;return s.removeChild(d),s=r=i=d=o=null,z(function(){var n,a,r,i,o,s,c,u,p,f,_,g,m=F.getElementsByTagName("body")[0];!m||(c=1,g="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",_=g+"0;visibility:hidden;",u="style='"+f+g+"5px solid #000;",p="<div "+u+"display:block;'><div style='"+g+"0;display:block;overflow:hidden;'></div></div><table "+u+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",n=F.createElement("div"),n.style.cssText=_+"width:0;height:0;position:static;top:0;margin-top:"+c+"px",m.insertBefore(n,m.firstChild),d=F.createElement("div"),n.appendChild(d),d.innerHTML="<table><tr><td style='"+g+"0;display:none'></td><td>t</td></tr></table>",l=d.getElementsByTagName("td"),h=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",e.reliableHiddenOffsets=h&&0===l[0].offsetHeight,t.getComputedStyle&&(d.innerHTML="",s=F.createElement("div"),s.style.width="0",s.style.marginRight="0",d.style.width="2px",d.appendChild(s),e.reliableMarginRight=0===(parseInt((t.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.width=d.style.padding="1px",d.style.border=0,d.style.overflow="hidden",d.style.display="inline",d.style.zoom=1,e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div style='width:5px;'></div>",e.shrinkWrapBlocks=3!==d.offsetWidth),d.style.cssText=f+_,d.innerHTML=p,a=d.firstChild,r=a.firstChild,i=a.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==r.offsetTop,doesAddBorderForTableAndCells:5===i.offsetTop},r.style.position="fixed",r.style.top="20px",o.fixedPosition=20===r.offsetTop||15===r.offsetTop,r.style.position=r.style.top="",a.style.overflow="hidden",a.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===r.offsetTop,o.doesNotIncludeMarginInBodyOffset=m.offsetTop!==c,t.getComputedStyle&&(d.style.marginTop="1%",e.pixelMargin="1%"!==(t.getComputedStyle(d,null)||{marginTop:0}).marginTop),"undefined"!=typeof n.style.zoom&&(n.style.zoom=1),m.removeChild(n),s=d=n=null,z.extend(e,o))}),e}();var B=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;z.extend({cache:{},uuid:0,expando:"jQuery"+(z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?z.cache[t[z.expando]]:t[z.expando],!!t&&!E(t)},data:function(t,n,a,r){if(z.acceptData(t)){var i,o,s,l=z.expando,c="string"==typeof n,u=t.nodeType,h=u?z.cache:t,d=u?t[l]:t[l]&&l,p="events"===n;if((!d||!h[d]||!p&&!r&&!h[d].data)&&c&&a===e)return;return d||(u?t[l]=d=++z.uuid:d=l),h[d]||(h[d]={},u||(h[d].toJSON=z.noop)),("object"==typeof n||"function"==typeof n)&&(r?h[d]=z.extend(h[d],n):h[d].data=z.extend(h[d].data,n)),i=o=h[d],r||(o.data||(o.data={}),o=o.data),a!==e&&(o[z.camelCase(n)]=a),p&&!o[n]?i.events:(c?(s=o[n],null==s&&(s=o[z.camelCase(n)])):s=o,s)}},removeData:function(t,e,n){if(z.acceptData(t)){var a,r,i,o=z.expando,s=t.nodeType,l=s?z.cache:t,c=s?t[o]:o;if(!l[c])return;if(e&&(a=n?l[c]:l[c].data)){z.isArray(e)||(e in a?e=[e]:(e=z.camelCase(e),e=e in a?[e]:e.split(" ")));for(r=0,i=e.length;i>r;r++)delete a[e[r]];if(!(n?E:z.isEmptyObject)(a))return}if(!n&&(delete l[c].data,!E(l[c])))return;z.support.deleteExpando||!l.setInterval?delete l[c]:l[c]=null,s&&(z.support.deleteExpando?delete t[o]:t.removeAttribute?t.removeAttribute(o):t[o]=null)}},_data:function(t,e,n){return z.data(t,e,n,!0)},acceptData:function(t){if(t.nodeName){var e=z.noData[t.nodeName.toLowerCase()];if(e)return e!==!0&&t.getAttribute("classid")===e}return!0}}),z.fn.extend({data:function(t,n){var a,r,i,o,s,l=this[0],c=0,u=null;if(t===e){if(this.length&&(u=z.data(l),1===l.nodeType&&!z._data(l,"parsedAttrs"))){for(i=l.attributes,s=i.length;s>c;c++)o=i[c].name,0===o.indexOf("data-")&&(o=z.camelCase(o.substring(5)),T(l,o,u[o]));z._data(l,"parsedAttrs",!0)}return u}return"object"==typeof t?this.each(function(){z.data(this,t)}):(a=t.split(".",2),a[1]=a[1]?"."+a[1]:"",r=a[1]+"!",z.access(this,function(n){return n===e?(u=this.triggerHandler("getData"+r,[a[0]]),u===e&&l&&(u=z.data(l,t),u=T(l,t,u)),u===e&&a[1]?this.data(a[0]):u):(a[1]=n,void this.each(function(){var e=z(this);e.triggerHandler("setData"+r,a),z.data(this,t,n),e.triggerHandler("changeData"+r,a)}))},null,n,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){z.removeData(this,t)})}}),z.extend({_mark:function(t,e){t&&(e=(e||"fx")+"mark",z._data(t,e,(z._data(t,e)||0)+1))},_unmark:function(t,e,n){if(t!==!0&&(n=e,e=t,t=!1),e){n=n||"fx";var a=n+"mark",r=t?0:(z._data(e,a)||1)-1;r?z._data(e,a,r):(z.removeData(e,a,!0),A(e,n,"mark"))}},queue:function(t,e,n){var a;return t?(e=(e||"fx")+"queue",a=z._data(t,e),n&&(!a||z.isArray(n)?a=z._data(t,e,z.makeArray(n)):a.push(n)),a||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=z.queue(t,e),a=n.shift(),r={};"inprogress"===a&&(a=n.shift()),a&&("fx"===e&&n.unshift("inprogress"),z._data(t,e+".run",r),a.call(t,function(){z.dequeue(t,e)},r)),n.length||(z.removeData(t,e+"queue "+e+".run",!0),A(t,e,"queue"))}}),z.fn.extend({queue:function(t,n){var a=2;return"string"!=typeof t&&(n=t,t="fx",a--),arguments.length<a?z.queue(this[0],t):n===e?this:this.each(function(){var e=z.queue(this,t,n);"fx"===t&&"inprogress"!==e[0]&&z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){z.dequeue(this,t)})},delay:function(t,e){return t=z.fx?z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var a=setTimeout(e,t);n.stop=function(){clearTimeout(a)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){function a(){--l||i.resolveWith(o,[o])}"string"!=typeof t&&(n=t,t=e),t=t||"fx";for(var r,i=z.Deferred(),o=this,s=o.length,l=1,c=t+"defer",u=t+"queue",h=t+"mark";s--;)(r=z.data(o[s],c,e,!0)||(z.data(o[s],u,e,!0)||z.data(o[s],h,e,!0))&&z.data(o[s],c,z.Callbacks("once memory"),!0))&&(l++,r.add(a));return a(),i.promise(n)}});var O,$,R,q=/[\n\t\r]/g,G=/\s+/,W=/\r/g,Y=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,Q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,X=z.support.getSetAttribute;z.fn.extend({attr:function(t,e){return z.access(this,z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){z.removeAttr(this,t)})},prop:function(t,e){return z.access(this,z.prop,t,e,arguments.length>1)},removeProp:function(t){return t=z.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,a,r,i,o,s;if(z.isFunction(t))return this.each(function(e){z(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(G),n=0,a=this.length;a>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==e.length){for(i=" "+r.className+" ",o=0,s=e.length;s>o;o++)~i.indexOf(" "+e[o]+" ")||(i+=e[o]+" ");r.className=z.trim(i)}else r.className=t;return this},removeClass:function(t){var n,a,r,i,o,s,l;if(z.isFunction(t))return this.each(function(e){z(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(n=(t||"").split(G),a=0,r=this.length;r>a;a++)if(i=this[a],1===i.nodeType&&i.className)if(t){for(o=(" "+i.className+" ").replace(q," "),s=0,l=n.length;l>s;s++)o=o.replace(" "+n[s]+" "," ");i.className=z.trim(o)}else i.className="";return this},toggleClass:function(t,e){var n=typeof t,a="boolean"==typeof e;return z.isFunction(t)?this.each(function(n){z(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,i=0,o=z(this),s=e,l=t.split(G);r=l[i++];)s=a?s:!o.hasClass(r),o[s?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&z._data(this,"__className__",this.className),this.className=this.className||t===!1?"":z._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,a=this.length;a>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(q," ").indexOf(e)>-1)return!0;return!1},val:function(t){var n,a,r,i=this[0];return arguments.length?(r=z.isFunction(t),this.each(function(a){var i,o=z(this);1===this.nodeType&&(i=r?t.call(this,a,o.val()):t,null==i?i="":"number"==typeof i?i+="":z.isArray(i)&&(i=z.map(i,function(t){return null==t?"":t+""})),n=z.valHooks[this.type]||z.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,i,"value")!==e||(this.value=i))})):i?(n=z.valHooks[i.type]||z.valHooks[i.nodeName.toLowerCase()],n&&"get"in n&&(a=n.get(i,"value"))!==e?a:(a=i.value,"string"==typeof a?a.replace(W,""):null==a?"":a)):void 0}}),z.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,n,a,r,i=t.selectedIndex,o=[],s=t.options,l="select-one"===t.type;if(0>i)return null;for(n=l?i:0,a=l?i+1:s.length;a>n;n++)if(r=s[n],r.selected&&(z.support.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!z.nodeName(r.parentNode,"optgroup"))){if(e=z(r).val(),l)return e;o.push(e)}return l&&!o.length&&s.length?z(s[i]).val():o},set:function(t,e){var n=z.makeArray(e);return z(t).find("option").each(function(){this.selected=z.inArray(z(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(t,n,a,r){var i,o,s,l=t.nodeType;return t&&3!==l&&8!==l&&2!==l?r&&n in z.attrFn?z(t)[n](a):"undefined"==typeof t.getAttribute?z.prop(t,n,a):(s=1!==l||!z.isXMLDoc(t),s&&(n=n.toLowerCase(),o=z.attrHooks[n]||(Q.test(n)?$:O)),a!==e?null===a?void z.removeAttr(t,n):o&&"set"in o&&s&&(i=o.set(t,a,n))!==e?i:(t.setAttribute(n,""+a),a):o&&"get"in o&&s&&null!==(i=o.get(t,n))?i:(i=t.getAttribute(n),null===i?e:i)):void 0},removeAttr:function(t,e){var n,a,r,i,o,s=0;if(e&&1===t.nodeType)for(a=e.toLowerCase().split(G),i=a.length;i>s;s++)r=a[s],r&&(n=z.propFix[r]||r,o=Q.test(r),o||z.attr(t,r,""),t.removeAttribute(X?r:n),o&&n in t&&(t[n]=!1))},attrHooks:{type:{set:function(t,e){if(Y.test(t.nodeName)&&t.parentNode)z.error("type property can't be changed");else if(!z.support.radioValue&&"radio"===e&&z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}},value:{get:function(t,e){return O&&z.nodeName(t,"button")?O.get(t,e):e in t?t.value:null},set:function(t,e,n){return O&&z.nodeName(t,"button")?O.set(t,e,n):void(t.value=e)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,a){var r,i,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?(o=1!==s||!z.isXMLDoc(t),o&&(n=z.propFix[n]||n,i=z.propHooks[n]),a!==e?i&&"set"in i&&(r=i.set(t,a,n))!==e?r:t[n]=a:i&&"get"in i&&null!==(r=i.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):U.test(t.nodeName)||V.test(t.nodeName)&&t.href?0:e}}}}),z.attrHooks.tabindex=z.propHooks.tabIndex,$={get:function(t,n){var a,r=z.prop(t,n);return r===!0||"boolean"!=typeof r&&(a=t.getAttributeNode(n))&&a.nodeValue!==!1?n.toLowerCase():e},set:function(t,e,n){var a;return e===!1?z.removeAttr(t,n):(a=z.propFix[n]||n,a in t&&(t[a]=!0),t.setAttribute(n,n.toLowerCase())),n}},X||(R={name:!0,id:!0,coords:!0},O=z.valHooks.button={get:function(t,n){var a;return a=t.getAttributeNode(n),a&&(R[n]?""!==a.nodeValue:a.specified)?a.nodeValue:e},set:function(t,e,n){var a=t.getAttributeNode(n);return a||(a=F.createAttribute(n),t.setAttributeNode(a)),a.nodeValue=e+""}},z.attrHooks.tabindex.set=O.set,z.each(["width","height"],function(t,e){z.attrHooks[e]=z.extend(z.attrHooks[e],{set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}})}),z.attrHooks.contenteditable={get:O.get,set:function(t,e,n){""===e&&(e="false"),O.set(t,e,n)}}),z.support.hrefNormalized||z.each(["href","src","width","height"],function(t,n){z.attrHooks[n]=z.extend(z.attrHooks[n],{get:function(t){var a=t.getAttribute(n,2);return null===a?e:a}})}),z.support.style||(z.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=""+e}}),z.support.optSelected||(z.propHooks.selected=z.extend(z.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),z.support.enctype||(z.propFix.enctype="encoding"),z.support.checkOn||z.each(["radio","checkbox"],function(){z.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),z.each(["radio","checkbox"],function(){z.valHooks[this]=z.extend(z.valHooks[this],{set:function(t,e){return z.isArray(e)?t.checked=z.inArray(z(t).val(),e)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,K=/^([^\.]*)?(?:\.(.+))?$/,Z=/(?:^|\s)hover(\.\S+)?\b/,tt=/^key/,et=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,at=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,rt=function(t){var e=at.exec(t);return e&&(e[1]=(e[1]||"").toLowerCase(),e[3]=e[3]&&new RegExp("(?:^|\\s)"+e[3]+"(?:\\s|$)")),e},it=function(t,e){var n=t.attributes||{};return(!e[1]||t.nodeName.toLowerCase()===e[1])&&(!e[2]||(n.id||{}).value===e[2])&&(!e[3]||e[3].test((n["class"]||{}).value))},ot=function(t){return z.event.special.hover?t:t.replace(Z,"mouseenter$1 mouseleave$1")};z.event={add:function(t,n,a,r,i){var o,s,l,c,u,h,d,p,f,_,g;if(3!==t.nodeType&&8!==t.nodeType&&n&&a&&(o=z._data(t))){for(a.handler&&(f=a,a=f.handler,i=f.selector),a.guid||(a.guid=z.guid++),l=o.events,l||(o.events=l={}),s=o.handle,s||(o.handle=s=function(t){
return"undefined"==typeof z||t&&z.event.triggered===t.type?e:z.event.dispatch.apply(s.elem,arguments)},s.elem=t),n=z.trim(ot(n)).split(" "),c=0;c<n.length;c++)u=K.exec(n[c])||[],h=u[1],d=(u[2]||"").split(".").sort(),g=z.event.special[h]||{},h=(i?g.delegateType:g.bindType)||h,g=z.event.special[h]||{},p=z.extend({type:h,origType:u[1],data:r,handler:a,guid:a.guid,selector:i,quick:i&&rt(i),namespace:d.join(".")},f),_=l[h],_||(_=l[h]=[],_.delegateCount=0,g.setup&&g.setup.call(t,r,d,s)!==!1||(t.addEventListener?t.addEventListener(h,s,!1):t.attachEvent&&t.attachEvent("on"+h,s))),g.add&&(g.add.call(t,p),p.handler.guid||(p.handler.guid=a.guid)),i?_.splice(_.delegateCount++,0,p):_.push(p),z.event.global[h]=!0;t=null}},global:{},remove:function(t,e,n,a,r){var i,o,s,l,c,u,h,d,p,f,_,g,m=z.hasData(t)&&z._data(t);if(m&&(d=m.events)){for(e=z.trim(ot(e||"")).split(" "),i=0;i<e.length;i++)if(o=K.exec(e[i])||[],s=l=o[1],c=o[2],s){for(p=z.event.special[s]||{},s=(a?p.delegateType:p.bindType)||s,_=d[s]||[],u=_.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,h=0;h<_.length;h++)g=_[h],(r||l===g.origType)&&(!n||n.guid===g.guid)&&(!c||c.test(g.namespace))&&(!a||a===g.selector||"**"===a&&g.selector)&&(_.splice(h--,1),g.selector&&_.delegateCount--,p.remove&&p.remove.call(t,g));0===_.length&&u!==_.length&&((!p.teardown||p.teardown.call(t,c)===!1)&&z.removeEvent(t,s,m.handle),delete d[s])}else for(s in d)z.event.remove(t,s+e[i],n,a,!0);z.isEmptyObject(d)&&(f=m.handle,f&&(f.elem=null),z.removeData(t,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,a,r,i){if(!r||3!==r.nodeType&&8!==r.nodeType){var o,s,l,c,u,h,d,p,f,_,g=n.type||n,m=[];if(nt.test(g+z.event.triggered))return;if(g.indexOf("!")>=0&&(g=g.slice(0,-1),s=!0),g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),(!r||z.event.customEvent[g])&&!z.event.global[g])return;if(n="object"==typeof n?n[z.expando]?n:new z.Event(g,n):new z.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=s,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,h=g.indexOf(":")<0?"on"+g:"",!r){o=z.cache;for(l in o)o[l].events&&o[l].events[g]&&z.event.trigger(n,a,o[l].handle.elem,!0);return}if(n.result=e,n.target||(n.target=r),a=null!=a?z.makeArray(a):[],a.unshift(n),d=z.event.special[g]||{},d.trigger&&d.trigger.apply(r,a)===!1)return;if(f=[[r,d.bindType||g]],!i&&!d.noBubble&&!z.isWindow(r)){for(_=d.delegateType||g,c=nt.test(_+g)?r:r.parentNode,u=null;c;c=c.parentNode)f.push([c,_]),u=c;u&&u===r.ownerDocument&&f.push([u.defaultView||u.parentWindow||t,_])}for(l=0;l<f.length&&!n.isPropagationStopped();l++)c=f[l][0],n.type=f[l][1],p=(z._data(c,"events")||{})[n.type]&&z._data(c,"handle"),p&&p.apply(c,a),p=h&&c[h],p&&z.acceptData(c)&&p.apply(c,a)===!1&&n.preventDefault();return n.type=g,!i&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(r.ownerDocument,a)===!1)&&("click"!==g||!z.nodeName(r,"a"))&&z.acceptData(r)&&h&&r[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!z.isWindow(r)&&(u=r[h],u&&(r[h]=null),z.event.triggered=g,r[g](),z.event.triggered=e,u&&(r[h]=u)),n.result}},dispatch:function(n){n=z.event.fix(n||t.event);var a,r,i,o,s,l,c,u,h,d,p=(z._data(this,"events")||{})[n.type]||[],f=p.delegateCount,_=[].slice.call(arguments,0),g=!n.exclusive&&!n.namespace,m=z.event.special[n.type]||{},v=[];if(_[0]=n,n.delegateTarget=this,!m.preDispatch||m.preDispatch.call(this,n)!==!1){if(f&&(!n.button||"click"!==n.type))for(o=z(this),o.context=this.ownerDocument||this,i=n.target;i!=this;i=i.parentNode||this)if(i.disabled!==!0){for(l={},u=[],o[0]=i,a=0;f>a;a++)h=p[a],d=h.selector,l[d]===e&&(l[d]=h.quick?it(i,h.quick):o.is(d)),l[d]&&u.push(h);u.length&&v.push({elem:i,matches:u})}for(p.length>f&&v.push({elem:this,matches:p.slice(f)}),a=0;a<v.length&&!n.isPropagationStopped();a++)for(c=v[a],n.currentTarget=c.elem,r=0;r<c.matches.length&&!n.isImmediatePropagationStopped();r++)h=c.matches[r],(g||!n.namespace&&!h.namespace||n.namespace_re&&n.namespace_re.test(h.namespace))&&(n.data=h.data,n.handleObj=h,s=((z.event.special[h.origType]||{}).handle||h.handler).apply(c.elem,_),s!==e&&(n.result=s,s===!1&&(n.preventDefault(),n.stopPropagation())));return m.postDispatch&&m.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var a,r,i,o=n.button,s=n.fromElement;return null==t.pageX&&null!=n.clientX&&(a=t.target.ownerDocument||F,r=a.documentElement,i=a.body,t.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?n.toElement:s),!t.which&&o!==e&&(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[z.expando])return t;var n,a,r=t,i=z.event.fixHooks[t.type]||{},o=i.props?this.props.concat(i.props):this.props;for(t=z.Event(r),n=o.length;n;)a=o[--n],t[a]=r[a];return t.target||(t.target=r.srcElement||F),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey===e&&(t.metaKey=t.ctrlKey),i.filter?i.filter(t,r):t},special:{ready:{setup:z.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,n){z.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,n,a){var r=z.extend(new z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});a?z.event.trigger(r,null,e):z.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},z.event.handle=z.event.dispatch,z.removeEvent=F.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){t.detachEvent&&t.detachEvent("on"+e,n)},z.Event=function(t,e){return this instanceof z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?P:S):this.type=t,e&&z.extend(this,e),this.timeStamp=t&&t.timeStamp||z.now(),this[z.expando]=!0,void 0):new z.Event(t,e)},z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var t=this.originalEvent;!t||(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=P;var t=this.originalEvent;!t||(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P,this.stopPropagation()},isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S},z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,a=this,r=t.relatedTarget,i=t.handleObj;i.selector;return(!r||r!==a&&!z.contains(a,r))&&(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),z.support.submitBubbles||(z.event.special.submit={setup:function(){return z.nodeName(this,"form")?!1:void z.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,a=z.nodeName(n,"input")||z.nodeName(n,"button")?n.form:e;a&&!a._submit_attached&&(z.event.add(a,"submit._submit",function(t){t._submit_bubble=!0}),a._submit_attached=!0)})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&z.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return z.nodeName(this,"form")?!1:void z.event.remove(this,"._submit")}}),z.support.changeBubbles||(z.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(z.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),z.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1,z.event.simulate("change",this,t,!0))})),!1):void z.event.add(this,"beforeactivate._change",function(t){var e=t.target;J.test(e.nodeName)&&!e._change_attached&&(z.event.add(e,"change._change",function(t){this.parentNode&&!t.isSimulated&&!t.isTrigger&&z.event.simulate("change",this.parentNode,t,!0)}),e._change_attached=!0)})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return z.event.remove(this,"._change"),J.test(this.nodeName)}}),z.support.focusinBubbles||z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,a=function(t){z.event.simulate(e,t.target,z.event.fix(t),!0)};z.event.special[e]={setup:function(){0===n++&&F.addEventListener(t,a,!0)},teardown:function(){0===--n&&F.removeEventListener(t,a,!0)}}}),z.fn.extend({on:function(t,n,a,r,i){var o,s;if("object"==typeof t){"string"!=typeof n&&(a=a||n,n=e);for(s in t)this.on(s,n,a,t[s],i);return this}if(null==a&&null==r?(r=n,a=n=e):null==r&&("string"==typeof n?(r=a,a=e):(r=a,a=n,n=e)),r===!1)r=S;else if(!r)return this;return 1===i&&(o=r,r=function(t){return z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=z.guid++)),this.each(function(){z.event.add(this,t,r,a,n)})},one:function(t,e,n,a){return this.on(t,e,n,a,1)},off:function(t,n,a){if(t&&t.preventDefault&&t.handleObj){var r=t.handleObj;return z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this}if("object"==typeof t){for(var i in t)this.off(i,n,t[i]);return this}return(n===!1||"function"==typeof n)&&(a=n,n=e),a===!1&&(a=S),this.each(function(){z.event.remove(this,t,a,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,n){return z(this.context).on(t,this.selector,e,n),this},die:function(t,e){return z(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,n,a){return this.on(e,t,n,a)},undelegate:function(t,e,n){return 1==arguments.length?this.off(t,"**"):this.off(e,t,n)},trigger:function(t,e){return this.each(function(){z.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?z.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,n=t.guid||z.guid++,a=0,r=function(n){var r=(z._data(this,"lastToggle"+t.guid)||0)%a;return z._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),e[r].apply(this,arguments)||!1};for(r.guid=n;a<e.length;)e[a++].guid=n;return this.click(r)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){z.fn[e]=function(t,n){return null==n&&(n=t,t=null),arguments.length>0?this.on(e,null,t,n):this.trigger(e)},z.attrFn&&(z.attrFn[e]=!0),tt.test(e)&&(z.event.fixHooks[e]=z.event.keyHooks),et.test(e)&&(z.event.fixHooks[e]=z.event.mouseHooks)}),function(){function t(t,e,n,a,i,o){for(var s=0,l=a.length;l>s;s++){var c=a[s];if(c){var u=!1;for(c=c[t];c;){if(c[r]===n){u=a[c.sizset];break}if(1===c.nodeType)if(o||(c[r]=n,c.sizset=s),"string"!=typeof e){if(c===e){u=!0;break}}else if(d.filter(e,[c]).length>0){u=c;break}c=c[t]}a[s]=u}}}function n(t,e,n,a,i,o){for(var s=0,l=a.length;l>s;s++){var c=a[s];if(c){var u=!1;for(c=c[t];c;){if(c[r]===n){u=a[c.sizset];break}if(1===c.nodeType&&!o&&(c[r]=n,c.sizset=s),c.nodeName.toLowerCase()===e){u=c;break}c=c[t]}a[s]=u}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,s=!1,l=!0,c=/\\/g,u=/\r\n/g,h=/\W/;[0,0].sort(function(){return l=!1,0});var d=function(t,e,n,r){n=n||[],e=e||F;var i=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return n;var s,l,c,u,h,p,g,m,y=!0,x=d.isXML(e),b=[],k=t;do if(a.exec(""),s=a.exec(k),s&&(k=s[3],b.push(s[1]),s[2])){u=s[3];break}while(s);if(b.length>1&&_.exec(t))if(2===b.length&&f.relative[b[0]])l=w(b[0]+b[1],e,r);else for(l=f.relative[b[0]]?[e]:d(b.shift(),e);b.length;)t=b.shift(),f.relative[t]&&(t+=b.shift()),l=w(t,l,r);else if(!r&&b.length>1&&9===e.nodeType&&!x&&f.match.ID.test(b[0])&&!f.match.ID.test(b[b.length-1])&&(h=d.find(b.shift(),e,x),e=h.expr?d.filter(h.expr,h.set)[0]:h.set[0]),e)for(h=r?{expr:b.pop(),set:v(r)}:d.find(b.pop(),1!==b.length||"~"!==b[0]&&"+"!==b[0]||!e.parentNode?e:e.parentNode,x),l=h.expr?d.filter(h.expr,h.set):h.set,b.length>0?c=v(l):y=!1;b.length;)p=b.pop(),g=p,f.relative[p]?g=b.pop():p="",null==g&&(g=e),f.relative[p](c,g,x);else c=b=[];if(c||(c=l),c||d.error(p||t),"[object Array]"===o.call(c))if(y)if(e&&1===e.nodeType)for(m=0;null!=c[m];m++)c[m]&&(c[m]===!0||1===c[m].nodeType&&d.contains(e,c[m]))&&n.push(l[m]);else for(m=0;null!=c[m];m++)c[m]&&1===c[m].nodeType&&n.push(l[m]);else n.push.apply(n,c);else v(c,n);return u&&(d(u,i,n,r),d.uniqueSort(n)),n};d.uniqueSort=function(t){if(x&&(s=l,t.sort(x),s))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},d.matches=function(t,e){return d(t,null,null,e)},d.matchesSelector=function(t,e){return d(e,null,null,[t]).length>0},d.find=function(t,e,n){var a,r,i,o,s,l;if(!t)return[];for(r=0,i=f.order.length;i>r;r++)if(s=f.order[r],(o=f.leftMatch[s].exec(t))&&(l=o[1],o.splice(1,1),"\\"!==l.substr(l.length-1)&&(o[1]=(o[1]||"").replace(c,""),a=f.find[s](o,e,n),null!=a))){t=t.replace(f.match[s],"");break}return a||(a="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]),{set:a,expr:t}},d.filter=function(t,n,a,r){for(var i,o,s,l,c,u,h,p,_,g=t,m=[],v=n,y=n&&n[0]&&d.isXML(n[0]);t&&n.length;){for(s in f.filter)if(null!=(i=f.leftMatch[s].exec(t))&&i[2]){if(u=f.filter[s],h=i[1],o=!1,i.splice(1,1),"\\"===h.substr(h.length-1))continue;if(v===m&&(m=[]),f.preFilter[s])if(i=f.preFilter[s](i,v,a,m,r,y)){if(i===!0)continue}else o=l=!0;if(i)for(p=0;null!=(c=v[p]);p++)c&&(l=u(c,i,p,v),_=r^l,a&&null!=l?_?o=!0:v[p]=!1:_&&(m.push(c),o=!0));if(l!==e){if(a||(v=m),t=t.replace(f.match[s],""),!o)return[];break}}if(t===g){if(null!=o)break;d.error(t)}g=t}return v},d.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};var p=d.getText=function(t){var e,n,a=t.nodeType,r="";if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;if("string"==typeof t.innerText)return t.innerText.replace(u,"");for(t=t.firstChild;t;t=t.nextSibling)r+=p(t)}else if(3===a||4===a)return t.nodeValue}else for(e=0;n=t[e];e++)8!==n.nodeType&&(r+=p(n));return r},f=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,e){var n="string"==typeof e,a=n&&!h.test(e),r=n&&!a;a&&(e=e.toLowerCase());for(var i,o=0,s=t.length;s>o;o++)if(i=t[o]){for(;(i=i.previousSibling)&&1!==i.nodeType;);t[o]=r||i&&i.nodeName.toLowerCase()===e?i||!1:i===e}r&&d.filter(e,t,!0)},">":function(t,e){var n,a="string"==typeof e,r=0,i=t.length;if(a&&!h.test(e)){for(e=e.toLowerCase();i>r;r++)if(n=t[r]){var o=n.parentNode;t[r]=o.nodeName.toLowerCase()===e?o:!1}}else{for(;i>r;r++)n=t[r],n&&(t[r]=a?n.parentNode:n.parentNode===e);a&&d.filter(e,t,!0)}},"":function(e,a,r){var o,s=i++,l=t;"string"==typeof a&&!h.test(a)&&(a=a.toLowerCase(),o=a,l=n),l("parentNode",a,s,e,o,r)},"~":function(e,a,r){var o,s=i++,l=t;"string"==typeof a&&!h.test(a)&&(a=a.toLowerCase(),o=a,l=n),l("previousSibling",a,s,e,o,r)}},find:{ID:function(t,e,n){if("undefined"!=typeof e.getElementById&&!n){var a=e.getElementById(t[1]);return a&&a.parentNode?[a]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var n=[],a=e.getElementsByName(t[1]),r=0,i=a.length;i>r;r++)a[r].getAttribute("name")===t[1]&&n.push(a[r]);return 0===n.length?null:n}},TAG:function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t[1]):void 0}},preFilter:{CLASS:function(t,e,n,a,r,i){if(t=" "+t[1].replace(c,"")+" ",i)return t;for(var o,s=0;null!=(o=e[s]);s++)o&&(r^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0)?n||a.push(o):n&&(e[s]=!1));return!1},ID:function(t){return t[1].replace(c,"")},TAG:function(t,e){return t[1].replace(c,"").toLowerCase()},CHILD:function(t){if("nth"===t[1]){t[2]||d.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}else t[2]&&d.error(t[0]);return t[0]=i++,t},ATTR:function(t,e,n,a,r,i){var o=t[1]=t[1].replace(c,"");return!i&&f.attrMap[o]&&(t[1]=f.attrMap[o]),t[4]=(t[4]||t[5]||"").replace(c,""),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,n,r,i){if("not"===t[1]){if(!((a.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=d.filter(t[3],e,n,!0^i);return n||r.push.apply(r,o),!1}t[3]=d(t[3],null,null,e)}else if(f.match.POS.test(t[0])||f.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,n){return!!d(n[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var e=t.getAttribute("type"),n=t.type;return"input"===t.nodeName.toLowerCase()&&"text"===n&&(e===n||null===e)},radio:function(t){return"input"===t.nodeName.toLowerCase()&&"radio"===t.type},checkbox:function(t){return"input"===t.nodeName.toLowerCase()&&"checkbox"===t.type},file:function(t){return"input"===t.nodeName.toLowerCase()&&"file"===t.type},password:function(t){return"input"===t.nodeName.toLowerCase()&&"password"===t.type},submit:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===t.type},image:function(t){return"input"===t.nodeName.toLowerCase()&&"image"===t.type},reset:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===t.type},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,n,a){return e===a.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(t,e,n){return e<n[3]-0},gt:function(t,e,n){return e>n[3]-0},nth:function(t,e,n){return n[3]-0===e},eq:function(t,e,n){return n[3]-0===e}},filter:{PSEUDO:function(t,e,n,a){var r=e[1],i=f.filters[r];if(i)return i(t,n,e,a);if("contains"===r)return(t.textContent||t.innerText||p([t])||"").indexOf(e[3])>=0;if("not"===r){for(var o=e[3],s=0,l=o.length;l>s;s++)if(o[s]===t)return!1;return!0}d.error(r)},CHILD:function(t,e){var n,a,i,o,s,l,c=e[1],u=t;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=t;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(n=e[2],a=e[3],1===n&&0===a)return!0;if(i=e[0],o=t.parentNode,o&&(o[r]!==i||!t.nodeIndex)){for(s=0,u=o.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++s);o[r]=i}return l=t.nodeIndex-a,0===n?0===l:l%n===0&&l/n>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||!!t.nodeName&&t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var n=e[1],a=d.attr?d.attr(t,n):f.attrHandle[n]?f.attrHandle[n](t):null!=t[n]?t[n]:t.getAttribute(n),r=a+"",i=e[2],o=e[4];return null==a?"!="===i:!i&&d.attr?null!=a:"="===i?r===o:"*="===i?r.indexOf(o)>=0:"~="===i?(" "+r+" ").indexOf(o)>=0:o?"!="===i?r!==o:"^="===i?0===r.indexOf(o):"$="===i?r.substr(r.length-o.length)===o:"|="===i?r===o||r.substr(0,o.length+1)===o+"-":!1:r&&a!==!1},POS:function(t,e,n,a){var r=e[2],i=f.setFilters[r];return i?i(t,n,e,a):void 0}}},_=f.match.POS,g=function(t,e){return"\\"+(e-0+1)};for(var m in f.match)f.match[m]=new RegExp(f.match[m].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[m].source.replace(/\\(\d+)/g,g));f.match.globalPOS=_;var v=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(F.documentElement.childNodes,0)[0].nodeType}catch(y){v=function(t,e){var n=0,a=e||[];if("[object Array]"===o.call(t))Array.prototype.push.apply(a,t);else if("number"==typeof t.length)for(var r=t.length;r>n;n++)a.push(t[n]);else for(;t[n];n++)a.push(t[n]);return a}}var x,b;F.documentElement.compareDocumentPosition?x=function(t,e){return t===e?(s=!0,0):t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1}:(x=function(t,e){if(t===e)return s=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var n,a,r=[],i=[],o=t.parentNode,l=e.parentNode,c=o;if(o===l)return b(t,e);if(!o)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)i.unshift(c),c=c.parentNode;n=r.length,a=i.length;for(var u=0;n>u&&a>u;u++)if(r[u]!==i[u])return b(r[u],i[u]);return u===n?b(t,i[u],-1):b(r[u],e,1)},b=function(t,e,n){if(t===e)return n;for(var a=t.nextSibling;a;){if(a===e)return-1;a=a.nextSibling}return 1}),function(){var t=F.createElement("div"),n="script"+(new Date).getTime(),a=F.documentElement;t.innerHTML="<a name='"+n+"'/>",a.insertBefore(t,a.firstChild),F.getElementById(n)&&(f.find.ID=function(t,n,a){if("undefined"!=typeof n.getElementById&&!a){var r=n.getElementById(t[1]);return r?r.id===t[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===t[1]?[r]:e:[]}},f.filter.ID=function(t,e){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&n&&n.nodeValue===e}),a.removeChild(t),a=t=null}(),function(){var t=F.createElement("div");t.appendChild(F.createComment("")),t.getElementsByTagName("*").length>0&&(f.find.TAG=function(t,e){var n=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var a=[],r=0;n[r];r++)1===n[r].nodeType&&a.push(n[r]);n=a}return n}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(f.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),F.querySelectorAll&&function(){var t=d,e=F.createElement("div"),n="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){d=function(e,a,r,i){if(a=a||F,!i&&!d.isXML(a)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(o&&(1===a.nodeType||9===a.nodeType)){if(o[1])return v(a.getElementsByTagName(e),r);if(o[2]&&f.find.CLASS&&a.getElementsByClassName)return v(a.getElementsByClassName(o[2]),r)}if(9===a.nodeType){if("body"===e&&a.body)return v([a.body],r);if(o&&o[3]){var s=a.getElementById(o[3]);if(!s||!s.parentNode)return v([],r);if(s.id===o[3])return v([s],r)}try{return v(a.querySelectorAll(e),r)}catch(l){}}else if(1===a.nodeType&&"object"!==a.nodeName.toLowerCase()){var c=a,u=a.getAttribute("id"),h=u||n,p=a.parentNode,_=/^\s*[+~]/.test(e);u?h=h.replace(/'/g,"\\$&"):a.setAttribute("id",h),_&&p&&(a=a.parentNode);try{if(!_||p)return v(a.querySelectorAll("[id='"+h+"'] "+e),r)}catch(g){}finally{u||c.removeAttribute("id")}}}return t(e,a,r,i)};for(var a in t)d[a]=t[a];e=null}}(),function(){var t=F.documentElement,e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(e){var n=!e.call(F.createElement("div"),"div"),a=!1;try{e.call(F.documentElement,"[test!='']:sizzle")}catch(r){a=!0}d.matchesSelector=function(t,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(t))try{if(a||!f.match.PSEUDO.test(r)&&!/!=/.test(r)){var i=e.call(t,r);if(i||!n||t.document&&11!==t.document.nodeType)return i}}catch(o){}return d(r,null,null,[t]).length>0}}}(),function(){var t=F.createElement("div");if(t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length){if(t.lastChild.className="e",1===t.getElementsByClassName("e").length)return;f.order.splice(1,0,"CLASS"),f.find.CLASS=function(t,e,n){return"undefined"==typeof e.getElementsByClassName||n?void 0:e.getElementsByClassName(t[1])},t=null}}(),F.documentElement.contains?d.contains=function(t,e){return t!==e&&(t.contains?t.contains(e):!0)}:F.documentElement.compareDocumentPosition?d.contains=function(t,e){return!!(16&t.compareDocumentPosition(e))}:d.contains=function(){return!1},d.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var w=function(t,e,n){for(var a,r=[],i="",o=e.nodeType?[e]:e;a=f.match.PSEUDO.exec(t);)i+=a[0],t=t.replace(f.match.PSEUDO,"");t=f.relative[t]?t+"*":t;for(var s=0,l=o.length;l>s;s++)d(t,o[s],r,n);return d.filter(i,r)};d.attr=z.attr,d.selectors.attrMap={},z.find=d,z.expr=d.selectors,z.expr[":"]=z.expr.filters,z.unique=d.uniqueSort,z.text=d.getText,z.isXMLDoc=d.isXML,z.contains=d.contains}();var st=/Until$/,lt=/^(?:parents|prevUntil|prevAll)/,ct=/,/,ut=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,dt=z.expr.match.globalPOS,pt={children:!0,contents:!0,next:!0,prev:!0};z.fn.extend({find:function(t){var e,n,a=this;if("string"!=typeof t)return z(t).filter(function(){for(e=0,n=a.length;n>e;e++)if(z.contains(a[e],this))return!0});var r,i,o,s=this.pushStack("","find",t);for(e=0,n=this.length;n>e;e++)if(r=s.length,z.find(t,this[e],s),e>0)for(i=r;i<s.length;i++)for(o=0;r>o;o++)if(s[o]===s[i]){s.splice(i--,1);break}return s},has:function(t){var e=z(t);return this.filter(function(){for(var t=0,n=e.length;n>t;t++)if(z.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(C(this,t,!1),"not",t)},filter:function(t){return this.pushStack(C(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?dt.test(t)?z(t,this.context).index(this[0])>=0:z.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){var n,a,r=[],i=this[0];if(z.isArray(t)){for(var o=1;i&&i.ownerDocument&&i!==e;){for(n=0;n<t.length;n++)z(i).is(t[n])&&r.push({selector:t[n],elem:i,level:o});i=i.parentNode,o++}return r}var s=dt.test(t)||"string"!=typeof t?z(t,e||this.context):0;for(n=0,a=this.length;a>n;n++)for(i=this[n];i;){if(s?s.index(i)>-1:z.find.matchesSelector(i,t)){r.push(i);break}if(i=i.parentNode,!i||!i.ownerDocument||i===e||11===i.nodeType)break}return r=r.length>1?z.unique(r):r,this.pushStack(r,"closest",t)},index:function(t){return t?"string"==typeof t?z.inArray(this[0],z(t)):z.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var n="string"==typeof t?z(t,e):z.makeArray(t&&t.nodeType?[t]:t),a=z.merge(this.get(),n);return this.pushStack(D(n[0])||D(a[0])?a:z.unique(a))},andSelf:function(){return this.add(this.prevObject)}}),z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return z.dir(t,"parentNode",n)},next:function(t){return z.nth(t,2,"nextSibling")},prev:function(t){return z.nth(t,2,"previousSibling")},nextAll:function(t){return z.dir(t,"nextSibling")},prevAll:function(t){return z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return z.dir(t,"previousSibling",n)},siblings:function(t){return z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return z.sibling(t.firstChild)},contents:function(t){return z.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:z.makeArray(t.childNodes)}},function(t,e){z.fn[t]=function(n,a){var r=z.map(this,e,n);return st.test(t)||(a=n),a&&"string"==typeof a&&(r=z.filter(a,r)),r=this.length>1&&!pt[t]?z.unique(r):r,(this.length>1||ct.test(a))&&lt.test(t)&&(r=r.reverse()),this.pushStack(r,t,ht.call(arguments).join(","))}}),z.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?z.find.matchesSelector(e[0],t)?[e[0]]:[]:z.find.matches(t,e)},dir:function(t,n,a){for(var r=[],i=t[n];i&&9!==i.nodeType&&(a===e||1!==i.nodeType||!z(i).is(a));)1===i.nodeType&&r.push(i),i=i[n];return r},nth:function(t,e,n,a){e=e||1;for(var r=0;t&&(1!==t.nodeType||++r!==e);t=t[n]);return t},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_t=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,yt=/<tbody/i,xt=/<|&#?\w+;/,bt=/<(?:script|style)/i,wt=/<(?:script|object|embed|option|style)/i,kt=new RegExp("<(?:"+ft+")[\\s/>]","i"),Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/\/(java|ecma)script/i,Pt=/^\s*<!(?:\[CDATA\[|\-\-)/,St={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=k(F);St.optgroup=St.option,St.tbody=St.tfoot=St.colgroup=St.caption=St.thead,St.th=St.td,z.support.htmlSerialize||(St._default=[1,"div<div>","</div>"]),z.fn.extend({text:function(t){return z.access(this,function(t){return t===e?z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||F).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(z.isFunction(t))return this.each(function(e){z(this).wrapAll(t.call(this,e))});if(this[0]){var e=z(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return z.isFunction(t)?this.each(function(e){z(this).wrapInner(t.call(this,e))}):this.each(function(){var e=z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=z.isFunction(t);return this.each(function(n){z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){z.nodeName(this,"body")||z(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.insertBefore(t,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=z.clean(arguments);return t.push.apply(t,this.toArray()),this.pushStack(t,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=this.pushStack(this,"after",arguments);return t.push.apply(t,z.clean(arguments)),t}},remove:function(t,e){for(var n,a=0;null!=(n=this[a]);a++)(!t||z.filter(t,[n]).length)&&(!e&&1===n.nodeType&&(z.cleanData(n.getElementsByTagName("*")),z.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&z.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);
return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return z.clone(this,t,e)})},html:function(t){return z.access(this,function(t){var n=this[0]||{},a=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(_t,""):null;if("string"==typeof t&&!bt.test(t)&&(z.support.leadingWhitespace||!gt.test(t))&&!St[(vt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(mt,"<$1></$2>");try{for(;r>a;a++)n=this[a]||{},1===n.nodeType&&(z.cleanData(n.getElementsByTagName("*")),n.innerHTML=t);n=0}catch(i){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return this[0]&&this[0].parentNode?z.isFunction(t)?this.each(function(e){var n=z(this),a=n.html();n.replaceWith(t.call(this,e,a))}):("string"!=typeof t&&(t=z(t).detach()),this.each(function(){var e=this.nextSibling,n=this.parentNode;z(this).remove(),e?z(e).before(t):z(n).append(t)})):this.length?this.pushStack(z(z.isFunction(t)?t():t),"replaceWith",t):this},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,a){var r,i,o,s,l=t[0],c=[];if(!z.support.checkClone&&3===arguments.length&&"string"==typeof l&&Ct.test(l))return this.each(function(){z(this).domManip(t,n,a,!0)});if(z.isFunction(l))return this.each(function(r){var i=z(this);t[0]=l.call(this,r,n?i.html():e),i.domManip(t,n,a)});if(this[0]){if(s=l&&l.parentNode,r=z.support.parentNode&&s&&11===s.nodeType&&s.childNodes.length===this.length?{fragment:s}:z.buildFragment(t,this,c),o=r.fragment,i=1===o.childNodes.length?o=o.firstChild:o.firstChild,i){n=n&&z.nodeName(i,"tr");for(var u=0,h=this.length,d=h-1;h>u;u++)a.call(n?w(this[u],i):this[u],r.cacheable||h>1&&d>u?z.clone(o,!0,!0):o)}c.length&&z.each(c,function(t,e){e.src?z.ajax({type:"GET",global:!1,url:e.src,async:!1,dataType:"script"}):z.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Pt,"/*$0*/")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),z.buildFragment=function(t,e,n){var a,r,i,o,s=t[0];return e&&e[0]&&(o=e[0].ownerDocument||e[0]),o.createDocumentFragment||(o=F),1===t.length&&"string"==typeof s&&s.length<512&&o===F&&"<"===s.charAt(0)&&!wt.test(s)&&(z.support.checkClone||!Ct.test(s))&&(z.support.html5Clone||!kt.test(s))&&(r=!0,i=z.fragments[s],i&&1!==i&&(a=i)),a||(a=o.createDocumentFragment(),z.clean(t,o,a,n)),r&&(z.fragments[s]=i?a:1),{fragment:a,cacheable:r}},z.fragments={},z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){z.fn[t]=function(n){var a=[],r=z(n),i=1===this.length&&this[0].parentNode;if(i&&11===i.nodeType&&1===i.childNodes.length&&1===r.length)return r[e](this[0]),this;for(var o=0,s=r.length;s>o;o++){var l=(o>0?this.clone(!0):this).get();z(r[o])[e](l),a=a.concat(l)}return this.pushStack(a,t,r.selector)}}),z.extend({clone:function(t,e,n){var a,r,i,o=z.support.html5Clone||z.isXMLDoc(t)||!kt.test("<"+t.nodeName+">")?t.cloneNode(!0):g(t);if(!(z.support.noCloneEvent&&z.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||z.isXMLDoc(t)))for(x(t,o),a=y(t),r=y(o),i=0;a[i];++i)r[i]&&x(a[i],r[i]);if(e&&(b(t,o),n))for(a=y(t),r=y(o),i=0;a[i];++i)b(a[i],r[i]);return a=r=null,o},clean:function(t,e,n,a){var r,i,o,s=[];e=e||F,"undefined"==typeof e.createElement&&(e=e.ownerDocument||e[0]&&e[0].ownerDocument||F);for(var l,c=0;null!=(l=t[c]);c++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(xt.test(l)){l=l.replace(mt,"<$1></$2>");var u,h=(vt.exec(l)||["",""])[1].toLowerCase(),d=St[h]||St._default,p=d[0],f=e.createElement("div"),_=At.childNodes;for(e===F?At.appendChild(f):k(e).appendChild(f),f.innerHTML=d[1]+l+d[2];p--;)f=f.lastChild;if(!z.support.tbody){var g=yt.test(l),v="table"!==h||g?"<table>"!==d[1]||g?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes;for(o=v.length-1;o>=0;--o)z.nodeName(v[o],"tbody")&&!v[o].childNodes.length&&v[o].parentNode.removeChild(v[o])}!z.support.leadingWhitespace&&gt.test(l)&&f.insertBefore(e.createTextNode(gt.exec(l)[0]),f.firstChild),l=f.childNodes,f&&(f.parentNode.removeChild(f),_.length>0&&(u=_[_.length-1],u&&u.parentNode&&u.parentNode.removeChild(u)))}else l=e.createTextNode(l);var y;if(!z.support.appendChecked)if(l[0]&&"number"==typeof(y=l.length))for(o=0;y>o;o++)m(l[o]);else m(l);l.nodeType?s.push(l):s=z.merge(s,l)}if(n)for(r=function(t){return!t.type||Dt.test(t.type)},c=0;s[c];c++)if(i=s[c],a&&z.nodeName(i,"script")&&(!i.type||Dt.test(i.type)))a.push(i.parentNode?i.parentNode.removeChild(i):i);else{if(1===i.nodeType){var x=z.grep(i.getElementsByTagName("script"),r);s.splice.apply(s,[c+1,0].concat(x))}n.appendChild(i)}return s},cleanData:function(t){for(var e,n,a,r=z.cache,i=z.event.special,o=z.support.deleteExpando,s=0;null!=(a=t[s]);s++)if((!a.nodeName||!z.noData[a.nodeName.toLowerCase()])&&(n=a[z.expando])){if(e=r[n],e&&e.events){for(var l in e.events)i[l]?z.event.remove(a,l):z.removeEvent(a,l,e.handle);e.handle&&(e.handle.elem=null)}o?delete a[z.expando]:a.removeAttribute&&a.removeAttribute(z.expando),delete r[n]}}});var Et,Tt,Mt,Ft=/alpha\([^)]*\)/i,Nt=/opacity=([^)]*)/,It=/([A-Z]|^ms)/g,zt=/^[\-+]?(?:\d*\.)?\d+$/i,Ht=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Lt=/^([\-+])=([\-+.\de]+)/,Bt=/^margin/,jt={position:"absolute",visibility:"hidden",display:"block"},Ot=["Top","Right","Bottom","Left"];z.fn.css=function(t,n){return z.access(this,function(t,n,a){return a!==e?z.style(t,n,a):z.css(t,n)},t,n,arguments.length>1)},z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Et(t,"opacity");return""===n?"1":n}return t.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":z.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,a,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s=z.camelCase(n),l=t.style,c=z.cssHooks[s];if(n=z.cssProps[s]||s,a===e)return c&&"get"in c&&(i=c.get(t,!1,r))!==e?i:l[n];if(o=typeof a,"string"===o&&(i=Lt.exec(a))&&(a=+(i[1]+1)*+i[2]+parseFloat(z.css(t,n)),o="number"),null==a||"number"===o&&isNaN(a))return;if("number"===o&&!z.cssNumber[s]&&(a+="px"),!(c&&"set"in c&&(a=c.set(t,a))===e))try{l[n]=a}catch(u){}}},css:function(t,n,a){var r,i;return n=z.camelCase(n),i=z.cssHooks[n],n=z.cssProps[n]||n,"cssFloat"===n&&(n="float"),i&&"get"in i&&(r=i.get(t,!0,a))!==e?r:Et?Et(t,n):void 0},swap:function(t,e,n){var a,r,i={};for(r in e)i[r]=t.style[r],t.style[r]=e[r];a=n.call(t);for(r in e)t.style[r]=i[r];return a}}),z.curCSS=z.css,F.defaultView&&F.defaultView.getComputedStyle&&(Tt=function(t,e){var n,a,r,i,o=t.style;return e=e.replace(It,"-$1").toLowerCase(),(a=t.ownerDocument.defaultView)&&(r=a.getComputedStyle(t,null))&&(n=r.getPropertyValue(e),""===n&&!z.contains(t.ownerDocument.documentElement,t)&&(n=z.style(t,e))),!z.support.pixelMargin&&r&&Bt.test(e)&&Ht.test(n)&&(i=o.width,o.width=n,n=r.width,o.width=i),n}),F.documentElement.currentStyle&&(Mt=function(t,e){var n,a,r,i=t.currentStyle&&t.currentStyle[e],o=t.style;return null==i&&o&&(r=o[e])&&(i=r),Ht.test(i)&&(n=o.left,a=t.runtimeStyle&&t.runtimeStyle.left,a&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":i,i=o.pixelLeft+"px",o.left=n,a&&(t.runtimeStyle.left=a)),""===i?"auto":i}),Et=Tt||Mt,z.each(["height","width"],function(t,e){z.cssHooks[e]={get:function(t,n,a){return n?0!==t.offsetWidth?_(t,e,a):z.swap(t,jt,function(){return _(t,e,a)}):void 0},set:function(t,e){return zt.test(e)?e+"px":e}}}),z.support.opacity||(z.cssHooks.opacity={get:function(t,e){return Nt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":e?"1":""},set:function(t,e){var n=t.style,a=t.currentStyle,r=z.isNumeric(e)?"alpha(opacity="+100*e+")":"",i=a&&a.filter||n.filter||"";n.zoom=1,e>=1&&""===z.trim(i.replace(Ft,""))&&(n.removeAttribute("filter"),a&&!a.filter)||(n.filter=Ft.test(i)?i.replace(Ft,r):i+" "+r)}}),z(function(){z.support.reliableMarginRight||(z.cssHooks.marginRight={get:function(t,e){return z.swap(t,{display:"inline-block"},function(){return e?Et(t,"margin-right"):t.style.marginRight})}})}),z.expr&&z.expr.filters&&(z.expr.filters.hidden=function(t){var e=t.offsetWidth,n=t.offsetHeight;return 0===e&&0===n||!z.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||z.css(t,"display"))},z.expr.filters.visible=function(t){return!z.expr.filters.hidden(t)}),z.each({margin:"",padding:"",border:"Width"},function(t,e){z.cssHooks[t+e]={expand:function(n){var a,r="string"==typeof n?n.split(" "):[n],i={};for(a=0;4>a;a++)i[t+Ot[a]+e]=r[a]||r[a-2]||r[0];return i}}});var $t,Rt,qt=/%20/g,Gt=/\[\]$/,Wt=/\r?\n/g,Yt=/#.*$/,Ut=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Vt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Qt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Xt=/^(?:GET|HEAD)$/,Jt=/^\/\//,Kt=/\?/,Zt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,te=/^(?:select|textarea)/i,ee=/\s+/,ne=/([?&])_=[^&]*/,ae=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,re=z.fn.load,ie={},oe={},se=["*/"]+["*"];try{$t=I.href}catch(le){$t=F.createElement("a"),$t.href="",$t=$t.href}Rt=ae.exec($t.toLowerCase())||[],z.fn.extend({load:function(t,n,a){if("string"!=typeof t&&re)return re.apply(this,arguments);if(!this.length)return this;var r=t.indexOf(" ");if(r>=0){var i=t.slice(r,t.length);t=t.slice(0,r)}var o="GET";n&&(z.isFunction(n)?(a=n,n=e):"object"==typeof n&&(n=z.param(n,z.ajaxSettings.traditional),o="POST"));var s=this;return z.ajax({url:t,type:o,dataType:"html",data:n,complete:function(t,e,n){n=t.responseText,t.isResolved()&&(t.done(function(t){n=t}),s.html(i?z("<div>").append(n.replace(Zt,"")).find(i):n)),a&&s.each(a,[n,e,t])}}),this},serialize:function(){return z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?z.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||te.test(this.nodeName)||Vt.test(this.type))}).map(function(t,e){var n=z(this).val();return null==n?null:z.isArray(n)?z.map(n,function(t,n){return{name:e.name,value:t.replace(Wt,"\r\n")}}):{name:e.name,value:n.replace(Wt,"\r\n")}}).get()}}),z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){z.fn[e]=function(t){return this.on(e,t)}}),z.each(["get","post"],function(t,n){z[n]=function(t,a,r,i){return z.isFunction(a)&&(i=i||r,r=a,a=e),z.ajax({type:n,url:t,data:a,success:r,dataType:i})}}),z.extend({getScript:function(t,n){return z.get(t,e,n,"script")},getJSON:function(t,e,n){return z.get(t,e,n,"json")},ajaxSetup:function(t,e){return e?d(t,z.ajaxSettings):(e=t,t=z.ajaxSettings),d(t,e),t},ajaxSettings:{url:$t,isLocal:Qt.test(Rt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":se},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":z.parseJSON,"text xml":z.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:f(ie),ajaxTransport:f(oe),ajax:function(t,n){function a(t,n,a,o){if(2!==k){k=2,l&&clearTimeout(l),s=e,i=o||"",C.readyState=t>0?4:0;var h,p,f,b,w,D=n,P=a?u(_,C,a):e;if(t>=200&&300>t||304===t)if(_.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(z.lastModified[r]=b),(w=C.getResponseHeader("Etag"))&&(z.etag[r]=w)),304===t)D="notmodified",h=!0;else try{p=c(_,P),D="success",h=!0}catch(S){D="parsererror",f=S}else f=D,(!D||t)&&(D="error",0>t&&(t=0));C.status=t,C.statusText=""+(n||D),h?v.resolveWith(g,[p,D,C]):v.rejectWith(g,[C,D,f]),C.statusCode(x),x=e,d&&m.trigger("ajax"+(h?"Success":"Error"),[C,_,h?p:f]),y.fireWith(g,[C,D]),d&&(m.trigger("ajaxComplete",[C,_]),--z.active||z.event.trigger("ajaxStop"))}}"object"==typeof t&&(n=t,t=e),n=n||{};var r,i,o,s,l,h,d,f,_=z.ajaxSetup({},n),g=_.context||_,m=g!==_&&(g.nodeType||g instanceof z)?z(g):z.event,v=z.Deferred(),y=z.Callbacks("once memory"),x=_.statusCode||{},b={},w={},k=0,C={readyState:0,setRequestHeader:function(t,e){if(!k){var n=t.toLowerCase();t=w[n]=w[n]||t,b[t]=e}return this},getAllResponseHeaders:function(){return 2===k?i:null},getResponseHeader:function(t){var n;if(2===k){if(!o)for(o={};n=Ut.exec(i);)o[n[1].toLowerCase()]=n[2];n=o[t.toLowerCase()]}return n===e?null:n},overrideMimeType:function(t){return k||(_.mimeType=t),this},abort:function(t){return t=t||"abort",s&&s.abort(t),a(0,t),this}};if(v.promise(C),C.success=C.done,C.error=C.fail,C.complete=y.add,C.statusCode=function(t){if(t){var e;if(2>k)for(e in t)x[e]=[x[e],t[e]];else e=t[C.status],C.then(e,e)}return this},_.url=((t||_.url)+"").replace(Yt,"").replace(Jt,Rt[1]+"//"),_.dataTypes=z.trim(_.dataType||"*").toLowerCase().split(ee),null==_.crossDomain&&(h=ae.exec(_.url.toLowerCase()),_.crossDomain=!(!h||h[1]==Rt[1]&&h[2]==Rt[2]&&(h[3]||("http:"===h[1]?80:443))==(Rt[3]||("http:"===Rt[1]?80:443)))),_.data&&_.processData&&"string"!=typeof _.data&&(_.data=z.param(_.data,_.traditional)),p(ie,_,n,C),2===k)return!1;if(d=_.global,_.type=_.type.toUpperCase(),_.hasContent=!Xt.test(_.type),d&&0===z.active++&&z.event.trigger("ajaxStart"),!_.hasContent&&(_.data&&(_.url+=(Kt.test(_.url)?"&":"?")+_.data,delete _.data),r=_.url,_.cache===!1)){var D=z.now(),P=_.url.replace(ne,"$1_="+D);_.url=P+(P===_.url?(Kt.test(_.url)?"&":"?")+"_="+D:"")}(_.data&&_.hasContent&&_.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",_.contentType),_.ifModified&&(r=r||_.url,z.lastModified[r]&&C.setRequestHeader("If-Modified-Since",z.lastModified[r]),z.etag[r]&&C.setRequestHeader("If-None-Match",z.etag[r])),C.setRequestHeader("Accept",_.dataTypes[0]&&_.accepts[_.dataTypes[0]]?_.accepts[_.dataTypes[0]]+("*"!==_.dataTypes[0]?", "+se+"; q=0.01":""):_.accepts["*"]);for(f in _.headers)C.setRequestHeader(f,_.headers[f]);if(_.beforeSend&&(_.beforeSend.call(g,C,_)===!1||2===k))return C.abort(),!1;for(f in{success:1,error:1,complete:1})C[f](_[f]);if(s=p(oe,_,n,C)){C.readyState=1,d&&m.trigger("ajaxSend",[C,_]),_.async&&_.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},_.timeout));try{k=1,s.send(b,a)}catch(S){if(!(2>k))throw S;a(-1,S)}}else a(-1,"No Transport");return C},param:function(t,n){var a=[],r=function(t,e){e=z.isFunction(e)?e():e,a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=z.ajaxSettings.traditional),z.isArray(t)||t.jquery&&!z.isPlainObject(t))z.each(t,function(){r(this.name,this.value)});else for(var i in t)h(i,t[i],n,r);return a.join("&").replace(qt,"+")}}),z.extend({active:0,lastModified:{},etag:{}});var ce=z.now(),ue=/(\=)\?(&|$)|\?\?/i;z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return z.expando+"_"+ce++}}),z.ajaxPrefilter("json jsonp",function(e,n,a){var r="string"==typeof e.data&&/^application\/x\-www\-form\-urlencoded/.test(e.contentType);if("jsonp"===e.dataTypes[0]||e.jsonp!==!1&&(ue.test(e.url)||r&&ue.test(e.data))){var i,o=e.jsonpCallback=z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s=t[o],l=e.url,c=e.data,u="$1"+o+"$2";return e.jsonp!==!1&&(l=l.replace(ue,u),e.url===l&&(r&&(c=c.replace(ue,u)),e.data===c&&(l+=(/\?/.test(l)?"&":"?")+e.jsonp+"="+o))),e.url=l,e.data=c,t[o]=function(t){i=[t]},a.always(function(){t[o]=s,i&&z.isFunction(s)&&t[o](i[0])}),e.converters["script json"]=function(){return i||z.error(o+" was not called"),i[0]},e.dataTypes[0]="json","script"}}),z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return z.globalEval(t),t}}}),z.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),z.ajaxTransport("script",function(t){if(t.crossDomain){var n,a=F.head||F.getElementsByTagName("head")[0]||F.documentElement;return{send:function(r,i){n=F.createElement("script"),n.async="async",t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),n=e,r||i(200,"success"))},a.insertBefore(n,a.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var he,de=t.ActiveXObject?function(){for(var t in he)he[t](0,1)}:!1,pe=0;z.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&l()||s()}:l,function(t){z.extend(z.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(z.ajaxSettings.xhr()),z.support.ajax&&z.ajaxTransport(function(n){if(!n.crossDomain||z.support.cors){var a;return{send:function(r,i){var o,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),!n.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)l.setRequestHeader(s,r[s])}catch(c){}l.send(n.hasContent&&n.data||null),a=function(t,r){var s,c,u,h,d;try{if(a&&(r||4===l.readyState))if(a=e,o&&(l.onreadystatechange=z.noop,de&&delete he[o]),r)4!==l.readyState&&l.abort();else{s=l.status,u=l.getAllResponseHeaders(),h={},d=l.responseXML,d&&d.documentElement&&(h.xml=d);try{h.text=l.responseText}catch(t){}try{c=l.statusText}catch(p){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=h.text?200:404}}catch(f){r||i(-1,f)}h&&i(s,c,h,u)},n.async&&4!==l.readyState?(o=++pe,de&&(he||(he={},z(t).unload(de)),he[o]=a),l.onreadystatechange=a):a()},abort:function(){a&&a(0,1)}}}});var fe,_e,ge,me,ve={},ye=/^(?:toggle|show|hide)$/,xe=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,be=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];z.fn.extend({show:function(t,e,n){var i,o;if(t||0===t)return this.animate(r("show",3),t,e,n);for(var s=0,l=this.length;l>s;s++)i=this[s],i.style&&(o=i.style.display,!z._data(i,"olddisplay")&&"none"===o&&(o=i.style.display=""),(""===o&&"none"===z.css(i,"display")||!z.contains(i.ownerDocument.documentElement,i))&&z._data(i,"olddisplay",a(i.nodeName)));for(s=0;l>s;s++)i=this[s],i.style&&(o=i.style.display,(""===o||"none"===o)&&(i.style.display=z._data(i,"olddisplay")||""));return this},hide:function(t,e,n){if(t||0===t)return this.animate(r("hide",3),t,e,n);for(var a,i,o=0,s=this.length;s>o;o++)a=this[o],a.style&&(i=z.css(a,"display"),"none"!==i&&!z._data(a,"olddisplay")&&z._data(a,"olddisplay",i));for(o=0;s>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:z.fn.toggle,toggle:function(t,e,n){var a="boolean"==typeof t;return z.isFunction(t)&&z.isFunction(e)?this._toggle.apply(this,arguments):null==t||a?this.each(function(){var e=a?t:z(this).is(":hidden");z(this)[e?"show":"hide"]()}):this.animate(r("toggle",3),t,e,n),this},fadeTo:function(t,e,n,a){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:e},t,n,a)},animate:function(t,e,n,r){function i(){o.queue===!1&&z._mark(this);var e,n,r,i,s,l,c,u,h,d,p,f=z.extend({},o),_=1===this.nodeType,g=_&&z(this).is(":hidden");f.animatedProperties={};for(r in t)if(e=z.camelCase(r),r!==e&&(t[e]=t[r],delete t[r]),(s=z.cssHooks[e])&&"expand"in s){l=s.expand(t[e]),delete t[e];for(r in l)r in t||(t[r]=l[r])}for(e in t){if(n=t[e],z.isArray(n)?(f.animatedProperties[e]=n[1],n=t[e]=n[0]):f.animatedProperties[e]=f.specialEasing&&f.specialEasing[e]||f.easing||"swing","hide"===n&&g||"show"===n&&!g)return f.complete.call(this);_&&("height"===e||"width"===e)&&(f.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===z.css(this,"display")&&"none"===z.css(this,"float")&&(z.support.inlineBlockNeedsLayout&&"inline"!==a(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=f.overflow&&(this.style.overflow="hidden");for(r in t)i=new z.fx(this,f,r),n=t[r],ye.test(n)?(p=z._data(this,"toggle"+r)||("toggle"===n?g?"show":"hide":0),p?(z._data(this,"toggle"+r,"show"===p?"hide":"show"),i[p]()):i[n]()):(c=xe.exec(n),u=i.cur(),c?(h=parseFloat(c[2]),d=c[3]||(z.cssNumber[r]?"":"px"),"px"!==d&&(z.style(this,r,(h||1)+d),u=(h||1)/i.cur()*u,z.style(this,r,u+d)),c[1]&&(h=("-="===c[1]?-1:1)*h+u),i.custom(u,h,d)):i.custom(u,n,""));return!0}var o=z.speed(e,n,r);return z.isEmptyObject(t)?this.each(o.complete,[!1]):(t=z.extend({},t),o.queue===!1?this.each(i):this.queue(o.queue,i))},stop:function(t,n,a){return"string"!=typeof t&&(a=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){function e(t,e,n){var r=e[n];z.removeData(t,n,!0),r.stop(a)}var n,r=!1,i=z.timers,o=z._data(this);if(a||z._unmark(!0,this),null==t)for(n in o)o[n]&&o[n].stop&&n.indexOf(".run")===n.length-4&&e(this,o,n);else o[n=t+".run"]&&o[n].stop&&e(this,o,n);for(n=i.length;n--;)i[n].elem===this&&(null==t||i[n].queue===t)&&(a?i[n](!0):i[n].saveState(),r=!0,i.splice(n,1));(!a||!r)&&z.dequeue(this,t)})}}),z.each({slideDown:r("show",1),slideUp:r("hide",1),slideToggle:r("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){z.fn[t]=function(t,n,a){return this.animate(e,t,n,a)}}),z.extend({speed:function(t,e,n){var a=t&&"object"==typeof t?z.extend({},t):{complete:n||!n&&e||z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!z.isFunction(e)&&e};return a.duration=z.fx.off?0:"number"==typeof a.duration?a.duration:a.duration in z.fx.speeds?z.fx.speeds[a.duration]:z.fx.speeds._default,(null==a.queue||a.queue===!0)&&(a.queue="fx"),a.old=a.complete,a.complete=function(t){z.isFunction(a.old)&&a.old.call(this),a.queue?z.dequeue(this,a.queue):t!==!1&&z._unmark(this)},a},easing:{linear:function(t){return t},swing:function(t){return-Math.cos(t*Math.PI)/2+.5}},timers:[],fx:function(t,e,n){this.options=e,this.elem=t,this.prop=n,e.orig=e.orig||{}}}),z.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(z.fx.step[this.prop]||z.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var t,e=z.css(this.elem,this.prop);return isNaN(t=parseFloat(e))?e&&"auto"!==e?e:0:t},custom:function(t,n,a){function r(t){return i.step(t)}var i=this,s=z.fx;this.startTime=me||o(),this.end=n,this.now=this.start=t,this.pos=this.state=0,this.unit=a||this.unit||(z.cssNumber[this.prop]?"":"px"),r.queue=this.options.queue,r.elem=this.elem,r.saveState=function(){z._data(i.elem,"fxshow"+i.prop)===e&&(i.options.hide?z._data(i.elem,"fxshow"+i.prop,i.start):i.options.show&&z._data(i.elem,"fxshow"+i.prop,i.end))},r()&&z.timers.push(r)&&!ge&&(ge=setInterval(s.tick,s.interval))},show:function(){var t=z._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=t||z.style(this.elem,this.prop),this.options.show=!0,t!==e?this.custom(this.cur(),t):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),z(this.elem).show()},hide:function(){this.options.orig[this.prop]=z._data(this.elem,"fxshow"+this.prop)||z.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(t){var e,n,a,r=me||o(),i=!0,s=this.elem,l=this.options;if(t||r>=l.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),l.animatedProperties[this.prop]=!0;for(e in l.animatedProperties)l.animatedProperties[e]!==!0&&(i=!1);if(i){if(null!=l.overflow&&!z.support.shrinkWrapBlocks&&z.each(["","X","Y"],function(t,e){s.style["overflow"+e]=l.overflow[t]}),l.hide&&z(s).hide(),l.hide||l.show)for(e in l.animatedProperties)z.style(s,e,l.orig[e]),z.removeData(s,"fxshow"+e,!0),z.removeData(s,"toggle"+e,!0);a=l.complete,a&&(l.complete=!1,a.call(s))}return!1}return l.duration==1/0?this.now=r:(n=r-this.startTime,this.state=n/l.duration,this.pos=z.easing[l.animatedProperties[this.prop]](this.state,n,0,1,l.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},z.extend(z.fx,{tick:function(){for(var t,e=z.timers,n=0;n<e.length;n++)t=e[n],!t()&&e[n]===t&&e.splice(n--,1);e.length||z.fx.stop()},interval:13,stop:function(){clearInterval(ge),ge=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(t){z.style(t.elem,"opacity",t.now)},_default:function(t){t.elem.style&&null!=t.elem.style[t.prop]?t.elem.style[t.prop]=t.now+t.unit:t.elem[t.prop]=t.now}}}),z.each(be.concat.apply([],be),function(t,e){e.indexOf("margin")&&(z.fx.step[e]=function(t){z.style(t.elem,e,Math.max(0,t.now)+t.unit)})}),z.expr&&z.expr.filters&&(z.expr.filters.animated=function(t){return z.grep(z.timers,function(e){return t===e.elem}).length});var we,ke=/^t(?:able|d|h)$/i,Ce=/^(?:body|html)$/i;we="getBoundingClientRect"in F.documentElement?function(t,e,a,r){try{r=t.getBoundingClientRect()}catch(i){}if(!r||!z.contains(a,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var o=e.body,s=n(e),l=a.clientTop||o.clientTop||0,c=a.clientLeft||o.clientLeft||0,u=s.pageYOffset||z.support.boxModel&&a.scrollTop||o.scrollTop,h=s.pageXOffset||z.support.boxModel&&a.scrollLeft||o.scrollLeft,d=r.top+u-l,p=r.left+h-c;return{top:d,left:p}}:function(t,e,n){for(var a,r=t.offsetParent,i=t,o=e.body,s=e.defaultView,l=s?s.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,u=t.offsetLeft;(t=t.parentNode)&&t!==o&&t!==n&&(!z.support.fixedPosition||"fixed"!==l.position);)a=s?s.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,u-=t.scrollLeft,t===r&&(c+=t.offsetTop,u+=t.offsetLeft,z.support.doesNotAddBorder&&(!z.support.doesAddBorderForTableAndCells||!ke.test(t.nodeName))&&(c+=parseFloat(a.borderTopWidth)||0,u+=parseFloat(a.borderLeftWidth)||0),i=r,r=t.offsetParent),z.support.subtractsBorderForOverflowNotVisible&&"visible"!==a.overflow&&(c+=parseFloat(a.borderTopWidth)||0,u+=parseFloat(a.borderLeftWidth)||0),l=a;return("relative"===l.position||"static"===l.position)&&(c+=o.offsetTop,u+=o.offsetLeft),z.support.fixedPosition&&"fixed"===l.position&&(c+=Math.max(n.scrollTop,o.scrollTop),u+=Math.max(n.scrollLeft,o.scrollLeft)),{top:c,left:u}},z.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){z.offset.setOffset(this,t,e)});var n=this[0],a=n&&n.ownerDocument;return a?n===a.body?z.offset.bodyOffset(n):we(n,a,a.documentElement):null},z.offset={bodyOffset:function(t){var e=t.offsetTop,n=t.offsetLeft;return z.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(z.css(t,"marginTop"))||0,n+=parseFloat(z.css(t,"marginLeft"))||0),{top:e,left:n}},setOffset:function(t,e,n){var a=z.css(t,"position");"static"===a&&(t.style.position="relative");var r,i,o=z(t),s=o.offset(),l=z.css(t,"top"),c=z.css(t,"left"),u=("absolute"===a||"fixed"===a)&&z.inArray("auto",[l,c])>-1,h={},d={};u?(d=o.position(),r=d.top,i=d.left):(r=parseFloat(l)||0,i=parseFloat(c)||0),z.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+r),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):o.css(h)}},z.fn.extend({position:function(){if(!this[0])return null;var t=this[0],e=this.offsetParent(),n=this.offset(),a=Ce.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(z.css(t,"marginTop"))||0,n.left-=parseFloat(z.css(t,"marginLeft"))||0,a.top+=parseFloat(z.css(e[0],"borderTopWidth"))||0,a.left+=parseFloat(z.css(e[0],"borderLeftWidth"))||0,{top:n.top-a.top,left:n.left-a.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||F.body;t&&!Ce.test(t.nodeName)&&"static"===z.css(t,"position");)t=t.offsetParent;return t})}}),z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var r=/Y/.test(a);z.fn[t]=function(i){return z.access(this,function(t,i,o){var s=n(t);return o===e?s?a in s?s[a]:z.support.boxModel&&s.document.documentElement[i]||s.document.body[i]:t[i]:void(s?s.scrollTo(r?z(s).scrollLeft():o,r?o:z(s).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),z.each({Height:"height",Width:"width"},function(t,n){var a="client"+t,r="scroll"+t,i="offset"+t;z.fn["inner"+t]=function(){var t=this[0];return t?t.style?parseFloat(z.css(t,n,"padding")):this[n]():null},z.fn["outer"+t]=function(t){var e=this[0];return e?e.style?parseFloat(z.css(e,n,t?"margin":"border")):this[n]():null},z.fn[n]=function(t){return z.access(this,function(t,n,o){var s,l,c,u;return z.isWindow(t)?(s=t.document,l=s.documentElement[a],z.support.boxModel&&l||s.body&&s.body[a]||l):9===t.nodeType?(s=t.documentElement,s[a]>=s[r]?s[a]:Math.max(t.body[r],s[r],t.body[i],s[i])):o===e?(c=z.css(t,n),u=parseFloat(c),z.isNumeric(u)?u:c):void z(t).css(n,o)},n,t,arguments.length,null)}}),t.jQuery=t.$=z,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return z})}(window),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,a=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,a){var r=t.Event(n);return e.trigger(r,a),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(a){var r,i,o,s,l,c,u,h;if(n.fire(a,"ajax:before")){if(s=a.data("cross-domain"),l=s===e?null:s,c=a.data("with-credentials")||null,u=a.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,a.is("form")){r=a.attr("method"),i=a.attr("action"),o=a.serializeArray();var d=a.data("ujs:submit-button");d&&(o.push(d),a.data("ujs:submit-button",null))}else a.is(n.inputChangeSelector)?(r=a.data("method"),i=a.data("url"),o=a.serialize(),a.data("params")&&(o=o+"&"+a.data("params"))):a.is(n.buttonClickSelector)?(r=a.data("method")||"get",i=a.data("url"),o=a.serialize(),a.data("params")&&(o=o+"&"+a.data("params"))):(r=a.data("method"),i=n.href(a),o=a.data("params")||null);h={type:r||"GET",data:o,dataType:u,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(a,"ajax:beforeSend",[t,r])},success:function(t,e,n){a.trigger("ajax:success",[t,e,n])},complete:function(t,e){a.trigger("ajax:complete",[t,e])},error:function(t,e,n){a.trigger("ajax:error",[t,e,n])},crossDomain:l},c&&(h.xhrFields={withCredentials:c}),i&&(h.url=i);var p=n.ajax(h);return a.trigger("ajax:send",p),p}return!1},handleMethod:function(a){var r=n.href(a),i=a.data("method"),o=a.attr("target"),s=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+i+'" type="hidden" />';l!==e&&s!==e&&(u+='<input name="'+l+'" value="'+s+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,a=t.data("confirm"),r=!1;return a?(n.fire(t,"confirm")&&(r=n.confirm(a),e=n.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,n,a){var r,i,o=t(),s=n||"input,textarea",l=e.find(s);return l.each(function(){if(r=t(this),i=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!i==!a){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){
return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(a,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,a){t.crossDomain||n.CSRFProtection(a)}),a.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),a.delegate(n.linkClickSelector,"click.rails",function(a){var r=t(this),i=r.data("method"),o=r.data("params"),s=a.metaKey||a.ctrlKey;if(!n.allowAction(r))return n.stopEverything(a);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==e){if(s&&(!i||"GET"===i)&&!o)return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),a.delegate(n.buttonClickSelector,"click.rails",function(e){var a=t(this);return n.allowAction(a)?(n.handleRemote(a),!1):n.stopEverything(e)}),a.delegate(n.inputChangeSelector,"change.rails",function(e){var a=t(this);return n.allowAction(a)?(n.handleRemote(a),!1):n.stopEverything(e)}),a.delegate(n.formSubmitSelector,"submit.rails",function(a){var r=t(this),i=r.data("remote")!==e,o=n.blankInputs(r,n.requiredInputSelector),s=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(a);if(o&&r.attr("novalidate")==e&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(a);if(i){if(s){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),a.delegate(n.formInputClickSelector,"click.rails",function(e){var a=t(this);if(!n.allowAction(a))return n.stopEverything(e);var r=a.attr("name"),i=r?{name:r,value:a.val()}:null;a.closest("form").data("ujs:submit-button",i)}),a.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),a.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),!function(t){var e=function(t){this.value={h:1,s:1,b:1,a:1},this.setColor(t)};e.prototype={constructor:e,setColor:function(e){e=e.toLowerCase();var n=this;t.each(a.stringParsers,function(t,r){var i=r.re.exec(e),o=i&&r.parse(i),s=r.space||"rgba";return o?("hsla"===s?n.value=a.RGBtoHSB.apply(null,a.HSLtoRGB.apply(null,o)):n.value=a.RGBtoHSB.apply(null,o),!1):void 0})},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setLightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,n,a){t||(t=this.value.h,e=this.value.s,n=this.value.b),t*=360;var r,i,o,s,l;return t=t%360/60,l=n*e,s=l*(1-Math.abs(t%2-1)),r=i=o=n-l,t=~~t,r+=[l,s,0,0,s,l][t],i+=[s,l,l,s,0,0][t],o+=[0,0,s,l,l,s][t],{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*o),a:a||this.value.a}},toHex:function(t,e,n,a){var r=this.toRGB(t,e,n,a);return"#"+(1<<24|parseInt(r.r)<<16|parseInt(r.g)<<8|parseInt(r.b)).toString(16).substr(1)},toHSL:function(t,e,n,a){t||(t=this.value.h,e=this.value.s,n=this.value.b);var r=t,i=(2-e)*n,o=e*n;return o/=i>0&&1>=i?i:2-i,i/=2,o>1&&(o=1),{h:r,s:o,l:i,a:a||this.value.a}}};var n=function(e,n){this.element=t(e);var r=n.format||this.element.data("color-format")||"hex";this.format=a.translateFormats[r],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=t(a.template).appendTo("body").on("mousedown",t.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this)}):this.component?this.component.on({click:t.proxy(this.show,this)}):this.element.on({click:t.proxy(this.show,this)}),("rgba"===r||"hsla"===r)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};n.prototype={constructor:n,show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),t(window).on("resize",t.proxy(this.place,this)),this.isInput||e&&(e.stopPropagation(),e.preventDefault()),t(document).on({mousedown:t.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new e(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(t){this.color=new e(t),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide(),t(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(t(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var t=this.component?this.component.offset():this.element.offset();this.picker.css({top:t.top+this.height,left:t.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(t){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),r=n.closest("div");if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.slider=t.extend({},a.sliders.saturation);else if(r.is(".colorpicker-hue"))this.slider=t.extend({},a.sliders.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.slider=t.extend({},a.sliders.alpha)}var i=r.offset();this.slider.knob=r.find("i")[0].style,this.slider.left=e.pageX-i.left,this.slider.top=e.pageY-i.top,this.pointer={left:e.pageX,top:e.pageY},t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((t.pageX||this.pointer.left)-this.pointer.left))),n=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((t.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=e+"px",this.slider.knob.top=n+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,e/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,n/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},t.fn.colorpicker=function(e,a){return this.each(function(){var r=t(this),i=r.data("colorpicker"),o="object"==typeof e&&e;i||r.data("colorpicker",i=new n(this,t.extend({},t.fn.colorpicker.defaults,o))),"string"==typeof e&&i[e](a)})},t.fn.colorpicker.defaults={},t.fn.colorpicker.Constructor=n;var a={translateFormats:{rgb:function(){var t=this.color.toRGB();return"rgb("+t.r+","+t.g+","+t.b+")"},rgba:function(){var t=this.color.toRGB();return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"},hsl:function(){var t=this.color.toHSL();return"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)"},hsla:function(){var t=this.color.toHSL();return"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(t,e,n,a){t/=255,e/=255,n/=255;var r,i,o,s;return o=Math.max(t,e,n),s=o-Math.min(t,e,n),r=0===s?null:o==t?(e-n)/s:o==e?(n-t)/s+2:(t-e)/s+4,r=(r+360)%6*60/360,i=0===s?0:s/o,{h:r||1,s:i,b:o,a:a||1}},HueToRGB:function(t,e,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t},HSLtoRGB:function(t,e,n,r){0>e&&(e=0);var i;i=.5>=n?n*(1+e):n+e-n*e;var o=2*n-i,s=t+1/3,l=t,c=t-1/3,u=Math.round(255*a.HueToRGB(o,i,s)),h=Math.round(255*a.HueToRGB(o,i,l)),d=Math.round(255*a.HueToRGB(o,i,c));return[u,h,d,r||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),/*!
 * Bootstrap-select v1.6.2 (http://silviomoreto.github.io/bootstrap-select/)
 *
 * Copyright 2013-2014 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
function(t){"use strict";function e(t,e){return t.toUpperCase().indexOf(e.toUpperCase())>-1}function n(e){var n=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return t.each(n,function(){e=e.replace(this.re,this.ch)}),e}function a(e,n){var a=arguments,e=a[0],n=a[1];[].shift.apply(a);var i,o=this.each(function(){var o=t(this);if(o.is("select")){var s=o.data("selectpicker"),l="object"==typeof e&&e;if(s){if(l)for(var c in l)l.hasOwnProperty(c)&&(s.options[c]=l[c])}else{var u=t.extend({},r.DEFAULTS,t.fn.selectpicker.defaults,o.data(),l);o.data("selectpicker",s=new r(this,u,n))}"string"==typeof e&&(i=s[e]instanceof Function?s[e].apply(s,a):s.options[e])}});return"undefined"!=typeof i?i:o}t.expr[":"].icontains=function(n,a,r){return e(t(n).text(),r[3])},t.expr[":"].aicontains=function(n,a,r){return e(t(n).data("normalizedText")||t(n).text(),r[3])};var r=function(e,n,a){a&&(a.stopPropagation(),a.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=n,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=r.prototype.val,this.render=r.prototype.render,this.refresh=r.prototype.refresh,this.setStyle=r.prototype.setStyle,this.selectAll=r.prototype.selectAll,this.deselectAll=r.prototype.deselectAll,this.destroy=r.prototype.remove,this.remove=r.prototype.remove,this.show=r.prototype.show,this.hide=r.prototype.hide,this.init()};r.VERSION="1.6.2",r.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){var n=[];return n[0]=1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",n[1]=1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",n},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1},r.prototype={constructor:r,init:function(){var e=this,n=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof n&&(this.$button.attr("data-id",n),t('label[for="'+n+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var e=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",a=this.autofocus?" autofocus":"",r=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",i=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",s=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l='<div class="btn-group bootstrap-select'+e+n+'"><button type="button" class="btn dropdown-toggle selectpicker'+r+'" data-toggle="dropdown"'+a+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+i+o+s+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return t(l)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var e=this,a=[],r=0,i=function(t,e,n){return"<li"+("undefined"!=typeof n?' class="'+n+'"':"")+("undefined"!=typeof e|null===e?' data-original-index="'+e+'"':"")+">"+t+"</li>"},o=function(a,r,i,o){var s=n(t.trim(t("<div/>").html(a).text()).replace(/\s\s+/g," "));return'<a tabindex="0"'+("undefined"!=typeof r?' class="'+r+'"':"")+("undefined"!=typeof i?' style="'+i+'"':"")+("undefined"!=typeof o?'data-optgroup="'+o+'"':"")+' data-normalized-text="'+s+'">'+a+'<span class="'+e.options.iconBase+" "+e.options.tickIcon+' icon-ok check-mark"></span></a>'};return this.$element.find("option").each(function(){var n=t(this),s=n.attr("class")||"",l=n.attr("style"),c=n.data("content")?n.data("content"):n.html(),u="undefined"!=typeof n.data("subtext")?'<small class="muted text-muted">'+n.data("subtext")+"</small>":"",h="undefined"!=typeof n.data("icon")?'<span class="'+e.options.iconBase+" "+n.data("icon")+'"></span> ':"",d=n.is(":disabled")||n.parent().is(":disabled"),p=n[0].index;if(""!==h&&d&&(h="<span>"+h+"</span>"),n.data("content")||(c=h+'<span class="text">'+c+u+"</span>"),!e.options.hideDisabled||!d)if(n.parent().is("optgroup")&&n.data("divider")!==!0){if(0===n.index()){r+=1;var f=n.parent().attr("label"),_="undefined"!=typeof n.parent().data("subtext")?'<small class="muted text-muted">'+n.parent().data("subtext")+"</small>":"",g=n.parent().data("icon")?'<span class="'+e.options.iconBase+" "+n.parent().data("icon")+'"></span> ':"";f=g+'<span class="text">'+f+_+"</span>",0!==p&&a.length>0&&a.push(i("",null,"divider")),a.push(i(f,null,"dropdown-header"))}a.push(i(o(c,"opt "+s,l,r),p))}else n.data("divider")===!0?a.push(i("",p,"divider")):n.data("hidden")===!0?a.push(i(o(c,s,l),p,"hide is-hidden")):a.push(i(o(c,s,l),p))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(a.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var n=this;e!==!1&&this.$element.find("option").each(function(e){n.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),n.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var a=this.options.hideDisabled?":not([disabled])":"",r=this.$element.find("option:selected"+a).map(function(){var e,a=t(this),r=a.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+a.data("icon")+'"></i> ':"";return e=n.options.showSubtext&&a.attr("data-subtext")&&!n.multiple?' <small class="muted text-muted">'+a.data("subtext")+"</small>":"",a.data("content")&&n.options.showContent?a.data("content"):"undefined"!=typeof a.attr("title")?a.attr("title"):r+a.html()+e}).toArray(),i=this.multiple?r.join(this.options.multipleSeparator):r[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var o=this.options.selectedTextFormat.split(">");if(o.length>1&&r.length>o[1]||1==o.length&&r.length>=2){a=this.options.hideDisabled?", [disabled]":"";var s=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+a).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r.length,s):this.options.countSelectedText;i=l.replace("{0}",r.length.toString()).replace("{1}",s.toString())}}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(i=this.options.title),i||(i="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(t("<div/>").html(i).text()).replace(/\s\s+/g," ")),this.$newElement.find(".filter-option").html(i)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var n=t?t:this.options.style;"add"==e?this.$button.addClass(n):"remove"==e?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").find("> .dropdown-menu"),n=e.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),a=this.options.header?e.find(".popover-title").outerHeight():0,r=this.options.liveSearch?e.find(".bs-searchbox").outerHeight():0,i=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0;t.remove(),this.$newElement.data("liHeight",n).data("headerHeight",a).data("searchHeight",r).data("actionsHeight",i)}},setSize:function(){this.findLis();var e,n,a,r=this,i=this.$menu,o=i.find(".inner"),s=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),u=this.$newElement.data("searchHeight"),h=this.$newElement.data("actionsHeight"),d=this.$lis.filter(".divider").outerHeight(!0),p=parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom"))+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width")),f=this.options.hideDisabled?", .disabled":"",_=t(window),g=p+parseInt(i.css("margin-top"))+parseInt(i.css("margin-bottom"))+2,m=function(){n=r.$newElement.offset().top-_.scrollTop(),a=_.height()-n-s};if(m(),this.options.header&&i.css("padding-top",0),"auto"==this.options.size){var v=function(){var t,s=r.$lis.not(".hide");m(),e=a-g,r.options.dropupAuto&&r.$newElement.toggleClass("dropup",n>a&&e-g<i.height()),r.$newElement.hasClass("dropup")&&(e=n-g),t=s.length+s.filter(".dropdown-header").length>3?3*l+g-2:0,i.css({"max-height":e+"px",overflow:"hidden","min-height":t+c+u+h+"px"}),o.css({"max-height":e-c-u-h-p+"px","overflow-y":"auto","min-height":Math.max(t-p,0)+"px"})};v(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",v),t(window).off("resize.getSize").on("resize.getSize",v),t(window).off("scroll.getSize").on("scroll.getSize",v)}else if(this.options.size&&"auto"!=this.options.size&&i.find("li"+f).length>this.options.size){var y=this.$lis.not(".divider"+f).find(" > *").slice(0,this.options.size).last().parent().index(),x=this.$lis.slice(0,y+1).filter(".divider").length;e=l*this.options.size+x*d+p,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>a&&e<i.height()),i.css({"max-height":e+c+u+h+"px",overflow:"hidden"}),o.css({"max-height":e-p+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.find("> .dropdown-menu").css("width"),n=t.css("width","auto").find("> button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(n))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,n,a=this,r="<div />",i=t(r),o=function(t){i.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),n=t.hasClass("dropup")?0:t[0].offsetHeight,i.css({top:e.top+n,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){a.isDisabled()||(o(t(this)),i.appendTo(a.options.container),i.toggleClass("open",!t(this).hasClass("open")),i.append(a.$menu))}),t(window).resize(function(){o(a.$newElement)}),t(window).on("scroll",function(){o(a.$newElement)}),t("html").on("click",function(e){t(e.target).closest(a.$newElement).length<1&&i.removeClass("open")})},setSelected:function(t,e){this.findLis(),this.$lis.filter('[data-original-index="'+t+'"]').toggleClass("selected",e)},setDisabled:function(t,e){this.findLis(),e?this.$lis.filter('[data-original-index="'+t+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+t+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(n){var a=t(this),r=a.parent().data("originalIndex"),i=e.$element.val(),o=e.$element.prop("selectedIndex");if(e.multiple&&n.stopPropagation(),n.preventDefault(),!e.isDisabled()&&!a.parent().hasClass("disabled")){var s=e.$element.find("option"),l=s.eq(r),c=l.prop("selected"),u=l.parent("optgroup"),h=e.options.maxOptions,d=u.data("maxOptions")||!1;if(e.multiple){if(l.prop("selected",!c),e.setSelected(r,!c),a.blur(),h!==!1||d!==!1){var p=h<s.filter(":selected").length,f=d<u.find("option:selected").length;if(h&&p||d&&f)if(h&&1==h)s.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(r,!0);else if(d&&1==d){u.find("option:selected").prop("selected",!1),l.prop("selected",!0);var _=a.data("optgroup");e.$menu.find(".selected").has('a[data-optgroup="'+_+'"]').removeClass("selected"),e.setSelected(r,!0)}else{var g="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(h,d):e.options.maxOptionsText,m=g[0].replace("{n}",h),v=g[1].replace("{n}",d),y=t('<div class="notify"></div>');g[2]&&(m=m.replace("{var}",g[2][h>1?0:1]),v=v.replace("{var}",g[2][d>1?0:1])),l.prop("selected",!1),e.$menu.append(y),h&&p&&(y.append(t("<div>"+m+"</div>")),e.$element.trigger("maxReached.bs.select")),d&&f&&(y.append(t("<div>"+v+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(r,!1)},10),y.delay(750).fadeOut(300,function(){t(this).remove()})}}}else s.prop("selected",!1),l.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(r,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(i!=e.$element.val()&&e.multiple||o!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(t){t.target==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(n){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),n.preventDefault(),n.stopPropagation(),t(this).is(".bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var e=this,a=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$lis.not(".is-hidden").removeClass("hide"),a.parent().length&&a.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.options.searchAccentInsensitive?e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+n(e.$searchbox.val())+")").parent().addClass("hide"):e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hide"),e.$menu.find("li").filter(":visible:not(.no-results)").length?a.parent().length&&a.remove():(a.parent().length&&a.remove(),a.html(e.options.noneResultsText+' "'+e.$searchbox.val()+'"').show(),e.$menu.find("li").last().after(a))):(e.$lis.not(".is-hidden").removeClass("hide"),a.parent().length&&a.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),t(this).focus()}),this.$menu.on("mouseenter","a",function(n){e.$menu.find(".active").removeClass("active"),t(n.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){e.$menu.find(".active").removeClass("active")})},val:function(t){return"undefined"!=typeof t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(e){var a,r,i,o,s,l,c,u,h,d,p,f,_={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(a=t(this),i=a.parent(),a.is("input")&&(i=a.parent().parent()),d=i.data("this"),d.options.liveSearch&&(i=a.parent().parent()),d.options.container&&(i=d.$menu),r=t("[role=menu] li a",i),f=d.$menu.parent().hasClass("open"),!f&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(d.options.container?d.$newElement.trigger("click"):(d.setSize(),d.$menu.parent().addClass("open"),f=!0),d.$searchbox.focus()),d.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&f&&0===d.$menu.find(".active").length&&(e.preventDefault(),d.$menu.parent().removeClass("open"),d.$button.focus()),r=t("[role=menu] li:not(.divider):not(.dropdown-header):visible",i),a.val()||/(38|40)/.test(e.keyCode.toString(10))||0===r.filter(".active").length&&(r=d.options.searchAccentInsensitive?d.$newElement.find("li").filter(":aicontains("+n(_[e.keyCode])+")"):d.$newElement.find("li").filter(":icontains("+_[e.keyCode]+")"))),r.length){if(/(38|40)/.test(e.keyCode.toString(10)))o=r.index(r.filter(":focus")),l=r.parent(":not(.disabled):visible").first().index(),c=r.parent(":not(.disabled):visible").last().index(),s=r.eq(o).parent().nextAll(":not(.disabled):visible").eq(0).index(),u=r.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),h=r.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),d.options.liveSearch&&(r.each(function(e){t(this).is(":not(.disabled)")&&t(this).data("index",e)}),o=r.index(r.filter(".active")),l=r.filter(":not(.disabled):visible").first().data("index"),c=r.filter(":not(.disabled):visible").last().data("index"),s=r.eq(o).nextAll(":not(.disabled):visible").eq(0).data("index"),u=r.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index"),h=r.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index")),p=a.data("prevIndex"),38==e.keyCode&&(d.options.liveSearch&&(o-=1),o!=h&&o>u&&(o=u),l>o&&(o=l),o==p&&(o=c)),40==e.keyCode&&(d.options.liveSearch&&(o+=1),-1==o&&(o=0),o!=h&&s>o&&(o=s),o>c&&(o=c),o==p&&(o=l)),a.data("prevIndex",o),d.options.liveSearch?(e.preventDefault(),a.is(".dropdown-toggle")||(r.removeClass("active"),r.eq(o).addClass("active").find("a").focus(),a.focus())):r.eq(o).focus();else if(!a.is("input")){var g,m,v=[];r.each(function(){t(this).parent().is(":not(.disabled)")&&t.trim(t(this).text().toLowerCase()).substring(0,1)==_[e.keyCode]&&v.push(t(this).parent().index())}),g=t(document).data("keycount"),g++,t(document).data("keycount",g),m=t.trim(t(":focus").text().toLowerCase()).substring(0,1),m!=_[e.keyCode]?(g=1,t(document).data("keycount",g)):g>=v.length&&(t(document).data("keycount",0),g>v.length&&(g=1)),r.eq(v[g-1]).focus()}(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&d.options.selectOnTab)&&f&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),d.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(d.$menu.find(".active a").click(),a.focus()):t(":focus").click(),t(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&f&&(d.multiple||d.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!f)&&(d.$menu.parent().removeClass("open"),d.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var i=t.fn.selectpicker;t.fn.selectpicker=a,t.fn.selectpicker.Constructor=r,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=i,this},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",r.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);a.call(e,e.data())})})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,a=this;t(this).one(t.support.transition.end,function(){n=!0});var r=function(){n||t(a).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var i=t(r);e&&e.preventDefault(),i.length||(i=a.hasClass("alert")?a:a.parent()),i.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var a=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var a=t(this),r=a.data("bs.alert");r||a.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(a)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),+function(t){"use strict";var e=function(n,a){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,a),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",a=this.$element,r=a.is("input")?"val":"html",i=a.data();e+="Text",i.resetText||a.data("resetText",a[r]()),a[r](i[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,a.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,a.removeClass(n).removeAttr(n))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var a=t(this),r=a.data("bs.button"),i="object"==typeof n&&n;r||a.data("bs.button",r=new e(this,i)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(jQuery),+function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,a=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):a==e?this.pause().cycle():this.slide(e>a?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var a=this.$element.find(".item.active"),r=n||a[e](),i=this.interval,o="next"==e?"left":"right",s="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[s]()}if(r.hasClass("active"))return this.sliding=!1;var c=t.Event("slide.bs.carousel",{relatedTarget:r[0],direction:o});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,i&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(o),r.addClass(o),a.one(t.support.transition.end,function(){r.removeClass([e,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*a.css("transition-duration").slice(0,-1))):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),i&&this.cycle(),this)};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var a=t(this),r=a.data("bs.carousel"),i=t.extend({},e.DEFAULTS,a.data(),"object"==typeof n&&n),o="string"==typeof n?n:i.slide;r||a.data("bs.carousel",r=new e(this,i)),"number"==typeof n?r.to(n):o?r[o]():i.interval&&r.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,a=t(this),r=t(a.attr("data-target")||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),i=t.extend({},r.data(),a.data()),o=a.attr("data-slide-to");o&&(i.interval=!1),r.carousel(i),(o=a.attr("data-slide-to"))&&r.data("bs.carousel").to(o),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){"use strict";var e=function(n,a){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,a),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var a=n.data("bs.collapse");if(a&&a.transitioning)return;n.collapse("hide"),a||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return i.call(this);var o=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350)[r](this.$element[0][o])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(a,this)).emulateTransitionEnd(350):a.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var a=t(this),r=a.data("bs.collapse"),i=t.extend({},e.DEFAULTS,a.data(),"object"==typeof n&&n);!r&&i.toggle&&"show"==n&&(n=!n),r||a.data("bs.collapse",r=new e(this,i)),"string"==typeof n&&r[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,a=t(this),r=a.attr("data-target")||e.preventDefault()||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),i=t(r),o=i.data("bs.collapse"),s=o?"toggle":a.data(),l=a.attr("data-parent"),c=l&&t(l);o&&o.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(a).addClass("collapsed"),a[i.hasClass("in")?"addClass":"removeClass"]("collapsed")),i.collapse(s)})}(jQuery),+function(t){"use strict";function e(e){t(a).remove(),t(r).each(function(){var a=n(t(this)),r={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||a.removeClass("open").trigger("hidden.bs.dropdown",r))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var a=n&&t(n);return a&&a.length?a:e.parent()}var a=".dropdown-backdrop",r="[data-toggle=dropdown]",i=function(e){t(e).on("click.bs.dropdown",this.toggle)};i.prototype.toggle=function(a){var r=t(this);if(!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");
if(e(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(i.trigger(a=t.Event("show.bs.dropdown",s)),a.isDefaultPrevented())return;i.toggleClass("open").trigger("shown.bs.dropdown",s),r.focus()}return!1}},i.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var a=t(this);if(e.preventDefault(),e.stopPropagation(),!a.is(".disabled, :disabled")){var i=n(a),o=i.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&i.find(r).focus(),a.click();var s=" li:not(.divider):visible a",l=i.find("[role=menu]"+s+", [role=listbox]"+s);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).focus()}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),a=n.data("bs.dropdown");a||n.data("bs.dropdown",a=new i(this)),"string"==typeof e&&a[e].call(n)})},t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,i.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",i.prototype.keydown)}(jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),a&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,a){return this.each(function(){var r=t(this),i=r.data("bs.modal"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);i||r.data("bs.modal",i=new e(this,o)),"string"==typeof n?i[n](a):o.show&&i.show(a)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),a=n.attr("href"),r=t(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),n.data());n.is("a")&&e.preventDefault(),r.modal(i,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,a){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(a);for(var r=this.options.trigger.split(" "),i=r.length;i--;){var o=r[i];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,a){n[t]!=a&&(e[t]=a)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this,a=this.tip();this.setContent(),this.options.animation&&a.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,o=i.test(r);o&&(r=r.replace(i,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var s=this.getPosition(),l=a[0].offsetWidth,c=a[0].offsetHeight;if(o){var u=this.$element.parent(),h=r,d=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:u.outerWidth(),f="body"==this.options.container?window.innerHeight:u.outerHeight(),_="body"==this.options.container?0:u.offset().left;r="bottom"==r&&s.top+s.height+c-d>f?"top":"top"==r&&s.top-d-c<0?"bottom":"right"==r&&s.right+l>p?"left":"left"==r&&s.left-l<_?"right":r,a.removeClass(h).addClass(r)}var g=this.getCalculatedOffset(r,s,l,c);this.applyPlacement(g,r),this.hoverState=null;var m=function(){n.$element.trigger("shown.bs."+n.type)};t.support.transition&&this.$tip.hasClass("fade")?a.one(t.support.transition.end,m).emulateTransitionEnd(150):m()}},e.prototype.applyPlacement=function(e,n){var a,r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),e.top=e.top+s,e.left=e.left+l,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var c=r[0].offsetWidth,u=r[0].offsetHeight;if("top"==n&&u!=o&&(a=!0,e.top=e.top+o-u),/bottom|top/.test(n)){var h=0;e.left<0&&(h=-2*e.left,e.left=0,r.offset(e),c=r[0].offsetWidth,u=r[0].offsetHeight),this.replaceArrow(h-i+c,c,"left")}else this.replaceArrow(u-o,u,"top");a&&r.offset(e)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&a.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,a=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(a.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?a.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,a){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-a,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-a/2,left:e.left-n}:{top:e.top+e.height/2-a/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var a=t(this),r=a.data("bs.tooltip"),i="object"==typeof n&&n;(r||"destroy"!=n)&&(r||a.data("bs.tooltip",r=new e(this,i)),"string"==typeof n&&r[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var a=t(this),r=a.data("bs.popover"),i="object"==typeof n&&n;(r||"destroy"!=n)&&(r||a.data("bs.popover",r=new e(this,i)),"string"==typeof n&&r[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(n,a){var r,i=t.proxy(this.process,this);this.$element=t(t(n).is("body")?window:n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",i),this.options=t.extend({},e.DEFAULTS,a),this.selector=(this.options.target||(r=t(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var n=this;this.$body.find(this.selector).map(function(){var a=t(this),r=a.data("target")||a.attr("href"),i=/^#./.test(r)&&t(r);return i&&i.length&&i.is(":visible")&&[[i[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,a=n-this.$scrollElement.height(),r=this.offsets,i=this.targets,o=this.activeTarget;if(e>=a)return o!=(t=i.last()[0])&&this.activate(t);if(o&&e<=r[0])return o!=(t=i[0])&&this.activate(t);for(t=r.length;t--;)o!=i[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(i[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',a=t(n).parents("li").addClass("active");a.parent(".dropdown-menu").length&&(a=a.closest("li.dropdown").addClass("active")),a.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var a=t(this),r=a.data("bs.scrollspy"),i="object"==typeof n&&n;r||a.data("bs.scrollspy",r=new e(this,i)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),a=e.data("target");if(a||(a=e.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],i=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(i),!i.isDefaultPrevented()){var o=t(a);this.activate(e.parent("li"),n),this.activate(o,o.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,n,a){function r(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),a&&a()}var i=n.find("> .active"),o=a&&t.support.transition&&i.hasClass("fade");o?i.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),i.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var a=t(this),r=a.data("bs.tab");r||a.data("bs.tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){"use strict";var e=function(n,a){this.options=t.extend({},e.DEFAULTS,a),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),a=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,o=i.top,s=i.bottom;"top"==this.affixed&&(r.top+=a),"object"!=typeof i&&(s=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var l=null!=this.unpin&&a+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=o&&o>=a?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=t.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-s-this.$element.height()}))}}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var a=t(this),r=a.data("bs.affix"),i="object"==typeof n&&n;r||a.data("bs.affix",r=new e(this,i)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(jQuery),function(){var t=[].slice;!function(e,n){var a;return a=function(){function t(t){var a=this;this.$el=e(t),e(n).resize(function(){return a.refresh()})}return t.prototype.start=function(){var t,e,n,a;if(this._overlay_visible())return!1;for(this._add_overlay_layer(),a=this.$el.find("*[data-intro]:visible"),e=0,n=a.length;n>e;e++)t=a[e],this._show_element(t);return this.$el.trigger("chardinJs:start")},t.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},t.prototype.refresh=function(){var t,e,n,a,r;if(this._overlay_visible()){for(a=this.$el.find("*[data-intro]:visible"),r=[],e=0,n=a.length;n>e;e++)t=a[e],r.push(this._position_helper_layer(t));return r}return this},t.prototype.stop=function(){return this.$el.find(".chardinjs-overlay").fadeOut(function(){return e(this).remove()}),this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),n.removeEventListener?n.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.$el.trigger("chardinJs:stop")},t.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},t.prototype._add_overlay_layer=function(){var t,e,n,a=this;return this._overlay_visible()?!1:(e=document.createElement("div"),n="",e.className="chardinjs-overlay","BODY"===this.$el.prop("tagName")?(n+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",e.setAttribute("style",n)):(t=this._get_offset(this.$el.get()[0]),t&&(n+="width: "+t.width+"px; height:"+t.height+"px; top:"+t.top+"px;left: "+t.left+"px;",e.setAttribute("style",n))),this.$el.get()[0].appendChild(e),e.onclick=function(){return a.stop()},setTimeout(function(){return n+="opacity: .8;opacity: .8;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)';filter: alpha(opacity=80);",e.setAttribute("style",n)},10))},t.prototype._get_position=function(t){return t.getAttribute("data-position")||"bottom"},t.prototype._place_tooltip=function(t){var n,a,r,i,o,s,l;switch(s=e(t).data("tooltip_layer"),l=this._get_offset(s),s.style.top=null,s.style.right=null,s.style.bottom=null,s.style.left=null,this._get_position(t)){case"top":case"bottom":r=this._get_offset(t),o=r.width,a=e(s).width(),s.style.left=""+(o/2-l.width/2)+"px";break;case"left":case"right":r=this._get_offset(t),i=r.height,n=e(s).height(),s.style.top=""+(i/2-l.height/2)+"px"}switch(this._get_position(t)){case"left":return s.style.left="-"+(l.width-34)+"px";case"right":return s.style.right="-"+(l.width-34)+"px";case"bottom":return s.style.bottom="-"+l.height+"px";case"top":return s.style.top="-"+l.height+"px"}},t.prototype._position_helper_layer=function(t){var n,a;return a=e(t).data("helper_layer"),n=this._get_offset(t),a.setAttribute("style","width: "+n.width+"px; height:"+n.height+"px; top:"+n.top+"px; left: "+n.left+"px;")},t.prototype._show_element=function(t){var n,a,r,i;return a=this._get_offset(t),r=document.createElement("div"),i=document.createElement("div"),e(t).data("helper_layer",r).data("tooltip_layer",i),t.id&&r.setAttribute("data-id",t.id),r.className="chardinjs-helper-layer chardinjs-"+this._get_position(t),this._position_helper_layer(t),this.$el.get()[0].appendChild(r),i.className="chardinjs-tooltip chardinjs-"+this._get_position(t),i.innerHTML="<div class='chardinjs-tooltiptext'>"+t.getAttribute("data-intro")+"</div>",r.appendChild(i),this._place_tooltip(t),t.className+=" chardinjs-show-element",n="",t.currentStyle?n=t.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position")),n=n.toLowerCase(),"absolute"!==n&&"relative"!==n?t.className+=" chardinjs-relative-position":void 0},t.prototype._get_offset=function(t){var e,n,a;for(e={width:t.offsetWidth,height:t.offsetHeight},n=0,a=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)n+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent;return e.top=a,e.left=n,e},t}(),e.fn.extend({chardinJs:function(){var n,r,i,o;return o=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],n=e(this[0]),i=n.data("chardinJs"),i||n.data("chardinJs",i=new a(this,o)),"string"==typeof o&&i[o].apply(i,r),i}})}(window.jQuery,window)}.call(this),/*
 Colors JS Library v1.2.4
 Copyright 2012-2013 Matt Jordan
 Licensed under Creative Commons Attribution-ShareAlike 3.0 Unported. (http://creativecommons.org/licenses/by-sa/3.0/)
 https://github.com/mbjordan/Colors
*/
function(t){var e={},n={};e.render=function(t,e){var n,a={};return"object"==typeof t?("rgb"===e&&(n=["R","G","B","RGB"]),"hsv"===e&&(n=["H","S","V","HSV"]),"hsl"===e&&(n=["H","S","L","HSL"]),a[n[0]]=t[0],a[n[1]]=t[1],a[n[2]]=t[2],a[n[3]]=t[0]+" "+t[1]+" "+t[2],a.a=t,a):void 0},e.paddedHex=function(t){return t=(10>t?"0":"")+t.toString(16),1===t.length?"0"+t:t},Number.prototype.round=function(t){return parseFloat(this.toFixed(t||10))},n.rgb2hex=function(t,n,a){return t=e.paddedHex(t),n=void 0!==n?e.paddedHex(n):t,a=void 0!==a?e.paddedHex(a):t,"#"+t+n+a},n.hex2rgb=function(t){return t=t.replace("#",""),6===t.length?e.render([parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)],"rgb"):parseInt(t,16)},n.hex2hsv=function(t){t="#"==t.charAt(0)?t.substring(1,7):t;var n=parseInt(t.substring(0,2),16)/255,a=parseInt(t.substring(2,4),16)/255;t=parseInt(t.substring(4,6),16)/255;var r,i,o=0,s=0,l=0,s=Math.min(n,a,t),c=Math.max(n,a,t),u=c-s,l=c;return 0===u?s=o=0:(s=u/c,r=((c-n)/6+u/2)/u,i=((c-a)/6+u/2)/u,u=((c-t)/6+u/2)/u,n==c?o=u-i:a==c?o=1/3+r-u:t==c&&(o=2/3+i-r),0>o&&(o+=1),o>1&&(o-=1)),e.render([Math.round(360*o),Math.round(100*s),Math.round(100*l)],"hsv")},n.hsv2rgb=function(t,n,a){var r,i,o,s=[];switch("object"==typeof t?(r=t[0],n=t[1],t=t[2]):(r=t,t=a),n/=100,t/=100,a=Math.floor(r/60%6),i=r/60-a,r=t*(1-n),o=t*(1-i*n),n=t*(1-(1-i)*n),a){case 0:s=[t,n,r];break;case 1:s=[o,t,r];break;case 2:s=[r,t,n];break;case 3:s=[r,o,t];break;case 4:s=[n,r,t];break;case 5:s=[t,r,o]}return e.render([Math.min(255,Math.floor(256*s[0])),Math.min(255,Math.floor(256*s[1])),Math.min(255,Math.floor(256*s[2]))],"rgb")},n.rgb2hsl=function(t,n,a){var r,i,o,s,l;if("object"==typeof t?(r=t[0],n=t[1],t=t[2]):(r=t,t=a),r/=255,n/=255,t/=255,a=Math.max(r,n,t),i=Math.min(r,n,t),s=(a+i)/2,a==i)o=i=0;else{switch(l=a-i,i=s>.5?l/(2-a-i):l/(a+i),a){case r:o=(n-t)/l+(t>n?6:0);break;case n:o=(t-r)/l+2;break;case t:o=(r-n)/l+4}o/=6}return e.render([Math.floor(360*o),(100*i).round(1),(100*s).round(1)],"hsl")},n.hsv2hsl=function(t,n,a){var r,i,o,s,l,c;return"object"==typeof t?(r=t[0],i=t[1],o=t[2]):(r=t,i=n,o=a),o=this.hsv2rgb(r,i,o),r=o.R/255,i=o.G/255,s=o.B/255,l=Math.max(r,i,s),c=Math.min(r,i,s),o=(l+c)/2,l!=c&&(n=.5>o?(l-c)/(l+c):(l-c)/(2-l-c),t=r==l?(i-s)/(l-c):i==l?2+(s-r)/(l-c):4+(r-i)/(l-c)),e.render([Math.floor(t),Math.floor(n),Math.floor(a)],"hsl")},n.name2hex=function(t){return t=t.toLowerCase(),t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[t],void 0===t?"Invalid Color Name":t},n.name2rgb=function(t){return t=this.name2hex(t),/^[a-fA-F0-9#]{7}$/.test(t)?this.hex2rgb(t):e.render(["Invalid Color Name","Invalid Color Name","Invalid Color Name"],"rgb")},n.name2hsv=function(t){return t=this.name2hex(t),/^[a-fA-F0-9#]{7}$/.test(t)?this.hex2hsv(t):e.render(["Invalid Color Name","Invalid Color Name","Invalid Color Name"],"hsv")},n.complement=function(t,n,a){var r;return"string"==typeof t&&/(#([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?)/.test(t)?(t=t.replace("#",""),n="#",6===t.length&&(n+=e.paddedHex(255-this.hex2rgb(t.substr(0,2))),n+=e.paddedHex(255-this.hex2rgb(t.substr(2,2))),n+=e.paddedHex(255-this.hex2rgb(t.substr(4,2)))),3===t.length&&(n+=e.paddedHex(255-this.hex2rgb(t.substr(0,1)+t.substr(0,1))),n+=e.paddedHex(255-this.hex2rgb(t.substr(1,1)+t.substr(1,1))),n+=e.paddedHex(255-this.hex2rgb(t.substr(2,1)+t.substr(2,1)))),n):(void 0!==t&&void 0!==n&&void 0!==a&&(r=[255-t,255-n,255-a]),"object"==typeof t&&(r=[255-t[0],255-t[1],255-t[2]]),e.render(r,"rgb"))},n.rand=function(t){var n,a;if("hex"===t||void 0===t){for(t="",a=0;6>a;a++)n=Math.floor(16*Math.random()),t+="0123456789abcdef".substring(n,n+1);return"#"+t}return"rgb"==t?(t=Math.floor(-254*Math.random()+255),n=Math.floor(-254*Math.random()+255),a=Math.floor(-254*Math.random()+255),e.render([t,n,a],"rgb")):void 0},t.Colors=t.$c=n}(window),!function(){function t(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function e(t){return null!=t&&!isNaN(t)}function n(t){return{left:function(e,n,a,r){for(arguments.length<3&&(a=0),arguments.length<4&&(r=e.length);r>a;){var i=a+r>>>1;t(e[i],n)<0?a=i+1:r=i}return a},right:function(e,n,a,r){for(arguments.length<3&&(a=0),arguments.length<4&&(r=e.length);r>a;){var i=a+r>>>1;t(e[i],n)>0?r=i:a=i+1}return a}}}function a(t){return t.length}function r(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(a){t.prototype=e}}function o(){}function s(t){return co+t in this}function l(t){return t=co+t,t in this&&delete this[t]}function c(){var t=[];return this.forEach(function(e){t.push(e)}),t}function u(){var t=0;for(var e in this)e.charCodeAt(0)===uo&&++t;return t}function h(){for(var t in this)if(t.charCodeAt(0)===uo)return!1;return!0}function d(){}function p(t,e,n){return function(){var a=n.apply(e,arguments);return a===e?t:a}}function f(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,a=ho.length;a>n;++n){var r=ho[n]+e;if(r in t)return r}}function _(){}function g(){}function m(t){function e(){for(var e,a=n,r=-1,i=a.length;++r<i;)(e=a[r].on)&&e.apply(this,arguments);return t}var n=[],a=new o;return e.on=function(e,r){var i,o=a.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,i=n.indexOf(o)).concat(n.slice(i+1)),a.remove(e)),r&&n.push(a.set(e,{on:r})),t)},e}function v(){Vi.event.preventDefault()}function y(){for(var t,e=Vi.event;t=e.sourceEvent;)e=t;return e}function x(t){for(var e=new g,n=0,a=arguments.length;++n<a;)e[arguments[n]]=m(e);return e.of=function(n,a){return function(r){try{var i=r.sourceEvent=Vi.event;r.target=t,Vi.event=r,e[r.type].apply(n,a)}finally{Vi.event=i}}},e}function b(t){return fo(t,yo),t}function w(t){return"function"==typeof t?t:function(){return _o(t,this)}}function k(t){return"function"==typeof t?t:function(){return go(t,this)}}function C(t,e){function n(){this.removeAttribute(t)}function a(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function i(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Vi.ns.qualify(t),null==e?t.local?a:n:"function"==typeof e?t.local?s:o:t.local?i:r}function D(t){return t.trim().replace(/\s+/g," ")}function P(t){return new RegExp("(?:^|\\s+)"+Vi.requote(t)+"(?:\\s+|$)","g")}function S(t){return t.trim().split(/^|\s+/)}function A(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function a(){for(var n=-1,a=e.apply(this,arguments);++n<r;)t[n](this,a)}t=S(t).map(E);var r=t.length;return"function"==typeof e?a:n}function E(t){var e=P(t);return function(n,a){if(r=n.classList)return a?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";a?(e.lastIndex=0,e.test(r)||n.setAttribute("class",D(r+" "+t))):n.setAttribute("class",D(r.replace(e," ")))}}function T(t,e,n){function a(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function i(){var a=e.apply(this,arguments);null==a?this.style.removeProperty(t):this.style.setProperty(t,a,n)}return null==e?a:"function"==typeof e?i:r}function M(t,e){function n(){delete this[t]}function a(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:a}function F(t){return"function"==typeof t?t:(t=Vi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function N(t){return{__data__:t}}function I(t){return function(){return vo(this,t)}}function z(e){return arguments.length||(e=t),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function H(t,e){for(var n=0,a=t.length;a>n;n++)for(var r,i=t[n],o=0,s=i.length;s>o;o++)(r=i[o])&&e(r,o,n);return t}function L(t){return fo(t,bo),t}function B(t){var e,n;return function(a,r,i){var o,s=t[i].update,l=s.length;for(i!=n&&(n=i,e=0),r>=e&&(e=r+1);!(o=s[e])&&++e<l;);return o}}function j(){var t=this.__transition__;t&&++t.active}function O(t,e,n){function a(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function r(){var r=l(e,Xi(arguments));a.call(this),this.addEventListener(t,this[o]=r,r.$=n),r._=e}function i(){var e,n=new RegExp("^__on([^.]+)"+Vi.requote(t)+"$");for(var a in this)if(e=a.match(n)){var r=this[a];this.removeEventListener(e[1],r,r.$),delete this[a]}}var o="__on"+t,s=t.indexOf("."),l=$;s>0&&(t=t.substring(0,s));var c=ko.get(t);return c&&(t=c,l=R),s?e?r:a:e?_:i}function $(t,e){return function(n){var a=Vi.event;Vi.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Vi.event=a}}}function R(t,e){var n=$(t,e);return function(t){var e=this,a=t.relatedTarget;a&&(a===e||8&a.compareDocumentPosition(e))||n.call(e,t)}}function q(){var t=".dragsuppress-"+ ++Do,e="click"+t,n=Vi.select(Zi).on("touchmove"+t,v).on("dragstart"+t,v).on("selectstart"+t,v);if(Co){var a=Ki.style,r=a[Co];a[Co]="none"}return function(i){function o(){n.on(e,null)}n.on(t,null),Co&&(a[Co]=r),i&&(n.on(e,function(){v(),o()},!0),setTimeout(o,0))}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function W(){return Vi.event.changedTouches[0].identifier}function Y(){return Vi.event.target}function U(){return Zi}function V(t){return t>0?1:0>t?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function X(t){return t>1?0:-1>t?Po:Math.acos(t)}function J(t){return t>1?Ao:-1>t?-Ao:Math.asin(t)}function K(t){return((t=Math.exp(t))-1/t)/2}function Z(t){return((t=Math.exp(t))+1/t)/2}function tt(t){return((t=Math.exp(2*t))-1)/(t+1)}function et(t){return(t=Math.sin(t/2))*t}function nt(){}function at(t,e,n){return new rt(t,e,n)}function rt(t,e,n){this.h=t,this.s=e,this.l=n}function it(t,e,n){function a(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(o-i)*t/60:180>t?o:240>t?i+(o-i)*(240-t)/60:i}function r(t){return Math.round(255*a(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,i=2*n-o,vt(r(t+120),r(t),r(t-120))}function ot(t,e,n){return new st(t,e,n)}function st(t,e,n){this.h=t,this.c=e,this.l=n}function lt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),ct(n,Math.cos(t*=Mo)*e,Math.sin(t)*e)}function ct(t,e,n){return new ut(t,e,n)}function ut(t,e,n){this.l=t,this.a=e,this.b=n}function ht(t,e,n){var a=(t+16)/116,r=a+e/500,i=a-n/200;return r=pt(r)*Ro,a=pt(a)*qo,i=pt(i)*Go,vt(_t(3.2404542*r-1.5371385*a-.4985314*i),_t(-.969266*r+1.8760108*a+.041556*i),_t(.0556434*r-.2040259*a+1.0572252*i))}function dt(t,e,n){return t>0?ot(Math.atan2(n,e)*Fo,Math.sqrt(e*e+n*n),t):ot(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ft(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function _t(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function gt(t){return vt(t>>16,255&t>>8,255&t)}function mt(t){return gt(t)+""}function vt(t,e,n){return new yt(t,e,n)}function yt(t,e,n){this.r=t,this.g=e,this.b=n}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function bt(t,e,n){var a,r,i,o=0,s=0,l=0;if(a=/([a-z]+)\((.*)\)/i.exec(t))switch(r=a[2].split(","),a[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Dt(r[0]),Dt(r[1]),Dt(r[2]))}return(i=Uo.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.substring(1),16))||(4===t.length?(o=(3840&i)>>4,o=o>>4|o,s=240&i,s=s>>4|s,l=15&i,l=l<<4|l):7===t.length&&(o=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),e(o,s,l))}function wt(t,e,n){var a,r,i=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-i,l=(o+i)/2;return s?(r=.5>l?s/(o+i):s/(2-o-i),a=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,a*=60):(a=NaN,r=l>0&&1>l?0:a),at(a,r,l)}function kt(t,e,n){t=Ct(t),e=Ct(e),n=Ct(n);var a=ft((.4124564*t+.3575761*e+.1804375*n)/Ro),r=ft((.2126729*t+.7151522*e+.072175*n)/qo),i=ft((.0193339*t+.119192*e+.9503041*n)/Go);return ct(116*r-16,500*(a-r),200*(r-i))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Dt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Pt(t){return"function"==typeof t?t:function(){return t}}function St(t){return t}function At(t){return function(e,n,a){return 2===arguments.length&&"function"==typeof n&&(a=n,n=null),Et(e,n,t,a)}}function Et(t,e,n,a){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(i,l)}catch(a){return void o.error.call(i,a)}o.load.call(i,t)}else o.error.call(i,l)}var i={},o=Vi.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;return!Zi.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=Vi.event;Vi.event=t;try{o.progress.call(i,l)}finally{Vi.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(Xi(arguments)))}}),i.send=function(n,a,r){if(2===arguments.length&&"function"==typeof a&&(r=a,a=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=c&&(l.responseType=c),null!=r&&i.on("error",r).on("load",function(t){r(null,t)}),o.beforesend.call(i,l),l.send(null==a?null:a),i},i.abort=function(){return l.abort(),i},Vi.rebind(i,o,"on"),null==a?i:i.get(Tt(a))}function Tt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Mt(){var t=Ft(),e=Nt()-t;e>24?(isFinite(e)&&(clearTimeout(Jo),Jo=setTimeout(Mt,e)),Xo=0):(Xo=1,Zo(Mt))}function Ft(){var t=Date.now();for(Ko=Vo;Ko;)t>=Ko.t&&(Ko.f=Ko.c(t-Ko.t)),Ko=Ko.n;return t}function Nt(){for(var t,e=Vo,n=1/0;e;)e.f?e=t?t.n=e.n:Vo=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Qo=t,n}function It(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function zt(t,e){var n=Math.pow(10,3*lo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ht(t){var e=t.decimal,n=t.thousands,a=t.grouping,r=t.currency,i=a?function(t){for(var e=t.length,r=[],i=0,o=a[0];e>0&&o>0;)r.push(t.substring(e-=o,e+o)),o=a[i=(i+1)%a.length];return r.reverse().join(n)}:St;return function(t){var n=es.exec(t),a=n[1]||" ",o=n[2]||">",s=n[3]||"",l=n[4]||"",c=n[5],u=+n[6],h=n[7],d=n[8],p=n[9],f=1,_="",g="",m=!1;switch(d&&(d=+d.substring(1)),(c||"0"===a&&"="===o)&&(c=a="0",o="=",h&&(u-=Math.floor((u-1)/4))),p){case"n":h=!0,p="g";break;case"%":f=100,g="%",p="f";break;case"p":f=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(_="0"+p.toLowerCase());case"c":case"d":m=!0,d=0;break;case"s":f=-1,p="r"}"$"===l&&(_=r[0],g=r[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):("e"==p||"f"==p)&&(d=Math.max(0,Math.min(20,d)))),p=ns.get(p)||Lt;var v=c&&h;return function(t){var n=g;if(m&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):s;if(0>f){var l=Vi.formatPrefix(t,d);t=l.scale(t),n=l.symbol+g}else t*=f;t=p(t,d);var y=t.lastIndexOf("."),x=0>y?t:t.substring(0,y),b=0>y?"":e+t.substring(y+1);!c&&h&&(x=i(x));var w=_.length+x.length+b.length+(v?0:r.length),k=u>w?new Array(w=u-w+1).join(a):"";return v&&(x=i(k+x)),r+=_,t=x+b,("<"===o?r+t+k:">"===o?k+r+t:"^"===o?k.substring(0,w>>=1)+r+t+k.substring(w):r+(v?t:k+t))+n}}}function Lt(t){return t+""}function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function jt(t,e,n){function a(e){var n=t(e),a=i(n,1);return a-e>e-n?n:a}function r(n){return e(n=t(new rs(n-1)),1),n}function i(t,n){return e(t=new rs(+t),n),t}function o(t,a,i){var o=r(t),s=[];if(i>1)for(;a>o;)n(o)%i||s.push(new Date(+o)),e(o,1);else for(;a>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{rs=Bt;var a=new Bt;return a._=t,o(a,e,n)}finally{rs=Date}}t.floor=t,t.round=a,t.ceil=r,t.offset=i,t.range=o;var l=t.utc=Ot(t);return l.floor=l,l.round=Ot(a),l.ceil=Ot(r),l.offset=Ot(i),l.range=s,t}function Ot(t){return function(e,n){try{rs=Bt;var a=new Bt;return a._=e,t(a,n)._}finally{rs=Date}}}function $t(t){function e(t){function e(e){for(var n,r,i,o=[],s=-1,l=0;++s<a;)37===t.charCodeAt(s)&&(o.push(t.substring(l,s)),null!=(r=os[n=t.charAt(++s)])&&(n=t.charAt(++s)),(i=A[n])&&(n=i(e,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(t.substring(l,s)),o.join("")}var a=t.length;return e.parse=function(e){var a={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(a,t,e,0);if(r!=e.length)return null;"p"in a&&(a.H=a.H%12+12*a.p);var i=null!=a.Z&&rs!==Bt,o=new(i?Bt:rs);return"j"in a?o.setFullYear(a.y,0,a.j):"w"in a&&("W"in a||"U"in a)?(o.setFullYear(a.y,0,1),o.setFullYear(a.y,0,"W"in a?(a.w+6)%7+7*a.W-(o.getDay()+5)%7:a.w+7*a.U-(o.getDay()+6)%7)):o.setFullYear(a.y,a.m,a.d),o.setHours(a.H+Math.floor(a.Z/100),a.M+a.Z%100,a.S,a.L),i?o._:o},e.toString=function(){return t},e}function n(t,e,n,a){for(var r,i,o,s=0,l=e.length,c=n.length;l>s;){if(a>=c)return-1;if(r=e.charCodeAt(s++),37===r){if(o=e.charAt(s++),i=E[o in os?e.charAt(s++):o],!i||(a=i(t,n,a))<0)return-1}else if(r!=n.charCodeAt(a++))return-1}return a}function a(t,e,n){w.lastIndex=0;var a=w.exec(e.substring(n));return a?(t.w=k.get(a[0].toLowerCase()),n+a[0].length):-1}function r(t,e,n){x.lastIndex=0;var a=x.exec(e.substring(n));return a?(t.w=b.get(a[0].toLowerCase()),n+a[0].length):-1}function i(t,e,n){P.lastIndex=0;var a=P.exec(e.substring(n));return a?(t.m=S.get(a[0].toLowerCase()),n+a[0].length):-1}function o(t,e,n){C.lastIndex=0;var a=C.exec(e.substring(n));return a?(t.m=D.get(a[0].toLowerCase()),n+a[0].length):-1}function s(t,e,a){return n(t,A.c.toString(),e,a)}function l(t,e,a){return n(t,A.x.toString(),e,a)}function c(t,e,a){return n(t,A.X.toString(),e,a)}function u(t,e,n){var a=y.get(e.substring(n,n+=2).toLowerCase());return null==a?-1:(t.p=a,n)}var h=t.dateTime,d=t.date,p=t.time,f=t.periods,_=t.days,g=t.shortDays,m=t.months,v=t.shortMonths;e.utc=function(t){function n(t){try{rs=Bt;var e=new rs;return e._=t,a(e)}finally{rs=Date}}var a=e(t);return n.parse=function(t){try{rs=Bt;var e=a.parse(t);return e&&e._}finally{rs=Date}},n.toString=a.toString,n},e.multi=e.utc.multi=se;var y=Vi.map(),x=qt(_),b=Gt(_),w=qt(g),k=Gt(g),C=qt(m),D=Gt(m),P=qt(v),S=Gt(v);f.forEach(function(t,e){y.set(t.toLowerCase(),e)});var A={a:function(t){return g[t.getDay()]},A:function(t){return _[t.getDay()]},b:function(t){return v[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(h),d:function(t,e){return Rt(t.getDate(),e,2)},e:function(t,e){return Rt(t.getDate(),e,2)},H:function(t,e){return Rt(t.getHours(),e,2)},I:function(t,e){return Rt(t.getHours()%12||12,e,2)},j:function(t,e){return Rt(1+as.dayOfYear(t),e,3)},L:function(t,e){return Rt(t.getMilliseconds(),e,3)},m:function(t,e){return Rt(t.getMonth()+1,e,2)},M:function(t,e){return Rt(t.getMinutes(),e,2)},p:function(t){return f[+(t.getHours()>=12)]},S:function(t,e){return Rt(t.getSeconds(),e,2)},U:function(t,e){return Rt(as.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Rt(as.mondayOfYear(t),e,2)},x:e(d),X:e(p),y:function(t,e){return Rt(t.getFullYear()%100,e,2)},Y:function(t,e){return Rt(t.getFullYear()%1e4,e,4)},Z:ie,"%":function(){return"%"}},E={a:a,A:r,b:i,B:o,c:s,d:Zt,e:Zt,H:ee,I:ee,j:te,L:re,m:Kt,M:ne,p:u,S:ae,U:Yt,w:Wt,W:Ut,x:l,X:c,y:Qt,Y:Vt,Z:Xt,"%":oe};return e}function Rt(t,e,n){var a=0>t?"-":"",r=(a?-t:t)+"",i=r.length;return a+(n>i?new Array(n-i+1).join(e)+r:r)}function qt(t){return new RegExp("^(?:"+t.map(Vi.requote).join("|")+")","i")}function Gt(t){for(var e=new o,n=-1,a=t.length;++n<a;)e.set(t[n].toLowerCase(),n);return e}function Wt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Yt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n));return a?(t.U=+a[0],n+a[0].length):-1}function Ut(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n));return a?(t.W=+a[0],n+a[0].length):-1}function Vt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function Qt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.y=Jt(+a[0]),n+a[0].length):-1}function Xt(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=-e,n+5):-1}function Jt(t){return t+(t>68?1900:2e3)}function Kt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function Zt(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function te(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+3));return a?(t.j=+a[0],n+a[0].length):-1}function ee(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function ne(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function ae(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function re(t,e,n){ss.lastIndex=0;var a=ss.exec(e.substring(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function ie(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",a=~~(lo(e)/60),r=lo(e)%60;return n+Rt(a,"0",2)+Rt(r,"0",2)}function oe(t,e,n){ls.lastIndex=0;var a=ls.exec(e.substring(n,n+1));return a?n+a[0].length:-1}function se(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,a=t[n];!a[1](e);)a=t[++n];return a[0](e)}}function le(){}function ce(t,e,n){var a=n.s=t+e,r=a-t,i=a-r;n.t=t-i+(e-r)}function ue(t,e){t&&ds.hasOwnProperty(t.type)&&ds[t.type](t,e)}function he(t,e,n){var a,r=-1,i=t.length-n;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function de(t,e){var n=-1,a=t.length;for(e.polygonStart();++n<a;)he(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Mo,e=e*Mo/2+Po/4;var n=t-a,o=n>=0?1:-1,s=o*n,l=Math.cos(e),c=Math.sin(e),u=i*c,h=r*l+u*Math.cos(s),d=u*o*Math.sin(s);fs.add(Math.atan2(d,h)),a=t,r=l,i=c}var e,n,a,r,i;_s.point=function(o,s){_s.point=t,a=(e=o)*Mo,r=Math.cos(s=(n=s)*Mo/2+Po/4),i=Math.sin(s)},_s.lineEnd=function(){t(e,n)}}function fe(t){var e=t[0],n=t[1],a=Math.cos(n);return[a*Math.cos(e),a*Math.sin(e),Math.sin(n)]}function _e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ge(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ve(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ye(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function xe(t){return[Math.atan2(t[1],t[0]),J(t[2])]}function be(t,e){return lo(t[0]-e[0])<Eo&&lo(t[1]-e[1])<Eo}function we(t,e){t*=Mo;var n=Math.cos(e*=Mo);ke(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ke(t,e,n){++gs,vs+=(t-vs)/gs,ys+=(e-ys)/gs,xs+=(n-xs)/gs}function Ce(){function t(t,r){t*=Mo;var i=Math.cos(r*=Mo),o=i*Math.cos(t),s=i*Math.sin(t),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*l-a*s)*c+(c=a*o-e*l)*c+(c=e*s-n*o)*c),e*o+n*s+a*l);ms+=c,bs+=c*(e+(e=o)),ws+=c*(n+(n=s)),ks+=c*(a+(a=l)),ke(e,n,a)}var e,n,a;Ss.point=function(r,i){r*=Mo;var o=Math.cos(i*=Mo);e=o*Math.cos(r),n=o*Math.sin(r),a=Math.sin(i),Ss.point=t,ke(e,n,a)}}function De(){Ss.point=we}function Pe(){function t(t,e){t*=Mo;var n=Math.cos(e*=Mo),o=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),c=r*l-i*s,u=i*o-a*l,h=a*s-r*o,d=Math.sqrt(c*c+u*u+h*h),p=a*o+r*s+i*l,f=d&&-X(p)/d,_=Math.atan2(d,p);Cs+=f*c,Ds+=f*u,Ps+=f*h,ms+=_,bs+=_*(a+(a=o)),ws+=_*(r+(r=s)),ks+=_*(i+(i=l)),ke(a,r,i)}var e,n,a,r,i;Ss.point=function(o,s){e=o,n=s,Ss.point=t,o*=Mo;var l=Math.cos(s*=Mo);a=l*Math.cos(o),r=l*Math.sin(o),i=Math.sin(s),ke(a,r,i)},Ss.lineEnd=function(){t(e,n),Ss.lineEnd=De,Ss.point=we}}function Se(){return!0}function Ae(t,e,n,a,r){var i=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],a=t[e];if(be(n,a)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Te(n,t,null,!0),c=new Te(n,null,l,!1);l.o=c,i.push(l),o.push(c),l=new Te(a,t,null,!1),c=new Te(a,null,l,!0),l.o=c,i.push(l),o.push(c)}}),o.sort(e),Ee(i),Ee(o),i.length){for(var s=0,l=n,c=o.length;c>s;++s)o[s].e=l=!l;for(var u,h,d=i[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(var s=0,c=u.length;c>s;++s)r.point((h=u[s])[0],h[1]);else a(p.x,p.n.x,1,r);p=p.n}else{if(f){u=p.p.z;for(var s=u.length-1;s>=0;--s)r.point((h=u[s])[0],h[1])}else a(p.x,p.p.x,-1,r);p=p.p}p=p.o,u=p.z,f=!f}while(!p.v);r.lineEnd()}}}function Ee(t){if(e=t.length){for(var e,n,a=0,r=t[0];++a<e;)r.n=n=t[a],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Te(t,e,n,a){this.x=t,this.z=e,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function Me(t,e,n,a){return function(r,i){function o(e,n){var a=r(e,n);t(e=a[0],n=a[1])&&i.point(e,n)}function s(t,e){var n=r(t,e);g.point(n[0],n[1])}function l(){v.point=s,g.lineStart()}function c(){v.point=o,g.lineEnd()}function u(t,e){_.push([t,e]);var n=r(t,e);x.point(n[0],n[1])}function h(){x.lineStart(),_=[]}function d(){u(_[0][0],_[0][1]),x.lineEnd();var t,e=x.clean(),n=y.buffer(),a=n.length;if(_.pop(),f.push(_),_=null,a)if(1&e){t=n[0];var r,a=t.length-1,o=-1;if(a>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<a;)i.point((r=t[o])[0],r[1]);i.lineEnd()}}else a>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Fe))}var p,f,_,g=e(i),m=r.invert(a[0],a[1]),v={point:o,lineStart:l,lineEnd:c,polygonStart:function(){v.point=u,v.lineStart=h,v.lineEnd=d,p=[],f=[]},polygonEnd:function(){v.point=o,v.lineStart=l,v.lineEnd=c,p=Vi.merge(p);var t=ze(m,f);p.length?(b||(i.polygonStart(),b=!0),Ae(p,Ie,t,n,i)):t&&(b||(i.polygonStart(),b=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),p=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=Ne(),x=e(y),b=!1;return v}}function Fe(t){return t.length>1}function Ne(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:_,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ie(t,e){return((t=t.x)[0]<0?t[1]-Ao-Eo:Ao-t[1])-((e=e.x)[0]<0?e[1]-Ao-Eo:Ao-e[1])}function ze(t,e){var n=t[0],a=t[1],r=[Math.sin(n),-Math.cos(n),0],i=0,o=0;fs.reset();for(var s=0,l=e.length;l>s;++s){var c=e[s],u=c.length;if(u)for(var h=c[0],d=h[0],p=h[1]/2+Po/4,f=Math.sin(p),_=Math.cos(p),g=1;;){g===u&&(g=0),t=c[g];var m=t[0],v=t[1]/2+Po/4,y=Math.sin(v),x=Math.cos(v),b=m-d,w=b>=0?1:-1,k=w*b,C=k>Po,D=f*y;if(fs.add(Math.atan2(D*w*Math.sin(k),_*x+D*Math.cos(k))),i+=C?b+w*So:b,C^d>=n^m>=n){var P=ge(fe(h),fe(t));ye(P);var S=ge(r,P);ye(S);var A=(C^b>=0?-1:1)*J(S[2]);(a>A||a===A&&(P[0]||P[1]))&&(o+=C^b>=0?1:-1)}if(!g++)break;d=m,f=y,_=x,h=t}}return(-Eo>i||Eo>i&&0>fs)^1&o}function He(t){var e,n=NaN,a=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,o){var s=i>0?Po:-Po,l=lo(i-n);lo(l-Po)<Eo?(t.point(n,a=(a+o)/2>0?Ao:-Ao),t.point(r,a),t.lineEnd(),t.lineStart(),t.point(s,a),t.point(i,a),e=0):r!==s&&l>=Po&&(lo(n-r)<Eo&&(n-=r*Eo),lo(i-s)<Eo&&(i-=s*Eo),a=Le(n,a,i,o),t.point(r,a),t.lineEnd(),t.lineStart(),t.point(s,a),e=0),t.point(n=i,a=o),r=s},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-e}}}function Le(t,e,n,a){var r,i,o=Math.sin(t-n);return lo(o)>Eo?Math.atan((Math.sin(e)*(i=Math.cos(a))*Math.sin(n)-Math.sin(a)*(r=Math.cos(e))*Math.sin(t))/(r*i*o)):(e+a)/2}function Be(t,e,n,a){var r;if(null==t)r=n*Ao,a.point(-Po,r),a.point(0,r),a.point(Po,r),a.point(Po,0),a.point(Po,-r),a.point(0,-r),a.point(-Po,-r),a.point(-Po,0),a.point(-Po,r);else if(lo(t[0]-e[0])>Eo){var i=t[0]<e[0]?Po:-Po;r=n*i/2,a.point(-i,r),a.point(0,r),a.point(i,r)}else a.point(e[0],e[1])}function je(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t){var n,i,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var p,f=[h,d],_=e(h,d),g=o?_?0:r(h,d):_?r(h+(0>h?Po:-Po),d):0;if(!n&&(c=l=_)&&t.lineStart(),_!==l&&(p=a(n,f),(be(n,p)||be(f,p))&&(f[0]+=Eo,f[1]+=Eo,_=e(f[0],f[1]))),_!==l)u=0,_?(t.lineStart(),p=a(f,n),t.point(p[0],p[1])):(p=a(n,f),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&o^_){var m;g&i||!(m=a(f,n,!0))||(u=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!_||n&&be(n,f)||t.point(f[0],f[1]),n=f,l=_,i=g},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return u|(c&&l)<<1}}}function a(t,e,n){var a=fe(t),r=fe(e),o=[1,0,0],s=ge(a,r),l=_e(s,s),c=s[0],u=l-c*c;if(!u)return!n&&t;var h=i*l/u,d=-i*c/u,p=ge(o,s),f=ve(o,h),_=ve(s,d);me(f,_);var g=p,m=_e(f,g),v=_e(g,g),y=m*m-v*(_e(f,f)-1);if(!(0>y)){var x=Math.sqrt(y),b=ve(g,(-m-x)/v);if(me(b,f),b=xe(b),!n)return b;var w,k=t[0],C=e[0],D=t[1],P=e[1];k>C&&(w=k,k=C,C=w);var S=C-k,A=lo(S-Po)<Eo,E=A||Eo>S;if(!A&&D>P&&(w=D,D=P,P=w),E?A?D+P>0^b[1]<(lo(b[0]-k)<Eo?D:P):D<=b[1]&&b[1]<=P:S>Po^(k<=b[0]&&b[0]<=C)){var T=ve(g,(-m+x)/v);return me(T,f),[b,xe(T)]}}}function r(e,n){var a=o?t:Po-t,r=0;return-a>e?r|=1:e>a&&(r|=2),-a>n?r|=4:n>a&&(r|=8),r}var i=Math.cos(t),o=i>0,s=lo(i)>Eo,l=fn(t,6*Mo);return Me(e,n,l,o?[0,-t]:[-Po,t-Po])}function Oe(t,e,n,a){return function(r){var i,o=r.a,s=r.b,l=o.x,c=o.y,u=s.x,h=s.y,d=0,p=1,f=u-l,_=h-c;if(i=t-l,f||!(i>0)){if(i/=f,0>f){if(d>i)return;p>i&&(p=i)}else if(f>0){
if(i>p)return;i>d&&(d=i)}if(i=n-l,f||!(0>i)){if(i/=f,0>f){if(i>p)return;i>d&&(d=i)}else if(f>0){if(d>i)return;p>i&&(p=i)}if(i=e-c,_||!(i>0)){if(i/=_,0>_){if(d>i)return;p>i&&(p=i)}else if(_>0){if(i>p)return;i>d&&(d=i)}if(i=a-c,_||!(0>i)){if(i/=_,0>_){if(i>p)return;i>d&&(d=i)}else if(_>0){if(d>i)return;p>i&&(p=i)}return d>0&&(r.a={x:l+d*f,y:c+d*_}),1>p&&(r.b={x:l+p*f,y:c+p*_}),r}}}}}}function $e(t,e,n,a){function r(a,r){return lo(a[0]-t)<Eo?r>0?0:3:lo(a[0]-n)<Eo?r>0?2:1:lo(a[1]-e)<Eo?r>0?1:0:r>0?3:2}function i(t,e){return o(t.x,e.x)}function o(t,e){var n=r(t,1),a=r(e,1);return n!==a?n-a:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=g.length,a=t[1],r=0;n>r;++r)for(var i,o=1,s=g[r],l=s.length,c=s[0];l>o;++o)i=s[o],c[1]<=a?i[1]>a&&Q(c,i,t)>0&&++e:i[1]<=a&&Q(c,i,t)<0&&--e,c=i;return 0!==e}function c(i,s,l,c){var u=0,h=0;if(null==i||(u=r(i,l))!==(h=r(s,l))||o(i,s)<0^l>0){do c.point(0===u||3===u?t:n,u>1?a:e);while((u=(u+l+4)%4)!==h)}else c.point(s[0],s[1])}function u(r,i){return r>=t&&n>=r&&i>=e&&a>=i}function h(t,e){u(t,e)&&s.point(t,e)}function d(){E.point=f,g&&g.push(m=[]),C=!0,k=!1,b=w=NaN}function p(){_&&(f(v,y),x&&k&&S.rejoin(),_.push(S.buffer())),E.point=h,k&&s.lineEnd()}function f(t,e){t=Math.max(-Es,Math.min(Es,t)),e=Math.max(-Es,Math.min(Es,e));var n=u(t,e);if(g&&m.push([t,e]),C)v=t,y=e,x=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&k)s.point(t,e);else{var a={a:{x:b,y:w},b:{x:t,y:e}};A(a)?(k||(s.lineStart(),s.point(a.a.x,a.a.y)),s.point(a.b.x,a.b.y),n||s.lineEnd(),D=!1):n&&(s.lineStart(),s.point(t,e),D=!1)}b=t,w=e,k=n}var _,g,m,v,y,x,b,w,k,C,D,P=s,S=Ne(),A=Oe(t,e,n,a),E={point:h,lineStart:d,lineEnd:p,polygonStart:function(){s=S,_=[],g=[],D=!0},polygonEnd:function(){s=P,_=Vi.merge(_);var e=l([t,a]),n=D&&e,r=_.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),c(null,null,1,s),s.lineEnd()),r&&Ae(_,i,e,c,s),s.polygonEnd()),_=g=m=null}};return E}}function Re(t,e){function n(n,a){return n=t(n,a),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,a){return n=e.invert(n,a),n&&t.invert(n[0],n[1])}),n}function qe(t){var e=0,n=Po/3,a=on(t),r=a(e,n);return r.parallels=function(t){return arguments.length?a(e=t[0]*Po/180,n=t[1]*Po/180):[180*(e/Po),180*(n/Po)]},r}function Ge(t,e){function n(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var a=Math.sin(t),r=(a+Math.sin(e))/2,i=1+a*(2*r-a),o=Math.sqrt(i)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,J((i-(t*t+n*n)*r*r)/(2*r))]},n}function We(){function t(t,e){Ms+=r*t-a*e,a=t,r=e}var e,n,a,r;Hs.point=function(i,o){Hs.point=t,e=a=i,n=r=o},Hs.lineEnd=function(){t(e,n)}}function Ye(t,e){Fs>t&&(Fs=t),t>Is&&(Is=t),Ns>e&&(Ns=e),e>zs&&(zs=e)}function Ue(){function t(t,e){o.push("M",t,",",e,i)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function a(){s.point=t}function r(){o.push("Z")}var i=Ve(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:a,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=a,s.point=t},pointRadius:function(t){return i=Ve(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ve(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qe(t,e){vs+=t,ys+=e,++xs}function Xe(){function t(t,a){var r=t-e,i=a-n,o=Math.sqrt(r*r+i*i);bs+=o*(e+t)/2,ws+=o*(n+a)/2,ks+=o,Qe(e=t,n=a)}var e,n;Bs.point=function(a,r){Bs.point=t,Qe(e=a,n=r)}}function Je(){Bs.point=Qe}function Ke(){function t(t,e){var n=t-a,i=e-r,o=Math.sqrt(n*n+i*i);bs+=o*(a+t)/2,ws+=o*(r+e)/2,ks+=o,o=r*t-a*e,Cs+=o*(a+t),Ds+=o*(r+e),Ps+=3*o,Qe(a=t,r=e)}var e,n,a,r;Bs.point=function(i,o){Bs.point=t,Qe(e=a=i,n=r=o)},Bs.lineEnd=function(){t(e,n)}}function Ze(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,o,0,So)}function n(e,n){t.moveTo(e,n),s.point=a}function a(e,n){t.lineTo(e,n)}function r(){s.point=e}function i(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return o=t,s},result:_};return s}function tn(t){function e(t){return(s?a:n)(t)}function n(e){return an(e,function(n,a){n=t(n,a),e.point(n[0],n[1])})}function a(e){function n(n,a){n=t(n,a),e.point(n[0],n[1])}function a(){y=NaN,C.point=i,e.lineStart()}function i(n,a){var i=fe([n,a]),o=t(n,a);r(y,x,v,b,w,k,y=o[0],x=o[1],v=n,b=i[0],w=i[1],k=i[2],s,e),e.point(y,x)}function o(){C.point=n,e.lineEnd()}function l(){a(),C.point=c,C.lineEnd=u}function c(t,e){i(h=t,d=e),p=y,f=x,_=b,g=w,m=k,C.point=i}function u(){r(y,x,v,b,w,k,p,f,h,_,g,m,s,e),C.lineEnd=o,o()}var h,d,p,f,_,g,m,v,y,x,b,w,k,C={point:n,lineStart:a,lineEnd:o,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=a}};return C}function r(e,n,a,s,l,c,u,h,d,p,f,_,g,m){var v=u-e,y=h-n,x=v*v+y*y;if(x>4*i&&g--){var b=s+p,w=l+f,k=c+_,C=Math.sqrt(b*b+w*w+k*k),D=Math.asin(k/=C),P=lo(lo(k)-1)<Eo||lo(a-d)<Eo?(a+d)/2:Math.atan2(w,b),S=t(P,D),A=S[0],E=S[1],T=A-e,M=E-n,F=y*T-v*M;(F*F/x>i||lo((v*T+y*M)/x-.5)>.3||o>s*p+l*f+c*_)&&(r(e,n,a,s,l,c,A,E,P,b/=C,w/=C,k,g,m),m.point(A,E),r(A,E,P,b,w,k,u,h,d,p,f,_,g,m))}}var i=.5,o=Math.cos(30*Mo),s=16;return e.precision=function(t){return arguments.length?(s=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function en(t){var e=tn(function(e,n){return t([e*Fo,n*Fo])});return function(t){return sn(e(t))}}function nn(t){this.stream=t}function an(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function rn(t){return on(function(){return t})()}function on(t){function e(t){return t=s(t[0]*Mo,t[1]*Mo),[t[0]*d+l,c-t[1]*d]}function n(t){return t=s.invert((t[0]-l)/d,(c-t[1])/d),t&&[t[0]*Fo,t[1]*Fo]}function a(){s=Re(o=un(m,v,y),i);var t=i(_,g);return l=p-t[0]*d,c=f+t[1]*d,r()}function r(){return u&&(u.valid=!1,u=null),e}var i,o,s,l,c,u,h=tn(function(t,e){return t=i(t,e),[t[0]*d+l,c-t[1]*d]}),d=150,p=480,f=250,_=0,g=0,m=0,v=0,y=0,x=As,b=St,w=null,k=null;return e.stream=function(t){return u&&(u.valid=!1),u=sn(x(o,h(b(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(x=null==t?(w=t,As):je((w=+t)*Mo),r()):w},e.clipExtent=function(t){return arguments.length?(k=t,b=t?$e(t[0][0],t[0][1],t[1][0],t[1][1]):St,r()):k},e.scale=function(t){return arguments.length?(d=+t,a()):d},e.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],a()):[p,f]},e.center=function(t){return arguments.length?(_=t[0]%360*Mo,g=t[1]%360*Mo,a()):[_*Fo,g*Fo]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Mo,v=t[1]%360*Mo,y=t.length>2?t[2]%360*Mo:0,a()):[m*Fo,v*Fo,y*Fo]},Vi.rebind(e,h,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,a()}}function sn(t){return an(t,function(e,n){t.point(e*Mo,n*Mo)})}function ln(t,e){return[t,e]}function cn(t,e){return[t>Po?t-So:-Po>t?t+So:t,e]}function un(t,e,n){return t?e||n?Re(dn(t),pn(e,n)):dn(t):e||n?pn(e,n):cn}function hn(t){return function(e,n){return e+=t,[e>Po?e-So:-Po>e?e+So:e,n]}}function dn(t){var e=hn(t);return e.invert=hn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,c=Math.sin(e),u=c*a+s*r;return[Math.atan2(l*i-u*o,s*a-c*r),J(u*i+l*o)]}var a=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,c=Math.sin(e),u=c*i-l*o;return[Math.atan2(l*i+c*o,s*a+u*r),J(u*a-s*r)]},n}function fn(t,e){var n=Math.cos(t),a=Math.sin(t);return function(r,i,o,s){var l=o*e;null!=r?(r=_n(n,r),i=_n(n,i),(o>0?i>r:r>i)&&(r+=o*So)):(r=t+o*So,i=t-.5*l);for(var c,u=r;o>0?u>i:i>u;u-=l)s.point((c=xe([n,-a*Math.cos(u),-a*Math.sin(u)]))[0],c[1])}}function _n(t,e){var n=fe(e);n[0]-=t,ye(n);var a=X(-n[1]);return((-n[2]<0?-a:a)+2*Math.PI-Eo)%(2*Math.PI)}function gn(t,e,n){var a=Vi.range(t,e-Eo,n).concat(e);return function(t){return a.map(function(e){return[t,e]})}}function mn(t,e,n){var a=Vi.range(t,e-Eo,n).concat(e);return function(t){return a.map(function(e){return[e,t]})}}function vn(t){return t.source}function yn(t){return t.target}function xn(t,e,n,a){var r=Math.cos(e),i=Math.sin(e),o=Math.cos(a),s=Math.sin(a),l=r*Math.cos(t),c=r*Math.sin(t),u=o*Math.cos(n),h=o*Math.sin(n),d=2*Math.asin(Math.sqrt(et(a-e)+r*o*et(n-t))),p=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,a=n*l+e*u,r=n*c+e*h,o=n*i+e*s;return[Math.atan2(r,a)*Fo,Math.atan2(o,Math.sqrt(a*a+r*r))*Fo]}:function(){return[t*Fo,e*Fo]};return f.distance=d,f}function bn(){function t(t,r){var i=Math.sin(r*=Mo),o=Math.cos(r),s=lo((t*=Mo)-e),l=Math.cos(s);js+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=a*i-n*o*l)*s),n*i+a*o*l),e=t,n=i,a=o}var e,n,a;Os.point=function(r,i){e=r*Mo,n=Math.sin(i*=Mo),a=Math.cos(i),Os.point=t},Os.lineEnd=function(){Os.point=Os.lineEnd=_}}function wn(t,e){function n(e,n){var a=Math.cos(e),r=Math.cos(n),i=t(a*r);return[i*r*Math.sin(e),i*Math.sin(n)]}return n.invert=function(t,n){var a=Math.sqrt(t*t+n*n),r=e(a),i=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*i,a*o),Math.asin(a&&n*i/a)]},n}function kn(t,e){function n(t,e){o>0?-Ao+Eo>e&&(e=-Ao+Eo):e>Ao-Eo&&(e=Ao-Eo);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var a=Math.cos(t),r=function(t){return Math.tan(Po/4+t/2)},i=t===e?Math.sin(t):Math.log(a/Math.cos(e))/Math.log(r(e)/r(t)),o=a*Math.pow(r(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,a=V(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/a,1/i))-Ao]},n):Dn}function Cn(t,e){function n(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}var a=Math.cos(t),r=t===e?Math.sin(t):(a-Math.cos(e))/(e-t),i=a/r+t;return lo(r)<Eo?ln:(n.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-V(r)*Math.sqrt(t*t+n*n)]},n)}function Dn(t,e){return[t,Math.log(Math.tan(Po/4+e/2))]}function Pn(t){var e,n=rn(t),a=n.scale,r=n.translate,i=n.clipExtent;return n.scale=function(){var t=a.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=i.apply(n,arguments);if(o===n){if(e=null==t){var s=Po*a(),l=r();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function Sn(t,e){return[Math.log(Math.tan(Po/4+e/2)),-t]}function An(t){return t[0]}function En(t){return t[1]}function Tn(t){for(var e=t.length,n=[0,1],a=2,r=2;e>r;r++){for(;a>1&&Q(t[n[a-2]],t[n[a-1]],t[r])<=0;)--a;n[a++]=r}return n.slice(0,a)}function Mn(t,e){return t[0]-e[0]||t[1]-e[1]}function Fn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Nn(t,e,n,a){var r=t[0],i=n[0],o=e[0]-r,s=a[0]-i,l=t[1],c=n[1],u=e[1]-l,h=a[1]-c,d=(s*(l-c)-h*(r-i))/(h*o-s*u);return[r+d*o,l+d*u]}function In(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function zn(){na(this),this.edge=this.site=this.circle=null}function Hn(t){var e=Ks.pop()||new zn;return e.site=t,e}function Ln(t){Un(t),Qs.remove(t),Ks.push(t),na(t)}function Bn(t){var e=t.circle,n=e.x,a=e.cy,r={x:n,y:a},i=t.P,o=t.N,s=[t];Ln(t);for(var l=i;l.circle&&lo(n-l.circle.x)<Eo&&lo(a-l.circle.cy)<Eo;)i=l.P,s.unshift(l),Ln(l),l=i;s.unshift(l),Un(l);for(var c=o;c.circle&&lo(n-c.circle.x)<Eo&&lo(a-c.circle.cy)<Eo;)o=c.N,s.push(c),Ln(c),c=o;s.push(c),Un(c);var u,h=s.length;for(u=1;h>u;++u)c=s[u],l=s[u-1],Zn(c.edge,l.site,c.site,r);l=s[0],c=s[h-1],c.edge=Jn(l.site,c.site,null,r),Yn(l),Yn(c)}function jn(t){for(var e,n,a,r,i=t.x,o=t.y,s=Qs._;s;)if(a=On(s,o)-i,a>Eo)s=s.L;else{if(r=i-$n(s,o),!(r>Eo)){a>-Eo?(e=s.P,n=s):r>-Eo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Hn(t);if(Qs.insert(e,l),e||n){if(e===n)return Un(e),n=Hn(e.site),Qs.insert(l,n),l.edge=n.edge=Jn(e.site,l.site),Yn(e),void Yn(n);if(!n)return void(l.edge=Jn(e.site,l.site));Un(e),Un(n);var c=e.site,u=c.x,h=c.y,d=t.x-u,p=t.y-h,f=n.site,_=f.x-u,g=f.y-h,m=2*(d*g-p*_),v=d*d+p*p,y=_*_+g*g,x={x:(g*v-p*y)/m+u,y:(d*y-_*v)/m+h};Zn(n.edge,c,f,x),l.edge=Jn(c,t,null,x),n.edge=Jn(t,f,null,x),Yn(e),Yn(n)}}function On(t,e){var n=t.site,a=n.x,r=n.y,i=r-e;if(!i)return a;var o=t.P;if(!o)return-1/0;n=o.site;var s=n.x,l=n.y,c=l-e;if(!c)return s;var u=s-a,h=1/i-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-i/2)))/h+a:(a+s)/2}function $n(t,e){var n=t.N;if(n)return On(n,e);var a=t.site;return a.y===e?a.x:1/0}function Rn(t){this.site=t,this.edges=[]}function qn(t){for(var e,n,a,r,i,o,s,l,c,u,h=t[0][0],d=t[1][0],p=t[0][1],f=t[1][1],_=Vs,g=_.length;g--;)if(i=_[g],i&&i.prepare())for(s=i.edges,l=s.length,o=0;l>o;)u=s[o].end(),a=u.x,r=u.y,c=s[++o%l].start(),e=c.x,n=c.y,(lo(a-e)>Eo||lo(r-n)>Eo)&&(s.splice(o,0,new ta(Kn(i.site,u,lo(a-h)<Eo&&f-r>Eo?{x:h,y:lo(e-h)<Eo?n:f}:lo(r-f)<Eo&&d-a>Eo?{x:lo(n-f)<Eo?e:d,y:f}:lo(a-d)<Eo&&r-p>Eo?{x:d,y:lo(e-d)<Eo?n:p}:lo(r-p)<Eo&&a-h>Eo?{x:lo(n-p)<Eo?e:h,y:p}:null),i.site,null)),++l)}function Gn(t,e){return e.angle-t.angle}function Wn(){na(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var a=e.site,r=t.site,i=n.site;if(a!==i){var o=r.x,s=r.y,l=a.x-o,c=a.y-s,u=i.x-o,h=i.y-s,d=2*(l*h-c*u);if(!(d>=-To)){var p=l*l+c*c,f=u*u+h*h,_=(h*p-c*f)/d,g=(l*f-u*p)/d,h=g+s,m=Zs.pop()||new Wn;m.arc=t,m.site=r,m.x=_+o,m.y=h+Math.sqrt(_*_+g*g),m.cy=h,t.circle=m;for(var v=null,y=Js._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}Js.insert(v,m),v||(Xs=m)}}}}function Un(t){var e=t.circle;e&&(e.P||(Xs=e.N),Js.remove(e),Zs.push(e),na(e),t.circle=null)}function Vn(t){for(var e,n=Us,a=Oe(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Qn(e,t)||!a(e)||lo(e.a.x-e.b.x)<Eo&&lo(e.a.y-e.b.y)<Eo)&&(e.a=e.b=null,n.splice(r,1))}function Qn(t,e){var n=t.b;if(n)return!0;var a,r,i=t.a,o=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,h=t.r,d=u.x,p=u.y,f=h.x,_=h.y,g=(d+f)/2,m=(p+_)/2;if(_===p){if(o>g||g>=s)return;if(d>f){if(i){if(i.y>=c)return}else i={x:g,y:l};n={x:g,y:c}}else{if(i){if(i.y<l)return}else i={x:g,y:c};n={x:g,y:l}}}else if(a=(d-f)/(_-p),r=m-a*g,-1>a||a>1)if(d>f){if(i){if(i.y>=c)return}else i={x:(l-r)/a,y:l};n={x:(c-r)/a,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-r)/a,y:c};n={x:(l-r)/a,y:l}}else if(_>p){if(i){if(i.x>=s)return}else i={x:o,y:a*o+r};n={x:s,y:a*s+r}}else{if(i){if(i.x<o)return}else i={x:s,y:a*s+r};n={x:o,y:a*o+r}}return t.a=i,t.b=n,!0}function Xn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Jn(t,e,n,a){var r=new Xn(t,e);return Us.push(r),n&&Zn(r,t,e,n),a&&Zn(r,e,t,a),Vs[t.i].edges.push(new ta(r,t,e)),Vs[e.i].edges.push(new ta(r,e,t)),r}function Kn(t,e,n){var a=new Xn(t,null);return a.a=e,a.b=n,Us.push(a),a}function Zn(t,e,n,a){t.a||t.b?t.l===n?t.b=a:t.a=a:(t.a=a,t.l=e,t.r=n)}function ta(t,e,n){var a=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-a.x,a.y-r.y):Math.atan2(a.x-r.x,r.y-a.y)}function ea(){this._=null}function na(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function aa(t,e){var n=e,a=e.R,r=n.U;r?r.L===n?r.L=a:r.R=a:t._=a,a.U=r,n.U=a,n.R=a.L,n.R&&(n.R.U=n),a.L=n}function ra(t,e){var n=e,a=e.L,r=n.U;r?r.L===n?r.L=a:r.R=a:t._=a,a.U=r,n.U=a,n.L=a.R,n.L&&(n.L.U=n),a.R=n}function ia(t){for(;t.L;)t=t.L;return t}function oa(t,e){var n,a,r,i=t.sort(sa).pop();for(Us=[],Vs=new Array(t.length),Qs=new ea,Js=new ea;;)if(r=Xs,i&&(!r||i.y<r.y||i.y===r.y&&i.x<r.x))(i.x!==n||i.y!==a)&&(Vs[i.i]=new Rn(i),jn(i),n=i.x,a=i.y),i=t.pop();else{if(!r)break;Bn(r.arc)}e&&(Vn(e),qn(e));var o={cells:Vs,edges:Us};return Qs=Js=Us=Vs=null,o}function sa(t,e){return e.y-t.y||e.x-t.x}function la(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ca(t){return t.x}function ua(t){return t.y}function ha(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function da(t,e,n,a,r,i){if(!t(e,n,a,r,i)){var o=.5*(n+r),s=.5*(a+i),l=e.nodes;l[0]&&da(t,l[0],n,a,o,s),l[1]&&da(t,l[1],o,a,r,s),l[2]&&da(t,l[2],n,s,o,i),l[3]&&da(t,l[3],o,s,r,i)}}function pa(t,e){t=Vi.rgb(t),e=Vi.rgb(e);var n=t.r,a=t.g,r=t.b,i=e.r-n,o=e.g-a,s=e.b-r;return function(t){return"#"+xt(Math.round(n+i*t))+xt(Math.round(a+o*t))+xt(Math.round(r+s*t))}}function fa(t,e){var n,a={},r={};for(n in t)n in e?a[n]=ma(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in a)r[n]=a[n](t);return r}}function _a(t,e){return e-=t=+t,function(n){return t+e*n}}function ga(t,e){var n,a,r,i=el.lastIndex=nl.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=el.exec(t))&&(a=nl.exec(e));)(r=a.index)>i&&(r=e.substring(i,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:_a(n,a)})),i=nl.lastIndex;return i<e.length&&(r=e.substring(i),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,a=0;e>a;++a)s[(n=l[a]).i]=n.x(t);return s.join("")})}function ma(t,e){for(var n,a=Vi.interpolators.length;--a>=0&&!(n=Vi.interpolators[a](t,e)););return n}function va(t,e){var n,a=[],r=[],i=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)a.push(ma(t[n],e[n]));for(;i>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=a[n](t);return r}}function ya(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function xa(t){return function(e){return 1-t(1-e)}}function ba(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function wa(t){return t*t}function ka(t){return t*t*t}function Ca(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Da(t){return function(e){return Math.pow(e,t)}}function Pa(t){return 1-Math.cos(t*Ao)}function Sa(t){return Math.pow(2,10*(t-1))}function Aa(t){return 1-Math.sqrt(1-t*t)}function Ea(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/So*Math.asin(1/t):(t=1,n=e/4),function(a){return 1+t*Math.pow(2,-10*a)*Math.sin((a-n)*So/e)}}function Ta(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ma(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Fa(t,e){t=Vi.hcl(t),e=Vi.hcl(e);var n=t.h,a=t.c,r=t.l,i=e.h-n,o=e.c-a,s=e.l-r;return isNaN(o)&&(o=0,a=isNaN(a)?e.c:a),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return lt(n+i*t,a+o*t,r+s*t)+""}}function Na(t,e){t=Vi.hsl(t),e=Vi.hsl(e);var n=t.h,a=t.s,r=t.l,i=e.h-n,o=e.s-a,s=e.l-r;return isNaN(o)&&(o=0,a=isNaN(a)?e.s:a),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return it(n+i*t,a+o*t,r+s*t)+""}}function Ia(t,e){t=Vi.lab(t),e=Vi.lab(e);var n=t.l,a=t.a,r=t.b,i=e.l-n,o=e.a-a,s=e.b-r;return function(t){return ht(n+i*t,a+o*t,r+s*t)+""}}function za(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Ha(t){var e=[t.a,t.b],n=[t.c,t.d],a=Ba(e),r=La(e,n),i=Ba(ja(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,a*=-1,r*=-1),this.rotate=(a?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Fo,this.translate=[t.e,t.f],this.scale=[a,i],this.skew=i?Math.atan2(r,i)*Fo:0}function La(t,e){return t[0]*e[0]+t[1]*e[1]}function Ba(t){var e=Math.sqrt(La(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ja(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Oa(t,e){var n,a=[],r=[],i=Vi.transform(t),o=Vi.transform(e),s=i.translate,l=o.translate,c=i.rotate,u=o.rotate,h=i.skew,d=o.skew,p=i.scale,f=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(a.push("translate(",null,",",null,")"),r.push({i:1,x:_a(s[0],l[0])},{i:3,x:_a(s[1],l[1])})):l[0]||l[1]?a.push("translate("+l+")"):a.push(""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:a.push(a.pop()+"rotate(",null,")")-2,x:_a(c,u)})):u&&a.push(a.pop()+"rotate("+u+")"),h!=d?r.push({i:a.push(a.pop()+"skewX(",null,")")-2,x:_a(h,d)}):d&&a.push(a.pop()+"skewX("+d+")"),p[0]!=f[0]||p[1]!=f[1]?(n=a.push(a.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:_a(p[0],f[0])},{i:n-2,x:_a(p[1],f[1])})):(1!=f[0]||1!=f[1])&&a.push(a.pop()+"scale("+f+")"),n=r.length,function(t){for(var e,i=-1;++i<n;)a[(e=r[i]).i]=e.x(t);return a.join("")}}function $a(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Ra(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function qa(t){for(var e=t.source,n=t.target,a=Wa(e,n),r=[e];e!==a;)e=e.parent,r.push(e);for(var i=r.length;n!==a;)r.splice(i,0,n),n=n.parent;return r}function Ga(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Wa(t,e){if(t===e)return t;for(var n=Ga(t),a=Ga(e),r=n.pop(),i=a.pop(),o=null;r===i;)o=r,r=n.pop(),i=a.pop();return o}function Ya(t){t.fixed|=2}function Ua(t){t.fixed&=-7}function Va(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Qa(t){t.fixed&=-5}function Xa(t,e,n){var a=0,r=0;if(t.charge=0,!t.leaf)for(var i,o=t.nodes,s=o.length,l=-1;++l<s;)i=o[l],null!=i&&(Xa(i,e,n),t.charge+=i.charge,a+=i.charge*i.cx,r+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,a+=c*t.point.x,r+=c*t.point.y}t.cx=a/t.charge,t.cy=r/t.charge}function Ja(t,e){return Vi.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ar,t}function Ka(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(a=r.length))for(var a,r;--a>=0;)n.push(r[a])}function Za(t,e){for(var n=[t],a=[];null!=(t=n.pop());)if(a.push(t),(i=t.children)&&(r=i.length))for(var r,i,o=-1;++o<r;)n.push(i[o]);for(;null!=(t=a.pop());)e(t)}function tr(t){return t.children}function er(t){return t.value}function nr(t,e){return e.value-t.value}function ar(t){return Vi.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function rr(t){return t.x}function ir(t){return t.y}function or(t,e,n){t.y0=e,t.y=n}function sr(t){return Vi.range(t.length)}function lr(t){for(var e=-1,n=t[0].length,a=[];++e<n;)a[e]=0;return a}function cr(t){for(var e,n=1,a=0,r=t[0][1],i=t.length;i>n;++n)(e=t[n][1])>r&&(a=n,r=e);return a}function ur(t){return t.reduce(hr,0)}function hr(t,e){return t+e[1]}function dr(t,e){return pr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function pr(t,e){for(var n=-1,a=+t[0],r=(t[1]-a)/e,i=[];++n<=e;)i[n]=r*n+a;return i}function fr(t){return[Vi.min(t),Vi.max(t)]}function _r(t,e){return t.value-e.value}function gr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function mr(t,e){t._pack_next=e,e._pack_prev=t}function vr(t,e){var n=e.x-t.x,a=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+a*a}function yr(t){function e(t){u=Math.min(t.x-t.r,u),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(c=n.length)){var n,a,r,i,o,s,l,c,u=1/0,h=-1/0,d=1/0,p=-1/0;if(n.forEach(xr),a=n[0],a.x=-a.r,a.y=0,e(a),c>1&&(r=n[1],r.x=r.r,r.y=0,e(r),c>2))for(i=n[2],kr(a,r,i),e(i),gr(a,i),a._pack_prev=i,gr(i,r),r=a._pack_next,o=3;c>o;o++){kr(a,r,i=n[o]);var f=0,_=1,g=1;for(s=r._pack_next;s!==r;s=s._pack_next,_++)if(vr(s,i)){f=1;break}if(1==f)for(l=a._pack_prev;l!==s._pack_prev&&!vr(l,i);l=l._pack_prev,g++);f?(g>_||_==g&&r.r<a.r?mr(a,r=s):mr(a=l,r),o--):(gr(a,i),r=i,e(i))}var m=(u+h)/2,v=(d+p)/2,y=0;for(o=0;c>o;o++)i=n[o],i.x-=m,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,n.forEach(br)}}function xr(t){t._pack_next=t._pack_prev=t}function br(t){delete t._pack_next,delete t._pack_prev}function wr(t,e,n,a){var r=t.children;if(t.x=e+=a*t.x,t.y=n+=a*t.y,t.r*=a,r)for(var i=-1,o=r.length;++i<o;)wr(r[i],e,n,a)}function kr(t,e,n){var a=t.r+n.r,r=e.x-t.x,i=e.y-t.y;if(a&&(r||i)){var o=e.r+n.r,s=r*r+i*i;o*=o,a*=a;var l=.5+(a-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(a+s)-(a-=s)*a-o*o))/(2*s);n.x=t.x+l*r+c*i,n.y=t.y+l*i-c*r}else n.x=t.x+a,n.y=t.y}function Cr(t,e){return t.parent==e.parent?1:2}function Dr(t){var e=t.children;return e.length?e[0]:t.t}function Pr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Sr(t,e,n){var a=n/(e.i-t.i);e.c-=a,e.s+=n,t.c+=a,e.z+=n,e.m+=n}function Ar(t){for(var e,n=0,a=0,r=t.children,i=r.length;--i>=0;)e=r[i],e.z+=n,e.m+=n,n+=e.s+(a+=e.c)}function Er(t,e,n){return t.a.parent===e.parent?t.a:n}function Tr(t){return 1+Vi.max(t,function(t){return t.y})}function Mr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Fr(t){var e=t.children;return e&&e.length?Fr(e[0]):t}function Nr(t){var e,n=t.children;return n&&(e=n.length)?Nr(n[e-1]):t}function Ir(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function zr(t,e){var n=t.x+e[3],a=t.y+e[0],r=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>i&&(a+=i/2,i=0),{x:n,y:a,dx:r,dy:i}}function Hr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Lr(t){return t.rangeExtent?t.rangeExtent():Hr(t.range())}function Br(t,e,n,a){var r=n(t[0],t[1]),i=a(e[0],e[1]);return function(t){return i(r(t))}}function jr(t,e){var n,a=0,r=t.length-1,i=t[a],o=t[r];return i>o&&(n=a,a=r,r=n,n=i,i=o,o=n),t[a]=e.floor(i),t[r]=e.ceil(o),t}function Or(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:pl}function $r(t,e,n,a){var r=[],i=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)r.push(n(t[o-1],t[o])),i.push(a(e[o-1],e[o]));return function(e){var n=Vi.bisect(t,e,1,s)-1;return i[n](r[n](e))}}function Rr(t,e,n,a){function r(){var r=Math.min(t.length,e.length)>2?$r:Br,l=a?Ra:$a;return o=r(t,e,l,n),s=r(e,t,l,ma),i}function i(t){return o(t)}var o,s;return i.invert=function(t){return s(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},i.range=function(t){return arguments.length?(e=t,r()):e},i.rangeRound=function(t){return i.range(t).interpolate(za)},i.clamp=function(t){return arguments.length?(a=t,r()):a},i.interpolate=function(t){return arguments.length?(n=t,r()):n},i.ticks=function(e){return Yr(t,e)},i.tickFormat=function(e,n){return Ur(t,e,n)},i.nice=function(e){return Gr(t,e),r()},i.copy=function(){return Rr(t,e,n,a)},r()}function qr(t,e){return Vi.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Gr(t,e){return jr(t,Or(Wr(t,e)[2]))}function Wr(t,e){null==e&&(e=10);var n=Hr(t),a=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(a/e)/Math.LN10)),i=e/a*r;return.15>=i?r*=10:.35>=i?r*=5:.75>=i&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Yr(t,e){return Vi.range.apply(Vi,Wr(t,e))}function Ur(t,e,n){var a=Wr(t,e);if(n){var r=es.exec(n);if(r.shift(),"s"===r[8]){var i=Vi.formatPrefix(Math.max(lo(a[0]),lo(a[1])));return r[7]||(r[7]="."+Vr(i.scale(a[2]))),r[8]="f",n=Vi.format(r.join("")),function(t){return n(i.scale(t))+i.symbol}}r[7]||(r[7]="."+Qr(r[8],a)),n=r.join("")}else n=",."+Vr(a[2])+"f";return Vi.format(n)}function Vr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Qr(t,e){var n=Vr(e[2]);return t in fl?Math.abs(n-Vr(Math.max(lo(e[0]),lo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Xr(t,e,n,a){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function i(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((a=e.map(Number)).map(r)),o):a},o.base=function(n){return arguments.length?(e=+n,t.domain(a.map(r)),o):e},o.nice=function(){var e=jr(a.map(r),n?Math:gl);return t.domain(e),a=e.map(i),o},o.ticks=function(){var t=Hr(a),o=[],s=t[0],l=t[1],c=Math.floor(r(s)),u=Math.ceil(r(l)),h=e%1?2:e;if(isFinite(u-c)){if(n){for(;u>c;c++)for(var d=1;h>d;d++)o.push(i(c)*d);o.push(i(c))}else for(o.push(i(c));c++<u;)for(var d=h-1;d>0;d--)o.push(i(c)*d);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.tickFormat=function(t,e){if(!arguments.length)return _l;arguments.length<2?e=_l:"function"!=typeof e&&(e=Vi.format(e));var a,s=Math.max(.1,t/o.ticks().length),l=n?(a=1e-12,Math.ceil):(a=-1e-12,Math.floor);return function(t){return t/i(l(r(t)+a))<=s?e(t):""}},o.copy=function(){return Xr(t.copy(),e,n,a)},qr(o,t)}function Jr(t,e,n){function a(e){return t(r(e))}var r=Kr(e),i=Kr(1/e);return a.invert=function(e){return i(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),a):n},a.ticks=function(t){return Yr(n,t)},a.tickFormat=function(t,e){return Ur(n,t,e)},a.nice=function(t){return a.domain(Gr(n,t))},a.exponent=function(o){return arguments.length?(r=Kr(e=o),i=Kr(1/e),t.domain(n.map(r)),a):e},a.copy=function(){return Jr(t.copy(),e,n)},qr(a,t)}function Kr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Zr(t,e){function n(n){return i[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%i.length]}function a(e,n){return Vi.range(t.length).map(function(t){return e+n*t})}var r,i,s;return n.domain=function(a){if(!arguments.length)return t;t=[],r=new o;for(var i,s=-1,l=a.length;++s<l;)r.has(i=a[s])||r.set(i,t.push(i));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(i=t,s=0,e={t:"range",a:arguments},n):i},n.rangePoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],c=r[1],u=(c-l)/(Math.max(1,t.length-1)+o);return i=a(t.length<2?(l+c)/2:l+u*o/2,u),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=r[1]<r[0],u=r[c-0],h=r[1-c],d=(h-u)/(t.length-o+2*l);return i=a(u+d*l,d),c&&i.reverse(),s=d*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=r[1]<r[0],u=r[c-0],h=r[1-c],d=Math.floor((h-u)/(t.length-o+2*l)),p=h-u-(t.length-o)*d;return i=a(u+Math.round(p/2),d),c&&i.reverse(),s=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Hr(e.a[0])},n.copy=function(){return Zr(t,e)},n.domain(t)}function ti(n,a){function r(){var t=0,e=a.length;for(o=[];++t<e;)o[t-1]=Vi.quantile(n,t/e);return i}function i(t){return isNaN(t=+t)?void 0:a[Vi.bisect(o,t)]}var o;return i.domain=function(a){return arguments.length?(n=a.filter(e).sort(t),r()):n},i.range=function(t){return arguments.length?(a=t,r()):a},i.quantiles=function(){return o},i.invertExtent=function(t){return t=a.indexOf(t),0>t?[NaN,NaN]:[t>0?o[t-1]:n[0],t<o.length?o[t]:n[n.length-1]]},i.copy=function(){return ti(n,a)},r()}function ei(t,e,n){function a(e){return n[Math.max(0,Math.min(o,Math.floor(i*(e-t))))]}function r(){return i=n.length/(e-t),o=n.length-1,a}var i,o;return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},a.range=function(t){return arguments.length?(n=t,r()):n},a.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/i+t,[e,e+1/i]},a.copy=function(){return ei(t,e,n)},r()}function ni(t,e){function n(n){return n>=n?e[Vi.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ni(t,e)},n}function ai(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Yr(t,e)},e.tickFormat=function(e,n){return Ur(t,e,n)},e.copy=function(){return ai(t)},e}function ri(t){return t.innerRadius}function ii(t){return t.outerRadius}function oi(t){return t.startAngle}function si(t){return t.endAngle}function li(t){function e(e){function o(){c.push("M",i(t(u),s))}for(var l,c=[],u=[],h=-1,d=e.length,p=Pt(n),f=Pt(a);++h<d;)r.call(this,l=e[h],h)?u.push([+p.call(this,l,h),+f.call(this,l,h)]):u.length&&(o(),u=[]);return u.length&&o(),c.length?c.join(""):null}var n=An,a=En,r=Se,i=ci,o=i.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=kl.get(t)||ci).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function ci(t){return t.join("L")}function ui(t){return ci(t)+"Z"}function hi(t){for(var e=0,n=t.length,a=t[0],r=[a[0],",",a[1]];++e<n;)r.push("H",(a[0]+(a=t[e])[0])/2,"V",a[1]);return n>1&&r.push("H",a[0]),r.join("")}function di(t){for(var e=0,n=t.length,a=t[0],r=[a[0],",",a[1]];++e<n;)r.push("V",(a=t[e])[1],"H",a[0]);return r.join("")}function pi(t){for(var e=0,n=t.length,a=t[0],r=[a[0],",",a[1]];++e<n;)r.push("H",(a=t[e])[0],"V",a[1]);return r.join("")}function fi(t,e){return t.length<4?ci(t):t[1]+mi(t.slice(1,t.length-1),vi(t,e))}function _i(t,e){return t.length<3?ci(t):t[0]+mi((t.push(t[0]),t),vi([t[t.length-2]].concat(t,[t[1]]),e))}function gi(t,e){return t.length<3?ci(t):t[0]+mi(t,vi(t,e))}function mi(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ci(t);var n=t.length!=e.length,a="",r=t[0],i=t[1],o=e[0],s=o,l=1;
if(n&&(a+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],r=t[1],l=2),e.length>1){s=e[1],i=t[l],l++,a+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<e.length;c++,l++)i=t[l],s=e[c],a+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var u=t[l];a+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+u[0]+","+u[1]}return a}function vi(t,e){for(var n,a=[],r=(1-e)/2,i=t[0],o=t[1],s=1,l=t.length;++s<l;)n=i,i=o,o=t[s],a.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return a}function yi(t){if(t.length<3)return ci(t);var e=1,n=t.length,a=t[0],r=a[0],i=a[1],o=[r,r,r,(a=t[1])[0]],s=[i,i,i,a[1]],l=[r,",",i,"L",ki(Pl,o),",",ki(Pl,s)];for(t.push(t[n-1]);++e<=n;)a=t[e],o.shift(),o.push(a[0]),s.shift(),s.push(a[1]),Ci(l,o,s);return t.pop(),l.push("L",a),l.join("")}function xi(t){if(t.length<4)return ci(t);for(var e,n=[],a=-1,r=t.length,i=[0],o=[0];++a<3;)e=t[a],i.push(e[0]),o.push(e[1]);for(n.push(ki(Pl,i)+","+ki(Pl,o)),--a;++a<r;)e=t[a],i.shift(),i.push(e[0]),o.shift(),o.push(e[1]),Ci(n,i,o);return n.join("")}function bi(t){for(var e,n,a=-1,r=t.length,i=r+4,o=[],s=[];++a<4;)n=t[a%r],o.push(n[0]),s.push(n[1]);for(e=[ki(Pl,o),",",ki(Pl,s)],--a;++a<i;)n=t[a%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ci(e,o,s);return e.join("")}function wi(t,e){var n=t.length-1;if(n)for(var a,r,i=t[0][0],o=t[0][1],s=t[n][0]-i,l=t[n][1]-o,c=-1;++c<=n;)a=t[c],r=c/n,a[0]=e*a[0]+(1-e)*(i+r*s),a[1]=e*a[1]+(1-e)*(o+r*l);return yi(t)}function ki(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ci(t,e,n){t.push("C",ki(Cl,e),",",ki(Cl,n),",",ki(Dl,e),",",ki(Dl,n),",",ki(Pl,e),",",ki(Pl,n))}function Di(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Pi(t){for(var e=0,n=t.length-1,a=[],r=t[0],i=t[1],o=a[0]=Di(r,i);++e<n;)a[e]=(o+(o=Di(r=i,i=t[e+1])))/2;return a[e]=o,a}function Si(t){for(var e,n,a,r,i=[],o=Pi(t),s=-1,l=t.length-1;++s<l;)e=Di(t[s],t[s+1]),lo(e)<Eo?o[s]=o[s+1]=0:(n=o[s]/e,a=o[s+1]/e,r=n*n+a*a,r>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*a));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([r||0,o[s]*r||0]);return i}function Ai(t){return t.length<3?ci(t):t[0]+mi(t,Si(t))}function Ei(t){for(var e,n,a,r=-1,i=t.length;++r<i;)e=t[r],n=e[0],a=e[1]+bl,e[0]=n*Math.cos(a),e[1]=n*Math.sin(a);return t}function Ti(t){function e(e){function l(){_.push("M",s(t(m),h),u,c(t(g.reverse()),h),"Z")}for(var d,p,f,_=[],g=[],m=[],v=-1,y=e.length,x=Pt(n),b=Pt(r),w=n===a?function(){return p}:Pt(a),k=r===i?function(){return f}:Pt(i);++v<y;)o.call(this,d=e[v],v)?(g.push([p=+x.call(this,d,v),f=+b.call(this,d,v)]),m.push([+w.call(this,d,v),+k.call(this,d,v)])):g.length&&(l(),g=[],m=[]);return g.length&&l(),_.length?_.join(""):null}var n=An,a=An,r=0,i=En,o=Se,s=ci,l=s.key,c=s,u="L",h=.7;return e.x=function(t){return arguments.length?(n=a=t,e):a},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(r=i=t,e):i},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=kl.get(t)||ci).key,c=s.reverse||s,u=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Mi(t){return t.radius}function Fi(t){return[t.x,t.y]}function Ni(t){return function(){var e=t.apply(this,arguments),n=e[0],a=e[1]+bl;return[n*Math.cos(a),n*Math.sin(a)]}}function Ii(){return 64}function zi(){return"circle"}function Hi(t){var e=Math.sqrt(t/Po);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Li(t,e){return fo(t,Fl),t.id=e,t}function Bi(t,e,n,a){var r=t.id;return H(t,"function"==typeof n?function(t,i,o){t.__transition__[r].tween.set(e,a(n.call(t,t.__data__,i,o)))}:(n=a(n),function(t){t.__transition__[r].tween.set(e,n)}))}function ji(t){return null==t&&(t=""),function(){this.textContent=t}}function Oi(t,e,n,a){var r=t.__transition__||(t.__transition__={active:0,count:0}),i=r[n];if(!i){var s=a.time;i=r[n]={tween:new o,time:s,ease:a.ease,delay:a.delay,duration:a.duration},++r.count,Vi.timer(function(a){function o(a){return r.active>n?c():(r.active=n,i.event&&i.event.start.call(t,u,e),i.tween.forEach(function(n,a){(a=a.call(t,u,e))&&_.push(a)}),void Vi.timer(function(){return f.c=l(a||1)?Se:l,1},0,s))}function l(a){if(r.active!==n)return c();for(var o=a/p,s=h(o),l=_.length;l>0;)_[--l].call(t,s);return o>=1?(i.event&&i.event.end.call(t,u,e),c()):void 0}function c(){return--r.count?delete r[n]:delete t.__transition__,1}var u=t.__data__,h=i.ease,d=i.delay,p=i.duration,f=Ko,_=[];return f.t=d+s,a>=d?o(a-d):void(f.c=o)},0,s)}}function $i(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Ri(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function qi(t){return t.toISOString()}function Gi(t,e,n){function a(e){return t(e)}function r(t,n){var a=t[1]-t[0],r=a/n,i=Vi.bisect($l,r);return i==$l.length?[e.year,Wr(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/$l[i-1]<$l[i]/r?i-1:i]:[Gl,Wr(t,n)[2]]}return a.invert=function(e){return Wi(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain().map(Wi)},a.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Wi(+n+1),e).length}var i=a.domain(),o=Hr(i),s=null==t?r(o,10):"number"==typeof t&&r(o,t);return s&&(t=s[0],e=s[1]),a.domain(jr(i,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Wi(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Wi(+e+1);return e}}:t))},a.ticks=function(t,e){var n=Hr(a.domain()),i=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Wi(+n[1]+1),1>e?1:e)},a.tickFormat=function(){return n},a.copy=function(){return Gi(t.copy(),e,n)},qr(a,t)}function Wi(t){return new Date(t)}function Yi(t){return JSON.parse(t.responseText)}function Ui(t){var e=Ji.createRange();return e.selectNode(Ji.body),e.createContextualFragment(t.responseText)}var Vi={version:"3.4.8"};Date.now||(Date.now=function(){return+new Date});var Qi=[].slice,Xi=function(t){return Qi.call(t)},Ji=document,Ki=Ji.documentElement,Zi=window;try{Xi(Ki.childNodes)[0].nodeType}catch(to){Xi=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Ji.createElement("div").style.setProperty("opacity",0,"")}catch(eo){var no=Zi.Element.prototype,ao=no.setAttribute,ro=no.setAttributeNS,io=Zi.CSSStyleDeclaration.prototype,oo=io.setProperty;no.setAttribute=function(t,e){ao.call(this,t,e+"")},no.setAttributeNS=function(t,e,n){ro.call(this,t,e,n+"")},io.setProperty=function(t,e,n){oo.call(this,t,e+"",n)}}Vi.ascending=t,Vi.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Vi.min=function(t,e){var n,a,r=-1,i=t.length;if(1===arguments.length){for(;++r<i&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<i;)null!=(a=t[r])&&n>a&&(n=a)}else{for(;++r<i&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<i;)null!=(a=e.call(t,t[r],r))&&n>a&&(n=a)}return n},Vi.max=function(t,e){var n,a,r=-1,i=t.length;if(1===arguments.length){for(;++r<i&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<i;)null!=(a=t[r])&&a>n&&(n=a)}else{for(;++r<i&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<i;)null!=(a=e.call(t,t[r],r))&&a>n&&(n=a)}return n},Vi.extent=function(t,e){var n,a,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=r=t[i])&&n>=n);)n=r=void 0;for(;++i<o;)null!=(a=t[i])&&(n>a&&(n=a),a>r&&(r=a))}else{for(;++i<o&&!(null!=(n=r=e.call(t,t[i],i))&&n>=n);)n=void 0;for(;++i<o;)null!=(a=e.call(t,t[i],i))&&(n>a&&(n=a),a>r&&(r=a))}return[n,r]},Vi.sum=function(t,e){var n,a=0,r=t.length,i=-1;if(1===arguments.length)for(;++i<r;)isNaN(n=+t[i])||(a+=n);else for(;++i<r;)isNaN(n=+e.call(t,t[i],i))||(a+=n);return a},Vi.mean=function(t,n){var a,r=0,i=t.length,o=-1,s=i;if(1===arguments.length)for(;++o<i;)e(a=t[o])?r+=a:--s;else for(;++o<i;)e(a=n.call(t,t[o],o))?r+=a:--s;return s?r/s:void 0},Vi.quantile=function(t,e){var n=(t.length-1)*e+1,a=Math.floor(n),r=+t[a-1],i=n-a;return i?r+i*(t[a]-r):r},Vi.median=function(n,a){return arguments.length>1&&(n=n.map(a)),n=n.filter(e),n.length?Vi.quantile(n.sort(t),.5):void 0};var so=n(t);Vi.bisectLeft=so.left,Vi.bisect=Vi.bisectRight=so.right,Vi.bisector=function(e){return n(1===e.length?function(n,a){return t(e(n),a)}:e)},Vi.shuffle=function(t){for(var e,n,a=t.length;a;)n=0|Math.random()*a--,e=t[a],t[a]=t[n],t[n]=e;return t},Vi.permute=function(t,e){for(var n=e.length,a=new Array(n);n--;)a[n]=t[e[n]];return a},Vi.pairs=function(t){for(var e,n=0,a=t.length-1,r=t[0],i=new Array(0>a?0:a);a>n;)i[n]=[e=r,r=t[++n]];return i},Vi.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=Vi.min(arguments,a),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},Vi.transpose=function(t){return Vi.zip.apply(Vi,t)},Vi.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Vi.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Vi.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Vi.merge=function(t){for(var e,n,a,r=t.length,i=-1,o=0;++i<r;)o+=t[i].length;for(n=new Array(o);--r>=0;)for(a=t[r],e=a.length;--e>=0;)n[--o]=a[e];return n};var lo=Math.abs;Vi.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var a,i=[],o=r(lo(n)),s=-1;if(t*=o,e*=o,n*=o,0>n)for(;(a=t+n*++s)>e;)i.push(a/o);else for(;(a=t+n*++s)<e;)i.push(a/o);return i},Vi.map=function(t){var e=new o;if(t instanceof o)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},i(o,{has:s,get:function(t){return this[co+t]},set:function(t,e){return this[co+t]=e},remove:l,keys:c,values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},size:u,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===uo&&t.call(this,e.substring(1),this[e])}});var co="\x00",uo=co.charCodeAt(0);Vi.nest=function(){function t(e,s,l){if(l>=i.length)return a?a.call(r,s):n?s.sort(n):s;for(var c,u,h,d,p=-1,f=s.length,_=i[l++],g=new o;++p<f;)(d=g.get(c=_(u=s[p])))?d.push(u):g.set(c,[u]);return e?(u=e(),h=function(n,a){u.set(n,t(e,a,l))}):(u={},h=function(n,a){u[n]=t(e,a,l)}),g.forEach(h),u}function e(t,n){if(n>=i.length)return t;var a=[],r=s[n++];return t.forEach(function(t,r){a.push({key:t,values:e(r,n)})}),r?a.sort(function(t,e){return r(t.key,e.key)}):a}var n,a,r={},i=[],s=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(Vi.map,n,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return s[i.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return a=t,r},r},Vi.set=function(t){var e=new d;if(t)for(var n=0,a=t.length;a>n;++n)e.add(t[n]);return e},i(d,{has:s,add:function(t){return this[co+t]=!0,t},remove:function(t){return t=co+t,t in this&&delete this[t]},values:c,size:u,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===uo&&t.call(this,e.substring(1))}}),Vi.behavior={},Vi.rebind=function(t,e){for(var n,a=1,r=arguments.length;++a<r;)t[n=arguments[a]]=p(t,e,e[n]);return t};var ho=["webkit","ms","moz","Moz","o","O"];Vi.dispatch=function(){for(var t=new g,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=m(t);return t},g.prototype.on=function(t,e){var n=t.indexOf("."),a="";if(n>=0&&(a=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(a):this[t].on(a,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(a,null);return this}},Vi.event=null,Vi.requote=function(t){return t.replace(po,"\\$&")};var po=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},_o=function(t,e){return e.querySelector(t)},go=function(t,e){return e.querySelectorAll(t)},mo=Ki[f(Ki,"matchesSelector")],vo=function(t,e){return mo.call(t,e)};"function"==typeof Sizzle&&(_o=function(t,e){return Sizzle(t,e)[0]||null},go=Sizzle,vo=Sizzle.matchesSelector),Vi.selection=function(){return wo};var yo=Vi.selection.prototype=[];yo.select=function(t){var e,n,a,r,i=[];t=w(t);for(var o=-1,s=this.length;++o<s;){i.push(e=[]),e.parentNode=(a=this[o]).parentNode;for(var l=-1,c=a.length;++l<c;)(r=a[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return b(i)},yo.selectAll=function(t){var e,n,a=[];t=k(t);for(var r=-1,i=this.length;++r<i;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(a.push(e=Xi(t.call(n,n.__data__,s,r))),e.parentNode=n);return b(a)};var xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Vi.ns={prefix:xo,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),xo.hasOwnProperty(n)?{space:xo[n],local:t}:t}},yo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Vi.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(C(e,t[e]));return this}return this.each(C(t,e))},yo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),a=(t=S(t)).length,r=-1;if(e=n.classList){for(;++r<a;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<a;)if(!P(t[r]).test(e))return!1;return!0}for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},yo.style=function(t,e,n){var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(n in t)this.each(T(n,t[n],e));return this}if(2>a)return Zi.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(T(t,e,n))},yo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},yo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},yo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},yo.append=function(t){return t=F(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},yo.insert=function(t,e){return t=F(t),e=w(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},yo.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},yo.data=function(t,e){function n(t,n){var a,r,i,s=t.length,h=n.length,d=Math.min(s,h),p=new Array(h),f=new Array(h),_=new Array(s);if(e){var g,m=new o,v=new o,y=[];for(a=-1;++a<s;)g=e.call(r=t[a],r.__data__,a),m.has(g)?_[a]=r:m.set(g,r),y.push(g);for(a=-1;++a<h;)g=e.call(n,i=n[a],a),(r=m.get(g))?(p[a]=r,r.__data__=i):v.has(g)||(f[a]=N(i)),v.set(g,i),m.remove(g);for(a=-1;++a<s;)m.has(y[a])&&(_[a]=t[a])}else{for(a=-1;++a<d;)r=t[a],i=n[a],r?(r.__data__=i,p[a]=r):f[a]=N(i);for(;h>a;++a)f[a]=N(n[a]);for(;s>a;++a)_[a]=t[a]}f.update=p,f.parentNode=p.parentNode=_.parentNode=t.parentNode,l.push(f),c.push(p),u.push(_)}var a,r,i=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(a=this[0]).length);++i<s;)(r=a[i])&&(t[i]=r.__data__);return t}var l=L([]),c=b([]),u=b([]);if("function"==typeof t)for(;++i<s;)n(a=this[i],t.call(a,a.parentNode.__data__,i));else for(;++i<s;)n(a=this[i],t);return c.enter=function(){return l},c.exit=function(){return u},c},yo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},yo.filter=function(t){var e,n,a,r=[];"function"!=typeof t&&(t=I(t));for(var i=0,o=this.length;o>i;i++){r.push(e=[]),e.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;l>s;s++)(a=n[s])&&t.call(a,a.__data__,s,i)&&e.push(a)}return b(r)},yo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,a=this[t],r=a.length-1,i=a[r];--r>=0;)(n=a[r])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},yo.sort=function(t){t=z.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},yo.each=function(t){return H(this,function(e,n,a){t.call(e,e.__data__,n,a)})},yo.call=function(t){var e=Xi(arguments);return t.apply(e[0]=this,e),this},yo.empty=function(){return!this.node()},yo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],a=0,r=n.length;r>a;a++){var i=n[a];if(i)return i}return null},yo.size=function(){var t=0;return this.each(function(){++t}),t};var bo=[];Vi.selection.enter=L,Vi.selection.enter.prototype=bo,bo.append=yo.append,bo.empty=yo.empty,bo.node=yo.node,bo.call=yo.call,bo.size=yo.size,bo.select=function(t){for(var e,n,a,r,i,o=[],s=-1,l=this.length;++s<l;){a=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(i=r[c])?(e.push(a[c]=n=t.call(r.parentNode,i.__data__,c,s)),n.__data__=i.__data__):e.push(null)}return b(o)},bo.insert=function(t,e){return arguments.length<2&&(e=B(this)),yo.insert.call(this,t,e)},yo.transition=function(){for(var t,e,n=Al||++Nl,a=[],r=El||{time:Date.now(),ease:Ca,delay:0,duration:250},i=-1,o=this.length;++i<o;){a.push(t=[]);for(var s=this[i],l=-1,c=s.length;++l<c;)(e=s[l])&&Oi(e,l,n,r),t.push(e)}return Li(a,n)},yo.interrupt=function(){return this.each(j)},Vi.select=function(t){var e=["string"==typeof t?_o(t,Ji):t];return e.parentNode=Ki,b([e])},Vi.selectAll=function(t){var e=Xi("string"==typeof t?go(t,Ji):t);return e.parentNode=Ki,b([e])};var wo=Vi.select(Ki);yo.on=function(t,e,n){var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e=!1);for(n in t)this.each(O(n,t[n],e));return this}if(2>a)return(a=this.node()["__on"+t])&&a._;n=!1}return this.each(O(t,e,n))};var ko=Vi.map({mouseenter:"mouseover",mouseleave:"mouseout"});ko.forEach(function(t){"on"+t in Ji&&ko.remove(t)});var Co="onselectstart"in Ji?null:f(Ki.style,"userSelect"),Do=0;Vi.mouse=function(t){return G(t,y())},Vi.touches=function(t,e){return arguments.length<2&&(e=y().touches),e?Xi(e).map(function(e){var n=G(t,e);return n.identifier=e.identifier,n}):[]},Vi.behavior.drag=function(){function t(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function e(t,e,r,i,o){return function(){function s(){var t,n,a=e(d,_);a&&(t=a[0]-y[0],n=a[1]-y[1],f|=t|n,y=a,p({type:"drag",x:a[0]+c[0],y:a[1]+c[1],dx:t,dy:n}))}function l(){e(d,_)&&(m.on(i+g,null).on(o+g,null),v(f&&Vi.event.target===h),p({type:"dragend"}))}var c,u=this,h=Vi.event.target,d=u.parentNode,p=n.of(u,arguments),f=0,_=t(),g=".drag"+(null==_?"":"-"+_),m=Vi.select(r()).on(i+g,s).on(o+g,l),v=q(),y=e(d,_);a?(c=a.apply(u,arguments),c=[c.x-y[0],c.y-y[1]]):c=[0,0],p({type:"dragstart"})}}var n=x(t,"drag","dragstart","dragend"),a=null,r=e(_,Vi.mouse,U,"mousemove","mouseup"),i=e(W,Vi.touch,Y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(a=e,t):a},Vi.rebind(t,n,"on")};var Po=Math.PI,So=2*Po,Ao=Po/2,Eo=1e-6,To=Eo*Eo,Mo=Po/180,Fo=180/Po,No=Math.SQRT2,Io=2,zo=4;Vi.interpolateZoom=function(t,e){function n(t){var e=t*v;if(m){var n=Z(_),o=i/(Io*d)*(n*tt(No*e+_)-K(_));return[a+o*c,r+o*u,i*n/Z(No*e+_)]}return[a+t*c,r+t*u,i*Math.exp(No*e)]}var a=t[0],r=t[1],i=t[2],o=e[0],s=e[1],l=e[2],c=o-a,u=s-r,h=c*c+u*u,d=Math.sqrt(h),p=(l*l-i*i+zo*h)/(2*i*Io*d),f=(l*l-i*i-zo*h)/(2*l*Io*d),_=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(f*f+1)-f),m=g-_,v=(m||Math.log(l/i))/No;return n.duration=1e3*v,n},Vi.behavior.zoom=function(){function t(t){t.on(S,c).on(Bo+".zoom",h).on(A,d).on("dblclick.zoom",p).on(T,u)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function n(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function a(t){C.k=Math.max(P[0],Math.min(P[1],t))}function r(t,e){e=n(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function i(){b&&b.domain(y.range().map(function(t){return(t-C.x)/C.k}).map(y.invert)),k&&k.domain(w.range().map(function(t){return(t-C.y)/C.k}).map(w.invert))}function o(t){t({type:"zoomstart"})}function s(t){i(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function l(t){t({type:"zoomend"})}function c(){function t(){u=1,r(Vi.mouse(a),p),s(c)}function n(){h.on(A,Zi===a?d:null).on(E,null),f(u&&Vi.event.target===i),l(c)}var a=this,i=Vi.event.target,c=M.of(a,arguments),u=0,h=Vi.select(Zi).on(A,t).on(E,n),p=e(Vi.mouse(a)),f=q();j.call(a),o(c)}function u(){function t(){var t=Vi.touches(p);return d=C.k,t.forEach(function(t){t.identifier in _&&(_[t.identifier]=e(t))}),t}function n(){var e=Vi.event.target;Vi.select(e).on(x,i).on(b,h),w.push(e);for(var n=Vi.event.changedTouches,o=0,l=n.length;l>o;++o)_[n[o].identifier]=null;var c=t(),u=Date.now();if(1===c.length){if(500>u-m){var d=c[0],p=_[d.identifier];a(2*C.k),r(d,p),v(),s(f)}m=u}else if(c.length>1){var d=c[0],y=c[1],k=d[0]-y[0],D=d[1]-y[1];g=k*k+D*D}}function i(){for(var t,e,n,i,o=Vi.touches(p),l=0,c=o.length;c>l;++l,i=null)if(n=o[l],i=_[n.identifier]){if(e)break;t=n,e=i}if(i){var u=(u=n[0]-t[0])*u+(u=n[1]-t[1])*u,h=g&&Math.sqrt(u/g);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],a(h*d)}m=null,r(t,e),s(f)}function h(){if(Vi.event.touches.length){for(var e=Vi.event.changedTouches,n=0,a=e.length;a>n;++n)delete _[e[n].identifier];for(var r in _)return void t()}Vi.selectAll(w).on(y,null),k.on(S,c).on(T,u),D(),l(f)}var d,p=this,f=M.of(p,arguments),_={},g=0,y=".zoom-"+Vi.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,w=[],k=Vi.select(p).on(S,null).on(T,n),D=q();j.call(p),n(),o(f)}function h(){var t=M.of(this,arguments);g?clearTimeout(g):(j.call(this),o(t)),g=setTimeout(function(){g=null,l(t)},50),v();var n=_||Vi.mouse(this);f||(f=e(n)),a(Math.pow(2,.002*Ho())*C.k),r(n,f),s(t)}function d(){f=null}function p(){var t=M.of(this,arguments),n=Vi.mouse(this),i=e(n),c=Math.log(C.k)/Math.LN2;o(t),a(Math.pow(2,Vi.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)),r(n,i),s(t),l(t)}var f,_,g,m,y,b,w,k,C={x:0,y:0,k:1},D=[960,500],P=Lo,S="mousedown.zoom",A="mousemove.zoom",E="mouseup.zoom",T="touchstart.zoom",M=x(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=M.of(this,arguments),e=C;Al?Vi.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},o(t)}).tween("zoom:zoom",function(){var n=D[0],a=D[1],r=n/2,i=a/2,o=Vi.interpolateZoom([(r-C.x)/C.k,(i-C.y)/C.k,n/C.k],[(r-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(e){var a=o(e),l=n/a[2];this.__chart__=C={x:r-a[0]*l,y:i-a[1]*l,k:l},s(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=C,o(t),s(t),l(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},i(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},i(),t):C.k},t.scaleExtent=function(e){return arguments.length?(P=null==e?Lo:[+e[0],+e[1]],t):P},t.center=function(e){return arguments.length?(_=e&&[+e[0],+e[1]],t):_},t.size=function(e){return arguments.length?(D=e&&[+e[0],+e[1]],t):D},t.x=function(e){return arguments.length?(b=e,y=e.copy(),C={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(k=e,w=e.copy(),C={x:0,y:0,k:1},t):k},Vi.rebind(t,M,"on")};var Ho,Lo=[0,1/0],Bo="onwheel"in Ji?(Ho=function(){return-Vi.event.deltaY*(Vi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ji?(Ho=function(){return Vi.event.wheelDelta},"mousewheel"):(Ho=function(){return-Vi.event.detail},"MozMousePixelScroll");nt.prototype.toString=function(){return this.rgb()+""},Vi.hsl=function(t,e,n){return 1===arguments.length?t instanceof rt?at(t.h,t.s,t.l):bt(""+t,wt,at):at(+t,+e,+n)};var jo=rt.prototype=new nt;jo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),at(this.h,this.s,this.l/t)},jo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),at(this.h,this.s,t*this.l)},jo.rgb=function(){return it(this.h,this.s,this.l)},Vi.hcl=function(t,e,n){return 1===arguments.length?t instanceof st?ot(t.h,t.c,t.l):t instanceof ut?dt(t.l,t.a,t.b):dt((t=kt((t=Vi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):ot(+t,+e,+n)};var Oo=st.prototype=new nt;Oo.brighter=function(t){return ot(this.h,this.c,Math.min(100,this.l+$o*(arguments.length?t:1)))},Oo.darker=function(t){return ot(this.h,this.c,Math.max(0,this.l-$o*(arguments.length?t:1)))},Oo.rgb=function(){return lt(this.h,this.c,this.l).rgb()},Vi.lab=function(t,e,n){return 1===arguments.length?t instanceof ut?ct(t.l,t.a,t.b):t instanceof st?lt(t.l,t.c,t.h):kt((t=Vi.rgb(t)).r,t.g,t.b):ct(+t,+e,+n)};var $o=18,Ro=.95047,qo=1,Go=1.08883,Wo=ut.prototype=new nt;Wo.brighter=function(t){return ct(Math.min(100,this.l+$o*(arguments.length?t:1)),this.a,this.b)},Wo.darker=function(t){return ct(Math.max(0,this.l-$o*(arguments.length?t:1)),this.a,this.b)},Wo.rgb=function(){return ht(this.l,this.a,this.b)},Vi.rgb=function(t,e,n){return 1===arguments.length?t instanceof yt?vt(t.r,t.g,t.b):bt(""+t,vt,it):vt(~~t,~~e,~~n)};var Yo=yt.prototype=new nt;Yo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,a=this.b,r=30;return e||n||a?(e&&r>e&&(e=r),n&&r>n&&(n=r),a&&r>a&&(a=r),vt(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(a/t)))):vt(r,r,r)},Yo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),vt(~~(t*this.r),~~(t*this.g),~~(t*this.b))},Yo.hsl=function(){return wt(this.r,this.g,this.b)},Yo.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Uo=Vi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Uo.forEach(function(t,e){Uo.set(t,gt(e))}),Vi.functor=Pt,Vi.xhr=At(St),Vi.dsv=function(t,e){function n(t,n,i){arguments.length<3&&(i=n,n=null);var o=Et(t,e,null==n?a:r(n),i);return o.row=function(t){return arguments.length?o.response(null==(n=t)?a:r(t)):n},o}function a(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function i(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var a;return n.parseRows(t,function(t,n){if(a)return a(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");a=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(u>=c)return o;if(r)return r=!1,i;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<c;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}u=n+2;var a=t.charCodeAt(n+1);return 13===a?(r=!0,10===t.charCodeAt(n+2)&&++u):10===a&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;c>u;){var a=t.charCodeAt(u++),s=1;if(10===a)r=!0;else if(13===a)r=!0,10===t.charCodeAt(u)&&(++u,++s);else if(a!==l)continue;return t.substring(e,u-s)}return t.substring(e)}for(var a,r,i={},o={},s=[],c=t.length,u=0,h=0;(a=n())!==o;){for(var d=[];a!==i&&a!==o;)d.push(a),a=n();(!e||(d=e(d,h++)))&&s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var a=new d,r=[];return e.forEach(function(t){for(var e in t)a.has(e)||r.push(a.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(i).join("\n")},n},Vi.csv=Vi.dsv(",","text/csv"),Vi.tsv=Vi.dsv("	","text/tab-separated-values"),Vi.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=y().changedTouches),e)for(var a,r=0,i=e.length;i>r;++r)if((a=e[r]).identifier===n)return G(t,a)};var Vo,Qo,Xo,Jo,Ko,Zo=Zi[f(Zi,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Vi.timer=function(t,e,n){var a=arguments.length;2>a&&(e=0),3>a&&(n=Date.now());var r=n+e,i={c:t,t:r,f:!1,n:null};Qo?Qo.n=i:Vo=i,Qo=i,Xo||(Jo=clearTimeout(Jo),Xo=1,Zo(Mt))},Vi.timer.flush=function(){Ft(),Nt()},Vi.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ts=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(zt);Vi.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Vi.round(t,It(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ts[8+n/3]};var es=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ns=Vi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Vi.round(t,It(t,e))).toFixed(Math.max(0,Math.min(20,It(t*(1+1e-15),e))))}}),as=Vi.time={},rs=Date;Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){is.setUTCDate.apply(this._,arguments)},setDay:function(){is.setUTCDay.apply(this._,arguments)},setFullYear:function(){is.setUTCFullYear.apply(this._,arguments)},setHours:function(){is.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){is.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){is.setUTCMinutes.apply(this._,arguments)},setMonth:function(){is.setUTCMonth.apply(this._,arguments)},setSeconds:function(){is.setUTCSeconds.apply(this._,arguments)},setTime:function(){is.setTime.apply(this._,arguments)}};var is=Date.prototype;as.year=jt(function(t){return t=as.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),as.years=as.year.range,as.years.utc=as.year.utc.range,as.day=jt(function(t){
var e=new rs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),as.days=as.day.range,as.days.utc=as.day.utc.range,as.dayOfYear=function(t){var e=as.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=as[t]=jt(function(t){return(t=as.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=as.year(t).getDay();return Math.floor((as.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});as[t+"s"]=n.range,as[t+"s"].utc=n.utc.range,as[t+"OfYear"]=function(t){var n=as.year(t).getDay();return Math.floor((as.dayOfYear(t)+(n+e)%7)/7)}}),as.week=as.sunday,as.weeks=as.sunday.range,as.weeks.utc=as.sunday.utc.range,as.weekOfYear=as.sundayOfYear;var os={"-":"",_:" ",0:"0"},ss=/^\s*\d+/,ls=/^%/;Vi.locale=function(t){return{numberFormat:Ht(t),timeFormat:$t(t)}};var cs=Vi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Vi.format=cs.numberFormat,Vi.geo={},le.prototype={s:0,t:0,add:function(t){ce(t,this.t,us),ce(us.s,this.s,this),this.s?this.t+=us.t:this.s=us.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var us=new le;Vi.geo.stream=function(t,e){t&&hs.hasOwnProperty(t.type)?hs[t.type](t,e):ue(t,e)};var hs={Feature:function(t,e){ue(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,r=n.length;++a<r;)ue(n[a].geometry,e)}},ds={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)t=n[a],e.point(t[0],t[1],t[2])},LineString:function(t,e){he(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)he(n[a],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)de(n[a],e)},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,r=n.length;++a<r;)ue(n[a],e)}};Vi.geo.area=function(t){return ps=0,Vi.geo.stream(t,_s),ps};var ps,fs=new le,_s={sphere:function(){ps+=4*Po},point:_,lineStart:_,lineEnd:_,polygonStart:function(){fs.reset(),_s.lineStart=pe},polygonEnd:function(){var t=2*fs;ps+=0>t?4*Po+t:t,_s.lineStart=_s.lineEnd=_s.point=_}};Vi.geo.bounds=function(){function t(t,e){y.push(x=[u=t,d=t]),h>e&&(h=e),e>p&&(p=e)}function e(e,n){var a=fe([e*Mo,n*Mo]);if(m){var r=ge(m,a),i=[r[1],-r[0],0],o=ge(i,r);ye(o),o=xe(o);var l=e-f,c=l>0?1:-1,_=o[0]*Fo*c,g=lo(l)>180;if(g^(_>c*f&&c*e>_)){var v=o[1]*Fo;v>p&&(p=v)}else if(_=(_+360)%360-180,g^(_>c*f&&c*e>_)){var v=-o[1]*Fo;h>v&&(h=v)}else h>n&&(h=n),n>p&&(p=n);g?f>e?s(u,e)>s(u,d)&&(d=e):s(e,d)>s(u,d)&&(u=e):d>=u?(u>e&&(u=e),e>d&&(d=e)):e>f?s(u,e)>s(u,d)&&(d=e):s(e,d)>s(u,d)&&(u=e)}else t(e,n);m=a,f=e}function n(){b.point=e}function a(){x[0]=u,x[1]=d,b.point=t,m=null}function r(t,n){if(m){var a=t-f;v+=lo(a)>180?a+(a>0?360:-360):a}else _=t,g=n;_s.point(t,n),e(t,n)}function i(){_s.lineStart()}function o(){r(_,g),_s.lineEnd(),lo(v)>Eo&&(u=-(d=180)),x[0]=u,x[1]=d,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var u,h,d,p,f,_,g,m,v,y,x,b={point:t,lineStart:n,lineEnd:a,polygonStart:function(){b.point=r,b.lineStart=i,b.lineEnd=o,v=0,_s.polygonStart()},polygonEnd:function(){_s.polygonEnd(),b.point=t,b.lineStart=n,b.lineEnd=a,0>fs?(u=-(d=180),h=-(p=90)):v>Eo?p=90:-Eo>v&&(h=-90),x[0]=u,x[1]=d}};return function(t){p=d=-(u=h=1/0),y=[],Vi.geo.stream(t,b);var e=y.length;if(e){y.sort(l);for(var n,a=1,r=y[0],i=[r];e>a;++a)n=y[a],c(n[0],r)||c(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):i.push(r=n);for(var o,n,f=-1/0,e=i.length-1,a=0,r=i[e];e>=a;r=n,++a)n=i[a],(o=s(r[1],n[0]))>f&&(f=o,u=n[0],d=r[1])}return y=x=null,1/0===u||1/0===h?[[NaN,NaN],[NaN,NaN]]:[[u,h],[d,p]]}}(),Vi.geo.centroid=function(t){gs=ms=vs=ys=xs=bs=ws=ks=Cs=Ds=Ps=0,Vi.geo.stream(t,Ss);var e=Cs,n=Ds,a=Ps,r=e*e+n*n+a*a;return To>r&&(e=bs,n=ws,a=ks,Eo>ms&&(e=vs,n=ys,a=xs),r=e*e+n*n+a*a,To>r)?[NaN,NaN]:[Math.atan2(n,e)*Fo,J(a/Math.sqrt(r))*Fo]};var gs,ms,vs,ys,xs,bs,ws,ks,Cs,Ds,Ps,Ss={sphere:_,point:we,lineStart:Ce,lineEnd:De,polygonStart:function(){Ss.lineStart=Pe},polygonEnd:function(){Ss.lineStart=Ce}},As=Me(Se,He,Be,[-Po,-Po/2]),Es=1e9;Vi.geo.clipExtent=function(){var t,e,n,a,r,i,o={stream:function(t){return r&&(r.valid=!1),r=i(t),r.valid=!0,r},extent:function(s){return arguments.length?(i=$e(t=+s[0][0],e=+s[0][1],n=+s[1][0],a=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,a]]}};return o.extent([[0,0],[960,500]])},(Vi.geo.conicEqualArea=function(){return qe(Ge)}).raw=Ge,Vi.geo.albers=function(){return Vi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Vi.geo.albersUsa=function(){function t(t){var i=t[0],o=t[1];return e=null,n(i,o),e||(a(i,o),e)||r(i,o),e}var e,n,a,r,i=Vi.geo.albers(),o=Vi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Vi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=i.scale(),n=i.translate(),a=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&a>=-.425&&-.214>a?o:r>=.166&&.234>r&&a>=-.214&&-.115>a?s:i).invert(t)},t.stream=function(t){var e=i.stream(t),n=o.stream(t),a=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),a.point(t,r)},sphere:function(){e.sphere(),n.sphere(),a.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),a.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),a.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),a.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),a.polygonEnd()}}},t.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),s.precision(e),t):i.precision()},t.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),s.scale(e),t.translate(i.translate())):i.scale()},t.translate=function(e){if(!arguments.length)return i.translate();var c=i.scale(),u=+e[0],h=+e[1];return n=i.translate(e).clipExtent([[u-.455*c,h-.238*c],[u+.455*c,h+.238*c]]).stream(l).point,a=o.translate([u-.307*c,h+.201*c]).clipExtent([[u-.425*c+Eo,h+.12*c+Eo],[u-.214*c-Eo,h+.234*c-Eo]]).stream(l).point,r=s.translate([u-.205*c,h+.212*c]).clipExtent([[u-.214*c+Eo,h+.166*c+Eo],[u-.115*c-Eo,h+.234*c-Eo]]).stream(l).point,t},t.scale(1070)};var Ts,Ms,Fs,Ns,Is,zs,Hs={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Ms=0,Hs.lineStart=We},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=_,Ts+=lo(Ms/2)}},Ls={point:Ye,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Bs={point:Qe,lineStart:Xe,lineEnd:Je,polygonStart:function(){Bs.lineStart=Ke},polygonEnd:function(){Bs.point=Qe,Bs.lineStart=Xe,Bs.lineEnd=Je}};Vi.geo.path=function(){function t(t){return t&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(i)),Vi.geo.stream(t,o)),i.result()}function e(){return o=null,t}var n,a,r,i,o,s=4.5;return t.area=function(t){return Ts=0,Vi.geo.stream(t,r(Hs)),Ts},t.centroid=function(t){return vs=ys=xs=bs=ws=ks=Cs=Ds=Ps=0,Vi.geo.stream(t,r(Bs)),Ps?[Cs/Ps,Ds/Ps]:ks?[bs/ks,ws/ks]:xs?[vs/xs,ys/xs]:[NaN,NaN]},t.bounds=function(t){return Is=zs=-(Fs=Ns=1/0),Vi.geo.stream(t,r(Ls)),[[Fs,Ns],[Is,zs]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||en(t):St,e()):n},t.context=function(t){return arguments.length?(i=null==(a=t)?new Ue:new Ze(t),"function"!=typeof s&&i.pointRadius(s),e()):a},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(i.pointRadius(+e),+e),t):s},t.projection(Vi.geo.albersUsa()).context(null)},Vi.geo.transform=function(t){return{stream:function(e){var n=new nn(e);for(var a in t)n[a]=t[a];return n}}},nn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Vi.geo.projection=rn,Vi.geo.projectionMutator=on,(Vi.geo.equirectangular=function(){return rn(ln)}).raw=ln.invert=ln,Vi.geo.rotation=function(t){function e(e){return e=t(e[0]*Mo,e[1]*Mo),e[0]*=Fo,e[1]*=Fo,e}return t=un(t[0]%360*Mo,t[1]*Mo,t.length>2?t[2]*Mo:0),e.invert=function(e){return e=t.invert(e[0]*Mo,e[1]*Mo),e[0]*=Fo,e[1]*=Fo,e},e},cn.invert=ln,Vi.geo.circle=function(){function t(){var t="function"==typeof a?a.apply(this,arguments):a,e=un(-t[0]*Mo,-t[1]*Mo,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Fo,t[1]*=Fo}}),{type:"Polygon",coordinates:[r]}}var e,n,a=[0,0],r=6;return t.origin=function(e){return arguments.length?(a=e,t):a},t.angle=function(a){return arguments.length?(n=fn((e=+a)*Mo,r*Mo),t):e},t.precision=function(a){return arguments.length?(n=fn(e*Mo,(r=+a)*Mo),t):r},t.angle(90)},Vi.geo.distance=function(t,e){var n,a=(e[0]-t[0])*Mo,r=t[1]*Mo,i=e[1]*Mo,o=Math.sin(a),s=Math.cos(a),l=Math.sin(r),c=Math.cos(r),u=Math.sin(i),h=Math.cos(i);return Math.atan2(Math.sqrt((n=h*o)*n+(n=c*u-l*h*s)*n),l*u+c*h*s)},Vi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Vi.range(Math.ceil(i/g)*g,r,g).map(d).concat(Vi.range(Math.ceil(c/m)*m,l,m).map(p)).concat(Vi.range(Math.ceil(a/f)*f,n,f).filter(function(t){return lo(t%g)>Eo}).map(u)).concat(Vi.range(Math.ceil(s/_)*_,o,_).filter(function(t){return lo(t%m)>Eo}).map(h))}var n,a,r,i,o,s,l,c,u,h,d,p,f=10,_=f,g=90,m=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(p(l).slice(1),d(r).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],c=+e[0][1],l=+e[1][1],i>r&&(e=i,i=r,r=e),c>l&&(e=c,c=l,l=e),t.precision(v)):[[i,c],[r,l]]},t.minorExtent=function(e){return arguments.length?(a=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],a>n&&(e=a,a=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(v)):[[a,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.minorStep=function(e){return arguments.length?(f=+e[0],_=+e[1],t):[f,_]},t.precision=function(e){return arguments.length?(v=+e,u=gn(s,o,90),h=mn(a,n,v),d=gn(c,l,90),p=mn(i,r,v),t):v},t.majorExtent([[-180,-90+Eo],[180,90-Eo]]).minorExtent([[-180,-80-Eo],[180,80+Eo]])},Vi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||a.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,a=vn,r=yn;return t.distance=function(){return Vi.geo.distance(e||a.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(a=n,e="function"==typeof n?null:n,t):a},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},Vi.geo.interpolate=function(t,e){return xn(t[0]*Mo,t[1]*Mo,e[0]*Mo,e[1]*Mo)},Vi.geo.length=function(t){return js=0,Vi.geo.stream(t,Os),js};var js,Os={sphere:_,point:_,lineStart:bn,lineEnd:_,polygonStart:_,polygonEnd:_},$s=wn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Vi.geo.azimuthalEqualArea=function(){return rn($s)}).raw=$s;var Rs=wn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},St);(Vi.geo.azimuthalEquidistant=function(){return rn(Rs)}).raw=Rs,(Vi.geo.conicConformal=function(){return qe(kn)}).raw=kn,(Vi.geo.conicEquidistant=function(){return qe(Cn)}).raw=Cn;var qs=wn(function(t){return 1/t},Math.atan);(Vi.geo.gnomonic=function(){return rn(qs)}).raw=qs,Dn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ao]},(Vi.geo.mercator=function(){return Pn(Dn)}).raw=Dn;var Gs=wn(function(){return 1},Math.asin);(Vi.geo.orthographic=function(){return rn(Gs)}).raw=Gs;var Ws=wn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Vi.geo.stereographic=function(){return rn(Ws)}).raw=Ws,Sn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ao]},(Vi.geo.transverseMercator=function(){var t=Pn(Sn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=Sn,Vi.geom={},Vi.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Pt(n),i=Pt(a),o=t.length,s=[],l=[];for(e=0;o>e;e++)s.push([+r.call(this,t[e],e),+i.call(this,t[e],e),e]);for(s.sort(Mn),e=0;o>e;e++)l.push([s[e][0],-s[e][1]]);var c=Tn(s),u=Tn(l),h=u[0]===c[0],d=u[u.length-1]===c[c.length-1],p=[];for(e=c.length-1;e>=0;--e)p.push(t[s[c[e]][2]]);for(e=+h;e<u.length-d;++e)p.push(t[s[u[e]][2]]);return p}var n=An,a=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(a=t,e):a},e)},Vi.geom.polygon=function(t){return fo(t,Ys),t};var Ys=Vi.geom.polygon.prototype=[];Ys.area=function(){for(var t,e=-1,n=this.length,a=this[n-1],r=0;++e<n;)t=a,a=this[e],r+=t[1]*a[0]-t[0]*a[1];return.5*r},Ys.centroid=function(t){var e,n,a=-1,r=this.length,i=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++a<r;)e=s,s=this[a],n=e[0]*s[1]-s[0]*e[1],i+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[i*t,o*t]},Ys.clip=function(t){for(var e,n,a,r,i,o,s=In(t),l=-1,c=this.length-In(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,r=this[l],i=e[(a=e.length-s)-1],n=-1;++n<a;)o=e[n],Fn(o,u,r)?(Fn(i,u,r)||t.push(Nn(i,o,u,r)),t.push(o)):Fn(i,u,r)&&t.push(Nn(i,o,u,r)),i=o;s&&t.push(t[0]),u=r}return t};var Us,Vs,Qs,Xs,Js,Ks=[],Zs=[];Rn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Gn),e.length},ta.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ea.prototype={insert:function(t,e){var n,a,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ia(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)a=n.U,n===a.L?(r=a.R,r&&r.C?(n.C=r.C=!1,a.C=!0,t=a):(t===n.R&&(aa(this,n),t=n,n=t.U),n.C=!1,a.C=!0,ra(this,a))):(r=a.L,r&&r.C?(n.C=r.C=!1,a.C=!0,t=a):(t===n.L&&(ra(this,n),t=n,n=t.U),n.C=!1,a.C=!0,aa(this,a))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,a,r=t.U,i=t.L,o=t.R;if(n=i?o?ia(o):i:o,r?r.L===t?r.L=n:r.R=n:this._=n,i&&o?(a=n.C,n.C=t.C,n.L=i,i.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(a=t.C,t=n),t&&(t.U=r),!a){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,aa(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ra(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,aa(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,ra(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,aa(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ra(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},Vi.geom.voronoi=function(t){function e(t){var e=new Array(t.length),a=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1];return oa(n(t),s).cells.forEach(function(n,s){var l=n.edges,c=n.site,u=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=a&&c.x<=i&&c.y>=r&&c.y<=o?[[a,o],[i,o],[i,r],[a,r]]:[];u.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/Eo)*Eo,y:Math.round(o(t,e)/Eo)*Eo,i:e}})}var a=An,r=En,i=a,o=r,s=tl;return t?e(t):(e.links=function(t){return oa(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return oa(n(t)).cells.forEach(function(n,a){for(var r,i,o=n.site,s=n.edges.sort(Gn),l=-1,c=s.length,u=s[c-1].edge,h=u.l===o?u.r:u.l;++l<c;)r=u,i=h,u=s[l].edge,h=u.l===o?u.r:u.l,a<i.i&&a<h.i&&la(o,i,h)<0&&e.push([t[a],t[i.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(i=Pt(a=t),e):a},e.y=function(t){return arguments.length?(o=Pt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?tl:t,e):s===tl?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===tl?null:s&&s[1]},e)};var tl=[[-1e6,-1e6],[1e6,1e6]];Vi.geom.delaunay=function(t){return Vi.geom.voronoi().triangles(t)},Vi.geom.quadtree=function(t,e,n,a,r){function i(t){function i(t,e,n,a,r,i,o,s){if(!isNaN(n)&&!isNaN(a))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(lo(l-n)+lo(u-a)<.01)c(t,e,n,a,r,i,o,s);else{var h=t.point;t.x=t.y=t.point=null,c(t,h,l,u,r,i,o,s),c(t,e,n,a,r,i,o,s)}else t.x=n,t.y=a,t.point=e}else c(t,e,n,a,r,i,o,s)}function c(t,e,n,a,r,o,s,l){var c=.5*(r+s),u=.5*(o+l),h=n>=c,d=a>=u,p=(d<<1)+h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=ha()),h?r=c:s=c,d?o=u:l=u,i(t,e,n,a,r,o,s,l)}var u,h,d,p,f,_,g,m,v,y=Pt(s),x=Pt(l);if(null!=e)_=e,g=n,m=a,v=r;else if(m=v=-(_=g=1/0),h=[],d=[],f=t.length,o)for(p=0;f>p;++p)u=t[p],u.x<_&&(_=u.x),u.y<g&&(g=u.y),u.x>m&&(m=u.x),u.y>v&&(v=u.y),h.push(u.x),d.push(u.y);else for(p=0;f>p;++p){var b=+y(u=t[p],p),w=+x(u,p);_>b&&(_=b),g>w&&(g=w),b>m&&(m=b),w>v&&(v=w),h.push(b),d.push(w)}var k=m-_,C=v-g;k>C?v=g+k:m=_+C;var D=ha();if(D.add=function(t){i(D,t,+y(t,++p),+x(t,p),_,g,m,v)},D.visit=function(t){da(t,D,_,g,m,v)},p=-1,null==e){for(;++p<f;)i(D,t[p],h[p],d[p],_,g,m,v);--p}else t.forEach(D.add);return h=d=t=u=null,D}var o,s=An,l=En;return(o=arguments.length)?(s=ca,l=ua,3===o&&(r=n,a=e,n=e=0),i(t)):(i.x=function(t){return arguments.length?(s=t,i):s},i.y=function(t){return arguments.length?(l=t,i):l},i.extent=function(t){return arguments.length?(null==t?e=n=a=r=null:(e=+t[0][0],n=+t[0][1],a=+t[1][0],r=+t[1][1]),i):null==e?null:[[e,n],[a,r]]},i.size=function(t){return arguments.length?(null==t?e=n=a=r=null:(e=n=0,a=+t[0],r=+t[1]),i):null==e?null:[a-e,r-n]},i)},Vi.interpolateRgb=pa,Vi.interpolateObject=fa,Vi.interpolateNumber=_a,Vi.interpolateString=ga;var el=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nl=new RegExp(el.source,"g");Vi.interpolate=ma,Vi.interpolators=[function(t,e){var n=typeof e;return("string"===n?Uo.has(e)||/^(#|rgb\(|hsl\()/.test(e)?pa:ga:e instanceof nt?pa:Array.isArray(e)?va:"object"===n&&isNaN(e)?fa:_a)(t,e)}],Vi.interpolateArray=va;var al=function(){return St},rl=Vi.map({linear:al,poly:Da,quad:function(){return wa},cubic:function(){return ka},sin:function(){return Pa},exp:function(){return Sa},circle:function(){return Aa},elastic:Ea,back:Ta,bounce:function(){return Ma}}),il=Vi.map({"in":St,out:xa,"in-out":ba,"out-in":function(t){return ba(xa(t))}});Vi.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,a=e>=0?t.substring(e+1):"in";return n=rl.get(n)||al,a=il.get(a)||St,ya(a(n.apply(null,Qi.call(arguments,1))))},Vi.interpolateHcl=Fa,Vi.interpolateHsl=Na,Vi.interpolateLab=Ia,Vi.interpolateRound=za,Vi.transform=function(t){var e=Ji.createElementNS(Vi.ns.prefix.svg,"g");return(Vi.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Ha(n?n.matrix:ol)})(t)},Ha.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};Vi.interpolateTransform=Oa,Vi.layout={},Vi.layout.bundle=function(){return function(t){for(var e=[],n=-1,a=t.length;++n<a;)e.push(qa(t[n]));return e}},Vi.layout.chord=function(){function t(){var t,c,h,d,p,f={},_=[],g=Vi.range(i),m=[];for(n=[],a=[],t=0,d=-1;++d<i;){for(c=0,p=-1;++p<i;)c+=r[d][p];_.push(c),m.push(Vi.range(i)),t+=c}for(o&&g.sort(function(t,e){return o(_[t],_[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(So-u*i)/t,c=0,d=-1;++d<i;){for(h=c,p=-1;++p<i;){var v=g[d],y=m[v][p],x=r[v][y],b=c,w=c+=x*t;f[v+"-"+y]={index:v,subindex:y,startAngle:b,endAngle:w,value:x}}a[v]={index:v,startAngle:h,endAngle:c,value:(c-h)/t},c+=u}for(d=-1;++d<i;)for(p=d-1;++p<i;){var k=f[d+"-"+p],C=f[p+"-"+d];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,a,r,i,o,s,l,c={},u=0;return c.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,n=a=null,c):r},c.padding=function(t){return arguments.length?(u=t,n=a=null,c):u},c.sortGroups=function(t){return arguments.length?(o=t,n=a=null,c):o},c.sortSubgroups=function(t){return arguments.length?(s=t,n=null,c):s},c.sortChords=function(t){return arguments.length?(l=t,n&&e(),c):l},c.chords=function(){return n||t(),n},c.groups=function(){return a||t(),a},c},Vi.layout.force=function(){function t(t){return function(e,n,a,r){if(e.point!==t){var i=e.cx-t.x,o=e.cy-t.y,s=r-n,l=i*i+o*o;if(l>s*s/g){if(f>l){var c=e.charge/l;t.px-=i*c,t.py-=o*c}return!0}if(e.point&&l&&f>l){var c=e.pointCharge/l;t.px-=i*c,t.py-=o*c}}return!e.charge}}function e(t){t.px=Vi.event.x,t.py=Vi.event.y,s.resume()}var n,a,r,i,o,s={},l=Vi.dispatch("start","tick","end"),c=[1,1],u=.9,h=sl,d=ll,p=-30,f=cl,_=.1,g=.64,m=[],v=[];return s.tick=function(){if((a*=.99)<.005)return l.end({type:"end",alpha:a=0}),!0;var e,n,s,h,d,f,g,y,x,b=m.length,w=v.length;for(n=0;w>n;++n)s=v[n],h=s.source,d=s.target,y=d.x-h.x,x=d.y-h.y,(f=y*y+x*x)&&(f=a*i[n]*((f=Math.sqrt(f))-r[n])/f,y*=f,x*=f,d.x-=y*(g=h.weight/(d.weight+h.weight)),d.y-=x*g,h.x+=y*(g=1-g),h.y+=x*g);if((g=a*_)&&(y=c[0]/2,x=c[1]/2,n=-1,g))for(;++n<b;)s=m[n],s.x+=(y-s.x)*g,s.y+=(x-s.y)*g;if(p)for(Xa(e=Vi.geom.quadtree(m),a,o),n=-1;++n<b;)(s=m[n]).fixed||e.visit(t(s));for(n=-1;++n<b;)s=m[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:a})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(v=t,s):v},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(f=t*t,s):Math.sqrt(f)},s.gravity=function(t){return arguments.length?(_=+t,s):_},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,a?a=t>0?t:0:t>0&&(l.start({type:"start",alpha:a=t}),Vi.timer(s.tick)),s):a},s.start=function(){function t(t,a){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var r=v[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var i,o=n[e],s=-1,c=o.length;++s<c;)if(!isNaN(i=o[s][t]))return i;return Math.random()*a}var e,n,a,l=m.length,u=v.length,f=c[0],_=c[1];for(e=0;l>e;++e)(a=m[e]).index=e,a.weight=0;for(e=0;u>e;++e)a=v[e],"number"==typeof a.source&&(a.source=m[a.source]),"number"==typeof a.target&&(a.target=m[a.target]),++a.source.weight,++a.target.weight;for(e=0;l>e;++e)a=m[e],isNaN(a.x)&&(a.x=t("x",f)),isNaN(a.y)&&(a.y=t("y",_)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(r=[],"function"==typeof h)for(e=0;u>e;++e)r[e]=+h.call(this,v[e],e);else for(e=0;u>e;++e)r[e]=h;if(i=[],"function"==typeof d)for(e=0;u>e;++e)i[e]=+d.call(this,v[e],e);else for(e=0;u>e;++e)i[e]=d;if(o=[],"function"==typeof p)for(e=0;l>e;++e)o[e]=+p.call(this,m[e],e);else for(e=0;l>e;++e)o[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=Vi.behavior.drag().origin(St).on("dragstart.force",Ya).on("drag.force",e).on("dragend.force",Ua)),arguments.length?void this.on("mouseover.force",Va).on("mouseout.force",Qa).call(n):n},Vi.rebind(s,l,"on")};var sl=20,ll=1,cl=1/0;Vi.layout.hierarchy=function(){function t(r){var i,o=[r],s=[];for(r.depth=0;null!=(i=o.pop());)if(s.push(i),(c=n.call(t,i,i.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=i,u.depth=i.depth+1;a&&(i.value=0),i.children=c}else a&&(i.value=+a.call(t,i,i.depth)||0),delete i.children;return Za(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),a&&(r=t.parent)&&(r.value+=t.value)}),s}var e=nr,n=tr,a=er;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(a=e,t):a},t.revalue=function(e){return a&&(Ka(e,function(t){t.children&&(t.value=0)}),Za(e,function(e){var n;e.children||(e.value=+a.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Vi.layout.partition=function(){function t(e,n,a,r){var i=e.children;if(e.x=n,e.y=e.depth*r,e.dx=a,e.dy=r,i&&(o=i.length)){var o,s,l,c=-1;for(a=e.value?a/e.value:0;++c<o;)t(s=i[c],n,l=s.value*a,r),n+=l}}function e(t){var n=t.children,a=0;if(n&&(r=n.length))for(var r,i=-1;++i<r;)a=Math.max(a,e(n[i]));return 1+a}function n(n,i){var o=a.call(this,n,i);return t(o[0],0,r[0],r[1]/e(o[0])),o}var a=Vi.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Ja(n,a)},Vi.layout.pie=function(){function t(i){var o=i.map(function(n,a){return+e.call(t,n,a)}),s=+("function"==typeof a?a.apply(this,arguments):a),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/Vi.sum(o),c=Vi.range(i.length);null!=n&&c.sort(n===ul?function(t,e){return o[e]-o[t]}:function(t,e){return n(i[t],i[e])});var u=[];return c.forEach(function(t){var e;u[t]={data:i[t],value:e=o[t],startAngle:s,endAngle:s+=e*l}}),u}var e=Number,n=ul,a=0,r=So;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(a=e,t):a},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var ul={};Vi.layout.stack=function(){function t(s,l){var c=s.map(function(n,a){return e.call(t,n,a)}),u=c.map(function(e){return e.map(function(e,n){return[i.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,u,l);c=Vi.permute(c,h),u=Vi.permute(u,h);var d,p,f,_=a.call(t,u,l),g=c.length,m=c[0].length;for(p=0;m>p;++p)for(r.call(t,c[0][p],f=_[p],u[0][p][1]),d=1;g>d;++d)r.call(t,c[d][p],f+=u[d-1][p][1],u[d][p][1]);return s}var e=St,n=sr,a=lr,r=or,i=rr,o=ir;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:hl.get(e)||sr,t):n},t.offset=function(e){return arguments.length?(a="function"==typeof e?e:dl.get(e)||lr,t):a},t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var hl=Vi.map({"inside-out":function(t){var e,n,a=t.length,r=t.map(cr),i=t.map(ur),o=Vi.range(a).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,c=[],u=[];for(e=0;a>e;++e)n=o[e],l>s?(s+=i[n],c.push(n)):(l+=i[n],u.push(n));return u.reverse().concat(c)},reverse:function(t){return Vi.range(t.length).reverse()},"default":sr}),dl=Vi.map({silhouette:function(t){var e,n,a,r=t.length,i=t[0].length,o=[],s=0,l=[];for(n=0;i>n;++n){for(e=0,a=0;r>e;e++)a+=t[e][n][1];a>s&&(s=a),o.push(a)}for(n=0;i>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,a,r,i,o,s,l,c,u=t.length,h=t[0],d=h.length,p=[];for(p[0]=l=c=0,n=1;d>n;++n){for(e=0,r=0;u>e;++e)r+=t[e][n][1];for(e=0,i=0,s=h[n][0]-h[n-1][0];u>e;++e){for(a=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>a;++a)o+=(t[a][n][1]-t[a][n-1][1])/s;i+=o*t[e][n][1]}p[n]=l-=r?i/r*s:0,c>l&&(c=l)}for(n=0;d>n;++n)p[n]-=c;return p},expand:function(t){var e,n,a,r=t.length,i=t[0].length,o=1/r,s=[];for(n=0;i>n;++n){for(e=0,a=0;r>e;e++)a+=t[e][n][1];if(a)for(e=0;r>e;e++)t[e][n][1]/=a;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;i>n;++n)s[n]=0;return s},zero:lr});Vi.layout.histogram=function(){function t(t,i){for(var o,s,l=[],c=t.map(n,this),u=a.call(this,c,i),h=r.call(this,u,c,i),i=-1,d=c.length,p=h.length-1,f=e?1:1/d;++i<p;)o=l[i]=[],o.dx=h[i+1]-(o.x=h[i]),o.y=0;if(p>0)for(i=-1;++i<d;)s=c[i],s>=u[0]&&s<=u[1]&&(o=l[Vi.bisect(h,s,1,p)-1],o.y+=f,o.push(t[i]));return l}var e=!0,n=Number,a=fr,r=dr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(a=Pt(e),t):a},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return pr(t,e)}:Pt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Vi.layout.pack=function(){function t(t,i){var o=n.call(this,t,i),s=o[0],l=r[0],c=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Za(s,function(t){t.r=+u(t.value)}),Za(s,yr),a){var h=a*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;Za(s,function(t){t.r+=h}),Za(s,yr),Za(s,function(t){t.r-=h})}return wr(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}var e,n=Vi.layout.hierarchy().sort(_r),a=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(a=+e,t):a},Ja(t,n)},Vi.layout.tree=function(){function t(t,r){var u=o.call(this,t,r),h=u[0],d=e(h);if(Za(d,n),d.parent.m=-d.z,Ka(d,a),c)Ka(h,i);else{var p=h,f=h,_=h;Ka(h,function(t){t.x<p.x&&(p=t),t.x>f.x&&(f=t),t.depth>_.depth&&(_=t)});var g=s(p,f)/2-p.x,m=l[0]/(f.x+s(f,p)/2+g),v=l[1]/(_.depth||1);Ka(h,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return u}function e(t){for(var e,n={A:null,children:[t]},a=[n];null!=(e=a.pop());)for(var r,i=e.children,o=0,s=i.length;s>o;++o)a.push((i[o]=r={_:i[o],parent:e,children:(r=i[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,a=t.i?n[t.i-1]:null;if(e.length){Ar(t);var i=(e[0].z+e[e.length-1].z)/2;a?(t.z=a.z+s(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+s(t._,a._));t.parent.A=r(t,a,t.parent.A||n[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var a,r=t,i=t,o=e,l=r.parent.children[0],c=r.m,u=i.m,h=o.m,d=l.m;o=Pr(o),r=Dr(r),o&&r;)l=Dr(l),i=Pr(i),i.a=t,a=o.z+h-r.z-c+s(o._,r._),a>0&&(Sr(Er(o,t,n),t,a),c+=a,u+=a),h+=o.m,c+=r.m,d+=l.m,u+=i.m;o&&!Pr(i)&&(i.t=o,i.m+=h-u),r&&!Dr(l)&&(l.t=r,l.m+=c-d,n=t)}return n}function i(t){t.x*=l[0],t.y=t.depth*l[1]}var o=Vi.layout.hierarchy().sort(null).value(null),s=Cr,l=[1,1],c=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(c=null==(l=e)?i:null,t):c?null:l},t.nodeSize=function(e){return arguments.length?(c=null==(l=e)?null:i,t):c?l:null},Ja(t,o)},Vi.layout.cluster=function(){function t(t,i){var o,s=e.call(this,t,i),l=s[0],c=0;Za(l,function(t){var e=t.children;e&&e.length?(t.x=Mr(e),t.y=Tr(e)):(t.x=o?c+=n(t,o):0,t.y=0,o=t)});var u=Fr(l),h=Nr(l),d=u.x-n(u,h)/2,p=h.x+n(h,u)/2;return Za(l,r?function(t){t.x=(t.x-l.x)*a[0],t.y=(l.y-t.y)*a[1]}:function(t){t.x=(t.x-d)/(p-d)*a[0],t.y=(1-(l.y?t.y/l.y:1))*a[1]}),s}var e=Vi.layout.hierarchy().sort(null).value(null),n=Cr,a=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(a=e),t):r?null:a},t.nodeSize=function(e){return arguments.length?(r=null!=(a=e),t):r?a:null},Ja(t,e)},Vi.layout.treemap=function(){function t(t,e){for(var n,a,r=-1,i=t.length;++r<i;)a=(n=t[r]).value*(0>e?0:e),n.area=isNaN(a)||0>=a?0:a}function e(n){var i=n.children;if(i&&i.length){var o,s,l,c=h(n),u=[],d=i.slice(),f=1/0,_="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(d,c.dx*c.dy/n.value),u.area=0;(l=d.length)>0;)u.push(o=d[l-1]),u.area+=o.area,"squarify"!==p||(s=a(u,_))<=f?(d.pop(),f=s):(u.area-=u.pop().area,r(u,_,c,!1),_=Math.min(c.dx,c.dy),u.length=u.area=0,f=1/0);u.length&&(r(u,_,c,!0),u.length=u.area=0),i.forEach(e)}}function n(e){var a=e.children;if(a&&a.length){var i,o=h(e),s=a.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;i=s.pop();)l.push(i),l.area+=i.area,null!=i.z&&(r(l,i.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);a.forEach(n)}}function a(t,e){
for(var n,a=t.area,r=0,i=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(i>n&&(i=n),n>r&&(r=n));return a*=a,e*=e,a?Math.max(e*r*f/a,a/(e*i*f)):1/0}function r(t,e,n,a){var r,i=-1,o=t.length,s=n.x,c=n.y,u=e?l(t.area/e):0;if(e==n.dx){for((a||u>n.dy)&&(u=n.dy);++i<o;)r=t[i],r.x=s,r.y=c,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?l(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((a||u>n.dx)&&(u=n.dx);++i<o;)r=t[i],r.x=s,r.y=c,r.dx=u,c+=r.dy=Math.min(n.y+n.dy-c,u?l(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function i(a){var r=o||s(a),i=r[0];return i.x=0,i.y=0,i.dx=c[0],i.dy=c[1],o&&s.revalue(i),t([i],i.dx*i.dy/i.value),(o?n:e)(i),d&&(o=r),r}var o,s=Vi.layout.hierarchy(),l=Math.round,c=[1,1],u=null,h=Ir,d=!1,p="squarify",f=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(c=t,i):c},i.padding=function(t){function e(e){var n=t.call(i,e,e.depth);return null==n?Ir(e):zr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return zr(e,t)}if(!arguments.length)return u;var a;return h=null==(u=t)?Ir:"function"==(a=typeof t)?e:"number"===a?(t=[t,t,t,t],n):n,i},i.round=function(t){return arguments.length?(l=t?Math.round:Number,i):l!=Number},i.sticky=function(t){return arguments.length?(d=t,o=null,i):d},i.ratio=function(t){return arguments.length?(f=t,i):f},i.mode=function(t){return arguments.length?(p=t+"",i):p},Ja(i,s)},Vi.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,a,r;do n=2*Math.random()-1,a=2*Math.random()-1,r=n*n+a*a;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=Vi.random.normal.apply(Vi,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Vi.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Vi.scale={};var pl={floor:St,ceil:St};Vi.scale.linear=function(){return Rr([0,1],[0,1],ma,!1)};var fl={s:1,g:1,p:1,r:1,e:1};Vi.scale.log=function(){return Xr(Vi.scale.linear().domain([0,1]),10,!0,[1,10])};var _l=Vi.format(".0e"),gl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Vi.scale.pow=function(){return Jr(Vi.scale.linear(),1,[0,1])},Vi.scale.sqrt=function(){return Vi.scale.pow().exponent(.5)},Vi.scale.ordinal=function(){return Zr([],{t:"range",a:[[]]})},Vi.scale.category10=function(){return Vi.scale.ordinal().range(ml)},Vi.scale.category20=function(){return Vi.scale.ordinal().range(vl)},Vi.scale.category20b=function(){return Vi.scale.ordinal().range(yl)},Vi.scale.category20c=function(){return Vi.scale.ordinal().range(xl)};var ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mt),vl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mt),yl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mt),xl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mt);Vi.scale.quantile=function(){return ti([],[])},Vi.scale.quantize=function(){return ei(0,1,[0,1])},Vi.scale.threshold=function(){return ni([.5],[0,1])},Vi.scale.identity=function(){return ai([0,1])},Vi.svg={},Vi.svg.arc=function(){function t(){var t=e.apply(this,arguments),i=n.apply(this,arguments),o=a.apply(this,arguments)+bl,s=r.apply(this,arguments)+bl,l=(o>s&&(l=o,o=s,s=l),s-o),c=Po>l?"0":"1",u=Math.cos(o),h=Math.sin(o),d=Math.cos(s),p=Math.sin(s);return l>=wl?t?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":t?"M"+i*u+","+i*h+"A"+i+","+i+" 0 "+c+",1 "+i*d+","+i*p+"L"+t*d+","+t*p+"A"+t+","+t+" 0 "+c+",0 "+t*u+","+t*h+"Z":"M"+i*u+","+i*h+"A"+i+","+i+" 0 "+c+",1 "+i*d+","+i*p+"L0,0Z"}var e=ri,n=ii,a=oi,r=si;return t.innerRadius=function(n){return arguments.length?(e=Pt(n),t):e},t.outerRadius=function(e){return arguments.length?(n=Pt(e),t):n},t.startAngle=function(e){return arguments.length?(a=Pt(e),t):a},t.endAngle=function(e){return arguments.length?(r=Pt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,i=(a.apply(this,arguments)+r.apply(this,arguments))/2+bl;return[Math.cos(i)*t,Math.sin(i)*t]},t};var bl=-Ao,wl=So-Eo;Vi.svg.line=function(){return li(St)};var kl=Vi.map({linear:ci,"linear-closed":ui,step:hi,"step-before":di,"step-after":pi,basis:yi,"basis-open":xi,"basis-closed":bi,bundle:wi,cardinal:gi,"cardinal-open":fi,"cardinal-closed":_i,monotone:Ai});kl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Cl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];Vi.svg.line.radial=function(){var t=li(Ei);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},di.reverse=pi,pi.reverse=di,Vi.svg.area=function(){return Ti(St)},Vi.svg.area.radial=function(){var t=Ti(Ei);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Vi.svg.chord=function(){function t(t,s){var l=e(this,i,t,s),c=e(this,o,t,s);return"M"+l.p0+a(l.r,l.p1,l.a1-l.a0)+(n(l,c)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,c.r,c.p0)+a(c.r,c.p1,c.a1-c.a0)+r(c.r,c.p1,l.r,l.p0))+"Z"}function e(t,e,n,a){var r=e.call(t,n,a),i=s.call(t,r,a),o=l.call(t,r,a)+bl,u=c.call(t,r,a)+bl;return{r:i,a0:o,a1:u,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(u),i*Math.sin(u)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Po)+",1 "+e}function r(t,e,n,a){return"Q 0,0 "+a}var i=vn,o=yn,s=Mi,l=oi,c=si;return t.radius=function(e){return arguments.length?(s=Pt(e),t):s},t.source=function(e){return arguments.length?(i=Pt(e),t):i},t.target=function(e){return arguments.length?(o=Pt(e),t):o},t.startAngle=function(e){return arguments.length?(l=Pt(e),t):l},t.endAngle=function(e){return arguments.length?(c=Pt(e),t):c},t},Vi.svg.diagonal=function(){function t(t,r){var i=e.call(this,t,r),o=n.call(this,t,r),s=(i.y+o.y)/2,l=[i,{x:i.x,y:s},{x:o.x,y:s},o];return l=l.map(a),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=vn,n=yn,a=Fi;return t.source=function(n){return arguments.length?(e=Pt(n),t):e},t.target=function(e){return arguments.length?(n=Pt(e),t):n},t.projection=function(e){return arguments.length?(a=e,t):a},t},Vi.svg.diagonal.radial=function(){var t=Vi.svg.diagonal(),e=Fi,n=t.projection;return t.projection=function(t){return arguments.length?n(Ni(e=t)):e},t},Vi.svg.symbol=function(){function t(t,a){return(Sl.get(e.call(this,t,a))||Hi)(n.call(this,t,a))}var e=zi,n=Ii;return t.type=function(n){return arguments.length?(e=Pt(n),t):e},t.size=function(e){return arguments.length?(n=Pt(e),t):n},t};var Sl=Vi.map({circle:Hi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ml)),n=e*Ml;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Tl),n=e*Tl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Tl),n=e*Tl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Vi.svg.symbolTypes=Sl.keys();var Al,El,Tl=Math.sqrt(3),Ml=Math.tan(30*Mo),Fl=[],Nl=0;Fl.call=yo.call,Fl.empty=yo.empty,Fl.node=yo.node,Fl.size=yo.size,Vi.transition=function(t){return arguments.length?Al?t.transition():t:wo.transition()},Vi.transition.prototype=Fl,Fl.select=function(t){var e,n,a,r=this.id,i=[];t=w(t);for(var o=-1,s=this.length;++o<s;){i.push(e=[]);for(var l=this[o],c=-1,u=l.length;++c<u;)(a=l[c])&&(n=t.call(a,a.__data__,c,o))?("__data__"in a&&(n.__data__=a.__data__),Oi(n,c,r,a.__transition__[r]),e.push(n)):e.push(null)}return Li(i,r)},Fl.selectAll=function(t){var e,n,a,r,i,o=this.id,s=[];t=k(t);for(var l=-1,c=this.length;++l<c;)for(var u=this[l],h=-1,d=u.length;++h<d;)if(a=u[h]){i=a.__transition__[o],n=t.call(a,a.__data__,h,l),s.push(e=[]);for(var p=-1,f=n.length;++p<f;)(r=n[p])&&Oi(r,p,o,i),e.push(r)}return Li(s,o)},Fl.filter=function(t){var e,n,a,r=[];"function"!=typeof t&&(t=I(t));for(var i=0,o=this.length;o>i;i++){r.push(e=[]);for(var n=this[i],s=0,l=n.length;l>s;s++)(a=n[s])&&t.call(a,a.__data__,s,i)&&e.push(a)}return Li(r,this.id)},Fl.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):H(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(a){a.__transition__[n].tween.set(t,e)})},Fl.attr=function(t,e){function n(){this.removeAttribute(s)}function a(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function i(t){return null==t?a:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Oa:ma,s=Vi.ns.qualify(t);return Bi(this,"attr."+t,e,s.local?i:r)},Fl.attrTween=function(t,e){function n(t,n){var a=e.call(this,t,n,this.getAttribute(r));return a&&function(t){this.setAttribute(r,a(t))}}function a(t,n){var a=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return a&&function(t){this.setAttributeNS(r.space,r.local,a(t))}}var r=Vi.ns.qualify(t);return this.tween("attr."+t,r.local?a:n)},Fl.style=function(t,e,n){function a(){this.style.removeProperty(t)}function r(e){return null==e?a:(e+="",function(){var a,r=Zi.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(a=ma(r,e),function(e){this.style.setProperty(t,a(e),n)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Bi(this,"style."+t,e,r)},Fl.styleTween=function(t,e,n){function a(a,r){var i=e.call(this,a,r,Zi.getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,a)},Fl.text=function(t){return Bi(this,"text",t,ji)},Fl.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Fl.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Vi.ease.apply(Vi,arguments)),H(this,function(n){n.__transition__[e].ease=t}))},Fl.delay=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].delay:H(this,"function"==typeof t?function(n,a,r){n.__transition__[e].delay=+t.call(n,n.__data__,a,r)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Fl.duration=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].duration:H(this,"function"==typeof t?function(n,a,r){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,a,r))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Fl.each=function(t,e){var n=this.id;if(arguments.length<2){var a=El,r=Al;Al=n,H(this,function(e,a,r){El=e.__transition__[n],t.call(e,e.__data__,a,r)}),El=a,Al=r}else H(this,function(a){var r=a.__transition__[n];(r.event||(r.event=Vi.dispatch("start","end"))).on(t,e)});return this},Fl.transition=function(){for(var t,e,n,a,r=this.id,i=++Nl,o=[],s=0,l=this.length;l>s;s++){o.push(t=[]);for(var e=this[s],c=0,u=e.length;u>c;c++)(n=e[c])&&(a=Object.create(n.__transition__[r]),a.delay+=a.duration,Oi(n,c,i,a)),t.push(n)}return Li(o,i)},Vi.svg.axis=function(){function t(t){t.each(function(){var t,c=Vi.select(this),u=this.__chart__||n,h=this.__chart__=n.copy(),d=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,p=null==e?h.tickFormat?h.tickFormat.apply(h,s):St:e,f=c.selectAll(".tick").data(d,h),_=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Eo),g=Vi.transition(f.exit()).style("opacity",Eo).remove(),m=Vi.transition(f.order()).style("opacity",1),v=Lr(h),y=c.selectAll(".domain").data([0]),x=(y.enter().append("path").attr("class","domain"),Vi.transition(y));_.append("line"),_.append("text");var b=_.select("line"),w=m.select("line"),k=f.select("text").text(p),C=_.select("text"),D=m.select("text");switch(a){case"bottom":t=$i,b.attr("y2",r),C.attr("y",Math.max(r,0)+o),w.attr("x2",0).attr("y2",r),D.attr("x",0).attr("y",Math.max(r,0)+o),k.attr("dy",".71em").style("text-anchor","middle"),x.attr("d","M"+v[0]+","+i+"V0H"+v[1]+"V"+i);break;case"top":t=$i,b.attr("y2",-r),C.attr("y",-(Math.max(r,0)+o)),w.attr("x2",0).attr("y2",-r),D.attr("x",0).attr("y",-(Math.max(r,0)+o)),k.attr("dy","0em").style("text-anchor","middle"),x.attr("d","M"+v[0]+","+-i+"V0H"+v[1]+"V"+-i);break;case"left":t=Ri,b.attr("x2",-r),C.attr("x",-(Math.max(r,0)+o)),w.attr("x2",-r).attr("y2",0),D.attr("x",-(Math.max(r,0)+o)).attr("y",0),k.attr("dy",".32em").style("text-anchor","end"),x.attr("d","M"+-i+","+v[0]+"H0V"+v[1]+"H"+-i);break;case"right":t=Ri,b.attr("x2",r),C.attr("x",Math.max(r,0)+o),w.attr("x2",r).attr("y2",0),D.attr("x",Math.max(r,0)+o).attr("y",0),k.attr("dy",".32em").style("text-anchor","start"),x.attr("d","M"+i+","+v[0]+"H0V"+v[1]+"H"+i)}if(h.rangeBand){var P=h,S=P.rangeBand()/2;u=h=function(t){return P(t)+S}}else u.rangeBand?u=h:g.call(t,h);_.call(t,u),m.call(t,h)})}var e,n=Vi.scale.linear(),a=Il,r=6,i=6,o=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(a=e in zl?e+"":Il,t):a},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,i=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(i=+e,t):i},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Il="bottom",zl={top:1,right:1,bottom:1,left:1};Vi.svg.brush=function(){function t(i){i.each(function(){var i=Vi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=i.selectAll(".resize").data(f,St);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Hl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,h=Vi.transition(i),d=Vi.transition(o);l&&(u=Lr(l),d.attr("x",u[0]).attr("width",u[1]-u[0]),n(h)),c&&(u=Lr(c),d.attr("y",u[0]).attr("height",u[1]-u[0]),a(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function a(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function r(){function r(){32==Vi.event.keyCode&&(A||(y=null,T[0]-=u[1],T[1]-=h[1],A=2),v())}function f(){32==Vi.event.keyCode&&2==A&&(T[0]+=u[1],T[1]+=h[1],A=0,v())}function _(){var t=Vi.mouse(b),r=!1;x&&(t[0]+=x[0],t[1]+=x[1]),A||(Vi.event.altKey?(y||(y=[(u[0]+u[1])/2,(h[0]+h[1])/2]),T[0]=u[+(t[0]<y[0])],T[1]=h[+(t[1]<y[1])]):y=null),P&&g(t,l,0)&&(n(C),r=!0),S&&g(t,c,1)&&(a(C),r=!0),r&&(e(C),k({type:"brush",mode:A?"move":"resize"}))}function g(t,e,n){var a,r,s=Lr(e),l=s[0],c=s[1],f=T[n],_=n?h:u,g=_[1]-_[0];return A&&(l-=f,c-=g+f),a=(n?p:d)?Math.max(l,Math.min(c,t[n])):t[n],A?r=(a+=f)+g:(y&&(f=Math.max(l,Math.min(c,2*y[n]-a))),a>f?(r=a,a=f):r=f),_[0]!=a||_[1]!=r?(n?o=null:i=null,_[0]=a,_[1]=r,!0):void 0}function m(){_(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Vi.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var y,x,b=this,w=Vi.select(Vi.event.target),k=s.of(b,arguments),C=Vi.select(b),D=w.datum(),P=!/^(n|s)$/.test(D)&&l,S=!/^(e|w)$/.test(D)&&c,A=w.classed("extent"),E=q(),T=Vi.mouse(b),M=Vi.select(Zi).on("keydown.brush",r).on("keyup.brush",f);if(Vi.event.changedTouches?M.on("touchmove.brush",_).on("touchend.brush",m):M.on("mousemove.brush",_).on("mouseup.brush",m),C.interrupt().selectAll("*").interrupt(),A)T[0]=u[0]-T[0],T[1]=h[0]-T[1];else if(D){var F=+/w$/.test(D),N=+/^n/.test(D);x=[u[1-F]-T[0],h[1-N]-T[1]],T[0]=u[F],T[1]=h[N]}else Vi.event.altKey&&(y=T.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),Vi.select("body").style("cursor",w.style("cursor")),k({type:"brushstart"}),_()}var i,o,s=x(t,"brushstart","brush","brushend"),l=null,c=null,u=[0,0],h=[0,0],d=!0,p=!0,f=Ll[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:u,y:h,i:i,j:o},n=this.__chart__||e;this.__chart__=e,Al?Vi.select(this).transition().each("start.brush",function(){i=n.i,o=n.j,u=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=va(u,e.x),a=va(h,e.y);return i=o=null,function(r){u=e.x=n(r),h=e.y=a(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,o=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,f=Ll[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,f=Ll[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],p=!!e[1]):l?d=!!e:c&&(p=!!e),t):l&&c?[d,p]:l?d:c?p:null},t.extent=function(e){var n,a,r,s,d;return arguments.length?(l&&(n=e[0],a=e[1],c&&(n=n[0],a=a[0]),i=[n,a],l.invert&&(n=l(n),a=l(a)),n>a&&(d=n,n=a,a=d),(n!=u[0]||a!=u[1])&&(u=[n,a])),c&&(r=e[0],s=e[1],l&&(r=r[1],s=s[1]),o=[r,s],c.invert&&(r=c(r),s=c(s)),r>s&&(d=r,r=s,s=d),(r!=h[0]||s!=h[1])&&(h=[r,s])),t):(l&&(i?(n=i[0],a=i[1]):(n=u[0],a=u[1],l.invert&&(n=l.invert(n),a=l.invert(a)),n>a&&(d=n,n=a,a=d))),c&&(o?(r=o[0],s=o[1]):(r=h[0],s=h[1],c.invert&&(r=c.invert(r),s=c.invert(s)),r>s&&(d=r,r=s,s=d))),l&&c?[[n,r],[a,s]]:l?[n,a]:c&&[r,s])},t.clear=function(){return t.empty()||(u=[0,0],h=[0,0],i=o=null),t},t.empty=function(){return!!l&&u[0]==u[1]||!!c&&h[0]==h[1]},Vi.rebind(t,s,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ll=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=as.format=cs.timeFormat,jl=Bl.utc,Ol=jl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qi:Ol,qi.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},qi.toString=Ol.toString,as.second=jt(function(t){return new rs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),as.seconds=as.second.range,as.seconds.utc=as.second.utc.range,as.minute=jt(function(t){return new rs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),as.minutes=as.minute.range,as.minutes.utc=as.minute.utc.range,as.hour=jt(function(t){var e=t.getTimezoneOffset()/60;return new rs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),as.hours=as.hour.range,as.hours.utc=as.hour.utc.range,as.month=jt(function(t){return t=as.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),as.months=as.month.range,as.months.utc=as.month.utc.range;var $l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Rl=[[as.second,1],[as.second,5],[as.second,15],[as.second,30],[as.minute,1],[as.minute,5],[as.minute,15],[as.minute,30],[as.hour,1],[as.hour,3],[as.hour,6],[as.hour,12],[as.day,1],[as.day,2],[as.week,1],[as.month,1],[as.month,3],[as.year,1]],ql=Bl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Se]]),Gl={range:function(t,e,n){return Vi.range(Math.ceil(t/n)*n,+e,n).map(Wi)},floor:St,ceil:St};Rl.year=as.year,as.scale=function(){return Gi(Vi.scale.linear(),Rl,ql)};var Wl=Rl.map(function(t){return[t[0].utc,t[1]]}),Yl=jl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Se]]);Wl.year=as.year.utc,as.scale.utc=function(){return Gi(Vi.scale.linear(),Wl,Yl)},Vi.text=At(function(t){return t.responseText}),Vi.json=function(t,e){return Et(t,"application/json",Yi,e)},Vi.html=function(t,e){return Et(t,"text/html",Ui,e)},Vi.xml=At(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Vi):"object"==typeof module&&module.exports?module.exports=Vi:this.d3=Vi}(),/*! jQuery UI - v1.11.2 - 2015-01-17
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, draggable.js, droppable.js, sortable.js, datepicker.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,a){var r,i,o,s=e.nodeName.toLowerCase();return"area"===s?(r=e.parentNode,i=r.name,e.href&&i&&"map"===r.nodeName.toLowerCase()?(o=t("img[usemap='#"+i+"']")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||a:a)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}function a(t){for(var e,n;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function r(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",o)}function o(){t.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function s(e,n){t.extend(e,n);for(var a in n)null==n[a]&&(e[a]=n[a]);return e}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),a="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=t(this);return a&&"static"===e.css("position")?!1:r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,a){return!!t.data(e,a[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var a=t.attr(n,"tabindex"),r=isNaN(a);return(r||a>=0)&&e(n,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function a(e,n,a,i){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,a&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),i&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){t(this).css(i,a(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){t(this).css(i,a(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,a){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),a&&a.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,a,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,n,a){var r,i=t.ui[e].prototype;for(r in a)i.plugins[r]=i.plugins[r]||[],i.plugins[r].push([n,a[r]])},call:function(t,e,n,a){var r,i=t.plugins[e];if(i&&(a||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;i.length>r;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,n)}};var l=0,c=Array.prototype.slice;t.cleanData=function(e){return function(n){var a,r,i;for(i=0;null!=(r=n[i]);i++)try{a=t._data(r,"events"),a&&a.remove&&t(r).triggerHandler("remove")}catch(o){}e(n)}}(t.cleanData),t.widget=function(e,n,a){var r,i,o,s,l={},c=e.split(".")[0];return e=e.split(".")[1],r=c+"-"+e,a||(a=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},i=t[c][e],o=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,i,{version:a.version,_proto:t.extend({},a),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(a,function(e,a){return t.isFunction(a)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,i=this._superApply;return this._super=t,this._superApply=r,e=a.apply(this,arguments),this._super=n,this._superApply=i,e}}()):void(l[e]=a)}),o.prototype=t.widget.extend(s,{widgetEventPrefix:i?s.widgetEventPrefix||e:e},l,{constructor:o,namespace:c,widgetName:e,widgetFullName:r}),i?(t.each(i._childConstructors,function(e,n){var a=n.prototype;t.widget(a.namespace+"."+a.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,a,r=c.call(arguments,1),i=0,o=r.length;o>i;i++)for(n in r[i])a=r[i][n],r[i].hasOwnProperty(n)&&void 0!==a&&(e[n]=t.isPlainObject(a)?t.isPlainObject(e[n])?t.widget.extend({},e[n],a):t.widget.extend({},a):a);return e},t.widget.bridge=function(e,n){var a=n.prototype.widgetFullName||e;t.fn[e]=function(r){var i="string"==typeof r,o=c.call(arguments,1),s=this;return r=!i&&o.length?t.widget.extend.apply(null,[r].concat(o)):r,i?this.each(function(){var n,i=t.data(this,a);return"instance"===r?(s=i,!1):i?t.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,o),n!==i&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var e=t.data(this,a);e?(e.option(r||{}),e._init&&e._init()):t.data(this,a,new n(r,this))}),s}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var a,r,i,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},a=e.split("."),e=a.shift(),a.length){for(r=o[e]=t.widget.extend({},this.options[e]),i=0;a.length-1>i;i++)r[a[i]]=r[a[i]]||{},r=r[a[i]];if(e=a.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=n}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,a){var r,i=this;"boolean"!=typeof e&&(a=n,n=e,e=!1),a?(n=r=t(n),this.bindings=this.bindings.add(n)):(a=n,n=this.element,r=this.widget()),t.each(a,function(a,o){function s(){return e||i.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?i[o]:o).apply(i,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++);var l=a.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+i.eventNamespace,u=l[2];u?r.delegate(u,c,s):n.bind(c,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?a[t]:t).apply(a,arguments)}var a=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,a){var r,i,o=this.options[e];if(a=a||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],i=n.originalEvent)for(r in i)r in n||(n[r]=i[r]);return this.element.trigger(n,a),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(a))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(a,r,i){"string"==typeof r&&(r={effect:r});var o,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=i,r.delay&&a.delay(r.delay),o&&t.effects&&t.effects.effect[s]?a[e](r):s!==e&&a[s]?a[s](r.duration,r.easing,i):a.queue(function(n){t(this)[e](),i&&i.call(a[0]),n()})}}),t.widget;var u=!1;t(document).mouseup(function(){u=!1}),t.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,a=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return a&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),u=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.draggable",t.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return this._blurActiveElement(e),this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=this.document[0];if(this.handleElement.is(e.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&t(n.activeElement).blur()}catch(a){}},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var a=this._uiHash();if(this._trigger("drag",e,a)===!1)return this._mouseUp({}),!1;this.position=a.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,a=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(a=t.ui.ddmanager.drop(this,e)),this.dropped&&(a=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var n=this.options,a=t.isFunction(n.helper),r=a?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),a&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,a,r=this.options,i=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(i).width()-this.helperProportions.width-this.margins.left,(t(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),a=n[0],void(a&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,a=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,a,r,i,o=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(a=this.relativeContainer.offset(),n=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,i=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?i-this.offset.click.left>=n[0]||i-this.offset.click.left>n[2]?i:i-this.offset.click.left>=n[0]?i-o.grid[0]:i+o.grid[0]:i),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,n,a){return a=a||this._uiHash(),t.ui.plugin.call(this,e,[n,a,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),a.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,a){var r=t.extend({},n,{item:a.element});a.sortables=[],t(a.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(a.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n,a){var r=t.extend({},n,{item:a.element});a.cancelHelperRemoval=!1,t.each(a.sortables,function(){var t=this;t.isOver?(t.isOver=0,a.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))})},drag:function(e,n,a){t.each(a.sortables,function(){var r=!1,i=this;i.positionAbs=a.positionAbs,i.helperProportions=a.helperProportions,i.offset.click=a.offset.click,i._intersectsWith(i.containerCache)&&(r=!0,t.each(a.sortables,function(){return this.positionAbs=a.positionAbs,this.helperProportions=a.helperProportions,this.offset.click=a.offset.click,this!==i&&this._intersectsWith(this.containerCache)&&t.contains(i.element[0],this.element[0])&&(r=!1),r})),r?(i.isOver||(i.isOver=1,i.currentItem=n.helper.appendTo(i.element).data("ui-sortable-item",!0),i.options._helper=i.options.helper,i.options.helper=function(){return n.helper[0]},e.target=i.currentItem[0],i._mouseCapture(e,!0),i._mouseStart(e,!0,!0),i.offset.click.top=a.offset.click.top,i.offset.click.left=a.offset.click.left,i.offset.parent.left-=a.offset.parent.left-i.offset.parent.left,i.offset.parent.top-=a.offset.parent.top-i.offset.parent.top,a._trigger("toSortable",e),a.dropped=i.element,t.each(a.sortables,function(){this.refreshPositions()}),a.currentItem=a.element,i.fromOutside=a),i.currentItem&&(i._mouseDrag(e),n.position=i.position)):i.isOver&&(i.isOver=0,i.cancelHelperRemoval=!0,i.options._revert=i.options.revert,i.options.revert=!1,i._trigger("out",e,i._uiHash(i)),i._mouseStop(e,!0),i.options.revert=i.options._revert,i.options.helper=i.options._helper,i.placeholder&&i.placeholder.remove(),a._refreshOffsets(e),n.position=a._generatePosition(e,!0),a._trigger("fromSortable",e),a.dropped=!1,t.each(a.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,a){var r=t("body"),i=a.options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(e,n,a){var r=a.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,a){var r=t(n.helper),i=a.options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(e,n,a){var r=a.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,a){var r=a.options,i=!1,o=a.scrollParentNotHidden[0],s=a.document[0];o!==s&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(a.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity?o.scrollTop=i=o.scrollTop+r.scrollSpeed:e.pageY-a.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=i=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(a.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity?o.scrollLeft=i=o.scrollLeft+r.scrollSpeed:e.pageX-a.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=i=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?i=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(i=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?i=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(i=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),i!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(a,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,a){var r=a.options;a.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();this!==a.element[0]&&a.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,a){var r,i,o,s,l,c,u,h,d,p,f=a.options,_=f.snapTolerance,g=n.offset.left,m=g+a.helperProportions.width,v=n.offset.top,y=v+a.helperProportions.height;for(d=a.snapElements.length-1;d>=0;d--)l=a.snapElements[d].left-a.margins.left,c=l+a.snapElements[d].width,u=a.snapElements[d].top-a.margins.top,
h=u+a.snapElements[d].height,l-_>m||g>c+_||u-_>y||v>h+_||!t.contains(a.snapElements[d].item.ownerDocument,a.snapElements[d].item)?(a.snapElements[d].snapping&&a.options.snap.release&&a.options.snap.release.call(a.element,e,t.extend(a._uiHash(),{snapItem:a.snapElements[d].item})),a.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=_>=Math.abs(u-y),i=_>=Math.abs(h-v),o=_>=Math.abs(l-m),s=_>=Math.abs(c-g),r&&(n.position.top=a._convertPositionTo("relative",{top:u-a.helperProportions.height,left:0}).top),i&&(n.position.top=a._convertPositionTo("relative",{top:h,left:0}).top),o&&(n.position.left=a._convertPositionTo("relative",{top:0,left:l-a.helperProportions.width}).left),s&&(n.position.left=a._convertPositionTo("relative",{top:0,left:c}).left)),p=r||i||o||s,"outer"!==f.snapMode&&(r=_>=Math.abs(u-v),i=_>=Math.abs(h-y),o=_>=Math.abs(l-g),s=_>=Math.abs(c-m),r&&(n.position.top=a._convertPositionTo("relative",{top:u,left:0}).top),i&&(n.position.top=a._convertPositionTo("relative",{top:h-a.helperProportions.height,left:0}).top),o&&(n.position.left=a._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=a._convertPositionTo("relative",{top:0,left:c-a.helperProportions.width}).left)),!a.snapElements[d].snapping&&(r||i||o||s||p)&&a.options.snap.snap&&a.options.snap.snap.call(a.element,e,t.extend(a._uiHash(),{snapItem:a.snapElements[d].item})),a.snapElements[d].snapping=r||i||o||s||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,a){var r,i=a.options,o=t.makeArray(t(i.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});o.length&&(r=parseInt(t(o[0]).css("zIndex"),10)||0,t(o).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+o.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,a){var r=t(n.helper),i=a.options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(e,n,a){var r=a.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,a=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(a)?a:function(t){return t.is(a)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var a=t.ui.ddmanager.droppables[this.options.scope];this._splice(a),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var a=n||t.ui.ddmanager.current,r=!1;return a&&(a.currentItem||a.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===a.options.scope&&n.accept.call(n.element[0],a.currentItem||a.element)&&t.ui.intersect(a,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],a.currentItem||a.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(a)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,n){return t>=e&&e+n>t}return function(e,n,a,r){if(!n.offset)return!1;var i=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,s=i+e.helperProportions.width,l=o+e.helperProportions.height,c=n.offset.left,u=n.offset.top,h=c+n.proportions().width,d=u+n.proportions().height;switch(a){case"fit":return i>=c&&h>=s&&o>=u&&d>=l;case"intersect":return i+e.helperProportions.width/2>c&&h>s-e.helperProportions.width/2&&o+e.helperProportions.height/2>u&&d>l-e.helperProportions.height/2;case"pointer":return t(r.pageY,u,n.proportions().height)&&t(r.pageX,c,n.proportions().width);case"touch":return(o>=u&&d>=o||l>=u&&d>=l||u>o&&l>d)&&(i>=c&&h>=i||s>=c&&h>=s||c>i&&s>h);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var a,r,i=t.ui.ddmanager.droppables[e.options.scope]||[],o=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(a=0;i.length>a;a++)if(!(i[a].options.disabled||e&&!i[a].accept.call(i[a].element[0],e.currentItem||e.element))){for(r=0;s.length>r;r++)if(s[r]===i[a].element[0]){i[a].proportions().height=0;continue t}i[a].visible="none"!==i[a].element.css("display"),i[a].visible&&("mousedown"===o&&i[a]._activate.call(i[a],n),i[a].offset=i[a].element.offset(),i[a].proportions({width:i[a].element[0].offsetWidth,height:i[a].element[0].offsetHeight}))}},drop:function(e,n){var a=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,n)&&(a=this._drop.call(this,n)||a),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),a},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var a,r,i,o=t.ui.intersect(e,this,this.options.tolerance,n),s=!o&&this.isover?"isout":o&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,i=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r}),i.length&&(a=t(i[0]).droppable("instance"),a.greedyChild="isover"===s)),a&&"isover"===s&&(a.isover=!1,a.isout=!0,a._out.call(a,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),a&&"isout"===s&&(a.isout=!1,a.isover=!0,a._over.call(a,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},t.ui.droppable,t.widget("ui.sortable",t.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&e+n>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var a=null,r=!1,i=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,i.widgetName+"-item")===i?(a=t(this),!1):void 0}),t.data(e.target,i.widgetName+"-item")===i&&(a=t(e.target)),a&&(!this.options.handle||n||(t(this.options.handle,a).find("*").addBack().each(function(){this===e.target&&(r=!0)}),r))?(this.currentItem=a,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,n,a){var r,i,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(i=this.document.find("body"),this.storedCursor=i.css("cursor"),i.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(i)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!a)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,a,r,i,o=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),s!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(a=this.items[n],r=a.item[0],i=this._intersectsWithPointer(a),i&&a.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===i?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],r):!0)){if(this.direction=1===i?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var a=this,r=this.placeholder.offset(),i=this.options.axis,o={};i&&"x"!==i||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),i&&"y"!==i||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){a._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),a=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&a.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!a.length&&e.key&&a.push(e.key+"="),a.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),a=[];return e=e||{},n.each(function(){a.push(t(e.item||this).attr(e.attribute||"id")||"")}),a},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,a=this.positionAbs.top,r=a+this.helperProportions.height,i=t.left,o=i+t.width,s=t.top,l=s+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||a+c>s&&l>a+c,d="y"===this.options.axis||e+u>i&&o>e+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>i&&o>n-this.helperProportions.width/2&&a+this.helperProportions.height/2>s&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=e&&n,r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return a?this.floating?i&&"right"===i||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:a&&("down"===a&&e||"up"===a&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){s.push(this)}var a,r,i,o,s=[],l=[],c=this._connectWith();if(c&&e)for(a=c.length-1;a>=0;a--)for(i=t(c[a]),r=i.length-1;r>=0;r--)o=t.data(i[r],this.widgetFullName),o&&o!==this&&!o.options.disabled&&l.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),a=l.length-1;a>=0;a--)l[a][0].each(n);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;e.length>n;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,a,r,i,o,s,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=t(d[n]),a=r.length-1;a>=0;a--)i=t.data(r[a],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(h.push([t.isFunction(i.options.items)?i.options.items.call(i.element[0],e,{item:this.currentItem}):t(i.options.items,i.element),i]),this.containers.push(i));for(n=h.length-1;n>=0;n--)for(o=h[n][1],s=h[n][0],a=0,c=s.length;c>a;a++)l=t(s[a]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,a,r,i;for(n=this.items.length-1;n>=0;n--)a=this.items[n],a.instance!==this.currentContainer&&this.currentContainer&&a.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,a.item):a.item,e||(a.width=r.outerWidth(),a.height=r.outerHeight()),i=r.offset(),a.left=i.left,a.top=i.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)i=this.containers[n].element.offset(),this.containers[n].containerCache.left=i.left,this.containers[n].containerCache.top=i.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,a=e.options;a.placeholder&&a.placeholder.constructor!==String||(n=a.placeholder,a.placeholder={element:function(){var a=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+a+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===a?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(r)}):"img"===a&&r.attr("src",e.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(t,r){(!n||a.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(a.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),a.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var n,a,r,i,o,s,l,c,u,h,d=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(r=1e4,i=null,u=d.floating||this._isFloating(this.currentItem),o=u?"left":"top",s=u?"width":"height",h=u?"clientX":"clientY",a=this.items.length-1;a>=0;a--)t.contains(this.containers[p].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(l=this.items[a].item.offset()[o],c=!1,e[h]-l>this.items[a][s]/2&&(c=!0),r>Math.abs(e[h]-l)&&(r=Math.abs(e[h]-l),i=this.items[a],this.direction=c?"up":"down"));if(!i&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));i?this._rearrange(e,i,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var n=this.options,a=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return a.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]),a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!a[0].style.width||n.forceHelperSize)&&a.width(this.currentItem.width()),(!a[0].style.height||n.forceHelperSize)&&a.height(this.currentItem.height()),a},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,a,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],n=t(r.containment).offset(),a="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(a?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(a?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var a="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:r.scrollTop())*a,left:n.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())*a}},_generatePosition:function(e){var n,a,r=this.options,i=e.pageX,o=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,a=this.originalPageX+Math.round((i-this.originalPageX)/r.grid[0])*r.grid[0],i=this.containment?a-this.offset.click.left>=this.containment[0]&&a-this.offset.click.left<=this.containment[2]?a:a-this.offset.click.left>=this.containment[0]?a-r.grid[0]:a+r.grid[0]:a)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(t,e,n,a){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!a)})},_clear:function(t,e){function n(t,e,n){return function(a){n._trigger(t,a,e._uiHash(e))}}this.reverting=!1;var a,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(a in this._storedCSS)("auto"===this._storedCSS[a]||"static"===this._storedCSS[a])&&(this._storedCSS[a]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),a=this.containers.length-1;a>=0;a--)e||r.push(n("deactivate",this,this.containers[a])),this.containers[a].containerCache.over&&(r.push(n("out",this,this.containers[a])),this.containers[a].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(a=0;r.length>a;a++)r[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}}),t.extend(t.ui,{datepicker:{version:"1.11.2"}});var h;t.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var a,r,i;a=e.nodeName.toLowerCase(),r="div"===a||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),i=this._newInst(t(e),r),i.settings=t.extend({},n||{}),"input"===a?this._connectDatepicker(e,i):r&&this._inlineDatepicker(e,i)},_newInst:function(e,n){var a=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:a,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,
drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var a=t(e);n.append=t([]),n.trigger=t([]),a.hasClass(this.markerClassName)||(this._attachments(a,n),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var a,r,i,o=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[s?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),a=this._get(n,"showOn"),("focus"===a||"both"===a)&&e.focus(this._showDatepicker),("button"===a||"both"===a)&&(r=this._get(n,"buttonText"),i=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:i,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(i?t("<img/>").attr({src:i,alt:r,title:r}):r)),e[s?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,a,r,i=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(n=0,a=0,r=0;t.length>r;r++)t[r].length>n&&(n=t[r].length,a=r);return a},i.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay())),t.input.attr("size",this._formatDate(t,i).length)}},_inlineDatepicker:function(e,n){var a=t(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,a,r,i){var o,l,c,u,h,d=this._dialogInst;return d||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),s(d.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var n,a=t(e),r=t.data(e,"datepicker");a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===n?(r.append.remove(),r.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,a,r=t(e),i=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(a=r.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,a,r=t(e),i=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(a=r.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,a){var r,i,o,l,c=this._getInst(e);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):c?"all"===n?t.extend({},c.settings):this._get(c,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=a),void(c&&(this._curInst===c&&this._hideDatepicker(),i=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,r),null!==o&&void 0!==r.dateFormat&&void 0===r.minDate&&(c.settings.minDate=this._formatDate(c,o)),null!==l&&void 0!==r.dateFormat&&void 0===r.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),c),this._autoSize(c),this._setDate(c,i),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,a,r,i=t.datepicker._getInst(e.target),o=!0,s=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",i.dpDiv),r[0]&&t.datepicker._selectDay(e.target,i.selectedMonth,i.selectedYear,r[0]),n=t.datepicker._get(i,"onSelect"),n?(a=t.datepicker._formatDate(i),n.apply(i.input?i.input[0]:null,[a,i])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(i,"stepBigMonths"):-t.datepicker._get(i,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(i,"stepBigMonths"):+t.datepicker._get(i,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(i,"stepBigMonths"):-t.datepicker._get(i,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(i,"stepBigMonths"):+t.datepicker._get(i,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,a,r=t.datepicker._getInst(e.target);return t.datepicker._get(r,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),a=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">a||!n||n.indexOf(a)>-1):void 0},_doKeyUp:function(e){var n,a=t.datepicker._getInst(e.target);if(a.input.val()!==a.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,t.datepicker._getFormatConfig(a)),n&&(t.datepicker._setDateFromField(a),t.datepicker._updateAlternate(a),t.datepicker._updateDatepicker(a))}catch(r){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,r,i,o,l,c,u;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),r=t.datepicker._get(n,"beforeShow"),i=r?r.apply(e,[e,n]):{},i!==!1&&(s(n.settings,i),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return o|="fixed"===t(this).css("position"),!o}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),l=t.datepicker._checkOffset(n,l,o),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(c=t.datepicker._get(n,"showAnim"),u=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",a(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[c]?n.dpDiv.show(c,t.datepicker._get(n,"showOptions"),u):n.dpDiv[c||"show"](c?u:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,h=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n,a=this._getNumberOfMonths(e),r=a[1],i=17,s=e.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&o.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",i*r+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,a){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(a?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?r-o:0,n.left-=a&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=a&&n.top===e.input.offset().top+s?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+i>c&&c>i?Math.abs(i+s):0),n},_findPos:function(e){for(var n,a=this._getInst(e),r=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,a,r,i,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),a=this._get(o,"duration"),r=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[n]||t.effects[n])?o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),a,r):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?a:null,r),n||r(),this._datepickerShowing=!1,i=this._get(o,"onClose"),i&&i.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),a=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==a)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,a){var r=t(e),i=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(i,n+("M"===a?this._get(i,"showCurrentAtPos"):0),a),this._updateDatepicker(i))},_gotoToday:function(e){var n,a=t(e),r=this._getInst(a[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(a)},_selectMonthYear:function(e,n,a){var r=t(e),i=this._getInst(r[0]);i["selected"+("M"===a?"Month":"Year")]=i["draw"+("M"===a?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,n,a,r){var i,o=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(i=this._getInst(o[0]),i.selectedDay=i.currentDay=t("a",r).html(),i.selectedMonth=i.currentMonth=n,i.selectedYear=i.currentYear=a,this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var a,r=t(e),i=this._getInst(r[0]);n=null!=n?n:this._formatDate(i),i.input&&i.input.val(n),this._updateAlternate(i),a=this._get(i,"onSelect"),a?a.apply(i.input?i.input[0]:null,[n,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,a,r,i=this._get(e,"altField");i&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),r=this.formatDate(n,a,this._getFormatConfig(e)),t(i).each(function(){t(this).val(r)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,a){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var r,i,o,s,l=0,c=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,d=(a?a.dayNames:null)||this._defaults.dayNames,p=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,f=(a?a.monthNames:null)||this._defaults.monthNames,_=-1,g=-1,m=-1,v=-1,y=!1,x=function(t){var n=e.length>r+1&&e.charAt(r+1)===t;return n&&r++,n},b=function(t){var e=x(t),a="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r="y"===t?a:1,i=RegExp("^\\d{"+r+","+a+"}"),o=n.substring(l).match(i);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},w=function(e,a,r){var i=-1,o=t.map(x(e)?r:a,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var a=e[1];return n.substr(l,a.length).toLowerCase()===a.toLowerCase()?(i=e[0],l+=a.length,!1):void 0}),-1!==i)return i+1;throw"Unknown name at position "+l},k=function(){if(n.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;e.length>r;r++)if(y)"'"!==e.charAt(r)||x("'")?k():y=!1;else switch(e.charAt(r)){case"d":m=b("d");break;case"D":w("D",h,d);break;case"o":v=b("o");break;case"m":g=b("m");break;case"M":g=w("M",p,f);break;case"y":_=b("y");break;case"@":s=new Date(b("@")),_=s.getFullYear(),g=s.getMonth()+1,m=s.getDate();break;case"!":s=new Date((b("!")-this._ticksTo1970)/1e4),_=s.getFullYear(),g=s.getMonth()+1,m=s.getDate();break;case"'":x("'")?k():y=!0;break;default:k()}if(n.length>l&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===_?_=(new Date).getFullYear():100>_&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=_?0:-100)),v>-1)for(g=1,m=v;i=this._getDaysInMonth(_,g-1),!(i>=m);)g++,m-=i;if(s=this._daylightSavingAdjust(new Date(_,g-1,m)),s.getFullYear()!==_||s.getMonth()+1!==g||s.getDate()!==m)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,n){if(!e)return"";var a,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=t.length>a+1&&t.charAt(a+1)===e;return n&&a++,n},c=function(t,e,n){var a=""+e;if(l(t))for(;n>a.length;)a="0"+a;return a},u=function(t,e,n,a){return l(t)?a[e]:n[e]},h="",d=!1;if(e)for(a=0;t.length>a;a++)if(d)"'"!==t.charAt(a)||l("'")?h+=t.charAt(a):d=!1;else switch(t.charAt(a)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),r,i);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),o,s);break;case"y":h+=l("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(a)}return h},_possibleChars:function(t){var e,n="",a=!1,r=function(n){var a=t.length>e+1&&t.charAt(e+1)===n;return a&&e++,a};for(e=0;t.length>e;e++)if(a)"'"!==t.charAt(e)||r("'")?n+=t.charAt(e):a=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":a=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),i=r,o=this._getFormatConfig(t);try{i=this.parseDate(n,a,o)||r}catch(s){a=e?"":a}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=a?i.getDate():0,t.currentMonth=a?i.getMonth():0,t.currentYear=a?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,a){var r=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},i=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(a){}for(var r=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),o=r.getMonth(),s=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":s+=parseInt(c[1],10);break;case"w":case"W":s+=7*parseInt(c[1],10);break;case"m":case"M":o+=parseInt(c[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(i,o));break;case"y":case"Y":i+=parseInt(c[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(i,o))}c=l.exec(n)}return new Date(i,o,s)},o=null==n||""===n?a:"string"==typeof n?i(n):"number"==typeof n?isNaN(n)?a:r(n):new Date(n.getTime());return o=o&&"Invalid Date"==""+o?a:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var a=!e,r=t.selectedMonth,i=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),r===t.selectedMonth&&i===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(a?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(a,-n,"M")},next:function(){t.datepicker._adjustDate(a,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(a)},selectDay:function(){return t.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(a,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,a,r,i,o,s,l,c,u,h,d,p,f,_,g,m,v,y,x,b,w,k,C,D,P,S,A,E,T,M,F,N,I,z,H,L,B,j,O=new Date,$=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),R=this._get(t,"isRTL"),q=this._get(t,"showButtonPanel"),G=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),V=this._get(t,"stepMonths"),Q=1!==Y[0]||1!==Y[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),K=this._getMinMaxDate(t,"max"),Z=t.drawMonth-U,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),K)for(e=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-Y[0]*Y[1]+1,K.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-V,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(R?"e":"w")+"'>"+n+"</span></a>":G?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(R?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,Z+V,1)),this._getFormatConfig(t)):r,i=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(R?"w":"e")+"'>"+r+"</span></a>":G?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(R?"w":"e")+"'>"+r+"</span></a>",o=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?X:$,o=W?this.formatDate(o,s,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(R?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(R?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),_=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),m=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),x="",w=0;Y[0]>w;w++){for(k="",this.maxRows=4,C=0;Y[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),P=" ui-corner-all",S="",Q){if(S+="<div class='ui-datepicker-group",Y[1]>1)switch(C){case 0:S+=" ui-datepicker-group-first",P=" ui-corner-"+(R?"right":"left");break;case Y[1]-1:S+=" ui-datepicker-group-last",P=" ui-corner-"+(R?"left":"right");break;default:S+=" ui-datepicker-group-middle",P=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+P+"'>"+(/all|left/.test(P)&&0===w?R?i:a:"")+(/all|right/.test(P)&&0===w?R?a:i:"")+this._generateMonthYearHeader(t,Z,tt,J,K,w>0||C>0,f,_)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",b=0;7>b;b++)E=(b+u)%7,A+="<th scope='col'"+((b+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[E]+"'>"+p[E]+"</span></th>";for(S+=A+"</tr></thead><tbody>",T=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,T)),M=(this._getFirstDayOfMonth(tt,Z)-u+7)%7,F=Math.ceil((M+T)/7),N=Q&&this.maxRows>F?this.maxRows:F,this.maxRows=N,I=this._daylightSavingAdjust(new Date(tt,Z,1-M)),z=0;N>z;z++){for(S+="<tr>",H=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(I)+"</td>":"",b=0;7>b;b++)L=g?g.apply(t.input?t.input[0]:null,[I]):[!0,""],B=I.getMonth()!==Z,j=B&&!v||!L[0]||J&&J>I||K&&I>K,H+="<td class='"+((b+u+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(I.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||y.getTime()===I.getTime()&&y.getTime()===D.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!m?"":" "+L[1]+(I.getTime()===X.getTime()?" "+this._currentClass:"")+(I.getTime()===$.getTime()?" ui-datepicker-today":""))+"'"+(B&&!m||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(B&&!m?"&#xa0;":j?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===$.getTime()?" ui-state-highlight":"")+(I.getTime()===X.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);S+=H+"</tr>"}Z++,Z>11&&(Z=0,tt++),S+="</tbody></table>"+(Q?"</div>"+(Y[0]>0&&C===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=S}x+=k}return x+=c,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,a,r,i,o,s){var l,c,u,h,d,p,f,_,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(i||!g)x+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=a&&a.getFullYear()===n,c=r&&r.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=a.getMonth())&&(!c||r.getMonth()>=u)&&(x+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+s[u]+"</option>");x+="</select>"}if(v||(y+=x+(!i&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",i||!m)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(h[0]),_=Math.max(f,p(h[1]||"")),f=a?Math.max(f,a.getFullYear()):f,_=r?Math.min(_,r.getFullYear()):_,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";_>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),v&&(y+=(!i&&g&&m?"":"&#xa0;")+x),y+="</div>"},_adjustInstDate:function(t,e,n){var a=t.drawYear+("Y"===n?e:0),r=t.drawMonth+("M"===n?e:0),i=Math.min(t.selectedDay,this._getDaysInMonth(a,r))+("D"===n?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(a,r,i)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=n&&n>e?n:e;return a&&r>a?a:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,a){var r=this._getNumberOfMonths(t),i=this._daylightSavingAdjust(new Date(n,a+(0>e?e:r[0]*r[1]),1));return 0>e&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(t,i)},_isInRange:function(t,e){var n,a,r=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),a=(new Date).getFullYear(),o=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=a),n[1].match(/[+\-].*/)&&(s+=a)),(!r||e.getTime()>=r.getTime())&&(!i||e.getTime()<=i.getTime())&&(!o||e.getFullYear()>=o)&&(!s||s>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,a){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(a,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new r,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.2",t.datepicker}),/*!
	Autosize v1.18.9 - 2014-05-27
	Automatically adjust textarea height based on user input.
	(c) 2014 Jack Moore - http://www.jacklmoore.com/autosize
	license: http://www.opensource.org/licenses/mit-license.php
*/
function(t){var e,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},a='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],i=t(a).data("autosize",!0)[0];i.style.lineHeight="99px","99px"===t(i).css("lineHeight")&&r.push("lineHeight"),i.style.lineHeight="",t.fn.autosize=function(a){return this.length?(a=t.extend({},n,a||{}),i.parentNode!==document.body&&t(document.body).append(i),this.each(function(){function n(){var e,n=window.getComputedStyle?window.getComputedStyle(d,null):!1;n?(e=d.getBoundingClientRect().width,(0===e||"number"!=typeof e)&&(e=parseInt(n.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,a){e-=parseInt(n[a],10)})):e=p.width(),i.style.width=Math.max(e,0)+"px"}function o(){var o={};if(e=d,i.className=a.className,i.id=a.id,c=parseInt(p.css("maxHeight"),10),t.each(r,function(t,e){o[e]=p.css(e)}),t(i).css(o).attr("wrap",p.attr("wrap")),n(),window.chrome){var s=d.style.width;d.style.width="0px";d.offsetWidth;d.style.width=s}}function s(){var t,r;e!==d?o():n(),!d.value&&a.placeholder?i.value=(p.attr("placeholder")||"")+a.append:i.value=d.value+a.append,i.style.overflowY=d.style.overflowY,r=parseInt(d.style.height,10),i.scrollTop=0,i.scrollTop=9e4,t=i.scrollTop,c&&t>c?(d.style.overflowY="scroll",t=c):(d.style.overflowY="hidden",u>t&&(t=u)),t+=f,r!==t&&(d.style.height=t+"px",_&&a.callback.call(d,d))}function l(){clearTimeout(h),h=setTimeout(function(){var t=p.width();t!==m&&(m=t,s())},parseInt(a.resizeDelay,10))}var c,u,h,d=this,p=t(d),f=0,_=t.isFunction(a.callback),g={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},m=p.width(),v=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(f=p.outerHeight()-p.height()),u=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===v?p.css("resize","none"):"both"===v&&p.css("resize","horizontal"),"onpropertychange"in d?"oninput"in d?p.on("input.autosize keyup.autosize",s):p.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):p.on("input.autosize",s),a.resizeDelay!==!1&&t(window).on("resize.autosize",l),p.on("autosize.resize",s),p.on("autosize.resizeIncludeStyle",function(){e=null,s()}),p.on("autosize.destroy",function(){e=null,clearTimeout(h),t(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),s())})):this}}(window.jQuery||window.$),!function(t){t.fn.colourBrightness=function(t){var e,n,a,r,i=t;i.match(/^rgb/)?(i=i.match(/rgb\(([^)]+)\)/)[1],i=i.split(/ *, */).map(Number),e=i[0],n=i[1],a=i[2]):"#"==i[0]&&7==i.length?(e=parseInt(i.slice(1,3),16),n=parseInt(i.slice(3,5),16),a=parseInt(i.slice(5,7),16)):"#"==i[0]&&4==i.length&&(e=parseInt(i[1]+i[1],16),n=parseInt(i[2]+i[2],16),a=parseInt(i[3]+i[3],16)),r=(299*e+587*n+114*a)/1e3,125>r?this.removeClass("light").addClass("dark"):this.removeClass("dark").addClass("light")}}(jQuery),/*!
 @package noty - jQuery Notification Plugin
 @version version: 2.2.5
 @contributors https://github.com/needim/noty/graphs/contributors

 @documentation Examples and Documentation - http://needim.github.com/noty/

 @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php
 */
"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t){var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],t.noty.themes[this.options.theme]?this.options.theme=t.noty.themes[this.options.theme]:e.themeClassName=this.options.theme,delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var a=this;t.each(this.options.buttons,function(e,n){var r=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+e).appendTo(a.$bar.find(".noty_buttons")).on("click",function(){t.isFunction(n.onClick)&&n.onClick.call(r,a)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):t(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector)),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(!this.shown&&!this.showing){var n=[];return t.each(t.noty.queue,function(t,a){a.options.id!=e.options.id&&n.push(a)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut("fast",function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&(e.$bar.remove(),e.$bar=null,e.closed=!0),delete t.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&t.notyRenderer.render()})}},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},stopPropagation:function(t){t=t||window.event,"undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},closed:!1,showing:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var a=Object.create(e).init(n);return a.options.killer&&t.noty.closeAll(),a.options.force?t.noty.queue.unshift(a):t.noty.queue.push(a),t.notyRenderer.render(),"object"==t.noty.returns?a:a.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?e.options.maxVisible>0?t(e.options.layout.container.selector+" li").length<e.options.maxVisible&&t.notyRenderer.show(t.noty.queue.shift()):t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==t(e.options.layout.container.selector).length?t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){if(0==t(".noty_modal").length){var n=t("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&n.css(e.options.theme.modal.css),n.prependTo(t("body")).fadeIn("fast")}},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return t.noty.store.hasOwnProperty(e)?t.noty.store[e]:!1},t.noty.close=function(e){return t.noty.get(e)?t.noty.get(e).close():!1},t.noty.setText=function(e,n){return t.noty.get(e)?t.noty.get(e).setText(n):!1},t.noty.setType=function(e,n){return t.noty.get(e)?t.noty.get(e).setType(n):!1},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},t(window).on("resize",function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})})}(jQuery),window.noty=function(t){return jQuery.notyRenderer.init(t)},function(t){t.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){t(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){t(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){t(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){t(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){t(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){t(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){t(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){t(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){t(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){t(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),function(){var t=this,e=t._,n={},a=Array.prototype,r=Object.prototype,i=Function.prototype,o=a.push,s=a.slice,l=a.concat,c=r.toString,u=r.hasOwnProperty,h=a.forEach,d=a.map,p=a.reduce,f=a.reduceRight,_=a.filter,g=a.every,m=a.some,v=a.indexOf,y=a.lastIndexOf,x=Array.isArray,b=Object.keys,w=i.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(t,e,a){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,a);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(a,t[r],r,t)===n)return}else for(var o=k.keys(t),r=0,i=o.length;i>r;r++)if(e.call(a,t[o[r]],o[r],t)===n)return;return t};k.map=k.collect=function(t,e,n){var a=[];return null==t?a:d&&t.map===d?t.map(e,n):(C(t,function(t,r,i){a.push(e.call(n,t,r,i))}),a)};var D="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,a){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return a&&(e=k.bind(e,a)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,i,o){r?n=e.call(a,n,t,i,o):(n=t,r=!0)}),!r)throw new TypeError(D);return n},k.reduceRight=k.foldr=function(t,e,n,a){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return a&&(e=k.bind(e,a)),r?t.reduceRight(e,n):t.reduceRight(e);var i=t.length;if(i!==+i){var o=k.keys(t);i=o.length}if(C(t,function(s,l,c){l=o?o[--i]:--i,r?n=e.call(a,n,t[l],l,c):(n=t[l],r=!0)}),!r)throw new TypeError(D);return n},k.find=k.detect=function(t,e,n){var a;return P(t,function(t,r,i){return e.call(n,t,r,i)?(a=t,!0):void 0}),a},k.filter=k.select=function(t,e,n){var a=[];return null==t?a:_&&t.filter===_?t.filter(e,n):(C(t,function(t,r,i){e.call(n,t,r,i)&&a.push(t)}),a)},k.reject=function(t,e,n){return k.filter(t,function(t,a,r){return!e.call(n,t,a,r)},n)},k.every=k.all=function(t,e,a){e||(e=k.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,a):(C(t,function(t,i,o){return(r=r&&e.call(a,t,i,o))?void 0:n}),!!r)};var P=k.some=k.any=function(t,e,a){e||(e=k.identity);var r=!1;return null==t?r:m&&t.some===m?t.some(e,a):(C(t,function(t,i,o){return r||(r=e.call(a,t,i,o))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:v&&t.indexOf===v?-1!=t.indexOf(e):P(t,function(t){return t===e})},k.invoke=function(t,e){var n=s.call(arguments,2),a=k.isFunction(e);return k.map(t,function(t){return(a?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var a=-1/0,r=-1/0;return C(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;s>r&&(a=t,r=s)}),a},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var a=1/0,r=1/0;return C(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;r>s&&(a=t,r=s)}),a},k.shuffle=function(t){var e,n=0,a=[];return C(t,function(t){e=k.random(n++),a[n-1]=a[e],a[e]=t}),a},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var S=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=S(e),k.pluck(k.map(t,function(t,a,r){return{value:t,index:a,criteria:e.call(n,t,a,r)}}).sort(function(t,e){var n=t.criteria,a=e.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(a>n||void 0===a)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,a){var r={};return n=S(n),C(e,function(i,o){var s=n.call(a,i,o,e);t(r,s,i)}),r}};k.groupBy=A(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=A(function(t,e,n){t[e]=n}),k.countBy=A(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,a){n=S(n);for(var r=n.call(a,e),i=0,o=t.length;o>i;){var s=i+o>>>1;n.call(a,t[s])<r?i=s+1:o=s}return i},k.toArray=function(t){return t?k.isArray(t)?s.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:s.call(t,0,e)},k.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var E=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?o.apply(n,t):E(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return E(t,e,[])},k.without=function(t){return k.difference(t,s.call(arguments,1))},k.partition=function(t,e){var n=[],a=[];return C(t,function(t){(e(t)?n:a).push(t)}),[n,a]},k.uniq=k.unique=function(t,e,n,a){k.isFunction(e)&&(a=n,n=e,e=!1);var r=n?k.map(t,n,a):t,i=[],o=[];return C(r,function(n,a){(e?a&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),i.push(t[a]))}),i},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=s.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(a,s.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},a=0,r=t.length;r>a;a++)e?n[t[a]]=e[a]:n[t[a][0]]=t[a][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var a=0,r=t.length;if(n){if("number"!=typeof n)return a=k.sortedIndex(t,e),t[a]===e?a:-1;a=0>n?Math.max(0,r+n):n}if(v&&t.indexOf===v)return t.indexOf(e,n);for(;r>a;a++)if(t[a]===e)return a;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var a=null!=n;if(y&&t.lastIndexOf===y)return a?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=a?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var a=Math.max(Math.ceil((e-t)/n),0),r=0,i=new Array(a);a>r;)i[r++]=t,t+=n;return i};var T=function(){};k.bind=function(t,e){var n,a;if(w&&t.bind===w)return w.apply(t,s.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=s.call(arguments,2),a=function(){if(!(this instanceof a))return t.apply(e,n.concat(s.call(arguments)));T.prototype=t.prototype;var r=new T;T.prototype=null;var i=t.apply(r,n.concat(s.call(arguments)));return Object(i)===i?i:r}},k.partial=function(t){var e=s.call(arguments,1);return function(){for(var n=0,a=e.slice(),r=0,i=a.length;i>r;r++)a[r]===k&&(a[r]=arguments[n++]);for(;n<arguments.length;)a.push(arguments[n++]);return t.apply(this,a)}},k.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var a=e.apply(this,arguments);return k.has(n,a)?n[a]:n[a]=t.apply(this,arguments)}},k.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(s.call(arguments,1)))},k.throttle=function(t,e,n){var a,r,i,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:k.now(),o=null,i=t.apply(a,r),a=r=null};return function(){var c=k.now();s||n.leading!==!1||(s=c);var u=e-(c-s);return a=this,r=arguments,0>=u?(clearTimeout(o),o=null,s=c,i=t.apply(a,r),a=r=null):o||n.trailing===!1||(o=setTimeout(l,u)),i}},k.debounce=function(t,e,n){var a,r,i,o,s,l=function(){var c=k.now()-o;e>c?a=setTimeout(l,e-c):(a=null,n||(s=t.apply(i,r),i=r=null))};return function(){i=this,r=arguments,o=k.now();var c=n&&!a;return a||(a=setTimeout(l,e)),c&&(s=t.apply(i,r),i=r=null),s}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,a=new Array(n),r=0;n>r;r++)a[r]=t[e[r]];return a},k.pairs=function(t){for(var e=k.keys(t),n=e.length,a=new Array(n),r=0;n>r;r++)a[r]=[e[r],t[e[r]]];return a},k.invert=function(t){for(var e={},n=k.keys(t),a=0,r=n.length;r>a;a++)e[t[n[a]]]=n[a];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(a,s.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(a,s.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);
return e},k.defaults=function(t){return C(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var M=function(t,e,n,a){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var i=n.length;i--;)if(n[i]==t)return a[i]==e;var o=t.constructor,s=e.constructor;if(o!==s&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),a.push(e);var l=0,u=!0;if("[object Array]"==r){if(l=t.length,u=l==e.length)for(;l--&&(u=M(t[l],e[l],n,a)););}else{for(var h in t)if(k.has(t,h)&&(l++,!(u=k.has(e,h)&&M(t[h],e[h],n,a))))break;if(u){for(h in e)if(k.has(e,h)&&!l--)break;u=!l}}return n.pop(),a.pop(),u};k.isEqual=function(t,e){return M(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return u.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var a=Array(Math.max(0,t)),r=0;t>r;r++)a[r]=e.call(n,r);return a},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=k.invert(F.escape);var N={escape:new RegExp("["+k.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(F.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return F[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),B.call(this,n.apply(k,t))}})};var I=0;k.uniqueId=function(t){var e=++I+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var a;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||z).source,(n.interpolate||z).source,(n.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,a,r,s){return o+=t.slice(i,s).replace(L,function(t){return"\\"+H[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),a&&(o+="'+\n((__t=("+a+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),i=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(e)return a(e,k);var l=function(t){return a.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},k.chain=function(t){return k(t).chain()};var B=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),C(["concat","join","slice"],function(t){var e=a[t];k.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this);var triggerPykHelp=function(){$("body").chardinJs("start")},PykCharts={};PykCharts.assets="/pykih-charts/assets/",PykCharts.export_menu_status=0,PykCharts["boolean"]=function(t){var e=["0","f","false","n","no","",0,"0.00","0.0",0,0],n=[void 0,null,NaN];return-1!==n.indexOf(t)?!1:(value=t.toLocaleString(),value=value.toLowerCase(),e.indexOf(value)>-1?!1:!0)},PykCharts.getEvent=function(){try{return d3.event||event}catch(t){return event}},PykCharts.Configuration=function(t){var e=this,n=(t.selector,{liveData:function(e){var n=t.real_time_charts_refresh_frequency;return PykCharts["boolean"](n)&&(clearInterval(t.interval),t.interval=setInterval(e.refresh,1e3*n)),this},emptyDiv:function(t){return d3.select(t).append("div").style("clear","both"),this},storeInitialDivHeight:function(){var e=parseFloat(d3.select(t.selector).style("height"));return e?t.original_div_height=parseFloat(d3.select(t.selector).style("height")):t.original_div_height="auto",this},appendUnits:function(e){e=PykCharts.numberFormat(e);var n,a,r;return a=t.units_prefix,r=t.units_suffix,a?(n=a+" "+e,r&&(n+=" "+r)):n=r?e+" "+r:e,n},title:function(n){if(PykCharts["boolean"](t.title_text)&&t.title_size){var a=t.chart_width;n&&(a=n);var r=PykCharts["boolean"](t.export_enable)?.9*a:a;e.titleDiv=d3.select(t.selector).append("div").attr("id","title").style({width:r+"px","text-align":"left","float":"left"}).html("<span style='pointer-events:none;font-size:"+t.title_size+"vw;color:"+t.title_color+";font-weight:"+t.title_weight+";padding-left:1px;font-family:"+t.title_family+"'>"+t.title_text+"</span>")}return this},subtitle:function(n){if(PykCharts["boolean"](t.subtitle_text)&&t.subtitle_size){var a=t.chart_width;n&&(a=n),e.subtitleDiv=d3.select(t.selector).append("div").attr("id","sub-title").style({width:a+"px","text-align":"left"}).html("<span style='pointer-events:none;font-size:"+t.subtitle_size+"vw;color:"+t.subtitle_color+";font-weight:"+t.subtitle_weight+";padding-left:1px;font-family:"+t.subtitle_family+"'>"+t.subtitle_text+"</span>")}return this},createFooter:function(e){var n=t.chart_width;return e&&(n=e),d3.select(t.selector).append("table").attr({id:"footer",width:n+"px"}).style("background",t.bg),this},lastUpdatedAt:function(e){if(PykCharts["boolean"](t.real_time_charts_refresh_frequency)&&PykCharts["boolean"](t.real_time_charts_last_updated_at_enable)){var n=new Date,a=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();"liveData"===e?document.querySelectorAll(t.selector+" #lastUpdatedAt").innerHTML="<span style='pointer-events:none;'>Last Updated At: </span><span style='pointer-events:none;'>"+a+"</span>":d3.select(t.selector+" #footer").append("tr").attr("class","PykCharts-credits").html("<td colspan=2 style='text-align:right' id='lastUpdatedAt'><span style='pointer-events:none;'>Last Updated At: </span><span style='pointer-events:none;'>"+a+"</span></tr>")}return this},checkChangeInData:function(n,a){var r=Object.keys(a[0]),i=Object.keys(n[0]),o=!1,s=n.length,l=r.length;if(r.length===i.length&&a.length===n.length){for(var c=0;s>c;c++)for(var u=0;l>u;u++)if("object"!=typeof n[c][i[u]]&&"object"!=typeof a[c][r[u]]){if(n[c][i[u]]!==a[c][r[u]]||r[u]!==i[u]){o=!0;break}}else if(!t.k.__proto__._isEqual(n[c][i[u]],a[c][r[u]])||r[u]!==i[u]){o=!0;break}}else o=!0;return e.compare_data=n,[e.compare_data,o]},credits:function(){if(PykCharts["boolean"](t.credit_my_site_name)||PykCharts["boolean"](t.credit_my_site_url)){var e=!0;""===t.credit_my_site_name&&(t.credit_my_site_name=t.credit_my_site_url),""===t.credit_my_site_url&&(e=!1),d3.select(t.selector+" #footer").append("tr").attr({"class":"PykCharts-credits",id:"credit-datasource"}).append("td").style("text-align","left").html("<span style='pointer-events:none;'>Credits: </span><a href='"+t.credit_my_site_url+"' target='_blank' onclick='return "+e+"'>"+t.credit_my_site_name+"</a>")}return this},dataSource:function(){if(PykCharts["boolean"](t.data_source_name)||PykCharts["boolean"](t.data_source_url)){var e=!0;""===t.data_source_name&&(t.data_source_name=t.data_source_url),""===t.data_source_url&&(e=!1);var n="<span style='pointer-events:none;'>Source: </span><a href='"+t.data_source_url+"' target='_blank' onclick='return "+e+"'>"+t.data_source_name+"</a></tr>";d3.selectAll(t.selector+" #footer").length?d3.select(t.selector+" table #credit-datasource").style({background:t.bg,"text-align":"right"}).append("td").html(n):d3.select(t.selector).append("table").attr({id:"footer","class":"PykCharts-credits",width:t.chart_width+"px"}).style({background:t.bg,"text-align":"right"}).append("tr").append("td").html(n)}return this},makeMainDiv:function(e,n){var a=d3.select(e).append("div").attr({id:"chart-container-"+n,"class":"main-div"}).style("width",t.chart_width+"px");return PykCharts["boolean"](t.panels_enable)&&a.style({"float":"left",width:"auto"}),this},tooltip:function(e,n,a,r){if((PykCharts["boolean"](t.tooltip_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format||PykCharts["boolean"](t.annotation_enable))&&"default"===t.mode){var i;if(void 0!==n){var o=t.selector.substr(1,t.selector.length);i="tooltip-svg-container-"+a+"-pyk-tooltip"+o}else i="pyk-tooltip";PykCharts.Configuration.tooltipp=d3.select("body").append("div").attr({id:i,"class":"pyk-tooltip"})}else PykCharts["boolean"](t.tooltip_enable)&&(PykCharts.Configuration.tooltipp=d3.select("body").append("div").attr({id:"pyk-tooltip","class":"pyk-tooltip"}));return this},dateConversion:function(t){t=new Date(t);var e=t.getTimezoneOffset();return t=new Date(t.getTime()+60*e*1e3)},loading:function(){d3.select(t.selector).style("height",t.chart_height);var e="image"===t.loading_type?"<img src="+t.loading_source+">":t.loading_source;d3.select(t.selector).html("<div id='chart-loader'>"+e+"</div>");var n=parseFloat(d3.select(t.selector).style("height"));return d3.select(t.selector+" #chart-loader").style({visibility:"visible","padding-left":t.chart_width/2+"px","padding-top":n/2+"px"}),this},remove_loading_bar:function(e){var n=document.querySelector(t.selector+" #chart-loader");return n&&n.parentNode.removeChild(n),document.getElementById(e).style.height=t.original_div_height,this},dataFromPykQuery:function(e){PykCharts["boolean"](t.interactive_enable)&&(t.data=e)},totalColors:function(t){var n=parseInt(t,10);return n>2&&10>n?(e.total_colors=n,this):(e.total_colors=9,this)},colorType:function(t){return"color"===t&&(e.legends="no"),this},resize:function(e,n){var a=t.chart_width;PykCharts["boolean"](t.panels_enable)&&n&&(a=n);var r,i=a/t.chart_height,o=isNaN(parseFloat(d3.select(t.selector).style("width")))?0:parseFloat(d3.select(t.selector).style("width")),s=d3.selectAll(t.selector+" #footer"),l=d3.selectAll(t.selector+" .main-div");if((o>a||0===o)&&(o=a),PykCharts["boolean"](e)&&(e.attr({width:o,height:o/i}),d3.selectAll(t.selector+" .main-div").style("width",o+"px")),PykCharts["boolean"](t.title_text)&&PykCharts["boolean"](t.export_enable)&&(r=.9*o,d3.select(t.selector+" #title").style("width",r+"px")),PykCharts["boolean"](t.subtitle_text)&&(r=.9*o,d3.select(t.selector+" #sub-title").style("width",r+"px")),PykCharts["boolean"](t.export_enable)&&(div_size=o,div_float="none",div_left=o-16,PykCharts["boolean"](t.title_text)&&t.title_size&&"default"===t.mode&&(div_size=.1*o,div_float="left",div_left=0),d3.select(t.selector+" #export").style({width:div_size+"px",left:div_left+"px","float":div_float}),d3.select(t.selector+" .dropdown-multipleConatiner-export").style("left",o-80+"px")),s&&s.attr("width",o),l&&!PykCharts["boolean"](t.panels_enable)){var c=document.querySelector(t.selector+" .main-div");c&&(c.style.width=o)}},__proto__:{_downloadDataURI:function(t){function e(t){return"object"!=typeof t||t.nodeType||null!=t&&t===t.window?!1:t.constructor&&!t.constructor.prototype.hasOwnProperty("isPrototypeOf")?!1:!0}if(t){e(t)||(t={data:t}),t.filename||(t.filename="download."+t.data.split(",")[0].split(";")[0].substring(5).split("/")[1]),t.url||(t.url="http://download-data-uri.appspot.com/");var n=(d3.select("body").append("form").attr("id","export-form").attr("method","post").attr("action",t.url).style("display","none").html("<input type='hidden' name='filename' value='"+t.filename+"'/><input type='hidden' name='data' value='"+t.data+"'/>"),document.getElementById("export-form"));n.submit(),n.parentNode.removeChild(n)}},_xmlToJson:function(t,e){var n,a,r,i,o,s,l,c,u,h=[],d=t.firstChild.childElementCount;for(0==e?(s=e,u=d,c=1):1==e&&(s=e,u=2*d+1,c=2);u>s;s+=c){for(n=t.firstChild.childNodes[s],o={},l=0,element_len=n.childElementCount;l<element_len;l++)a=n.children.item(l),r=a.nodeName,i=a.textContent,o[r]=i;h.push(o)}return h},_domainBandwidth:function(e,n,a){if(addFactor=0,"time"===a){var r=e[0],i=e[1],o=[];switch(padding=.1*(i-r),n){case 0:o[0]=r-(padding+addFactor);break;case 1:o[1]=i+(padding+addFactor);break;case 2:o[0]=r-(padding+addFactor),o[1]=i+(padding+addFactor)}return[t.k.dateConversion(o[0]),t.k.dateConversion(o[1])]}switch(padding=.1*(e[1]-e[0]),n){case 0:e[0]-=padding+addFactor;break;case 1:e[1]=parseFloat(e[1],10)+(padding+addFactor);break;case 2:e[0]-=padding+addFactor,e[1]=parseFloat(e[1],10)+(padding+addFactor)}return e},_radiusCalculation:function(e,n){var a;return a="percentageBar"===n?t.chart_height:"spiderweb"===n?d3.min([t.chart_width-t.legendsGroup_width,t.chart_height-t.legendsGroup_height-20]):void 0!==n?t.chart_width:d3.min([t.chart_width,t.chart_height]),a*e/200},_getHighestParentsAttribute:function(t,e){function n(t){return"body"===t.tagName.toLowerCase()?void(a=null):(a=t.style[e],a||(a=d3.select(t).style(e)),void(a||n(t.parentNode)))}var a,r=document.querySelector(t);return n(r),a},_groupBy:function(t,e){for(var n,a,r=[],i={oned:["name"],line:["x","name"],area:["x","name"],bar:["y","group"],column:["x","group"],scatterplot:["x","y","name","group"],pulse:["x","y","name","group"],spiderweb:["x","group"],waterfall:["x","y"],simple2x2:["group"]},o={oned:{dimension:"name",fact:"weight"},line:{dimension:"x",fact:"y",name:"name"},area:{dimension:"x",fact:"y",name:"name"},bar:{dimension:"y",fact:"x",name:"group"},column:{dimension:"x",fact:"y",name:"group"},scatterplot:{dimension:"x",fact:"y",weight:"weight",name:"name",group:"group"},pulse:{dimension:"y",fact:"x",weight:"weight",name:"name",group:"group"},spiderweb:{dimension:"x",fact:"y",name:"name",weight:"weight"},waterfall:{dimension:"y",fact:"x",name:"group"},simple2x2:{dimension:"group",fact:"weight"}},s=i[t],l=[],c=e.length,n=0;c>n;n+=1){var a=e[n];if(0==l.length)l.push([a]);else{for(var u=!1,h=l.length,d=0;h>d;d+=1){var p=l[d],f=!0,_=p[0];s.forEach(function(t){_[t]!==a[t]&&(f=!1)}),f&&(u=p)}u?u.push(a):l.push([a])}}for(n in l)if(l[n].constructor===Array){a={};var g=l[n],m=o[t],v=[],y={},x={};a[m.dimension]=g[0][m.dimension],m.name&&(a[m.name]=g[0][m.name]),m.weight?(a[m.weight]=d3.sum(g,function(e){return e[o[t].weight]}),"spiderweb"===t?a[m.fact]=d3.sum(g,function(e){return e[o[t].fact]}):a[m.fact]=g[0][m.fact]):a[m.fact]=d3.sum(g,function(e){return e[o[t].fact]}),m.group&&(a[m.group]=g[0][m.group]);for(var b in o[t])v.push(o[t][b]);for(var b in g[0]){for(var w=0,n=0;n<v.length;n++)if(b===v[n]){w=1;break}0===w&&(y[b]=g[0][b])}for(var b in a)x[b]=a[b];for(var b in y)x[b]=y[b];r.push(x)}return r},_sortData:function(t,e,n,a,r){if(PykCharts["boolean"](a.data_sort_enable)||r){if(PykCharts["boolean"](a.data_sort_enable))switch(a.data_sort_type){case"numerically":t.sort(function(t,n){return"descending"===a.data_sort_order?n[e]-t[e]:t[e]-n[e]});break;case"alphabetically":t.sort(function(t,r){return t[e]<r[e]?"descending"===a.data_sort_order?1:-1:t[e]>r[e]?"descending"===a.data_sort_order?-1:1:t[n]<r[n]?"descending"===a.data_sort_order?1:-1:t[n]>r[n]?"descending"===a.data_sort_order?-1:1:0});break;case"date":t.sort(function(t,r){return new Date(t[e])<new Date(r[e])?"descending"===a.data_sort_order?1:-1:new Date(t[e])>new Date(r[e])?"descending"===a.data_sort_order?-1:1:t[n]<r[n]?"descending"===a.data_sort_order?1:-1:t[n]>r[n]?"descending"===a.data_sort_order?-1:1:0})}}else t.sort(function(t,e){return t[n]>e[n]?1:t[n]<e[n]?-1:void 0});return t},_unique:function(t,e){for(var n={},a=[],r=0,i=t.length;i>r;r++)e&&(t[r]=t[r][e]),n[t[r]]||(n[t[r]]=!0,a.push(t[r]));return a},_ready:function(t){function e(){document.removeEventListener("DOMContentLoaded",e,!1),window.removeEventListener("load",e,!1)}return document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.detachEvent("onreadystatechange",arguments.callee)}),this},_colourBrightness:function(t,e){var n,a,r,i,o=1,s=t;if(s.match(/^rgba/)?(s=s.match(/rgba\(([^)]+)\)/)[1],s=s.split(/ *, */).map(Number),n=s[0],a=s[1],r=s[2],o=s[3]):s.match(/^rgb/)?(s=s.match(/rgb\(([^)]+)\)/)[1],s=s.split(/ *, */).map(Number),n=s[0],a=s[1],r=s[2]):"#"==s[0]&&7==s.length?(n=parseInt(s.slice(1,3),16),a=parseInt(s.slice(3,5),16),r=parseInt(s.slice(5,7),16)):"#"==s[0]&&4==s.length&&(n=parseInt(s[1]+s[1],16),a=parseInt(s[2]+s[2],16),r=parseInt(s[3]+s[3],16)),i=(299*n+587*a+114*r)/1e3,125>i&&o>.5){if(!e)return"dark";d3.selectAll(e).classed({light:!1,dark:!0})}else if(125>i&&.5>=o){if(!e)return"light";d3.selectAll(e).classed({light:!0,dark:!1})}else{if(!e)return"light";d3.selectAll(e).classed({light:!0,dark:!1})}},_isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},_where:function(t,e){var n=t.length,a=[];if("object"==typeof t)for(var r in t){var i=0,o=0;for(var s in e)t[r].hasOwnProperty(s)&&t[r][s]===e[s]?i+=1:i=0,o+=1;i===o&&a.push(t[r])}else for(var r=0;n>r;r++){var i=0,o=0;for(var s in e)t[r].hasOwnProperty(s)&&t[r][s]===e[s]?i+=1:i=0,o+=1;i===o&&a.push(t[r])}return a},_isEqual:function(t,e){var n=function(t,e,r,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;var o=toString.call(t);if(o!==toString.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=r.length;s--;)if(r[s]===t)return i[s]===e;var l=t.constructor,c=e.constructor;if(l!==c&&"constructor"in t&&"constructor"in e&&!(a(l)&&l instanceof l&&a(c)&&c instanceof c))return!1;r.push(t),i.push(e);var u,h;if("[object Array]"===o){if(u=t.length,h=u===e.length)for(;u--&&(h=n(t[u],e[u],r,i)););}else{var d,p=Object.getOwnPropertyNames(t);if(u=p.length,h=Object.getOwnPropertyNames(e).length===u)for(;u--&&(d=p[u],h=hasOwnProperty.call(e,d)&&n(t[d],e[d],r,i)););}return r.pop(),i.pop(),h},a=function(t){return"function"==typeof t||!1};return n(t,e,[],[])},_offset:function(t){var e,n,a="undefined",r={top:0,left:0},i=t&&t.ownerDocument;return i?(e=i.documentElement,typeof t.getBoundingClientRect!==a&&(r=t.getBoundingClientRect()),n=null!=i&&i===i.window?i:9===i.nodeType&&i.defaultView,{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):void 0}},backgroundColor:function(t){function e(r){return a=r,n=d3.select(r).style("background-color"),"transparent"!==n&&"rgba(0, 0, 0, 0)"!==n?t.k.__proto__._colourBrightness(n,d3.selectAll(r)[0]):void 0!==d3.select(r)[0][0].parentNode.tagName&&"body"!==d3.select(r)[0][0].parentNode.tagName.toLowerCase()?e(d3.select(r)[0][0].parentNode):void t.k.__proto__._colourBrightness("rgb(255,255,255)",d3.select(r)[0])}d3.select(t.selector).style({"background-color":t.background_color,position:"relative"});var n,a;return e(t.selector),d3.select(a)[0][0].classList.contains("light")?t.img=PykCharts.assets+"img/download.png":t.img=PykCharts.assets+"img/download-light.png",this},dataSourceFormatIdentification:function(e,n,a){if("object"==typeof e)n.data=e,n[a](n.data);else{var r=e.lastIndexOf("."),i=e.length-r,o=Math.floor(100*Math.random()+1);if(e.constructor==Array)n.data=e,n[a](n.data);else{var s=e.substr(r+1,i);if(-1!=e.indexOf("<root>")){var l,c;window.DOMParser?(parser=new DOMParser,l=parser.parseFromString(e,"text/xml")):(l=new ActiveXObject("Microsoft.XMLDOM"),l.async=!1,l.loadXML(e)),c=t.k.__proto__._xmlToJson(l,0),n[a](c)}else-1!=e.indexOf("{")?(n.data=JSON.parse(e),n[a](n.data)):-1!=e.indexOf(",")?(n.data=d3.csv.parse(e),n[a](n.data)):"json"===s?d3.json(e+"?"+o,n[a]):"csv"===s?d3.csv(e+"?"+o,n[a]):"xml"===s&&d3.xml(e+"?"+o,function(e){var r;r=t.k.__proto__._xmlToJson(e,1),n[a](r)})}}},"export":function(e,n,a,r,i,o){if(PykCharts["boolean"](t.export_enable)){var o=t.chart_width;PykCharts["boolean"](r)&&o&&(o=o);var s="export",l=o,c="none",u=o-16;if(d3.select(t.selector).append("div").style("left",o-80+"px").attr("class","dropdown-multipleConatiner-export"),PykCharts["boolean"](r))for(var h=i.length,d=0;h>d;d++)d3.select(t.selector+" .dropdown-multipleConatiner-export").append("span").attr("id",a+d).on("mouseover",function(){d3.select(this).style("background-color","#E0E0E1")}).on("mouseout",function(){d3.select(this).style("background-color","#fff")}).style({"margin-bottom":"3px",cursor:"pointer"}).html("Panel "+(d+1)+"<br>");else d3.select(t.selector+" .dropdown-multipleConatiner-export").append("span").attr("id","span").on("mouseover",function(){d3.select(this).style("background-color","#E0E0E1")}).on("mouseout",function(){d3.select(this).style("background-color","#fff")}).style({"margin-bottom":"3px",cursor:"pointer"}).html("Export as SVG<br>");PykCharts["boolean"](t.title_text)&&t.title_size&&"default"===t.mode&&(l=.1*o,c="left",u=0);var p=d3.select(e.selector).append("div").attr("id",s).style({width:l+"px",left:u+"px","float":c,"text-align":"right"});setTimeout(function(){p.html("<img title='Export to SVG' src='"+t.img+"' style='left:"+u+"px;margin-bottom:3px;cursor:pointer;'/>")},1e3*t.transition_duration)}return this},exportSVG:function(e,n,a,r,i,o,s){if(PykCharts["boolean"](t.export_enable)){o||(o=0),s||(s=0);var l="export",c=a+"canvas",u=document.createElement("canvas");u.setAttribute("id",c);var h=document.getElementById(c);paper.setup(h);var d=new paper.Project;d._view._viewSize.width=e.chart_width+o,d._view._viewSize.height=e.chart_height+s;var p=a+".svg";if(d3.select(e.selector+" #"+l).on("click",function(){PykCharts.export_menu_status=1,d3.select(t.selector+" .dropdown-multipleConatiner-export").style("visibility","visible")}),PykCharts["boolean"](r))for(var f=i.length,_=0;f>_;_++)d3.selectAll(e.selector+" #"+a+_).on("click",function(){d3.select(t.selector+" .dropdown-multipleConatiner-export").style("visibility","hidden");var r=this.id.substring(this.id.length-1,this.id.length);e.k.processSVG(document.querySelector(t.selector+" #"+n+r),a),d.importSVG(document.querySelector(t.selector+" #"+n+r));var i=d.exportSVG({asString:!0});t.k.__proto__._downloadDataURI({data:"data:image/svg+xml;base64,"+btoa(i),filename:p}),d.clear()});else d3.selectAll(e.selector+" #span").on("click",function(){d3.select(t.selector+" .dropdown-multipleConatiner-export").style("visibility","hidden"),e.k.processSVG(document.querySelector(t.selector+" "+n),a),d.importSVG(document.querySelector(t.selector+" "+n));var r=d.exportSVG({asString:!0});t.k.__proto__._downloadDataURI({data:"data:image/svg+xml;base64,"+btoa(r),filename:p}),d.clear()})}return this},shadeColorConversion:function(e,n){var a,r,o=[],s=150/n;for(e=d3.rgb(e),r="rgb("+e.r+","+e.g+","+e.b+")",a=t.k.__proto__._colourBrightness(r),"light"===a?inc=-1:inc=1,Math.sqrt(e.r*e.r+e.g*e.g)+Math.sqrt(e.r*e.r+e.b*e.b)+Math.sqrt(e.g*e.g+e.b*e.b),i=0;Math.abs(i)<n;i+=inc){var l={r:parseInt(e.r+i*s,10),g:parseInt(e.g+i*s,10),b:parseInt(e.b+i*s,10)},c="rgb("+l.r+","+l.g+","+l.b+")";o.push(c)}return-1===inc&&o.reverse(),o},processSVG:function(t,e){for(var n=t.querySelectorAll("text"),a=n.length,r=0;a>r;r++)if(n[r].hasAttribute("dy")){var i=n[r].getAttribute("dy"),o=i.length;if("em"==i.substring(o-2,o)){var s,l;n[r].hasAttribute("font-size")?(s=n[r].getAttribute("font-size"),l=parseFloat(s)*parseFloat(i)):l=12*parseFloat(i),n[r].setAttribute("dy",l)}}return this},errorHandling:function(e,n,a){console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+t.selector+'.(Invalid value for attribute "'+e+'")  Visit https://github.com/pykih/PykCharts.js/wiki/Errors#error_'+n)},warningHandling:function(e,n,a){console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+t.selector+'.(Invalid value for attribute "'+e+'")  Visit https://github.com/pykih/PykCharts.js/wiki/Warnings#warning_'+n)},validator:function(){var e={validatingSelector:function(e){"#"===e.charAt(0)&&(e=e.substring(1,e.length));try{if(!document.getElementById(e))throw t.stop=!0,"selector"}catch(n){t.k.errorHandling(n,"1")}return this},validatingDataType:function(e,n,a,r){try{if(!t.k.__proto__._isNumber(e))throw r?t[r]=a:t[n]=a,n;t[n]=parseFloat(e)}catch(i){t.k.warningHandling(i,"1")}return this},validatingChartMode:function(e,n,a){try{if("default"!==e&&"infographics"!==e)throw t[n]=a,"mode"}catch(r){t.k.warningHandling(r,"2")}return this},validatingAxisDataFormat:function(e,n){if(e)try{if("number"!==e&&"string"!==e&&"time"!==e)throw t.stop=!0,n}catch(a){t.k.errorHandling(a,"9")}return this},validatingColorMode:function(e,n,a,r){if(e)try{if("oneDimensionalCharts"===r){if("color"!==e&&"shade"!==e)throw t[n]=a,"color_mode"}else if("color"!==e&&"saturation"!==e)throw t[n]=a,"color_mode"}catch(i){t.k.warningHandling(i,"3")}return this},validatingYAxisPointerPosition:function(e,n,a){try{if("left"!==e&&"right"!==e)throw t[n]=a,n}catch(r){t.k.warningHandling(r,"7")}return this},validatingXAxisPointerPosition:function(e,n,a){try{if("top"!==e&&"bottom"!==e)throw t[n]=a,n}catch(r){t.k.warningHandling(r,"7")}return this},validatingBorderBetweenChartElementsStyle:function(e,n){try{if("1,3"!==e&&"5,5"!==e&&"0"!==e)throw n}catch(a){t.k.errorHandling(a,"#7")}return this},validatingLegendsPosition:function(e,n,a){try{if("horizontal"!==e&&"vertical"!==e)throw t[n]=a,n}catch(r){t.k.warningHandling(r,"13")}return this},isArray:function(e,n){try{if(e.constructor!==Array)throw n}catch(a){t.stop=!0,t.k.errorHandling(a,"4")}return this},validatingTimeScaleDataType:function(e,n){if(e)try{if("date"!==e&&"year"!==e&&"month"!==e&&"hours"!==e&&"minutes"!==e)throw t.stop=!0,n}catch(a){t.k.errorHandling(a,"5")}return this},validatingTooltipMode:function(e,n,a){if(e)try{if("fixed"!==e&&"moving"!==e)throw t[n]=a,n}catch(r){t.k.warningHandling(r,"14")}return this},validatingFontWeight:function(e,n,a,r){try{if("bold"!==e&&"normal"!==e)throw r?t[r]=a:t[n]=a,n}catch(i){t.k.warningHandling(i,"5")}return this},validatingColor:function(e,n,a,r){if(e)try{var i;if("string"!=typeof e)throw n;if("#"!=e.charAt(0)&&"rgb"!=e.substring(0,3).toLowerCase()&&"transparent"!=e.toLowerCase()){if(i=$c.name2hex(e),"Invalid Color Name"===i)throw n}else if("#"===e.charAt(0)&&(i=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),!i))throw n}catch(o){r?t[r]=a:t[n]=a,t.k.warningHandling(o,"4")}return this},validatingDataMode:function(e,n,a,r){try{if("absolute"!==e&&"percentage"!==e)throw t[n]=a,n}catch(i){t.k.warningHandling(i,"16")}return this},validatingLegendsMode:function(e,n,a,r){try{if("default"!==e&&"interactive"!==e)throw t[n]=a,n}catch(i){t.k.warningHandling(i,"17")}return this},validatingJSON:function(e){if(!e)try{throw t.stop=!0,"Data is not in the valid JSON format"}catch(n){console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+t.selector+'.("'+n+'")  Visit www.pykcharts.com/errors#error_2')}return t.stop?!1:!0}};return e}});return n};var configuration=PykCharts.Configuration;configuration.mouseEvent=function(t){var e=this;e.tooltip=configuration.tooltipp;var n={tooltipPosition:function(n){return PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format?(e.tooltip.style({display:"block",top:PykCharts.getEvent().pageY-20+"px",left:PykCharts.getEvent().pageX+30+"px"}),e.tooltip):void 0},tooltipTextShow:function(n,a,r,i,o){var s=t.selector.substr(1,t.selector.length);return PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format?("yes"===a&&"multilineChart"===r?d3.selectAll("#tooltip-svg-container-"+i+"-pyk-tooltip"+s).html(n):e.tooltip.html(n),this):void 0},tooltipHide:function(n,a,r,i){return PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format?"yes"===a&&"multilineChart"===r?d3.selectAll(".pyk-tooltip").style("display","none"):e.tooltip.style("display","none"):void 0},axisHighlightShow:function(e,n,a,r){var i,o,s,l,c,u;if(PykCharts["boolean"](t.axis_onhover_highlight_enable))if(n===t.selector+" .y.axis"&&void 0==r){l=n+" .tick text",s=t.axis_y_pointer_color,c=d3.selectAll(l)[0].length,u=e.length,d3.selectAll(l).style("fill","#bbb").style("font-weight","normal");for(var h=0;c>h;h++)for(var d=0;u>d;d++)d3.selectAll(l)[0][h].__data__===e[d]&&d3.select(d3.selectAll(l)[0][h]).style("fill",s).style("font-weight","bold")}else{n===t.selector+" .x.axis"?(l=n+" .tick text",s=t.axis_x_pointer_color):n===t.selector+" .axis-text"&&"column"===r?(l=n,s=t.axis_x_pointer_color):n===t.selector+" .axis-text"&&"bar"===r?(l=n,s=t.axis_y_pointer_color):n===t.selector+" .y.axis"&&"waterfall"==r?(l=n+" .tick text",s=t.axis_y_pointer_color):n===t.selector+" .y.axis"&&"bar"===r&&(l=n+" .tick text",s=t.axis_x_pointer_color),void 0!==o&&d3.select(d3.selectAll(l)[0][o]).style({fill:s,"font-weight":"normal"}),c=d3.selectAll(l)[0].length;var p=a.length;if("number"===t.axis_x_data_format)for(var i=0;c>i&&d3.selectAll(l)[0][i].__data__!=e;i++);else for(i=0;p>i&&a[i]!==e;i++);o=i,d3.selectAll(l).style("fill","#bbb"),d3.select(d3.selectAll(l)[0][i]).style({fill:s,"font-weight":"bold"})}return this},axisHighlightHide:function(e,n){var a,r,i;return PykCharts["boolean"](t.axis_onhover_highlight_enable)&&(e===t.selector+" .y.axis"?(r=e+" .tick text",a=t.axis_y_pointer_color,i=t.axis_y_pointer_weight):e===t.selector+" .x.axis"?(r=e+" .tick text",a=t.axis_x_pointer_color,i=t.axis_x_pointer_weight):e===t.selector+" .axis-text"&&"column"===n?(r=e,a=t.axis_x_pointer_color,i=t.axis_x_pointer_weight):e===t.selector+" .axis-text"&&"bar"===n&&(r=e,a=t.axis_y_pointer_color,i=t.axis_y_pointer_weight),d3.selectAll(r).style({fill:a,"font-weight":i})),this},highlight:function(t,e,n){var a=d3.select(e);return d3.selectAll(t).attr("fill-opacity",function(t,e){return t.children&&n?0:.5}),a.attr("fill-opacity",1),this},highlightHide:function(t){return d3.selectAll(t).attr("fill-opacity",function(t,e){return d3.select(this).attr("data-fill-opacity")}),this},highlightGroup:function(t,e,n){var a=d3.select(e),r=d3.selectAll(t);return r.selectAll(n).attr("fill-opacity",.5),a.selectAll(n).attr("fill-opacity",1),this},highlightGroupHide:function(t,e){return d3.selectAll(t+" "+e).attr("fill-opacity",function(t,e){return d3.select(this).attr("data-fill-opacity")}),this}};return n},configuration.fillChart=function(t,e,n){var a={selectColor:function(n){return e=new PykCharts.Configuration.Theme({}),"color"===t.color_mode?n.name.toLowerCase()===t.highlight.toLowerCase()?t.highlight_color:t.chart_color.length&&t.chart_color[0]?t.chart_color[0]:e.stylesheet.chart_color:n.color},colorChart:function(n){return n.name===t.highlight?e.stylesheet.highlight_color:e.stylesheet.chart_color},colorPieW:function(e){return e.color?e.color:t.chart_color.length?t.color:t.chart_color[0];
},colorPieMS:function(e,n){return"lineChart"!==n&&"areaChart"!==n&&e.name.toLowerCase()===t.highlight.toLowerCase()?t.highlight_color:"saturation"===t.color_mode?t.saturation_color:"color"===t.color_mode?e.color:void 0},colorGroup:function(e){return"saturation"===t.color_mode?t.saturation_color:"color"===t.color_mode?e.color:void 0},colorLegends:function(e){return"saturation"===t.color_mode?t.saturation_color:"color"===t.color_mode&&e?e:"color"===t.color_mode?t.chart_color:t.chart_color[0]}};return a},configuration.border=function(t){var e={width:function(){return t.border_between_chart_elements_thickness+"px"},color:function(){return t.border_between_chart_elements_color},style:function(){return t.border_between_chart_elements_style}};return e},configuration.transition=function(t){var e={duration:function(){return"default"===t.mode&&PykCharts["boolean"](t.transition_duration)?1e3*t.transition_duration:0}};return e},configuration.renderBrush=function(t,e,n,a){function r(t){var e=+("e"==t),n=e?1:-1,r=a/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function i(){return t.brush_extent=d3.event.target.extent(),min=t.brush_extent[0],max=t.brush_extent[1],t.onBrush(e(min),e(max)),t.brush_extent}t.make_brush=d3.svg.brush().x(e).on("brushend",i);var o=n.append("g").attr("class","brush").call(t.make_brush);o.selectAll("rect").attr("height",a).attr("fill","blue").attr("fill-opacity",.3),o.selectAll(".resize").append("path").attr("d",r).attr("fill","#4C7190").attr("stroke","#4C7190").attr("stroke-width","1.5px")},configuration.Theme=function(){var t=this;return t.stylesheet={mode:"default",selector:"",interactive_enable:"no",click_enable:"no",chart_height:430,chart_width:600,chart_margin_top:35,chart_margin_right:50,chart_margin_bottom:35,chart_margin_left:50,title_text:"",title_size:2,title_color:"#1D1D1D",title_weight:"bold",title_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",subtitle_size:1,subtitle_color:"black",subtitle_weight:"normal",subtitle_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",highlight:"",highlight_color:"#08306b",background_color:"transparent",chart_color:["#255AEE"],saturation_color:"#255AEE",border_between_chart_elements_thickness:1,border_between_chart_elements_color:"white",border_between_chart_elements_style:"solid",legends_enable:"yes",legends_display:"horizontal",legends_text_size:11,legends_text_color:"#1D1D1D",legends_text_weight:"normal",legends_text_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",label_size:11,label_color:"white",label_weight:"normal",label_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",pointer_overflow_enable:"yes",pointer_thickness:1,pointer_weight:"normal",pointer_size:11,pointer_color:"#1D1D1D",pointer_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",export_enable:"no",color_mode:"color",axis_x_pointer_size:11,axis_x_pointer_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",axis_x_pointer_weight:"normal",axis_x_pointer_color:"#1D1D1D",axis_x_enable:"yes",axis_x_title:"",axis_x_title_size:14,axis_x_title_color:"#1D1D1D",axis_x_title_weight:"bold",axis_x_title_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",axis_x_formatting_enable:"true",axis_y_formatting_enable:"true",axis_x_position:"bottom",axis_x_pointer_position:"bottom",axis_x_line_color:"#1D1D1D",axis_x_no_of_axis_value:5,axis_x_pointer_length:5,axis_x_pointer_padding:6,axis_x_pointer_values:[],axis_x_outer_pointer_length:0,axis_x_time_value_datatype:"",axis_x_time_value_interval:0,axisHighlight_x_data_format:"string",loading_source:"<div class='PykCharts-loading'>loading...</div>",loading_type:"css",tooltip_enable:"yes",tooltip_mode:"moving",credit_my_site_name:"PykCharts",credit_my_site_url:"http://www.pykcharts.com/",chart_onhover_highlight_enable:"yes",units_prefix:!1,units_suffix:!1},t.functionality={real_time_charts_refresh_frequency:0,real_time_charts_last_updated_at_enable:"yes",transition_duration:0},t.oneDimensionalCharts={clubdata_enable:"yes",clubdata_text:"Others",clubdata_maximum_nodes:5,shade_color:"#255AEE",pie_radius_percent:70,donut_radius_percent:70,donut_inner_radius_percent:40,donut_show_total_at_center:"yes",donut_show_total_at_center_size:24,donut_show_total_at_center_color:"#1D1D1D",donut_show_total_at_center_weight:"bold",donut_show_total_at_center_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",funnel_rect_width:100,funnel_rect_height:100,percent_column_rect_width:20,percent_row_rect_height:10},t.otherCharts={pictograph_show_all_images:"yes",pictograph_total_count_enable:"yes",pictograph_current_count_enable:"yes",pictograph_image_per_line:3,pictograph_image_width:79,pictograph_image_height:66,pictograph_current_count_size:64,pictograph_current_count_color:"#255aee",pictograph_current_count_weight:"normal",pictograph_current_count_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",pictograph_total_count_size:64,pictograph_total_count_color:"grey",pictograph_total_count_weight:"normal",pictograph_total_count_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",pictograph_units_per_image_text_size:24,pictograph_units_per_image_text_color:"grey",pictograph_units_per_image_text_weight:"normal",pictograph_units_per_image_text_family:"'Helvetica Neue',Helvetica,Arial,sans-serif"},t.multiDimensionalCharts={chart_grid_x_enable:"yes",chart_grid_y_enable:"yes",chart_grid_color:"#ddd",axis_onhover_highlight_enable:"yes",axis_y_pointer_size:11,axis_y_pointer_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",axis_y_pointer_weight:"normal",axis_y_pointer_color:"#1D1D1D",axis_y_enable:"yes",axis_y_title:"",axis_y_title_size:14,axis_y_title_color:"#1D1D1D",axis_y_title_weight:"bold",axis_y_title_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",axis_y_position:"left",axis_y_pointer_position:"left",axis_y_line_color:"#1D1D1D",axis_y_no_of_axis_value:5,axis_y_pointer_length:5,axis_y_pointer_padding:6,axis_y_pointer_values:[],axis_y_outer_pointer_length:0,axis_y_time_value_datatype:"",axis_y_time_value_interval:0,axis_y_data_format:"number",variable_circle_size_enable:"yes",crosshair_enable:"yes",zoom_enable:"no",zoom_level:3,spiderweb_outer_radius_percent:100,scatterplot_radius:20,scatterplot_pointer_enable:"no",curvy_lines_enable:"no",annotation_enable:"no",annotation_view_mode:"onload",annotation_background_color:"#C2CBCF",annotation_font_color:"black",legends_mode:"default",expand_group:"yes",data_mode_enable:"no",data_mode_legends_color:"black",data_mode_default:"percentage",connecting_lines_color:"#ddd",connecting_lines_style:"solid",text_between_steps_color:"#aaa",text_between_steps_family:"'Helvetica Neue',Helvetica,Arial,sans-serif",text_between_steps_size:10,text_between_steps_weight:"normal",data_mode_enable:"no",data_mode_legends_color:"black",data_mode_default:"percentage",connecting_lines_color:"#ddd",connecting_lines_style:"solid",data_sort_enable:"yes",data_sort_type:"alphabetically",data_sort_order:"ascending",calculate_total:"yes",axis_y_background_color:"transparent"},t.treeCharts={zoom_enable:"no",nodeRadius:4.5},t.mapsTheme={total_no_of_colors:3,palette_color:"Blue-1",tooltip_position_top:0,tooltip_position_left:0,timeline_duration:1,timeline_margin_top:5,timeline_margin_right:25,timeline_margin_bottom:25,timeline_margin_left:45,label_enable:"no",click_enable:"yes",chart_onhover_effect:"shadow"},t},PykCharts.validation={},PykCharts.oneD={},PykCharts.other={},PykCharts.validation.processInputs=function(t,e,n){function a(t){return t.toLowerCase()}function r(t){return t in e}var i=new PykCharts.Configuration.Theme({}),o=i.stylesheet,s=i.functionality,l=i.oneDimensionalCharts,c=i.multiDimensionalCharts,u=i.mapsTheme;t.title_text=e.title_text,t.subtitle_text=e.subtitle_text,e.credit_my_site_name||e.credit_my_site_url?(t.credit_my_site_name=e.credit_my_site_name?e.credit_my_site_name:"",t.credit_my_site_url=e.credit_my_site_url?e.credit_my_site_url:""):(t.credit_my_site_name=o.credit_my_site_name,t.credit_my_site_url=o.credit_my_site_url),t.data_source_name=e.data_source_name?e.data_source_name:"",t.data_source_url=e.data_source_url?e.data_source_url:"",t.default_color=o.chart_color;var h=[{config_name:"selector",default_value:o,validation_type:"validatingSelector",all_charts:!0},{config_name:"chart_color",default_value:o,validation_type:"isArray",all_charts:!0},{config_name:"axis_x_pointer_values",default_value:o,validation_type:"isArray",maps:!0,multiDimensionalCharts:!0},{config_name:"axis_y_pointer_values",default_value:c,validation_type:"isArray",multiDimensionalCharts:!0},{config_name:"mode",default_value:o,validation_type:"validatingChartMode",condition2:a,oneDimensionalCharts:!0,multiDimensionalCharts:!0,other:!0},{config_name:"chart_width",default_value:o,validation_type:"validatingDataType",all_charts:!0},{config_name:"title_size",default_value:o,validation_type:"validatingDataType",all_charts:!0},{config_name:"subtitle_size",default_value:o,validation_type:"validatingDataType",condition1:r,all_charts:!0},{config_name:"border_between_chart_elements_thickness",default_value:o,validation_type:"validatingDataType",condition1:r,all_charts:!0},{config_name:"label_size",default_value:o,validation_type:"validatingDataType",condition1:r,all_charts:!0},{config_name:"pointer_thickness",default_value:o,validation_type:"validatingDataType",condition1:r,oneDimensionalCharts:!0,multiDimensionalCharts:!0},{config_name:"pointer_size",default_value:o,validation_type:"validatingDataType",condition1:r,oneDimensionalCharts:!0,multiDimensionalCharts:!0},{config_name:"axis_x_title_size",default_value:o,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"axis_y_title_size",default_value:c,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"legends_text_size",default_value:o,validation_type:"validatingDataType",condition1:r,maps:!0,multiDimensionalCharts:!0},{config_name:"axis_x_pointer_size",default_value:o,validation_type:"validatingDataType",condition1:r,maps:!0,multiDimensionalCharts:!0},{config_name:"axis_y_pointer_size",default_value:c,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"axis_x_pointer_length",default_value:o,validation_type:"validatingDataType",condition1:r,maps:!0,multiDimensionalCharts:!0},{config_name:"axis_y_pointer_length",default_value:c,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"axis_x_outer_pointer_length",default_value:o,validation_type:"validatingDataType",condition1:r,maps:!0,multiDimensionalCharts:!0},{config_name:"axis_y_outer_pointer_length",default_value:c,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"real_time_charts_refresh_frequency",default_value:s,validation_type:"validatingDataType",all_charts:!0},{config_name:"transition_duration",default_value:s,validation_type:"validatingDataType",oneDimensionalCharts:!0,multiDimensionalCharts:!0,other:!0},{config_name:"clubdata_maximum_nodes",default_value:l,validation_type:"validatingDataType",oneDimensionalCharts:!0},{config_name:"title_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,all_charts:!0},{config_name:"subtitle_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,all_charts:!0},{config_name:"pointer_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,oneDimensionalCharts:!0,multiDimensionalCharts:!0},{config_name:"label_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,all_charts:!0},{config_name:"background_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"shade_color",default_value:l,validation_type:"validatingColor",oneDimensionalCharts:!0},{config_name:"title_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"subtitle_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"highlight_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"label_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"pointer_color",default_value:o,validation_type:"validatingColor",oneDimensionalCharts:!0,multiDimensionalCharts:!0},{config_name:"border_between_chart_elements_color",default_value:o,validation_type:"validatingColor",all_charts:!0},{config_name:"axis_x_time_value_datatype",default_value:o,validation_type:"validatingTimeScaleDataType",multiDimensionalCharts:!0},{config_name:"axis_y_time_value_datatype",default_value:c,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"chart_height",default_value:o,validation_type:"validatingDataType",multiDimensionalCharts:!0,maps:!0},{config_name:"chart_margin_left",default_value:o,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"chart_margin_right",default_value:o,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"chart_margin_top",default_value:o,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"chart_margin_bottom",default_value:o,validation_type:"validatingDataType",condition1:r,multiDimensionalCharts:!0},{config_name:"zoom_level",default_value:c,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"axis_x_pointer_padding",default_value:o,validation_type:"validatingDataType",multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_pointer_padding",default_value:c,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"axis_x_no_of_axis_value",default_value:o,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"axis_y_no_of_axis_value",default_value:c,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"axis_x_time_value_interval",default_value:o,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"axis_y_time_value_interval",default_value:c,validation_type:"validatingDataType",multiDimensionalCharts:!0},{config_name:"legends_text_color",default_value:o,validation_type:"validatingColor",multiDimensionalCharts:!0,maps:!0},{config_name:"axis_x_pointer_color",default_value:o,validation_type:"validatingColor",multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_pointer_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"axis_x_title_color",default_value:o,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"axis_y_title_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"axis_x_line_color",default_value:o,validation_type:"validatingColor",multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_line_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"annotation_font_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"annotation_background_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"chart_grid_color",default_value:c,validation_type:"validatingColor",multiDimensionalCharts:!0},{config_name:"legends_display",default_value:o,validation_type:"validatingLegendsPosition",multiDimensionalCharts:!0,maps:!0},{config_name:"tooltip_mode",default_value:o,validation_type:"validatingTooltipMode",multiDimensionalCharts:!0,maps:!0},{config_name:"legends_text_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_pointer_weight",default_value:c,validation_type:"validatingFontWeight",condition2:a,multiDimensionalCharts:!0},{config_name:"axis_x_pointer_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_title_weight",default_value:c,validation_type:"validatingFontWeight",condition2:a,multiDimensionalCharts:!0},{config_name:"axis_x_title_weight",default_value:o,validation_type:"validatingFontWeight",condition2:a,multiDimensionalCharts:!0},{config_name:"axis_y_position",default_value:c,validation_type:"validatingYAxisPointerPosition",multiDimensionalCharts:!0},{config_name:"axis_x_position",default_value:o,validation_type:"validatingXAxisPointerPosition",condition2:a,multiDimensionalCharts:!0},{config_name:"axis_y_pointer_position",default_value:c,validation_type:"validatingYAxisPointerPosition",condition2:a,multiDimensionalCharts:!0},{config_name:"axis_x_pointer_position",default_value:o,validation_type:"validatingXAxisPointerPosition",condition2:a,multiDimensionalCharts:!0},{config_name:"color_mode",default_value:o,validation_type:"validatingColorMode",condition2:a,multiDimensionalCharts:!0},{config_name:"border_between_chart_elements_style",default_value:o,condition2:a,all_charts:!0},{config_name:"clubdata_text",default_value:l,oneDimensionalCharts:!0},{config_name:"saturation_color",default_value:o,multiDimensionalCharts:!0,maps:!0},{config_name:"timeline_duration",default_value:u,maps:!0,condition1:r}];t.k=new PykCharts.Configuration(t);for(var d=t.k.validator(),p=0,f=h.length;f>p;p++){var _=h[p];if(_[n]||_.all_charts){var g=_.config_name,m=_.default_value[g],v=_.condition1?_.condition1(g):e[g];if(g in e)var y=_.condition2?_.condition2(e[g]):e[g];t[g]=v?y:m,_.validation_type&&d[_.validation_type](t[g],g,m)}}"maps"===n&&(t.axis_x_pointer_position=e.axis_x_pointer_position?e.axis_x_pointer_position:"top",d.validatingXAxisPointerPosition(t.axis_x_pointer_position,"axis_x_pointer_position","top")),"oneDimensionalCharts"===n?(t.color_mode=e.color_mode?e.color_mode:"shade",d.validatingColorMode(t.color_mode,"color_mode","shade",n)):"maps"===n&&(t.color_mode=e.color_mode?e.color_mode:"saturation",d.validatingColorMode(t.color_mode,"color_mode","saturation",n));for(var x=[{config_name:"interactive_enable",default_value:o,all_charts:!0},{config_name:"click_enable",default_value:o,all_charts:!0},{config_name:"tooltip_enable",default_value:o,all_charts:!0},{config_name:"export_enable",default_value:o,all_charts:!0},{config_name:"real_time_charts_last_updated_at_enable",default_value:s,all_charts:!0},{config_name:"clubdata_enable",default_value:l,oneDimensionalCharts:!0},{config_name:"pointer_overflow_enable",default_value:o,oneDimensionalCharts:!0},{config_name:"chart_onhover_highlight_enable",default_value:o,all_charts:!0},{config_name:"chart_grid_x_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"chart_grid_y_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"axis_x_enable",default_value:o,multiDimensionalCharts:!0,maps:!0},{config_name:"axis_y_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"axis_onhover_highlight_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"zoom_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"annotation_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"legends_enable",default_value:o,multiDimensionalCharts:!0,maps:!0},{config_name:"variable_circle_size_enable",default_value:c,multiDimensionalCharts:!0},{config_name:"axis_x_formatting_enable",default_value:o,multiDimensionalCharts:!0},{config_name:"axis_y_formatting_enable",default_value:o,multiDimensionalCharts:!0},{config_name:"title_family",default_value:o,all_charts:!0},{config_name:"subtitle_family",default_value:o,all_charts:!0},{config_name:"pointer_family",default_value:o,oneDimensionalCharts:!0,multiDimensionalCharts:!0},{config_name:"title_family",default_value:o,all_charts:!0},{config_name:"label_family",default_value:o,all_charts:!0},{config_name:"units_suffix",default_value:o,oneDimensionalCharts:!0},{config_name:"units_prefix",default_value:o,oneDimensionalCharts:!0},{config_name:"highlight",default_value:o,all_charts:!0},{config_name:"axis_x_title_family",default_value:o,multiDimensionalCharts:!0},{config_name:"axis_y_title_family",default_value:c,multiDimensionalCharts:!0},{config_name:"legends_text_family",default_value:o,multiDimensionalCharts:!0},{config_name:"axis_x_title",default_value:o,multiDimensionalCharts:!0},{config_name:"axis_y_title",default_value:o,multiDimensionalCharts:!0},{config_name:"map_code",default_value:u,maps:!0},{config_name:"click_enable",default_value:u,maps:!0},{config_name:"annotation_view_mode",default_value:c,multiDimensionalCharts:!0},{config_name:"loading_type",default_value:o,all_charts:!0},{config_name:"loading_source",default_value:o,all_charts:!0}],p=0,b=x.length;b>p;p++){var _=x[p];if(_[n]||_.all_charts){var g=_.config_name,m=_.default_value[g];t[g]=e[g]?e[g]:m}}switch(t.clubdata_always_include_data_points=PykCharts["boolean"](t.clubdata_enable)&&e.clubdata_always_include_data_points?e.clubdata_always_include_data_points:[],d.isArray(t.clubdata_always_include_data_points,"clubdata_always_include_data_points"),t.border_between_chart_elements_style){case"dotted":t.border_between_chart_elements_style="1,3";break;case"dashed":t.border_between_chart_elements_style="5,5";break;default:t.border_between_chart_elements_style="0"}if("oneDimensionalCharts"===n||"maps"===n)t.chart_color[0]&&t.k.validator().validatingColor(t.chart_color[0],"chart_color",o.chart_color);else for(var p=0;p<t.chart_color.length;p++)t.chart_color[p]&&t.k.validator().validatingColor(t.chart_color[p],"chart_color",o.chart_color);return t.k=new PykCharts.Configuration(t),t},PykCharts.oneD.bubble=function(t){var e=this;e.interval="",new PykCharts.Configuration.Theme({}),this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),e.chart_height=t.chart_height?t.chart_height:e.chart_width,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width),e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("oned",t),e.compare_data=e.k.__proto__._groupBy("oned",t),e.k.remove_loading_bar(a),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data),a=[];e.compare_data=n[0];var r=n[1];r&&e.k.lastUpdatedAt("liveData"),e.new_data=e.optionalFeatures().clubData(),"shade"===e.color_mode&&(a=e.k.shadeColorConversion(e.shade_color,e.new_data.children.length),a.reverse(),e.new_data.children.forEach(function(t,e){t.color=a[e]})),e.optionalFeatures().createChart().label()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=e.selector.substring(1,e.selector.length),n=t+"_svg",a=[];e.fillChart=new PykCharts.Configuration.fillChart(e),e.transitions=new PykCharts.Configuration.transition(e),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+n,"bubble").emptyDiv(e.selector).subtitle(),e.new_data=e.optionalFeatures().clubData(),"shade"===e.color_mode&&(a=e.k.shadeColorConversion(e.shade_color,e.new_data.children.length),a.reverse(),e.new_data.children.forEach(function(t,e){t.color=a[e]})),e.optionalFeatures().svgContainer(n).createChart().label(),e.k.createFooter().lastUpdatedAt().credits().dataSource().liveData(e).tooltip()):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+n,"bubble").emptyDiv(e.selector),e.new_data={children:e.data},"shade"===e.color_mode&&(a=e.k.shadeColorConversion(e.shade_color,e.new_data.children.length),a.reverse(),e.new_data.children.forEach(function(t,e){t.color=a[e]})),e.optionalFeatures().svgContainer(n).createChart().label(),e.k.tooltip()),e.k.exportSVG(e,"#"+n,"bubble"),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e);var r=e.k.resize(e.svgContainer);e.k.__proto__._ready(r),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.optionalFeatures=function(){var n={svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg").attr({"class":"svgcontainer PykCharts-oneD",id:t,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,width:e.chart_width,height:e.chart_height}),e.group=e.svgContainer.append("g").attr("id","bubgrp"),this},createChart:function(){var t=d3.layout.pack().sort(function(t,e){return e.weight-t.weight}).size([e.chart_width,e.chart_height]).value(function(t){return t.weight}).padding(20);e.sum=d3.sum(e.new_data.children,function(t){return t.weight}),e.new_data.children.length,e.node=t.nodes(e.new_data);var n=e.group.selectAll(".bubble-node").data(e.node);return n.enter().append("g").attr("class","bubble-node").append("circle"),n.attr("class","bubble-node").select("circle").attr({"class":"bubble",id:function(t,e){return"bubble"+e},x:function(t){return t.x},y:function(t){return t.y},r:0,transform:function(t){return"translate("+t.x+","+t.y+")"},fill:function(t){return t.children?e.background_color:e.fillChart.selectColor(t)},"fill-opacity":function(t){return t.children?0:1},"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,e){return t.name}}).on({mouseover:function(t){t.children||"default"!==e.mode||(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .bubble",this,!0),t.tooltip=t.tooltip||"<table><thead><th colspan='2' class='tooltip-heading'>"+t.name+"</th></thead><tr><td class='tooltip-left-content'>"+e.k.appendUnits(t.weight)+"  <td class='tooltip-right-content'>("+(100*t.weight/e.sum).toFixed(1)+"%)</tr></table>",e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip))},mouseout:function(t){"default"===e.mode&&(e.mouseEvent.tooltipHide(t),PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .bubble"))},mousemove:function(t){t.children||"default"!==e.mode||e.mouseEvent.tooltipPosition(t)},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("r",function(t){return t.r}),n.exit().remove(),this},label:function(){function n(){r.text(function(t){return t.children?" ":t.name}).attr("pointer-events","none").text(function(t){return this.getBBox().width<.85*(2*t.r)&&this.getBBox().height<2*t.r?t.children?" ":t.name:""})}function a(){i.text(function(t){return t.children?" ":e.k.appendUnits(t.weight)}).text(function(t){return this.getBBox().width<2*t.r*.55&&this.getBBox().height<2*t.r*.55?t.children?" ":(100*t.weight/e.sum).toFixed(1)+"%":""})}var r=e.group.selectAll(".name").data(e.node),i=e.group.selectAll(".weight").data(e.node);return r.enter().append("svg:text").attr("class","name"),i.enter().append("svg:text").attr("class","weight"),r.attr("class","name").attr({x:function(t){return t.x},y:function(t){return t.y-5}}),i.attr("class","weight").attr({x:function(t){return t.x},y:function(t){return+t.y+e.label_size}}),r.attr("text-anchor","middle").attr("fill",function(n){if("shade"===e.color_mode&&!n.children&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color}).style({"font-weight":e.label_weight,"font-size":e.label_size+"px","font-family":e.label_family}).text(""),setTimeout(n,e.transitions.duration()),i.attr({"text-anchor":"middle",fill:function(n){if("shade"===e.color_mode&&!n.children&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color},"pointer-events":"none"}).style({"font-family":e.label_family,"font-weight":e.label_weight,"font-size":e.label_size+"px"}).text(""),setTimeout(a,e.transitions.duration()),r.exit().remove(),i.exit().remove(),this},clubData:function(){var t,n=e.data.length;if(PykCharts["boolean"](e.clubdata_enable)){var a,r,i=[],o=0,s=[];if(n<=e.clubdata_maximum_nodes)return t={children:e.data};if(0!==e.clubdata_always_include_data_points.length){var l=e.clubdata_always_include_data_points.length;for(r=0;l>r;r++)i[r]=e.clubdata_always_include_data_points[r]}for(r=0;r<i.length;r++)for(a=0;n>a;a++)i[r].toUpperCase()===e.data[a].name.toUpperCase()&&s.push(e.data[a]);for(e.data.sort(function(t,e){return e.weight-t.weight});s.length<e.clubdata_maximum_nodes-1;){for(r=0;r<i.length;r++)e.data[o].name.toUpperCase()===i[r].toUpperCase()&&o++;s.push(e.data[o]),o++}var c=0;for(a=o;n>a;a++){for(r=0;r<s.length&&a<e.data.length;r++)e.data[a].name.toUpperCase()===s[r].name.toUpperCase()&&(c+=0,a++,r=-1);a<e.data.length&&(c+=e.data[a].weight)}for(var u=function(t,e){return e.weight-t.weight};s.length>e.clubdata_maximum_nodes;)s.sort(u),s.pop();var h={name:e.clubdata_text,weight:c,color:e.clubData_color,tooltip:e.clubData_tooltipText,highlight:!1};s.length<e.clubdata_maximum_nodes&&s.push(h),s.sort(function(t,e){return t.weight-e.weight}),t={children:s},e.map1=t.children.map(function(t){return t.weight})}else e.data.sort(function(t,e){return t.weight-e.weight}),t={children:e.data};return t}};return n}},PykCharts.oneD.funnel=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),e.chart_height=t.chart_height?t.chart_height:e.chart_width;var r=(t.optional,n.oneDimensionalCharts);e.funnel_rect_width=t.funnel_rect_width?t.funnel_rect_width:r.funnel_rect_width,e.funnel_rect_height=t.funnel_rect_height?t.funnel_rect_height:r.funnel_rect_height,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width).validatingDataType(e.funnel_rect_width,"funnel_rect_width",r.funnel_rect_width).validatingDataType(e.funnel_rect_height,"funnel_rect_height",r.funnel_rect_height);try{if(e.funnel_rect_width>=e.chart_width)throw"funnel_rect_width"}catch(i){e.funnel_rect_width=r.funnel_rect_width,console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.(Invalid value for attribute "funnel_rect_width")  Visit www.pykcharts.com/errors#warning_19')}e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("oned",t),e.compare_data=e.k.__proto__._groupBy("oned",t),e.k.remove_loading_bar(a),void e.render())},PykCharts["boolean"](t.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createChart().label().ticks()},PykCharts["boolean"](t.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=this,e=t.selector.substring(1,t.selector.length),n=e+"_svg";t.fillChart=new PykCharts.Configuration.fillChart(t),t.transitions=new PykCharts.Configuration.transition(t),"default"===t.mode&&t.k.title().backgroundColor(t)["export"](t,"#"+n,"funnel").emptyDiv(t.selector).subtitle(),t.k.tooltip(),t.mouseEvent=new PykCharts.Configuration.mouseEvent(t),"infographics"===t.mode&&(t.k.backgroundColor(t)["export"](t,"#"+n,"funnel").emptyDiv(t.selector),t.new_data=t.data),"default"===t.mode&&t.optionalFeatures(),t.optionalFeatures().svgContainer(n).createChart().label().ticks(),"default"===t.mode&&t.k.liveData(t).createFooter().lastUpdatedAt().credits().dataSource();var a=0;setTimeout(function(){t.ticks_text_width.length&&(a=d3.max(t.ticks_text_width,function(t){return t})),t.k.exportSVG(t,"#"+n,"funnel",void 0,void 0,a)},t.transitions.duration());var r=t.k.resize(t.svgContainer);t.k.__proto__._ready(r),window.addEventListener("resize",function(e){return t.k.resize(t.svgContainer);
})},this.funnelLayout=function(){var t,e,n,a=this,r={data:function(e){return 0===e.length||(t=e),this},size:function(t){return 2!==t.length||(e=t),this},mouth:function(t){return 2!==t.length||(n=t),this},coordinates:function(){for(var r=e[0],i=e[1],o=n[0],s=n[1],l=(r-o)/2,c=i-s,u=0,h=0,d=0,p=0,f=[],_=l/c,g=(r+o)/2*c,m=o*s,v=g+m,y=m/v*100,x=t.length-1;x>=0;x--){var b=a.percentageValues(t)[x];if(y>=b)d=b/y*s,u=i-d,x===t.length-1?f[x]={values:[{x:(r-o)/2,y:u},{x:(r-o)/2,y:i},{x:(r-o)/2+o,y:i},{x:(r-o)/2+o,y:u}]}:f[x]={values:[{x:(r-o)/2,y:u},f[x+1].values[0],f[x+1].values[3],{x:(r-o)/2+o,y:u}]};else{var w=b/100*v-m,k=2*_,C=2*o,D=2*w;h=(-C+Math.sqrt(Math.pow(C,2)-4*k*-D))/(2*k),u=i-h-s;var P=2*(_*h)+o,S=(r-P)/2;if(0===p)x===t.length-1?f[x]={values:[{x:S,y:u},{x:(r-o)/2,y:c},{x:(r-o)/2,y:i},{x:(r-o)/2+o,y:i},{x:(r-o)/2+o,y:c},{x:P+S,y:u}]}:f[x]={values:[{x:S,y:u},{x:(r-o)/2,y:c},f[x+1].values[0],f[x+1].values[3],{x:(r-o)/2+o,y:c},{x:P+S,y:u}]};else{var A;A=6===f[x+1].values.length?5:3,f[x]={values:[{x:S,y:u},f[x+1].values[0],f[x+1].values[A],{x:P+S,y:u}]}}p=1}}return f}};return r},this.percentageValues=function(t){var e=t.map(function(e){var n=d3.max(t,function(t){return t.weight});return e.weight/n*100});return e.sort(function(t,e){return e-t}),e},this.optionalFeatures=function(){var n={svgContainer:function(n){return e.svgContainer=d3.select(t.selector).append("svg").attr({width:e.chart_width+"px",height:e.chart_height+"px",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,id:n,"class":"svgcontainer PykCharts-oneD"}),e.group=e.svgContainer.append("g").attr("id","funnel"),this},createChart:function(){var n=new PykCharts.Configuration.border(e);e.new_data=e.data.sort(function(t,e){return e.weight-t.weight}),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.per_values=e.percentageValues(e.new_data),e.funnel=e.funnelLayout().data(e.new_data).size([e.chart_width,e.chart_height]).mouth([e.funnel_rect_width,e.funnel_rect_height]),e.coordinates=e.funnel.coordinates();var a=d3.svg.line().interpolate("linear-closed").x(function(t,e){return t.x}).y(function(t,e){return t.y});e.chart_data=e.group.selectAll(".fun-path").data(e.coordinates);var r=[{x:0,y:0},{x:e.chart_width,y:0},{x:0,y:0},{x:e.chart_width,y:0},{x:0,y:0},{x:e.chart_width,y:0}];return e.chart_data.enter().append("path").attr("class","fun-path"),e.chart_data.attr({"class":"fun-path",d:function(t){return a(r)},fill:function(t,n){return t.color=e.new_data[n].color,e.fillChart.selectColor(e.new_data[n])},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},stroke:n.color(),"stroke-width":n.width(),"stroke-dasharray":n.style(),"stroke-opacity":1,"data-id":function(t,n){return e.new_data[n].name}}).on({mouseover:function(n,a){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(t.selector+" .fun-path",this),tooltip=e.data[a].tooltip||"<table><tr><th colspan='2' class='tooltip-heading'>"+e.new_data[a].name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(e.new_data[a].weight)+"<td class='tooltip-right-content'>("+e.per_values[a].toFixed(1)+"%) </tr></table>",e.mouseEvent.tooltipPosition(n),e.mouseEvent.tooltipTextShow(tooltip))},mouseout:function(n){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(t.selector+" .fun-path"),e.mouseEvent.tooltipHide(n))},mousemove:function(t,n){"default"===e.mode&&e.mouseEvent.tooltipPosition(t)},click:function(n,a){PykCharts["boolean"](t.click_enable)&&e.addEvents(e.new_data[a].name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("d",function(t){return a(t.values)}),e.chart_data.exit().remove(),this},label:function(){function n(){e.chart_text.text(function(t,n){return e.per_values[n].toFixed(1)+"%"}).attr({"text-anchor":"middle","pointer-events":"none",fill:function(n){if("shade"===e.color_mode&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color}}).style({"font-weight":e.label_weight,"font-size":e.label_size+"px","font-family":e.label_family}).text(function(t,n){return this.getBBox().width<t.values[3].x-t.values[1].x&&this.getBBox().height<t.values[2].y-t.values[0].y?e.per_values[n].toFixed(1)+"%":""})}return e.chart_text=e.group.selectAll("text").data(e.coordinates),e.chart_text.enter().append("text"),e.chart_text.attr({y:function(t,e){return 4===t.values.length?(t.values[0].y-t.values[1].y)/2+t.values[1].y+5:(t.values[0].y-t.values[2].y)/2+t.values[2].y+5},x:function(t,n){return e.chart_width/2}}),e.chart_text.text(""),setTimeout(n,e.transitions.duration()),e.chart_text.exit().remove(),this},ticks:function(){function t(){r.text(function(t,n){return e.data[n].name}).text(function(t,n){return a[n]=this.getBBox().height,e.ticks_text_width.push(this.getBBox().width),this.getBBox().height<t.values[2].y-t.values[0].y?e.data[n].name:""}).style({"font-size":e.pointer_size+"px","text-anchor":"start",fill:e.pointer_color,"pointer-events":"none","font-family":e.pointer_family,"font-weight":e.pointer_weight})}function n(){s.attr("x2",function(t,e){return t.values[2].y-t.values[0].y>a[e]?4===t.values.length?(t.values[3].x+t.values[2].x)/2+12:t.values[4].x+12:4===t.values.length?(t.values[3].x+t.values[2].x)/2:t.values[4].x})}PykCharts["boolean"](e.pointer_overflow_enable)&&e.svgContainer.style("overflow","visible");var a=[];e.ticks_text_width=[];var r=e.group.selectAll(".ticks_label").data(e.coordinates);r.attr("class","ticks_label"),r.enter().append("text").attr({x:0,y:0});var i,o;r.attr("transform",function(t){return 4===t.values.length?(i=(t.values[3].x+t.values[2].x)/2+17,o=(t.values[0].y+t.values[2].y)/2+5):(i=t.values[4].x+17,o=t.values[4].y+5),"translate("+i+","+o+")"}),r.text(""),setTimeout(t,e.transitions.duration()),r.exit().remove();var s=e.group.selectAll(".funnel-ticks").data(e.coordinates);return s.enter().append("line").attr("class","funnel-ticks"),s.attr({x1:function(t,e){return 4===t.values.length?(t.values[3].x+t.values[2].x)/2:t.values[4].x},y1:function(t,e){return 4===t.values.length?(t.values[0].y+t.values[2].y)/2:t.values[4].y},x2:function(t,e){return 4===t.values.length?(t.values[3].x+t.values[2].x)/2:t.values[4].x},y2:function(t,e){return 4===t.values.length?(t.values[0].y+t.values[2].y)/2:t.values[4].y},"stroke-width":e.pointer_thickness+"px",stroke:e.pointer_color}),setTimeout(n,e.transitions.duration()),s.exit().remove(),this}};return n}},PykCharts.oneD.percentageColumn=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(e){var a=this;a=new PykCharts.validation.processInputs(a,t,"oneDimensionalCharts"),a.chart_height=PykCharts["boolean"](t.chart_height)?t.chart_height:a.chart_width,a.percent_column_rect_width=t.percent_column_rect_width?t.percent_column_rect_width:n.oneDimensionalCharts.percent_column_rect_width,a.k.validator().validatingDataType(a.chart_height,"chart_height",a.chart_width).validatingDataType(a.percent_column_rect_width,"percent_column_rect_width",n.oneDimensionalCharts.percent_column_rect_width),a.stop||(a.k.storeInitialDivHeight(),a.percent_column_rect_width>100&&(a.percent_column_rect_width=100),a.percent_column_rect_width=2*a.k.__proto__._radiusCalculation(a.percent_column_rect_width,"percentageBar"),"default"===a.mode&&a.k.loading(),a.executeData=function(t){var e=a.k.validator().validatingJSON(t),n=a.selector.substring(1,a.selector.length);return a.stop||e===!1?void a.k.remove_loading_bar(n):(a.data=a.k.__proto__._groupBy("oned",t),a.compare_data=a.k.__proto__._groupBy("oned",t),a.k.remove_loading_bar(n),a.clubdata_enable=a.data.length>a.clubdata_maximum_nodes?a.clubdata_enable:"no",void a.render())},PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeData")):a.k.dataSourceFormatIdentification(t.data,a,"executeData"))},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().createChart().label().ticks()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var e=this,n=e.selector.substring(1,e.selector.length),a=n+"_svg";e.fillChart=new PykCharts.Configuration.fillChart(e),e.transitions=new PykCharts.Configuration.transition(e),"default"===e.mode&&e.k.title().backgroundColor(e)["export"](e,"#"+a,"percentageColumn").emptyDiv(e.selector).subtitle(),"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+a,"percentageColumn").emptyDiv(e.selector),e.new_data=e.data),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),"default"===e.mode&&(percent_column=e.optionalFeatures().clubData()),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().svgContainer(a).createChart().label().ticks(),"default"===e.mode&&e.k.liveData(e).createFooter().lastUpdatedAt().credits().dataSource();var r=0;setTimeout(function(){e.ticks_text_width.length&&(r=d3.max(e.ticks_text_width,function(t){return t})),e.k.exportSVG(e,"#"+a,"percentageColumn",void 0,void 0,r+15),PykCharts["boolean"](t.chart_width)||(e.chart_width=e.percent_column_rect_width+10+r,e.svgContainer.attr("viewBox","0 0 "+e.chart_width+" "+e.chart_height));var n=e.k.resize(e.svgContainer);e.k.__proto__._ready(n)},e.transitions.duration()),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.optionalFeatures=function(){var n={createChart:function(){var t=new PykCharts.Configuration.border(e),n=e.new_data.map(function(t){return t.weight});n.sum=function(){for(var t=0,e=0;e<this.length;++e)t+=this[e];return t};var a=n.sum();return e.new_data.forEach(function(t,e){this[e].percentValue=100*t.weight/a},e.new_data),e.chart_data=e.group.selectAll(".per-rect").data(e.new_data),e.chart_data.enter().append("rect").attr("class","per-rect"),e.chart_data.attr({x:0,y:function(t,n){if(0===n)return 0;var a=0,r=e.new_data.slice(0,n);return r.forEach(function(t,e){a+=this[e].percentValue},r),a*e.chart_height/100},width:e.percent_column_rect_width,height:0,fill:function(t){return e.fillChart.selectColor(t)},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},stroke:t.color(),"stroke-width":t.width(),"stroke-dasharray":t.style(),"data-id":function(t,e){return t.name}}).on({mouseover:function(t,n){"default"===e.mode&&(t.tooltip=t.tooltip||"<table class='PykCharts'><tr><th colspan='2' class='tooltip-heading'>"+t.name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(t.weight)+"<td class='tooltip-right-content'>("+t.percentValue.toFixed(1)+"%)</tr></table>",PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .per-rect",this),e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip))},mouseout:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .per-rect"),e.mouseEvent.tooltipHide(t))},mousemove:function(t,n){"default"===e.mode&&e.mouseEvent.tooltipPosition(t)},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("height",function(t){return t.percentValue*e.chart_height/100}),e.chart_data.exit().remove(),this},svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg").attr({width:e.chart_width,height:e.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,id:t,"class":"svgcontainer PykCharts-oneD"}),e.group=e.svgContainer.append("g").attr("id","percentageColumn"),this},label:function(){function n(){e.chart_text.text(function(t){return t.percentValue.toFixed(1)+"%"}).text(function(t){return this.getBBox().width<.92*e.percent_column_rect_width&&this.getBBox().height<t.percentValue*e.chart_height/100?t.percentValue.toFixed(1)+"%":""})}e.chart_text=e.group.selectAll(".per-text").data(e.new_data);var a=0;return e.chart_text.enter().append("text").attr("class","per-text"),e.chart_text.attr({"class":"per-text",x:e.percent_column_rect_width/2,y:function(t,n){return a+=t.percentValue,0===n?(0+a*e.chart_height/100)/2+5:((a-t.percentValue)*e.chart_height/100+a*e.chart_height/100)/2+5}}),a=0,e.chart_text.text("").attr({fill:function(n){if("shade"===e.color_mode&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color},"text-anchor":"middle","pointer-events":"none"}).style({"font-size":e.label_size+"px","font-weight":e.label_weight,"font-family":e.label_family}),setTimeout(n,e.transitions.duration()),e.chart_text.exit().remove(),this},ticks:function(){function t(){l.text(function(t){return t.name}).text(function(t,n){return o[n]=this.getBBox().height,e.ticks_text_width[n]=this.getBBox().width,this.getBBox().height<t.percentValue*e.chart_height/100?t.name:""}),r=0,s.attr({x1:function(t,n){return e.percent_column_rect_width},y1:function(t,n){return r+=t.percentValue,0===n?(0+r*e.chart_height/100)/2:((r-t.percentValue)*e.chart_height/100+r*e.chart_height/100)/2},x2:function(t,n){return e.percent_column_rect_width},y2:function(t,n){return i+=t.percentValue,0===n?(0+i*e.chart_height/100)/2:((i-t.percentValue)*e.chart_height/100+i*e.chart_height/100)/2},"stroke-width":e.pointer_thickness+"px",stroke:e.pointer_color,x2:function(t,n){return t.percentValue*e.chart_height/100>o[n]?e.percent_column_rect_width+10:e.percent_column_rect_width}})}PykCharts["boolean"](e.pointer_overflow_enable)&&e.svgContainer.style("overflow","visible");var n,a,r=0,i=0,o=[];r=0,e.ticks_text_width=[];var s=e.group.selectAll(".per-ticks").data(e.new_data);s.enter().append("line").attr("class","per-ticks");var l=e.group.selectAll(".ticks_label").data(e.new_data);return l.enter().append("text").attr("class","ticks_label"),l.attr("class","ticks_label").attr("transform",function(t){return r+=t.percentValue,n=e.percent_column_rect_width+15,a=((r-t.percentValue)*e.chart_height/100+r*e.chart_height/100)/2+5,"translate("+n+","+a+")"}),l.text(function(t){return""}).attr({"font-size":e.pointer_size,"text-anchor":"start",fill:e.pointer_color,"font-family":e.pointer_family,"font-weight":e.pointer_weight,"pointer-events":"none"}),setTimeout(t,e.transitions.duration()),l.exit().remove(),s.exit().remove(),this},clubData:function(){if(PykCharts["boolean"](e.clubdata_enable)){var t=[];if(0!==e.clubdata_always_include_data_points.length){var n=e.clubdata_always_include_data_points.length;for(i=0;i<n;i++)t[i]=e.clubdata_always_include_data_points[i]}var a=[];for(i=0;i<t.length;i++)for(j=0;j<e.data.length;j++)t[i].toUpperCase()===e.data[j].name.toUpperCase()&&a.push(e.data[j]);e.data.sort(function(t,e){return e.weight-t.weight});for(var r=0;a.length<e.clubdata_maximum_nodes-1;){for(i=0;i<t.length;i++)e.data[r].name.toUpperCase()===t[i].toUpperCase()&&r++;a.push(e.data[r]),r++}var o=0;for(j=r;j<e.data.length;j++){for(i=0;i<a.length&&j<e.data.length;i++)e.data[j].name.toUpperCase()===a[i].name.toUpperCase()&&(o+=0,j++,i=-1);j<e.data.length&&(o+=e.data[j].weight)}for(var s=function(t,e){return e.weight-t.weight};a.length>e.clubdata_maximum_nodes;)a.sort(s),a.pop();var l={name:e.clubdata_text,weight:o,tooltip:e.clubdata_tooltip};a.sort(function(t,e){return e.weight-t.weight}),a.length<e.clubdata_maximum_nodes&&a.push(l),e.new_data=a}else e.data.sort(function(t,e){return e.weight-t.weight}),e.new_data=e.data;return this}};return n}},PykCharts.oneD.percentageBar=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(e){var a=this;a=new PykCharts.validation.processInputs(a,t,"oneDimensionalCharts"),a.percent_row_rect_height=t.percent_row_rect_height?t.percent_row_rect_height:n.oneDimensionalCharts.percent_row_rect_height,a.percent_row_rect_height>100&&(a.percent_row_rect_height=100),a.percent_row_rect_height=2*a.k.__proto__._radiusCalculation(a.percent_row_rect_height),a.chart_height=PykCharts["boolean"](t.chart_height)?t.chart_height:a.percent_row_rect_height+10+a.pointer_size,a.k.validator().validatingDataType(a.chart_height,"chart_height",a.chart_width/2).validatingDataType(a.percent_row_rect_height,"percent_row_rect_height",n.oneDimensionalCharts.percent_row_rect_height),a.stop||(a.k.storeInitialDivHeight(),"default"===a.mode&&a.k.loading(),a.executeData=function(t){var e=a.k.validator().validatingJSON(t),n=a.selector.substring(1,a.selector.length);return a.stop||e===!1?void a.k.remove_loading_bar(n):(a.data=a.k.__proto__._groupBy("oned",t),a.compare_data=a.k.__proto__._groupBy("oned",t),a.k.remove_loading_bar(n),a.clubdata_enable=a.data.length>a.clubdata_maximum_nodes?a.clubdata_enable:"no",void a.render())},PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeData")):a.k.dataSourceFormatIdentification(t.data,a,"executeData"))},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().createChart().label().ticks()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=this,e=t.selector.substring(1,t.selector.length),n=e+"_svg";t.fillChart=new PykCharts.Configuration.fillChart(t),t.transitions=new PykCharts.Configuration.transition(t),"default"===t.mode&&t.k.title().backgroundColor(t)["export"](t,"#"+n,"percentageBar").emptyDiv(t.selector).subtitle(),"infographics"===t.mode&&(t.k.backgroundColor(t)["export"](t,"#"+n,"percentageBar").emptyDiv(t.selector),t.new_data=t.data,"shade"===t.color_mode&&(shade_array=t.k.shadeColorConversion(t.shade_color,t.new_data.length),t.new_data.forEach(function(t,e){t.color=shade_array[e]}))),t.k.tooltip(),t.mouseEvent=new PykCharts.Configuration.mouseEvent(t),"default"===t.mode&&(percent_bar=t.optionalFeatures().clubData(),"shade"===t.color_mode&&(shade_array=t.k.shadeColorConversion(t.shade_color,t.new_data.length),t.new_data.forEach(function(t,e){t.color=shade_array[e]}))),t.optionalFeatures().svgContainer(n).createChart().label().ticks(),"default"===t.mode&&t.k.liveData(t).createFooter().lastUpdatedAt().credits().dataSource();var a=0;setTimeout(function(){t.ticks_text_height&&(a=t.ticks_text_height+10),t.k.exportSVG(t,"#"+n,"percentageBar",void 0,void 0,0,a)},t.transitions.duration());var r=t.k.resize(t.svgContainer);t.k.__proto__._ready(r),window.addEventListener("resize",function(e){return t.k.resize(t.svgContainer)})},this.optionalFeatures=function(){var n={createChart:function(){var t=new PykCharts.Configuration.border(e),n=e.new_data.map(function(t){return t.weight});n.sum=function(){for(var t=0,e=0;e<this.length;++e)t+=this[e];return t};var a=n.sum();return e.new_data.forEach(function(t,e){this[e].percentValue=100*t.weight/a},e.new_data),e.chart_data=e.group.selectAll(".per-rect").data(e.new_data),e.chart_data.enter().append("rect").attr("class","per-rect"),e.chart_data.attr({x:0,x:function(t,n){if(0===n)return 0;var a=0,r=e.new_data.slice(0,n);return r.forEach(function(t,e){a+=this[e].percentValue},r),a*e.chart_width/100},width:0,height:function(t){return e.percent_row_rect_height},fill:function(t){return e.fillChart.selectColor(t)},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},stroke:t.color(),"stroke-width":t.width(),"stroke-dasharray":t.style(),"data-id":function(t,e){return t.name}}).on({mouseover:function(t,n){"default"===e.mode&&(t.tooltip=t.tooltip||"<table class='PykCharts'><tr><th colspan='2' class='tooltip-heading'>"+t.name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(t.weight)+"<td class='tooltip-right-content'>("+t.percentValue.toFixed(1)+"%)</tr></table>",PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .per-rect",this),e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip))},mouseout:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .per-rect"),e.mouseEvent.tooltipHide(t))},mousemove:function(t,n){"default"===e.mode&&e.mouseEvent.tooltipPosition(t)},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("width",function(t){return t.percentValue*e.chart_width/100}),e.chart_data.exit().remove(),this},svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg").attr({width:e.chart_width,height:e.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,id:t,"class":"svgcontainer PykCharts-oneD"}),e.group=e.svgContainer.append("g").attr("id","percentageBar"),this},label:function(){function n(){e.chart_text.text(function(t){return t.percentValue.toFixed(1)+"%"}).text(function(t){return this.getBBox().width<.92*(t.percentValue*e.chart_width/100)&&this.getBBox().height<e.percent_row_rect_height?t.percentValue.toFixed(1)+"%":""})}e.chart_text=e.group.selectAll(".per-text").data(e.new_data);var a=0;return e.chart_text.enter().append("text").attr("class","per-text"),e.chart_text.attr({"class":"per-text",y:e.percent_row_rect_height/2+5,x:function(t,n){return a+=t.percentValue,0===n?(0+a*e.chart_width/100)/2:((a-t.percentValue)*e.chart_width/100+a*e.chart_width/100)/2}}),a=0,e.chart_text.text("").attr({fill:function(n){if("shade"===e.color_mode&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color},"text-anchor":"middle","pointer-events":"none"}).style({"font-size":e.label_size+"px","font-weight":e.label_weight,"font-family":e.label_family}),setTimeout(n,e.transitions.duration()),e.chart_text.exit().remove(),this},ticks:function(){function t(){l.text(function(t){return t.name}).text(function(t,n){return o[n]=this.getBBox().width,e.ticks_text_height=this.getBBox().height,this.getBBox().width<t.percentValue*e.chart_width/100?t.name:""}),r=0,s.attr({y1:function(t,n){return e.percent_row_rect_height},x1:function(t,n){return r+=t.percentValue,0===n?(0+r*e.chart_width/100)/2:((r-t.percentValue)*e.chart_width/100+r*e.chart_width/100)/2},y2:function(t,n){return e.percent_row_rect_height},x2:function(t,n){return i+=t.percentValue,0===n?(0+i*e.chart_width/100)/2:((i-t.percentValue)*e.chart_width/100+i*e.chart_width/100)/2},"stroke-width":e.pointer_thickness+"px",stroke:e.pointer_color,y2:function(t,n){return t.percentValue*e.chart_width/100>o[n]?e.percent_row_rect_height+10:e.percent_row_rect_height}}).style("margin-top","10px")}PykCharts["boolean"](e.pointer_overflow_enable)&&e.svgContainer.style("overflow","visible");var n,a,r=0,i=0,o=[];e.ticks_text_height,r=0;var s=e.group.selectAll(".per-ticks").data(e.new_data);s.enter().append("line").attr("class","per-ticks");var l=e.group.selectAll(".ticks_label").data(e.new_data);return l.enter().append("text").attr("class","ticks_label"),l.attr("class","ticks_label").attr("transform",function(t){return r+=t.percentValue,a=e.percent_row_rect_height+e.pointer_size+10,n=((r-t.percentValue)*e.chart_width/100+r*e.chart_width/100)/2,"translate("+n+","+a+")"}),l.text(function(t){return""}).attr({"font-size":e.pointer_size,"text-anchor":"middle",fill:e.pointer_color,"font-family":e.pointer_family,"font-weight":e.pointer_weight,"pointer-events":"none"}),setTimeout(t,e.transitions.duration()),l.exit().remove(),s.exit().remove(),this},clubData:function(){if(PykCharts["boolean"](e.clubdata_enable)){var t=[];if(0!==e.clubdata_always_include_data_points.length){var n=e.clubdata_always_include_data_points.length;for(i=0;i<n;i++)t[i]=e.clubdata_always_include_data_points[i]}var a=[];for(i=0;i<t.length;i++)for(j=0;j<e.data.length;j++)t[i].toUpperCase()===e.data[j].name.toUpperCase()&&a.push(e.data[j]);e.data.sort(function(t,e){return e.weight-t.weight});for(var r=0;a.length<e.clubdata_maximum_nodes-1;){for(i=0;i<t.length;i++)e.data[r].name.toUpperCase()===t[i].toUpperCase()&&r++;a.push(e.data[r]),r++}var o=0;for(j=r;j<e.data.length;j++){for(i=0;i<a.length&&j<e.data.length;i++)e.data[j].name.toUpperCase()===a[i].name.toUpperCase()&&(o+=0,j++,i=-1);j<e.data.length&&(o+=e.data[j].weight)}for(var s=function(t,e){return e.weight-t.weight};a.length>e.clubdata_maximum_nodes;)a.sort(s),a.pop();var l={name:e.clubdata_text,weight:o,tooltip:e.clubdata_tooltip};a.sort(function(t,e){return e.weight-t.weight}),a.length<e.clubdata_maximum_nodes&&a.push(l),e.new_data=a}else e.data.sort(function(t,e){return e.weight-t.weight}),e.new_data=e.data;return this}};return n}},PykCharts.oneD.pie=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),t.chart_height?(e.chart_height=t.chart_height,e.calculation=void 0):(e.chart_height=e.chart_width,e.calculation="pie"),e.pie_radius_percent=t.pie_radius_percent?t.pie_radius_percent:n.oneDimensionalCharts.pie_radius_percent,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width).validatingDataType(e.pie_radius_percent,"pie_radius_percent",n.oneDimensionalCharts.pie_radius_percent),e.stop||(e.k.storeInitialDivHeight(),e.innerRadiusPercent=0,e.height_translate=e.chart_height/2,e.pie_radius_percent>100&&(e.pie_radius_percent=100),"default"===e.mode&&e.k.loading(),e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("oned",n),e.compare_data=e.k.__proto__._groupBy("oned",n),e.k.remove_loading_bar(r);var i=new PykCharts.oneD.pieFunctions(t,e,"pie");e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}},PykCharts.oneD.donut=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),t.chart_height?(e.chart_height=t.chart_height,e.calculation=void 0):(e.chart_height=e.chart_width,e.calculation="pie"),e.pie_radius_percent=t.donut_radius_percent?t.donut_radius_percent:n.oneDimensionalCharts.donut_radius_percent,e.innerRadiusPercent=t.donut_inner_radius_percent?t.donut_inner_radius_percent:n.oneDimensionalCharts.donut_inner_radius_percent,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width).validatingDataType(e.pie_radius_percent,"donut_radius_percent",n.oneDimensionalCharts.donut_radius_percent).validatingDataType(e.innerRadiusPercent,"donut_inner_radius_percent",n.oneDimensionalCharts.donut_inner_radius_percent),!e.stop){e.k.storeInitialDivHeight(),e.pie_radius_percent>100&&(e.pie_radius_percent=100),e.innerRadiusPercent>100&&(e.innerRadiusPercent=100);try{if(e.innerRadiusPercent>=e.pie_radius_percent)throw e.innerRadiusPercent=n.oneDimensionalCharts.donut_inner_radius_percent,"donut_inner_radius_percent"}catch(r){e.k.warningHandling(r,"6")}e.stop||("default"===e.mode&&e.k.loading(),e.height_translate=e.chart_height/2,e.show_total_at_center=t.donut_show_total_at_center?t.donut_show_total_at_center.toLowerCase():n.oneDimensionalCharts.donut_show_total_at_center,e.show_total_at_center_size="donut_show_total_at_center_size"in t?t.donut_show_total_at_center_size:n.oneDimensionalCharts.donut_show_total_at_center_size,e.show_total_at_center_color=t.donut_show_total_at_center_color?t.donut_show_total_at_center_color:n.oneDimensionalCharts.donut_show_total_at_center_color,e.show_total_at_center_weight=t.donut_show_total_at_center_weight?t.donut_show_total_at_center_weight:n.oneDimensionalCharts.donut_show_total_at_center_weight,e.show_total_at_center_family=t.donut_show_total_at_center_family?t.donut_show_total_at_center_family:n.oneDimensionalCharts.donut_show_total_at_center_family,e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("oned",n),e.compare_data=e.k.__proto__._groupBy("oned",n),e.k.remove_loading_bar(r);var i=new PykCharts.oneD.pieFunctions(t,e,"donut");e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}}},PykCharts.oneD.electionPie=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),t.chart_height||void 0===t.chart_height)try{if(void 0===t.chart_height)t.chart_height="";else if(isNaN(t.chart_height))throw t.chart_height="","chart_height"}catch(r){e.k.warningHandling(r)}PykCharts["boolean"](t.chart_height)?(e.chart_height=t.chart_height,e.calculation=void 0,e.height_translate=e.chart_height/2):(e.chart_height=e.chart_width/2,e.calculation="pie",e.height_translate=e.chart_height),e.pie_radius_percent=t.pie_radius_percent?t.pie_radius_percent:n.oneDimensionalCharts.pie_radius_percent;try{if(isNaN(e.pie_radius_percent))throw e.pie_radius_percent=n.oneDimensionalCharts.pie_radius_percent,"pie_radius_percent"}catch(r){e.k.warningHandling(r,"1")}e.stop||(e.k.storeInitialDivHeight(),e.pie_radius_percent>100&&(e.pie_radius_percent=100),"default"===e.mode&&e.k.loading(),e.innerRadiusPercent=0,e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("oned",n),e.compare_data=e.k.__proto__._groupBy("oned",n),e.k.remove_loading_bar(r);var i=new PykCharts.oneD.pieFunctions(t,e,"election pie");e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}},PykCharts.oneD.electionDonut=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),t.chart_height||void 0===t.chart_height)try{if(void 0===t.chart_height)t.chart_height="";else if(isNaN(t.chart_height))throw t.chart_height="","chart_height"}catch(r){e.k.warningHandling(r)}if(PykCharts["boolean"](t.chart_height)?(e.chart_height=t.chart_height,e.calculation=void 0,e.height_translate=e.chart_height/2):(e.chart_height=e.chart_width/2,e.calculation="pie",e.height_translate=e.chart_height),e.pie_radius_percent=t.donut_radius_percent?t.donut_radius_percent:n.oneDimensionalCharts.donut_radius_percent,e.innerRadiusPercent=t.donut_inner_radius_percent&&t.donut_inner_radius_percent?t.donut_inner_radius_percent:n.oneDimensionalCharts.donut_inner_radius_percent,e.k.validator().validatingDataType(e.pie_radius_percent,"donut_radius_percent",n.oneDimensionalCharts.donut_radius_percent).validatingDataType(e.innerRadiusPercent,"donut_inner_radius_percent",n.oneDimensionalCharts.donut_inner_radius_percent),
!e.stop){e.k.storeInitialDivHeight(),e.pie_radius_percent>100&&(e.pie_radius_percent=100),e.innerRadiusPercent>100&&(e.innerRadiusPercent=100);try{if(e.innerRadiusPercent>=e.pie_radius_percent)throw e.innerRadiusPercent=n.oneDimensionalCharts.donut_inner_radius_percent,"donut_inner_radius_percent"}catch(r){e.k.warningHandling(r,"6")}e.stop||("default"===e.mode&&e.k.loading(),e.show_total_at_center=t.donut_show_total_at_center?t.donut_show_total_at_center.toLowerCase():n.oneDimensionalCharts.donut_show_total_at_center,e.show_total_at_center_size="donut_show_total_at_center_size"in t?t.donut_show_total_at_center_size:n.oneDimensionalCharts.donut_show_total_at_center_size,e.show_total_at_center_color=t.donut_show_total_at_center_color?t.donut_show_total_at_center_color:n.oneDimensionalCharts.donut_show_total_at_center_color,e.show_total_at_center_weight=t.donut_show_total_at_center_weight?t.donut_show_total_at_center_weight:n.oneDimensionalCharts.donut_show_total_at_center_weight,e.show_total_at_center_family=t.donut_show_total_at_center_family?t.donut_show_total_at_center_family:n.oneDimensionalCharts.donut_show_total_at_center_family,e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("oned",n),e.compare_data=e.k.__proto__._groupBy("oned",n),e.k.remove_loading_bar(r);var i=new PykCharts.oneD.pieFunctions(t,e,"election donut");e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}}},PykCharts.oneD.pieFunctions=function(t,e,n){var a=e;a.refresh=function(e){a.executeRefresh=function(t){a.data=a.k.__proto__._groupBy("oned",t),a.clubdata_enable=a.data.length>a.clubdata_maximum_nodes?a.clubdata_enable:"no",a.refresh_data=a.k.__proto__._groupBy("oned",t);var e=a.k.checkChangeInData(a.refresh_data,a.compare_data),n=[];a.compare_data=e[0];var r=e[1];r&&a.k.lastUpdatedAt("liveData"),a.new_data=a.optionalFeatures().clubData(),a.optionalFeatures().createChart(n).label().ticks().centerLabel()},PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeRefresh")):a.k.dataSourceFormatIdentification(t.data,a,"executeRefresh")},this.render=function(){a.count=1;var t=a.selector.substring(1,a.selector.length),e=t+"_svg",r=[];a.fillChart=new PykCharts.Configuration.fillChart(a),a.transitions=new PykCharts.Configuration.transition(a),"default"===a.mode.toLowerCase()?(a.k.title().backgroundColor(a)["export"](a,"#"+e,n).emptyDiv(a.selector).subtitle(),a.optionalFeatures().svgContainer(e),a.new_data=a.optionalFeatures().clubData(),a.k.createFooter().lastUpdatedAt().credits().dataSource().tooltip(),a.optionalFeatures().set_start_end_angle().createChart(r).label().ticks().centerLabel(),a.k.liveData(a)):"infographics"===a.mode.toLowerCase()&&(a.new_data=a.data,a.k.backgroundColor(a)["export"](a,"#"+e,n).emptyDiv(a.selector),a.optionalFeatures().svgContainer(e).set_start_end_angle().createChart(r).label().ticks().centerLabel(),a.k.tooltip()),a.mouseEvent=new PykCharts.Configuration.mouseEvent(a);var i=0,o=0;setTimeout(function(){a.ticks_text_width.length&&(i=d3.max(a.ticks_text_width,function(t){return t}),o=a.ticks_text_height),a.k.exportSVG(a,"#"+e,n,void 0,void 0,i+20,o+20)},a.transitions.duration());var s=a.k.resize(a.svgContainer);a.k.__proto__._ready(s),window.addEventListener("resize",function(t){return a.k.resize(a.svgContainer)})},a.optionalFeatures=function(){var e={svgContainer:function(t){return a.svgContainer=d3.select(a.selector).append("svg").attr({width:a.chart_width,height:function(){return a.chart_height},preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+a.chart_width+" "+a.chart_height,id:t,"class":"svgcontainer PykCharts-oneD"}),a.group=a.svgContainer.append("g").attr({transform:"translate("+a.chart_width/2+","+a.height_translate+")",id:"pieGroup"}),this},createChart:function(){document.querySelector(a.selector+" #pieGroup").innerHTML=null;var t=new PykCharts.Configuration.border(a);if("shade"===a.color_mode&&(shade_array=a.k.shadeColorConversion(a.shade_color,a.new_data.length),a.new_data.forEach(function(t,e){t.color=shade_array[e]})),"pie"===n.toLowerCase()||"donut"===n.toLowerCase()){a.new_data.sort(function(t,e){return t.weight-e.weight});var e=a.new_data.pop();if(a.new_data.unshift(e),PykCharts["boolean"](a.clubdata_enable)&&"default"===a.mode){for(var r,i,o=0;o<a.new_data.length;o++)if(a.new_data[o].name===a.clubdata_text){r=o,i=a.new_data[o];break}if(r){if(a.new_data.splice(r,1),0===o){var e=a.new_data.pop();a.new_data.splice(0,0,e)}a.new_data.splice(1,0,i)}}}else if(("election pie"==n.toLowerCase()||"election donut"==n.toLowerCase())&&(a.new_data.sort(function(t,e){return e.weight-t.weight}),PykCharts["boolean"](a.clubdata_enable)&&"default"===a.mode)){for(var r,i,o=0;o<a.new_data.length;o++)if(a.new_data[o].name===a.clubdata_text){r=o,i=a.new_data[o];break}r&&(a.new_data.splice(r,1),a.new_data.push(i))}a.sum=0;for(var o=0,s=a.new_data.length;s>o;o++)a.sum+=a.new_data[o].weight;return a.inner_radius=a.k.__proto__._radiusCalculation(a.innerRadiusPercent,a.calculation),a.outer_radius=a.k.__proto__._radiusCalculation(a.pie_radius_percent,a.calculation),a.arc=d3.svg.arc().innerRadius(a.inner_radius).outerRadius(a.outer_radius),a.pie=d3.layout.pie().value(function(t){return t.weight}).sort(null).startAngle(a.start_angle).endAngle(a.end_angle),a.chart_data=a.group.selectAll("path").data(a.pie(a.new_data)),a.chart_data.enter().append("path"),a.chart_data.attr("class","pie"),a.chart_data.attr({fill:function(t,e){return a.fillChart.selectColor(t.data)},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},stroke:t.color(),"stroke-width":t.width(),"stroke-dasharray":t.style(),"data-id":function(t){return t.data.name}}).on({mouseover:function(t){"default"===a.mode&&(t.data.tooltip=t.data.tooltip||"<table class='PykCharts'><tr><th colspan='2' class='tooltip-heading'>"+t.data.name+"</tr><tr><td class='tooltip-left-content'>"+a.k.appendUnits(t.data.weight)+"<td class='tooltip-right-content'>("+(100*t.data.weight/a.sum).toFixed(1)+"%) </tr></table>",PykCharts["boolean"](a.chart_onhover_highlight_enable)&&a.mouseEvent.highlight(a.selector+" .pie",this),a.mouseEvent.tooltipPosition(t),a.mouseEvent.tooltipTextShow(t.data.tooltip))},mouseout:function(t){"default"===a.mode&&(PykCharts["boolean"](a.chart_onhover_highlight_enable)&&a.mouseEvent.highlightHide(a.selector+" .pie"),a.mouseEvent.tooltipHide(t))},mousemove:function(t){"default"===a.mode&&a.mouseEvent.tooltipPosition(t)},click:function(t){PykCharts["boolean"](a.click_enable)&&a.addEvents(t.data.name,d3.select(this).attr("data-id"))}}),a.chart_data.transition().delay(function(t,e){return a.transition_duration&&"default"===a.mode?e*a.transition_duration*1e3/a.new_data.length:0}).duration(a.transitions.duration()/a.new_data.length).attrTween("d",function(t){var e=d3.interpolate(t.startAngle,t.endAngle);return function(n){return t.endAngle=e(n),a.arc(t)}}),a.chart_data.exit().remove(),this},label:function(){function e(){a.chart_text.style({"font-weight":a.label_weight,"font-size":a.label_size+"px","font-family":a.label_family}).text(function(t){return(100*t.data.weight/a.sum).toFixed(1)+"%"}).attr({"text-anchor":"middle","pointer-events":"none",dy:5,fill:function(e){if("shade"===a.color_mode&&!t.label_color){var n=a.k.__proto__._colourBrightness(e.data.color);return"light"===n?"black":"white"}return a.label_color}}).text(function(t,e){return"pie"===n.toLowerCase()||"election pie"===n.toLowerCase()?this.getBBox().width<(t.endAngle-t.startAngle)*(a.outer_radius/2)?(100*t.data.weight/a.sum).toFixed(1)+"%":"":this.getBBox().width<Math.abs(t.endAngle-t.startAngle)*a.outer_radius*.9&&this.getBBox().height<.75*(a.outer_radius-a.inner_radius)?(100*t.data.weight/a.sum).toFixed(1)+"%":""}),a.chart_text.exit().remove()}return a.chart_text=a.group.selectAll("text").data(a.pie(a.new_data)),a.chart_text.enter().append("text").attr({"class":"pie-label",transform:function(t){return"translate("+a.arc.centroid(t)+")"}}),a.chart_text.attr("transform",function(t){return"translate("+a.arc.centroid(t)+")"}),a.chart_text.text(""),setTimeout(e,a.transitions.duration()),this},clubData:function(){if(PykCharts["boolean"](a.clubdata_enable)){var t=[];if(0!==a.clubdata_always_include_data_points.length){var e=a.clubdata_always_include_data_points.length;for(i=0;i<e;i++)t[i]=a.clubdata_always_include_data_points[i]}var n=[];for(i=0;i<t.length;i++)for(j=0;j<a.data.length;j++)t[i].toUpperCase()===a.data[j].name.toUpperCase()&&n.push(a.data[j]);a.data.sort(function(t,e){return e.weight-t.weight});for(var r=0;n.length<a.clubdata_maximum_nodes-1;){for(i=0;i<t.length;i++)a.data[r].name.toUpperCase()===t[i].toUpperCase()&&r++;n.push(a.data[r]),r++}var o=0;for(j=r;j<a.data.length;j++){for(i=0;i<n.length&&j<a.data.length;i++)a.data[j].name.toUpperCase()===n[i].name.toUpperCase()&&(o+=0,j++,i=-1);j<a.data.length&&(o+=a.data[j].weight)}for(var s=function(t,e){return e.weight-t.weight};n.length>a.clubdata_maximum_nodes;)n.sort(s),n.pop();var l={name:a.clubdata_text,weight:o,tooltip:a.clubdata_tooltip};n.sort(function(t,e){return e.weight-t.weight}),n.length<a.clubdata_maximum_nodes&&n.push(l),a.new_data=n}else a.data.sort(function(t,e){return e.weight-t.weight}),a.new_data=a.data;return a.new_data},ticks:function(){function t(){r.text(function(t){return t.data.name}).text(function(t,e){return a.ticks_text_width[e]=this.getBBox().width,a.ticks_text_height=this.getBBox().height,t.data.name}).attr({"text-anchor":function(t){var e=(t.endAngle-t.startAngle)/2+t.startAngle;return e>0&&2>e?"start":e>=1.5&&3.5>e?"middle":e>=3.5&&6>e?"end":e>=6?"middle":"election pie"===n||"election donut"===n&&-1>e?"end":0>e?"middle":void 0},dy:5,"pointer-events":"none"}).style({fill:a.pointer_color,"font-size":a.pointer_size+"px","font-weight":a.pointer_weight,"font-family":a.pointer_family}),r.exit().remove()}function e(){s.attr({x2:function(t,e){return 1*(a.outer_radius/1+12)*Math.cos((t.startAngle+t.endAngle)/2)},y2:function(t,e){return 1*(a.outer_radius/1+12)*Math.sin((t.startAngle+t.endAngle)/2)},transform:"rotate(-90)","stroke-width":a.pointer_thickness+"px",stroke:a.pointer_color}),s.exit().remove()}PykCharts["boolean"](a.pointer_overflow_enable)&&a.svgContainer.style("overflow","visible"),a.ticks_text_width=[];var r=a.group.selectAll(".ticks_label").data(a.pie(a.new_data));r.attr("class","ticks_label"),r.enter().append("text").attr({x:0,y:0});var i,o;r.attr("transform",function(t){return t.endAngle-t.startAngle<.2?(i=1*(a.outer_radius+30)*Math.cos((t.startAngle+t.endAngle-Math.PI)/2),o=1*(a.outer_radius/1+20)*Math.sin((t.startAngle+t.endAngle-Math.PI)/2)):(i=1*(a.outer_radius+22)*Math.cos((t.startAngle+t.endAngle-Math.PI)/2),o=1*(a.outer_radius/1+24)*Math.sin((t.startAngle+t.endAngle-Math.PI)/2)),"translate("+i+","+o+")"}),r.text(""),setTimeout(t,a.transitions.duration());var s=a.group.selectAll("line").data(a.pie(a.new_data));return s.enter().append("line").attr("class","ticks"),s.attr({x1:function(t,e){return 1*a.outer_radius*Math.cos((t.startAngle+t.endAngle)/2)},y1:function(t,e){return 1*a.outer_radius*Math.sin((t.endAngle+t.startAngle)/2)},x2:function(t,e){return 1*a.outer_radius*Math.cos((t.startAngle+t.endAngle)/2)},y2:function(t,e){return 1*a.outer_radius*Math.sin((t.endAngle+t.startAngle)/2)}}),setTimeout(e,a.transitions.duration()),this},centerLabel:function(){function t(){r.text(function(t){return a.k.appendUnits(a.sum)}).text(function(t){return e=this.getBBox().height,a.k.appendUnits(a.sum)}).attr({"pointer-events":"none","text-anchor":"middle",y:function(){return"donut"===n?e/2:-.25*a.inner_radius},fill:a.show_total_at_center_color}).style({"font-family":a.show_total_at_center_family,"font-weight":a.show_total_at_center_weight,"font-size":a.show_total_at_center_size+"px"})}if(PykCharts["boolean"](a.show_total_at_center)&&("donut"===n||"election donut"===n)){var e,r=a.group.selectAll(a.selector+" .centerLabel").data([a.sum]);r.enter().append("text"),r.attr("class","centerLabel").text(""),setTimeout(t,a.transitions.duration()),r.exit().remove()}return this},set_start_end_angle:function(){return a.startAngle,a.endAngle,"pie"===n||"donut"===n?(a.start_angle=0*(Math.PI/180),a.end_angle=360*(Math.PI/180)):("election pie"===n||"election donut"===n)&&(a.start_angle=-90*(Math.PI/180),a.end_angle=90*(Math.PI/180)),this}};return e}},PykCharts.oneD.pyramid=function(t){var e=this;e.interval="",new PykCharts.Configuration.Theme({}),this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),e.chart_height=t.chart_height?t.chart_height:e.chart_width,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width),e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("oned",t),e.data_length=e.data.length,e.compare_data=e.k.__proto__._groupBy("oned",t),e.k.remove_loading_bar(a),e.clubdata_enable=e.data_length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.data_length=e.data.length,e.clubdata_enable=e.data_length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.new_data=e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),shade_array.reverse(),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().createChart().label().ticks()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=e.selector.substring(1,e.selector.length),n=t+"_svg";e.fillChart=new PykCharts.Configuration.fillChart(e),e.transitions=new PykCharts.Configuration.transition(e),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+n,"pyramid").emptyDiv(e.selector).subtitle(),e.new_data=e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),shade_array.reverse(),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().svgContainer(n).createChart().label().ticks(),e.k.createFooter().lastUpdatedAt().credits().dataSource().tooltip().liveData(e),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e)):"infographics"===e.mode&&(e.new_data=e.data,"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.length),shade_array.reverse(),e.new_data.forEach(function(t,e){t.color=shade_array[e]})),e.k.backgroundColor(e)["export"](e,"#"+n,"pyramid").emptyDiv(e.selector),e.optionalFeatures().svgContainer(n).createChart().label().ticks(),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e));var a=0;setTimeout(function(){e.ticks_text_width.length&&(a=d3.max(e.ticks_text_width,function(t){return t})),e.k.exportSVG(e,"#"+n,"pyramid",void 0,void 0,a)},e.transitions.duration());var r=e.k.resize(e.svgContainer);e.k.__proto__._ready(r),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.percentageValues=function(t){e.sum=d3.sum(t,function(t){return t.weight});var n=t.map(function(t){return t.weight/e.sum*100});return n.sort(function(t,e){return e-t}),n},this.pyramidLayout=function(){var t,n,a={data:function(e){return 0!==e.length&&(t=e),this},size:function(t){return 2===t.length&&(n=t),this},coordinates:function(a){function r(t){return d3.sum(l,function(e,n){return n>=t?e:void 0})}for(var i=n[0],o=n[1],s=i/2/o,l=e.percentageValues(t),c=[],u=i*o/2,h=0,d=t.length;d>h;h++){var p=r(h),f=p/100*u,_=Math.sqrt(f/s),g=2*s*_,m=(i-g)/2;0===h?c[h]={values:[{x:i/2,y:0},{x:m,y:_},{x:g+m,y:_}]}:c[h]={values:[c[h-1].values[1],{x:m,y:_},{x:g+m,y:_},c[h-1].values[2]]}}return c}};return a},this.optionalFeatures=function(){var n={svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg").attr({width:e.chart_width,height:e.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,id:t,"class":"svgcontainer PykCharts-oneD"}),e.group=e.svgContainer.append("g").attr("id","pyrgrp"),this},createChart:function(){var t=new PykCharts.Configuration.border(e);e.pyramid=e.pyramidLayout().data(e.new_data).size([e.chart_width,e.chart_height]),e.coordinates=e.pyramid.coordinates(),e.coordinates[0].values[1]=e.coordinates[e.coordinates.length-1].values[1],e.coordinates[0].values[2]=e.coordinates[e.coordinates.length-1].values[2];for(var n=e.new_data.length-1,a=(e.new_data.length-1,[]),r=0,i=e.new_data.length;i>r;r++)0==r?a[r]=e.new_data[r].tooltip||"<table class='PykCharts'><tr><th colspan='2'  class='tooltip-heading'>"+e.new_data[r].name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(e.new_data[r].weight)+"<td class='tooltip-right-content'>("+(100*e.new_data[r].weight/e.sum).toFixed(1)+"%) </tr></table>":(a[r]=e.new_data[n].tooltip||"<table class='PykCharts'><tr><th colspan='2'  class='tooltip-heading'>"+e.new_data[n].name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(e.new_data[n].weight)+"<td class='tooltip-right-content'>("+(100*e.new_data[n].weight/e.sum).toFixed(1)+"%) </tr></table>",n--);var o,s=d3.svg.line().interpolate("linear-closed").x(function(t,e){return t.x}).y(function(t,e){return t.y}),l=[{x:0,y:e.chart_height},{x:e.chart_width,y:e.chart_height},{x:0,y:e.chart_height},{x:e.chart_width,y:e.chart_height},{x:0,y:e.chart_height},{x:e.chart_width,y:e.chart_height}],n=e.new_data.length;return e.chart_data=e.group.selectAll(".pyr-path").data(e.coordinates),e.chart_data.enter().append("path"),e.chart_data.attr({"class":"pyr-path",d:function(t){return s(l)},stroke:t.color(),"stroke-width":t.width(),"stroke-dasharray":t.style(),fill:function(t,a){return 0===a?(o=e.new_data[a],t.color=e.new_data[a].color):(n--,o=e.new_data[n],t.color=e.new_data[n].color),e.fillChart.selectColor(o)},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,n){return e.new_data[n].name}}).on({mouseover:function(t,n){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .pyr-path",this),e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(a[n]))},mouseout:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .pyr-path"),e.mouseEvent.tooltipHide(t))},mousemove:function(t,n){"default"===e.mode&&e.mouseEvent.tooltipPosition(t)},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(e.new_data[n].name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("d",function(t){return s(t.values)}),e.chart_data.exit().remove(),this},label:function(){function n(){e.chart_text.text(function(t,n){return 0===n?(100*e.new_data[n].weight/e.sum).toFixed(1)+"%":(a--,(100*e.new_data[a].weight/e.sum).toFixed(1)+"%")}).text(function(t,n){return this.getBBox().width<t.values[2].x-t.values[1].x&&this.getBBox().height<Math.abs(t.values[1].y-t.values[0].y)?0===n?(100*e.new_data[n].weight/e.sum).toFixed(1)+"%":(r--,(100*e.new_data[r].weight/e.sum).toFixed(1)+"%"):""})}var a=e.new_data.length,r=e.new_data.length;return e.chart_text=e.group.selectAll("text").data(e.coordinates),e.chart_text.enter().append("text"),e.chart_text.attr({"text-anchor":"middle","pointer-events":"none",fill:function(n){if("shade"===e.color_mode&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color},y:function(t,n){return 4===t.values.length?(t.values[0].y-t.values[1].y)/2+t.values[1].y+5:(t.values[0].y+e.coordinates[e.coordinates.length-1].values[1].y)/2+10},x:function(t,n){return e.chart_width/2}}).text("").style({"font-weight":e.label_weight,"font-size":e.label_size+"px","font-family":e.label_family}),setTimeout(n,e.transitions.duration()),e.chart_text.exit().remove(),this},ticks:function(){function t(){a.text(function(t,n){return 0===n?e.new_data[n].name:(l--,e.new_data[l].name)}).text(function(t,n){return 0===n?(o[n]=this.getBBox().height,e.ticks_text_width[n]=this.getBBox().width,this.getBBox().height<t.values[1].y-t.values[0].y?e.new_data[n].name:""):(o[n]=this.getBBox().height,this.getBBox().height<t.values[0].y-t.values[1].y?(s--,e.new_data[s].name):"")}).style({fill:e.pointer_color,"font-size":e.pointer_size+"px","font-family":e.pointer_family,"font-weight":e.pointer_weight}).attr("text-anchor","start")}function n(){c.attr("x2",function(t,n){return Math.abs(t.values[0].y-t.values[1].y)>o[n]?3===t.values.length?(t.values[0].x+e.coordinates[e.coordinates.length-1].values[2].x)/2+12:(t.values[2].x+t.values[3].x)/2+12:3===t.values.length?(t.values[0].x+e.coordinates[e.coordinates.length-1].values[2].x)/2:(t.values[2].x+t.values[3].x)/2})}PykCharts["boolean"](e.pointer_overflow_enable)&&e.svgContainer.style("overflow","visible");var a=e.group.selectAll(".ticks_label").data(e.coordinates);a.enter().append("text").attr({x:0,y:0,"class":"ticks_label"});var r,i,o=[];e.ticks_text_width=[];var s=e.new_data.length,l=e.new_data.length;a.attr("transform",function(t){return r=3===t.values.length?(t.values[0].x+e.coordinates[e.coordinates.length-1].values[2].x)/2+17:(t.values[2].x+t.values[3].x)/2+17,i=4===t.values.length?(t.values[0].y-t.values[1].y)/2+t.values[1].y+2:(t.values[0].y+e.coordinates[e.coordinates.length-1].values[1].y)/2,"translate("+r+","+(i+5)+")"}),a.text(""),setTimeout(t,e.transitions.duration()),a.exit().remove();var c=e.group.selectAll(".pyr-ticks").data(e.coordinates);return c.enter().append("line").attr("class","pyr-ticks"),c.attr({x1:function(t,n){return 3===t.values.length?(t.values[0].x+e.coordinates[e.coordinates.length-1].values[2].x)/2:(t.values[2].x+t.values[3].x)/2},y1:function(t,n){return 4===t.values.length?(t.values[0].y-t.values[1].y)/2+t.values[1].y+2:(t.values[0].y+e.coordinates[e.coordinates.length-1].values[1].y)/2},x2:function(t,n){return 3===t.values.length?(t.values[0].x+e.coordinates[e.coordinates.length-1].values[2].x)/2:(t.values[2].x+t.values[3].x)/2},y2:function(t,n){return 4===t.values.length?(t.values[0].y-t.values[1].y)/2+t.values[1].y+2:(t.values[0].y+e.coordinates[e.coordinates.length-1].values[1].y)/2},"stroke-width":e.pointer_thickness+"px",stroke:e.pointer_color}),setTimeout(n,e.transitions.duration()),c.exit().remove(),this},clubData:function(){if(PykCharts["boolean"](e.clubdata_enable)){var t=[];if(0!==e.clubdata_always_include_data_points.length){var n=e.clubdata_always_include_data_points.length;for(i=0;i<n;i++)t[i]=e.clubdata_always_include_data_points[i]}var a=[];for(i=0;i<t.length;i++)for(j=0;j<e.data.length;j++)t[i].toUpperCase()===e.data[j].name.toUpperCase()&&a.push(e.data[j]);e.data.sort(function(t,e){return e.weight-t.weight});for(var r=0;a.length<e.clubdata_maximum_nodes-1;){for(i=0;i<t.length;i++)e.data[r].name.toUpperCase()===t[i].toUpperCase()&&r++;a.push(e.data[r]),r++}var o=0;for(j=r;j<e.data.length;j++){for(i=0;i<a.length&&j<e.data.length;i++)e.data[j].name.toUpperCase()===a[i].name.toUpperCase()&&(o+=0,j++,i=-1);j<e.data.length&&(o+=e.data[j].weight)}for(var s=function(t,e){return e.weight-t.weight};a.length>e.clubdata_maximum_nodes;)a.sort(s),a.pop();var l={name:e.clubdata_text,weight:o,tooltip:e.clubdata_tooltip};a.sort(function(t,e){return t.weight-e.weight}),a.length<e.clubdata_maximum_nodes&&a.push(l),e.new_data=a}else e.data.sort(function(t,e){return t.weight-e.weight}),e.new_data=e.data;return e.new_data}};return n}},PykCharts.oneD.treemap=function(t){var e=this;e.interval="",new PykCharts.Configuration.Theme({}),this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"oneDimensionalCharts"),optional=t.optional,e.chart_height=t.chart_height?t.chart_height:e.chart_width,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width),e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("oned",t),e.compare_data=e.k.__proto__._groupBy("oned",t),e.k.remove_loading_bar(a),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("oned",t),e.clubdata_enable=e.data.length>e.clubdata_maximum_nodes?e.clubdata_enable:"no",e.refresh_data=e.k.__proto__._groupBy("oned",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.children.length),e.new_data.children.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().createChart().label()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=e.selector.substring(1,e.selector.length),n=t+"_svg";e.fillChart=new PykCharts.Configuration.fillChart(e),e.transitions=new PykCharts.Configuration.transition(e),"default"===e.mode&&e.k.title().backgroundColor(e)["export"](e,"#"+n,"treemap").emptyDiv(e.selector).subtitle(),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+n,"treemap").emptyDiv(e.selector),e.new_data={children:e.data}),"default"===e.mode&&e.optionalFeatures().clubData(),"shade"===e.color_mode&&(shade_array=e.k.shadeColorConversion(e.shade_color,e.new_data.children.length),e.new_data.children.forEach(function(t,e){t.color=shade_array[e]})),e.optionalFeatures().svgContainer(n).createChart().label(),"default"===e.mode&&e.k.liveData(e).createFooter().lastUpdatedAt().credits().dataSource(),e.k.exportSVG(e,"#"+n,"treemap");var a=e.k.resize(e.svgContainer);e.k.__proto__._ready(a),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.optionalFeatures=function(){var n={svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg:svg").attr({width:e.chart_width,height:e.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height,id:t,"class":"svgcontainer PykCharts-oneD"}),e.group=e.svgContainer.append("g").attr("id","treemap"),this},createChart:function(){e.treemap=d3.layout.treemap().sort(function(t,e){return t.weight-e.weight}).size([e.chart_width,e.chart_height]).value(function(t){return t.weight}).sticky(!1),e.sum=d3.sum(e.new_data.children,function(t){return t.weight});var t;return e.node=e.treemap.nodes(e.new_data),t=e.new_data.children.length,e.chart_data=e.group.selectAll(".cell").data(e.node),e.chart_data.enter().append("svg:g").attr("class","cell").append("svg:rect").attr("class","treemap-rect"),e.chart_data.attr("class","cell").select("rect").attr({"class":"treemap-rect",id:function(t,e){return"rect"+e},x:function(t){return t.x},y:function(t){return t.y},width:function(t){return t.dx-1},height:0,fill:function(t){return t.children?"white":e.fillChart.selectColor(t)},"fill-opacity":1,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,e){return t.name}}).on({mouseover:function(t){t.children||"default"!==e.mode||(t.tooltip=t.tooltip||"<table class='PykCharts'><tr><th colspan='2' class='tooltip-heading'>"+t.name+"</tr><tr><td class='tooltip-left-content'>"+e.k.appendUnits(t.weight)+"<td class='tooltip-right-content'>("+(100*t.weight/e.sum).toFixed(1)+"%)</tr></table>",PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .treemap-rect",this),e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip))},mouseout:function(t){"default"===e.mode&&(e.mouseEvent.tooltipHide(t),PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .treemap-rect"))},mousemove:function(t){t.children||"default"!==e.mode||e.mouseEvent.tooltipPosition(t)},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("height",function(t){return t.dy-1}),e.chart_data.exit().remove(),this},label:function(){function n(){e.chart_text.text(function(t){return t.children?" ":t.name}).attr("pointer-events","none").text(function(t){return this.getBBox().width<t.dx&&this.getBBox().height<t.dy-15?t.children?" ":t.name:""})}function a(){e.chart_text1.text(function(t){return t.children?" ":e.k.appendUnits(t.weight)}).text(function(t){return this.getBBox().width<t.dx&&this.getBBox().height<t.dy-15?t.children?" ":(100*t.weight/e.sum).toFixed(1)+"%":""})}return e.chart_text=e.group.selectAll(".name").data(e.node),e.chart_text1=e.group.selectAll(".weight").data(e.node),e.chart_text.enter().append("svg:text").attr("class","name"),e.chart_text1.enter().append("svg:text").attr("class","weight"),e.chart_text.attr({"class":"name",x:function(t){return t.x+t.dx/2},y:function(t){return t.y+t.dy/2}}),e.chart_text1.attr({"class":"weight",x:function(t){return t.x+t.dx/2},y:function(t){return t.y+t.dy/2+e.label_size}}),e.chart_text.attr({"text-anchor":"middle",fill:function(n){if("shade"===e.color_mode&&!n.children&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color}}).style({"font-weight":e.label_weight,"font-size":e.label_size+"px","font-family":e.label_family}).text(""),setTimeout(n,e.transitions.duration()),e.chart_text1.attr({"text-anchor":"middle",fill:function(n){if("shade"===e.color_mode&&!n.children&&!t.label_color){var a=e.k.__proto__._colourBrightness(n.color);return"light"===a?"black":"white"}return e.label_color},"pointer-events":"none"}).style({"font-weight":e.label_weight,"font-size":e.label_size+"px","font-family":e.label_family}).text(""),setTimeout(a,e.transitions.duration()),e.chart_text.exit().remove(),e.chart_text1.exit().remove(),this},clubData:function(){if(PykCharts["boolean"](e.clubdata_enable)){var t=[],n=0,a=0;if(e.data.length<=e.clubdata_maximum_nodes)return e.new_data={children:e.data},this;if(0!==e.clubdata_always_include_data_points.length){var r=e.clubdata_always_include_data_points.length;for(i=0;i<r;i++)t[i]=e.clubdata_always_include_data_points[i]}var o=[];for(i=0;i<t.length;i++)for(j=0;j<e.data.length;j++)t[i].toUpperCase()===e.data[j].name.toUpperCase()&&o.push(e.data[j]);for(e.data.sort(function(t,e){return e.weight-t.weight});o.length<e.clubdata_maximum_nodes-1;){for(i=0;i<t.length;i++)e.data[a].name.toUpperCase()===t[i].toUpperCase()&&a++;o.push(e.data[a]),a++}for(j=a;j<e.data.length;j++){for(i=0;i<o.length&&j<e.data.length;i++)e.data[j].name.toUpperCase()===o[i].name.toUpperCase()&&(n+=0,j++,i=-1);j<e.data.length&&(n+=e.data[j].weight)}for(var s=function(t,e){return e.weight-t.weight};o.length>e.clubdata_maximum_nodes;)o.sort(s),o.pop();var l={name:e.clubdata_text,weight:n,color:e.clubData_color,tooltip:e.clubData_tooltip};o.length<e.clubdata_maximum_nodes&&o.push(l),e.new_data={children:o}}else e.new_data={children:e.data};return this}};return n}},PykCharts.other.pictograph=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(){e=new PykCharts.validation.processInputs(e,t,"other");var a=(t.optional,n.otherCharts);e.pictograph_show_all_images=t.pictograph_show_all_images?t.pictograph_show_all_images.toLowerCase():a.pictograph_show_all_images,
e.pictograph_total_count_enable=t.pictograph_total_count_enable?t.pictograph_total_count_enable.toLowerCase():a.pictograph_total_count_enable,e.pictograph_current_count_enable=t.pictograph_current_count_enable?t.pictograph_current_count_enable.toLowerCase():a.pictograph_current_count_enable,e.pictograph_image_per_line=t.pictograph_image_per_line?t.pictograph_image_per_line:a.pictograph_image_per_line,e.pictograph_current_count_size=t.pictograph_current_count_size?t.pictograph_current_count_size:a.pictograph_current_count_size,e.pictograph_current_count_color=t.pictograph_current_count_color?t.pictograph_current_count_color:a.pictograph_current_count_color,e.pictograph_current_count_weight=t.pictograph_current_count_weight?t.pictograph_current_count_weight.toLowerCase():a.pictograph_current_count_weight,e.pictograph_current_count_family=t.pictograph_current_count_family?t.pictograph_current_count_family.toLowerCase():a.pictograph_current_count_family,e.pictograph_total_count_size=t.pictograph_total_count_size?t.pictograph_total_count_size:a.pictograph_total_count_size,e.pictograph_total_count_color=t.pictograph_total_count_color?t.pictograph_total_count_color:a.pictograph_total_count_color,e.pictograph_total_count_weight=t.pictograph_total_count_weight?t.pictograph_total_count_weight.toLowerCase():a.pictograph_total_count_weight,e.pictograph_total_count_family=t.pictograph_total_count_family?t.pictograph_total_count_family.toLowerCase():a.pictograph_total_count_family,e.pictograph_image_width=t.pictograph_image_width?t.pictograph_image_width:a.pictograph_image_width,e.pictograph_image_height=t.pictograph_image_height?t.pictograph_image_height:a.pictograph_image_height,e.pictograph_units_per_image=t.pictograph_units_per_image?t.pictograph_units_per_image:"",e.pictograph_units_per_image_text_family=t.pictograph_units_per_image_text_family?t.pictograph_units_per_image_text_family.toLowerCase():a.pictograph_units_per_image_text_family,e.pictograph_units_per_image_text_size=t.pictograph_units_per_image_text_size?t.pictograph_units_per_image_text_size:a.pictograph_units_per_image_text_size,e.pictograph_units_per_image_text_color=t.pictograph_units_per_image_text_color?t.pictograph_units_per_image_text_color:a.pictograph_units_per_image_text_color,e.pictograph_units_per_image_text_weight=t.pictograph_units_per_image_text_weight?t.pictograph_units_per_image_text_weight.toLowerCase():a.pictograph_units_per_image_text_weight,e.chart_height=t.chart_height?t.chart_height:e.chart_width,e.k.validator().validatingDataType(e.chart_height,"chart_height",e.chart_width).validatingDataType(e.pictograph_units_per_image_text_size,"pictograph_units_per_image_text_size",a.pictograph_units_per_image_text_size).validatingDataType(e.pictograph_current_count_size,"pictograph_current_count_size",a.pictograph_current_count_size).validatingDataType(e.pictograph_total_count_size,"pictograph_total_count_size",a.pictograph_total_count_size).validatingDataType(e.pictograph_image_width,"pictograph_image_width",a.pictograph_image_width).validatingDataType(e.pictograph_image_height,"pictograph_image_height",a.pictograph_image_height).validatingDataType(e.pictograph_image_per_line,"pictograph_image_per_line",a.pictograph_image_per_line).validatingFontWeight(e.pictograph_current_count_weight,"pictograph_current_count_weight",a.pictograph_current_count_weight).validatingFontWeight(e.pictograph_total_count_weight,"pictograph_total_count_weight",a.pictograph_total_count_weight).validatingFontWeight(e.pictograph_units_per_image_text_weight,"pictograph_units_per_image_text_weight",a.pictograph_units_per_image_text_weight).validatingColor(e.pictograph_current_count_color,"pictograph_current_count_color",a.pictograph_current_count_color).validatingColor(e.pictograph_total_count_color,"pictograph_total_count_color",a.pictograph_total_count_color).validatingColor(e.pictograph_units_per_image_text_color,"pictograph_units_per_image_text_color",a.pictograph_units_per_image_text_color),e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=t.sort(function(t,e){return e.weight-t.weight}),e.old_weight=0,e.compare_data=e.data,e.k.remove_loading_bar(a),void e.render())},e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.refresh=function(){e.executeRefresh=function(t){e.old_data=e.data,e.old_weight=e.weight;var n=e.k.validator().validatingJSON(t);if(!e.stop&&n!==!1){e.data=t.sort(function(t,e){return e.weight-t.weight}),e.refresh_data=e.data;var a=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=a[0];var r=a[1];r&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().labelText().enableLabel().createChart()}},e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){var t=e.selector.substring(1,e.selector.length),n=t+"_svg";e.transitions=new PykCharts.Configuration.transition(e),"default"===e.mode?e.k.title().backgroundColor(e)["export"](e,"#"+n,"pictograph").emptyDiv().subtitle().liveData(e):e.k.backgroundColor(e)["export"](e,"#"+n,"pictograph").emptyDiv(),e.optionalFeatures().svgContainer(n).labelText().enableLabel(),PykCharts["boolean"](e.pictograph_units_per_image)&&e.optionalFeatures().appendUnits(),e.optionalFeatures().createChart(),"default"===e.mode&&e.k.createFooter().lastUpdatedAt().credits().dataSource(),e.k.exportSVG(e,"#"+n,"pictograph");var a=e.k.resize(e.svgContainer);e.k.__proto__._ready(a),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.optionalFeatures=function(){var t={svgContainer:function(t){return e.svgContainer=d3.select(e.selector).append("svg").attr({width:e.chart_width,id:t,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height}),e.group=e.svgContainer.append("g").attr("id","pictograph_image_group"),e.group1=e.svgContainer.append("g").attr("transform","translate(0,0)"),PykCharts["boolean"](e.pictograph_units_per_image)&&(e.group2=e.svgContainer.append("g").attr("id","units-per-image")),this},createChart:function(){var t=0,n=0;e.optionalFeatures().showTotal();var a=0;e.textWidth||(e.textWidth=0),e.totalTxtWeight||(e.totalTxtWeight=0);var r=e.textWidth+e.totalTxtWeight+25;e.total_unit_width>r&&(r=e.total_unit_width+10),e.group.attr("transform","translate("+r+",0)");for(var i=1;i<=e.weight;i++){i<=e.data[1].weight?(!e.old_data||e.old_data&&i>e.old_data[1].weight)&&(e.group.append("image").attr({"xlink:href":e.data[1].image,id:"current_image"+i,x:n*(e.pictograph_image_width+1),y:t*(e.pictograph_image_height+10),width:0,height:e.pictograph_image_height+"px"}).transition().duration(e.transitions.duration()).attr("width",e.pictograph_image_width+"px"),setTimeout(function(){var t=d3.selectAll("#total_image"+i);t&&t.remove()},e.transitions.duration())):(i>e.old_weight&&e.weight>e.old_weight||e.old_data&&i<=e.old_data[1].weight)&&e.group.append("image").attr({"xlink:href":e.data[0].image,id:"total_image"+i,x:n*(e.pictograph_image_width+1),y:t*(e.pictograph_image_height+10),width:0,height:e.pictograph_image_height+"px"}).transition().duration(e.transitions.duration()).attr("width",e.pictograph_image_width+"px"),a++,n++,a>=e.pictograph_image_per_line&&(t++,n=0,a=0);var o=e.group.node().getBBox().height;i===+e.weight&&0!=o?(e.chart_height=o,e.svgContainer.attr({height:o,viewBox:"0 0 "+e.chart_width+" "+o})):e.svgContainer.attr({height:o,viewBox:"0 0 "+e.chart_width+" "+e.chart_height})}return setTimeout(function(){if(e.old_data&&e.old_data[1].weight>e.data[1].weight)for(var t=e.old_data[1].weight;t>e.data[1].weight;t--){var n=d3.selectAll("#current_image"+t);n&&n.remove()}if(e.old_data&&e.old_data[0].weight>e.data[0].weight)for(var t=e.old_data[0].weight;t>e.data[0].weight;t--){var a=d3.selectAll("#total_image"+t);a&&a.remove()}},e.transitions.duration()),e.pictograph_image_width*e.pictograph_image_per_line+r>e.chart_width&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px","Your Lable text size and image width exceeds the chart conatiner width"),this},showTotal:function(){return PykCharts["boolean"](e.pictograph_show_all_images)?e.weight=e.data[0].weight:e.weight=e.data[1].weight,this},enableLabel:function(){if(PykCharts["boolean"](e.pictograph_total_count_enable)){var t=d3.selectAll(e.selector+" .PykCharts-current-text");t.length>0&&t.remove(),e.textWidth||(e.textWidth=0),e.data[0].weight/e.pictograph_image_per_line,e.group1.append("text").attr({"class":"PykCharts-current-text","font-family":e.pictograph_total_count_family,"font-size":e.pictograph_total_count_size,"font-weight":e.pictograph_total_count_weight,fill:e.pictograph_total_count_color}).text("/"+e.data[0].weight).text(function(){return e.textHeight=this.getBBox().height,e.totalTxtWeight=this.getBBox().width,"/"+e.data[0].weight}).attr({x:e.textWidth+5,y:function(){return e.textHeight-10}})}return this},labelText:function(){if(PykCharts["boolean"](e.pictograph_current_count_enable)){var t=d3.selectAll(e.selector+" .PykCharts-total-text");t.length>0&&t.remove(),e.data[0].weight/e.pictograph_image_per_line,e.group1.append("text").attr({x:0,"class":"PykCharts-total-text","font-family":e.pictograph_current_count_family,"font-size":e.pictograph_current_count_size,"font-weight":e.pictograph_current_count_weight,fill:e.pictograph_current_count_color}).text(e.data[1].weight).text(function(){return e.textHeight=this.getBBox().height,e.textWidth=this.getBBox().width,e.data[1].weight}).attr("y",function(){return e.textHeight-10})}return this},appendUnits:function(){e.textHeight||(e.textHeight=0);var t,n,a,r;return e.group2.attr("transform","translate(0,"+(e.textHeight+15)+")"),e.group2.append("text").attr({x:0,"class":"PykCharts-unit-text","font-family":e.pictograph_units_per_image_text_family,"font-size":e.pictograph_units_per_image_text_size,"font-weight":e.pictograph_units_per_image_text_weight,fill:e.pictograph_units_per_image_text_color}).text(function(){return"1 "}).text(function(){return r=this.getBBox().height,t=this.getBBox().width,"1 "}).attr({dy:0,y:r-5}),e.group2.append("image").attr({"xlink:href":e.data[1].image,id:"unit-image",x:t+2+"px",y:0,height:r+"px",width:r+"px"}),n=d3.select(e.selector+" #unit-image").attr("width"),e.group2.append("text").attr({x:function(){return parseFloat(n)+t+4},"class":"PykCharts-unit-text","font-family":e.pictograph_units_per_image_text_family,"font-size":e.pictograph_units_per_image_text_size,"font-weight":e.pictograph_units_per_image_text_weight,fill:e.pictograph_units_per_image_text_color}).text(function(){return"= "+e.pictograph_units_per_image}).text(function(){return a=this.getBBox().width,"= "+e.pictograph_units_per_image}).attr("y",function(){return r-5}),e.total_unit_width=t+parseFloat(n)+a+4,this}};return t}},PykCharts.multiD={};var theme=new PykCharts.Configuration.Theme({});PykCharts.multiD.configuration=function(t){var e=(new PykCharts.Configuration.fillChart(t),{opacity:function(e,n,a){if(PykCharts["boolean"](t.variable_circle_size_enable))return.8;var r=d3.scale.linear().domain(d3.extent(a,function(t){return t.weight})).range([.3,1]);return r(e?e:Math.min.apply(null,n))},legendsPosition:function(t,e,n,a,r){var i,o=0,s=0;if("vertical"===t.legends_display){t.legendsGroup.attr("height",30*n.length+20),t.legendsGroup_height=0,text_parameter1="x",text_parameter2="y",rect_parameter1="width",rect_parameter2="height",rect_parameter3="x",rect_parameter4="y",rect_parameter1value=13,rect_parameter2value=13,u=function(t,e){return 36},h=function(t,e){return 20};var l=function(t,e){return 24*e+12},c=function(t,e){return 24*e+23}}else if("horizontal"===t.legends_display){t.legendsGroup_height=50,temp_i=o,final_rect_x=0,final_text_x=0,legend_text_widths=[],sum_text_widths=0,temp_text=temp_rect=0,text_parameter1="x",text_parameter2="y",rect_parameter1="width",rect_parameter2="height",rect_parameter3="x",rect_parameter4="y";var u=function(t,e){return legend_text_widths[e]=this.getBBox().width,legend_start_x=16,final_text_x=0===e?legend_start_x:legend_start_x+temp_text,temp_text=temp_text+legend_text_widths[e]+30,final_text_x};c=30,rect_parameter1value=13,rect_parameter2value=13;var h=function(t,e){return final_rect_x=0===e?0:temp_rect,temp_rect=temp_rect+legend_text_widths[e]+30,final_rect_x};l=18}if("scatter"===e)if("yes"===t.panels_enable){var d=[];d.push(t.map_group_data[0][r]),i=t.legendsGroup.selectAll("rect").data(d),t.legends_text=t.legendsGroup.selectAll(".legends_text").data(d)}else i=t.legendsGroup.selectAll("rect").data(t.map_group_data[0]),t.legends_text=t.legendsGroup.selectAll(".legends_text").data(t.map_group_data[0]);else i=t.legendsGroup.selectAll(".legends-rect").data(n),t.legends_text=t.legendsGroup.selectAll(".legends_text").data(n);t.legends_text.enter().append("text"),t.legends_text.attr("class","legends_text").attr("pointer-events","none").text(function(t){switch(e){case"groupColumn":case"groupBar":return t;case"spiderWeb":case"scatter":return t.group;case"stackedArea":return t.name}}).attr("fill",t.legends_text_color).attr("font-family",t.legends_text_family).style("font-size",t.legends_text_size+"px").attr("font-weight",t.legends_text_weight).attr(text_parameter1,u).attr(text_parameter2,c),i.enter().append("rect"),i.attr("class","legends-rect").attr(rect_parameter1,rect_parameter1value).attr(rect_parameter2,rect_parameter2value).attr(rect_parameter3,h).attr(rect_parameter4,l).attr("fill",function(n,r){switch(e){case"groupColumn":case"groupBar":return"color"===t.color_mode?a[r]:t.saturation_color;case"spiderWeb":case"scatter":return t.fillChart.colorPieW(n);case"stackedArea":return t.fillColor.colorPieMS(n,t.type)}}).attr("fill-opacity",function(n,a){switch(e){case"groupColumn":case"groupBar":if("saturation"===t.color_mode)return(a+1)/t.no_of_groups;break;case"spiderWeb":return.6;case"scatter":return 1;case"stackedArea":if("saturation"===t.color_mode)return(a+1)/t.new_data.length}});var s,p=t.legendsGroup.node().getBBox().width;t.legendsGroup_width="vertical"===t.legends_display?p+20:0,s="scatter"===e?"vertical"===t.legends_display?t.w-t.legendsGroup_width:PykCharts["boolean"](t.panels_enable)?t.chart_margin_left:t.chart_width-p-20:"vertical"===t.legends_display?t.chart_width-t.legendsGroup_width:t.chart_width-p-20,p<t.chart_width&&t.legendsGroup.attr("transform","translate("+s+",10)"),t.legendsGroup.style("visibility","visible"),t.legends_text.exit().remove(),i.exit().remove()},mapGroup:function(e,n){for(var a=[],r={},i=[],o=[],s={},l=[],c=0,u=!0,h=!0,d=0;d<e.length;d++)i[d]=e[d].group;o=t.k.__proto__._unique(i);for(var d=0;d<o.length;d++)s[o[d]]=[];for(var p in s)for(var f=0;f<e.length;f++)p===e[f].group&&s[p].push(e[f]);for(var p in s)for(var d=0;d<s[p].length;d++)l.push(s[p][d]);if(e=l,e.forEach(function(e){e.group?u=!0:(u=!1,t.chart_color?(u=!1,e.color=t.chart_color[0]):e.color?(h=!1,e.color=e.color):(h=!1,e.color=t.default_color[0]))}),d=0,u){e.forEach(function(n){!r[n.group]&&n.color?(r[n.group]=n,0!==t.chart_color.length&&PykCharts["boolean"](t.chart_color[c])?n.color=t.chart_color[c]:n.color?n.color=n.color:n.color=t.default_color,d<e.length-2&&n.group!==e[d+1].group&&c++,a.push(n)):d<e.length-2&&n.group!==e[d+1].group&&c++,d++}),c=0,d=0,e.forEach(function(n){r[n.group]?d<e.length-2&&n.group!==e[d+1].group&&c++:(r[n.group]=n,0!==t.chart_color.length&&PykCharts["boolean"](t.chart_color[c])?n.color=t.chart_color[c]:n.color=t.default_color,d<e.length-2&&n.group!==e[d+1].group&&c++,a.push(n)),d++});var _=[];c=0,a.forEach(function(t){_.push(t)});for(var g=_.length,m=e.length,d=0;g>d;d++)for(var f=0;m>f;f++)e[f].group===_[d].group&&(e[f].color=_[d].color);return[_,u]}return[e,u]}});return e},PykCharts.multiD.bubbleSizeCalculation=function(t,e,n){var a=function(a){if(a&&PykCharts["boolean"](t.variable_circle_size_enable)){var r=d3.scale.linear().domain(d3.extent(e,function(t){return t.weight})).range(n);return r(a)}return t.bubbleRadius};return a},PykCharts.multiD.sortDataByGroup=function(t){return t.sort(function(t,e){return t.group<e.group?-1:t.group>e.group?1:void 0}),t},PykCharts.annotation=function(t){t.k.annotation=function(e,n,a,r){var i=t.legendsGroup_height?t.legendsGroup_height:0;if("onclick"===t.annotation_view_mode){var o=d3.select(e).selectAll(".PykCharts-annotation-circle").data(n),s=d3.select(e).selectAll(".PykCharts-annotation-text").data(n);o.enter().append("circle").attr("class","PykCharts-annotation-circle"),o.attr("r",0),setTimeout(function(){o.attr("cx",function(e,n){return parseInt(a(e.x))+t.extra_left_margin+t.chart_margin_left}).attr("cy",function(e,n){return parseInt(r(e.y))-15+t.chart_margin_top+i}).attr("r","7").style("cursor","pointer").on("click",function(e,n){d3.selectAll(".pyk-tooltip").style("display","none"),t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e.annotation)}).on("mouseover",function(e){t.mouseEvent.tooltipHide(e,t.panels_enable,"multilineChart")}).attr("fill",t.annotation_background_color)},t.transitions.duration()),o.exit().remove()}else if("onload"===t.annotation_view_mode){var l=[],c=[],u=d3.select(e).selectAll(".annotation-rect").data(n);u.enter().append("rect").attr("class","annotation-rect");var s=d3.select(e).selectAll(".annotation-text").data(n);s.enter().append("text").attr("class","annotation-text"),s.text(function(t){return""}),u.attr("width",0).attr("height",0),setTimeout(function(){s.attr("x",function(e){return parseInt(a(e.x)-5)+t.extra_left_margin+t.chart_margin_left}).attr("y",function(e){return parseInt(r(e.y)-18+t.chart_margin_top+i)}).attr("text-anchor","middle").style("font-size","12px").text(function(t){return t.annotation}).text(function(t,e){return l[e]=this.getBBox().width+20,c[e]=this.getBBox().height+10,t.annotation}).attr("fill",t.annotation_font_color).style("pointer-events","none"),u.attr("x",function(e,n){return parseInt(a(e.x)-5)+t.extra_left_margin+t.chart_margin_left-l[n]/2}).attr("y",function(e,n){return parseInt(r(e.y)-10+t.chart_margin_top)+i-c[n]}).attr("width",function(t,e){return l[e]}).attr("height",function(t,e){return c[e]}).attr("fill",t.annotation_background_color).style("pointer-events","none")},t.transitions.duration()),s.exit().remove(),u.exit().remove()}return this}},PykCharts.crossHair=function(t){t.k.crossHair=function(e,n,a,r,i){if(PykCharts["boolean"](t.crosshair_enable)&&"default"===t.mode)for(PykCharts.Configuration.cross_hair_v=e.append("line").attr({"class":"line-cursor",id:"cross-hair-v"}),PykCharts.Configuration.cross_hair_h=e.append("line").attr({"class":"line-cursor",id:"cross-hair-h"}).style("display","none"),j=0;j<n;j++)PykCharts.Configuration.focus_circle=e.append("g").attr({"class":"focus",id:"f_circle"+j}).style("display","none"),PykCharts.Configuration.focus_circle.append("circle").attr({fill:function(t){return r.colorPieMS(a[j],i)},id:"focus-circle"+j,r:"6"});return this}},PykCharts.grid=function(t){t.k.yGrid=function(e,n,a,r){if(t.chart_width,t.chart_height,PykCharts["boolean"](t.chart_grid_y_enable)){var i=PykCharts.Configuration.makeYGrid(t,a,r);n.selectAll(t.selector+" g.y.grid-line").style("stroke",function(){return t.chart_grid_color}).call(i)}return this},t.k.xGrid=function(e,n,a,r){if(t.chart_width,t.chart_height,PykCharts["boolean"](t.chart_grid_x_enable)){var i=PykCharts.Configuration.makeXGrid(t,a,r);n.selectAll(t.selector+" g.x.grid-line").style("stroke",function(){return t.chart_grid_color}).call(i)}return this}},PykCharts.Configuration.makeXGrid=function(t,e,n){n||(n=0);var a=d3.svg.axis().scale(e).orient("bottom").ticks(t.axis_x_no_of_axis_value).tickFormat("").tickSize(t.chart_height-t.chart_margin_top-t.chart_margin_bottom-n).outerTickSize(0);return d3.selectAll(t.selector+" .x.axis .tick text").attr("font-size",t.axis_x_pointer_size+"px").style({"font-weight":t.axis_x_pointer_weight,"font-family":t.axis_x_pointer_family}),a},configuration.makeYGrid=function(t,e,n){var a;n||(n=0),a=PykCharts["boolean"](t.panels_enable)?t.w-t.chart_margin_left-t.chart_margin_right-n:t.chart_width-t.chart_margin_left-t.chart_margin_right-n;var r=d3.svg.axis().scale(e).orient("left").ticks(t.axis_y_no_of_axis_value).tickSize(-a).tickFormat("").outerTickSize(0);return d3.selectAll(t.selector+" .y.axis .tick text").attr("font-size",t.axis_y_pointer_size+"px").style({"font-weight":t.axis_y_pointer_weight,"font-family":t.axis_y_pointer_family}),r},PykCharts.scaleFunction=function(t){var e=t.k.__proto__._isNumber;t.k.scaleIdentification=function(t,e,n,a){var r;switch(t){case"ordinal":return r=d3.scale.ordinal().domain(e).rangeRoundBands(n,a);case"linear":return r=d3.scale.linear().domain(e).range(n);case"time":return r=d3.time.scale().domain(e).range(n)}},t.k.ordinalXAxisTickFormat=function(e,n){for(var a,r,i=d3.selectAll(t.selector+" g.x.axis .tick text")[0],o=i.length,s=0,l=2*n,c=0;o>c;c++)s=i[c].getBBox().width>s?i[c].getBBox().width:s;l>=s+10?r=1:l>=.75*s&&s>l?r=2:l>=.65*s&&.75*s>l?r=3:l>=.55*s&&.65*s>l?r=4:l>=.35*s&&.55*s>l?r=5:(20>=l||.35*s>l)&&(r=0);for(var c=0;o>c;c++)a=i[c].__data__,0===r?(a="",d3.selectAll(t.selector+" .x.axis .tick").remove()):l>=i[c].getBBox().width+10&&1===r||(l>=.75*i[c].getBBox().width&&l<i[c].getBBox().width&&2===r?a=a.substr(0,5)+"..":l>=.65*i[c].getBBox().width&&l<.75*i[c].getBBox().width&&3===r?a=a.substr(0,4)+"..":4===r?a=a.substr(0,3):5===r&&(a=a.substr(0,2))),d3.select(i[c]).text(a);return xaxistooltip=d3.selectAll(t.selector+" g.x.axis .tick text").data(e),"default"===t.mode&&xaxistooltip.on("mouseover",function(e){t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e)}).on("mousemove",function(e){t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e)}).on("mouseout",function(e){t.mouseEvent.tooltipHide(e)}),this},t.k.ordinalYAxisTickFormat=function(e){var n,a=d3.selectAll(t.selector+" g.y.axis .tick text")[0],r=a.length;for(i=0;i<r;i++)n=a[i].textContent,a[i].getBBox().width>.9*t.chart_margin_left&&(n=n.substr(0,3)+".."),d3.select(a[i]).text(n);return yaxistooltip=d3.selectAll(t.selector+" g.y.axis .tick text").data(e),"default"===t.mode&&yaxistooltip.on("mouseover",function(e){t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e)}).on("mousemove",function(e){t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e)}).on("mouseout",function(e){t.mouseEvent.tooltipHide(e)}),this},t.k.xAxis=function(e,n,a,r,i,o,s,l,c){if(PykCharts["boolean"](t.axis_x_enable)){t.chart_width,t.chart_height,void 0===s&&(s=0),d3.selectAll(t.selector+" .x.axis").attr("fill",function(){return c&&void 0!=c.axis_x_pointer_color&&""!=c.axis_x_pointer_color?c.axis_x_pointer_color:t.axis_x_pointer_color}),"bottom"===t.axis_x_position&&n.attr("transform","translate(0,"+(t.chart_height-t.chart_margin_top-t.chart_margin_bottom-s)+")");var u=PykCharts.Configuration.makeXAxis(t,a);o&&o.length&&u.tickValues(o),n.style("stroke",function(){return t.axis_x_line_color}).call(u),"string"===t.axis_x_data_format&&"no"===t.panels_enable&&t.k.ordinalXAxisTickFormat(i,r),d3.selectAll(t.selector+" .x.axis .tick text").attr("font-size",t.axis_x_pointer_size).style({"font-weight":t.axis_x_pointer_weight,"font-family":t.axis_x_pointer_family}),l&&"string"!==t.axis_x_data_format&&d3.selectAll(t.selector+" .x.axis .domain").remove()}return this},t.k.yAxis=function(e,n,a,r,i,o,s,l,c){if(PykCharts["boolean"](t.axis_y_enable)){o||(o=0);var u=(t.chart_width,t.chart_height,PykCharts["boolean"](t.panels_enable)?t.w:t.chart_width);"right"===t.axis_y_position&&n.attr("transform","translate("+(u-t.chart_margin_left-t.chart_margin_right-o)+",0)"),d3.selectAll(t.selector+" .y.axis").attr("fill",function(){return c&&void 0!=c.axis_y_pointer_color&&""!=c.axis_y_pointer_color?c.axis_y_pointer_color:t.axis_y_pointer_color});var h=PykCharts.Configuration.makeYAxis(t,a,l);i&&i.length&&h.tickValues(i),new PykCharts.Configuration.mouseEvent(t),n.style("stroke",function(){return t.axis_y_line_color}).call(h),"string"===t.axis_y_data_format&&"no"===t.panels_enable&&t.k.ordinalYAxisTickFormat(r),d3.selectAll(t.selector+" .y.axis .tick text").attr("font-size",t.axis_y_pointer_size).style({"font-weight":t.axis_y_pointer_weight,"font-family":t.axis_y_pointer_family}),s&&"string"!==t.axis_y_data_format&&d3.selectAll(t.selector+" .y.axis .domain").remove()}return this},t.k.xAxisTitle=function(e,n,a){if(t.axis_x_title){var r,i=PykCharts["boolean"](t.panels_enable)?t.w:t.chart_width;n||(n=0),a||(a=0),PykCharts["boolean"](t.axis_x_enable)||e.attr("transform","translate(0,"+(t.chart_height-t.chart_margin_top-t.chart_margin_bottom-n)+")"),"bottom"===t.axis_x_position?r=t.chart_margin_bottom:"top"===t.axis_x_position&&(r=-t.chart_margin_top+t.axis_x_title_size),e.append("text").attr({"class":"x-axis-title",x:(i-t.chart_margin_left-t.chart_margin_right-a)/2,y:r}).style({"text-anchor":"middle",fill:t.axis_x_title_color,"font-weight":t.axis_x_title_weight,"font-size":t.axis_x_title_size}).text(t.axis_x_title)}return this},t.k.yAxisTitle=function(e){if(t.axis_y_title){var n,a;PykCharts["boolean"](t.panels_enable)?t.w:t.chart_width,"left"===t.axis_y_position?(n=-(t.chart_margin_left-t.axis_y_title_size),a=0):"right"===t.axis_y_position&&(n=t.chart_margin_right-t.axis_y_title_size,a="0.71em"),e.append("text").attr({"class":"y-axis-title",x:-((t.chart_height-t.chart_margin_bottom-t.chart_margin_top)/2),transform:"rotate(-90)",y:n,dy:a}).style({fill:t.axis_y_title_color,"font-weight":t.axis_y_title_weight,"font-family":t.axis_y_title_family,"font-size":t.axis_y_title_size,"text-anchor":"middle"}).text(t.axis_y_title)}return this},t.k.isOrdinal=function(e,n,a,r,i){return".x.axis"===n&&PykCharts["boolean"](t.axis_x_enable)?(e.select(n).call(PykCharts.Configuration.makeXAxis(t,a)),"string"===t.axis_x_data_format&&"no"===t.panels_enable&&t.k.ordinalXAxisTickFormat(r,i)):".x.grid"===n?e.select(n).call(PykCharts.Configuration.makeXGrid(t,a)):".y.axis"===n&&PykCharts["boolean"](t.axis_y_enable)?(e.select(n).call(PykCharts.Configuration.makeYAxis(t,a)),"string"===t.axis_y_data_format&&"no"===t.panels_enable&&t.k.ordinalyAxisTickFormat(r)):".y.grid"===n&&e.select(n).call(PykCharts.Configuration.makeYGrid(t,a)),this},t.k.xAxisDataFormatIdentification=function(t){return e(t[0].x)||!isNaN(t[0].x)?"number":isNaN(new Date(t[0].x).getTime())?"string":"time"},t.k.yAxisDataFormatIdentification=function(t){return e(t[0].y)||!isNaN(t[0].y)?"number":isNaN(new Date(t[0].y).getTime())?"string":"time"},t.k.processXAxisTickValues=function(){var n=[],a=[],r=t.axis_x_pointer_values.length;if(r)for(var i=0;r>i;i++)"number"===t.axis_x_data_format?!e(t.axis_x_pointer_values[i])&&isNaN(t.axis_x_pointer_values[i])||""==t.axis_x_pointer_values[i]||n.push(parseFloat(t.axis_x_pointer_values[i])):"time"===t.axis_x_data_format&&(isNaN(new Date(t.axis_x_pointer_values[i]).getTime())||n.push(t.axis_x_pointer_values[i]));if(n.length){var o=n.length;if("time"===t.axis_x_data_format)for(var i=0;o>i;i++)a.push(t.k.dateConversion(n[i]));else a=n}return a},t.k.processYAxisTickValues=function(){var n=t.axis_y_pointer_values.length,a=[];if(n)for(var r=0;n>r;r++)"number"===t.axis_y_data_format&&(!e(t.axis_y_pointer_values[r])&&isNaN(t.axis_y_pointer_values[r])||""==t.axis_y_pointer_values[r]||a.push(t.axis_y_pointer_values[r]));return a}};var configuration=PykCharts.Configuration;configuration.makeXAxis=function(t,e){var n=(PykCharts.Configuration(t),d3.svg.axis().scale(e).tickSize(t.axis_x_pointer_length).outerTickSize(t.axis_x_outer_pointer_length).tickFormat(function(e,n){return"yes"===t.panels_enable&&"string"===t.axis_x_data_format?e.substr(0,2):e}).tickPadding(t.axis_x_pointer_padding).orient(t.axis_x_pointer_position));if(d3.selectAll(t.selector+" .x.axis .tick text").attr("font-size",t.axis_x_pointer_size+"px").style({"font-weight":t.axis_x_pointer_weight,"font-family":t.axis_x_pointer_family}),"time"===t.axis_x_data_format&&PykCharts["boolean"](t.axis_x_time_value_datatype)){switch(t.axis_x_time_value_datatype){case"month":a=d3.time.month,b="%b";break;case"date":a=d3.time.day,b="%d";break;case"year":a=d3.time.year,b="%Y";break;case"hours":a=d3.time.hour,b="%H";break;case"minutes":a=d3.time.minute,b="%M"}n.ticks(a,t.axis_x_time_value_interval).tickFormat(d3.time.format(b))}else"number"===t.axis_x_data_format&&n.ticks(t.axis_x_no_of_axis_value);return n},configuration.makeYAxis=function(t,e,n){var a=(PykCharts.Configuration(t),d3.svg.axis().scale(e).orient(t.axis_y_pointer_position).tickSize(t.axis_y_pointer_length).outerTickSize(t.axis_y_outer_pointer_length).tickPadding(t.axis_y_pointer_padding).tickFormat(function(t,e){return n?n(t):t}));return d3.selectAll(t.selector+" .y.axis .tick text").attr("font-size",t.axis_y_pointer_size+"px").style({"font-weight":t.axis_y_pointer_weight,"font-family":t.axis_y_pointer_family}),"number"===t.axis_y_data_format&&a.ticks(t.axis_y_no_of_axis_value),a},PykCharts.crossHairMovement=function(t){var e=this,n=PykCharts.Configuration.mouseEvent(t);return e.tooltip=configuration.tooltipp,e.cross_hair_v=configuration.cross_hair_v,e.cross_hair_h=configuration.cross_hair_h,e.focus_circle=configuration.focus_circle,e.pt_circle=configuration.pt_circle,e.start_pt_circle=configuration.start_pt_circle,n.crossHairPosition=function(e,n,a,r,o,s,l,c,u,h,d){if((PykCharts["boolean"](t.crosshair_enable)||PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.axis_onhover_highlight_enable))&&"default"===t.mode){var p=t.k.__proto__._offset,f=document.querySelector(t.selector+" #"+r[0][0][0].parentNode.parentNode.id),_=0,g=0;PykCharts["boolean"](u)?(_=1,height_percentge=1):(_=parseFloat(d3.select(f).style("width"))/t.chart_width,g=parseFloat(d3.select(f).style("height"))/t.chart_height);var m=t.legendsGroup_height?t.legendsGroup_height:0,v=(t.chart_margin_left+o)*_+p(f).left,y=p(f).top,x=e.length,b=t.chart_margin_left,w=(t.chart_margin_right,t.chart_margin_top),k=t.chart_margin_bottom,C=(t.chart_width,t.chart_height),D=parseInt(PykCharts.getEvent().target.id.substr(PykCharts.getEvent().target.id.length-1,1)),P=PykCharts.getEvent().pageX-v,S=PykCharts.getEvent().pageY-y-w,A=[];if("string"===t.axis_x_data_format)A=n.range();else for(temp=n.range(),pad=(temp[1]-temp[0])/(e[0].data.length-1),len=e[0].data.length,strt=0,i=0;i<len;i++)A[i]=strt,strt+=pad;var E,T,M,F,N,I,z,H,L=a.range(),B=(L.length,[]),j=[],O=A.length;for(E=0;O>E;E++){if(E+1>=O)return!1;if(I===A[E]&&z===A[E+1]&&H===L[0])return!1;if(P>=_*A[E]&&P<=_*A[E+1]&&S<L[0]+m){switch(z=_*A[E],I=_*A[E+1],H=L[0],M=z-P,F=P-I,M>=F?(T=e[0].data[E].x,B.push(e[0].data[E].y),tooltipText=e[0].data[E].tooltip||e[0].data[E].y):(T=e[0].data[E+1].x,B.push(e[0].data[E+1].y),tooltipText=e[0].data[E+1].tooltip||e[0].data[E+1].y),N=n(T)+o+b,j=a(tooltipText)+w,l){case"multi_series_line":var $=[];d3.selectAll(t.selector+" #pyk-tooltip").classed({"pyk-tooltip":!1,"pyk-multiline-tooltip":!0,"pyk-tooltip-table":!0});var R=e[0].data.length,q="";B=[];for(var G=0;x>G;G++)for(var W=0;R>W;W++)"time"===t.axis_x_data_format?cond=Date.parse(T)===Date.parse(e[G].data[W].x):cond=e[G].data[W].x===T,cond&&(B.push(e[G].data[W].y),$.push(a(e[G].data[W].y)+w),q+="<tr><td>"+e[G].name+"</td><td><b>"+(e[G].data[W].tooltip||e[G].data[W].y)+"</b></td></tr>");N+=6,tooltipText="<table><thead><th colspan='2'>"+T+"</th></thead><tbody>"+q+"</tbody></table>",PykCharts["boolean"](t.tooltip_enable)&&(this.tooltipPosition(tooltipText,N,S,60,-15,D,_,g,l),this.tooltipTextShow(tooltipText)),t.crosshair_enable?this.crossHairShowMultipleline(N,w,N,C-k,N,$,e):null;break;case"panels_of_line":N+=5;for(var R=e[0].data.length,Y=C,U=0,V=0,G=0;x>G;G++)for(var Q=p(document.querySelector(t.selector)),X=p(document.querySelector(t.selector+" #"+h+"-"+G)),J=X.left-Q.left,W=(X.top-Q.top,0);R>W;W++)"time"===t.axis_x_data_format?cond=Date.parse(T)===Date.parse(e[G].data[W].x):cond=e[G].data[W].x===T,cond&&(B.push(e[G].data[W].y),tooltipText=e[G].data[W].tooltip||e[G].data[W].y,G%d==0&&0!=G&&(++U,V=Y*U),j=a(e[G].data[W].y)+w,this.tooltipPosition(tooltipText,N+J-15-30,j+V,-15,-15,G,_,g,l),this.tooltipTextShow(tooltipText,l,G),t.crosshair_enable?this.crossHairShowPanelOfLine(N,w,N,C-k,N,j,G,h):null);break;case"lineChart":case"areaChart":PykCharts["boolean"](t.tooltip_enable)&&("fixed"===t.tooltip_mode.toLowerCase()?this.tooltipPosition(tooltipText,-t.chart_margin_left,j,-14,23,D,_,g,l):"moving"===t.tooltip_mode.toLowerCase()&&this.tooltipPosition(tooltipText,N-t.chart_margin_left+10,j-5,0,-45,D,_,g,l),this.tooltipTextShow(tooltipText)),t.crosshair_enable?this.crossHairShowLineArea(N,w,N,C-k,N,j):null;break;case"stackedAreaChart":var $=[];d3.selectAll(t.selector+" #pyk-tooltip").classed({"pyk-tooltip":!1,"pyk-multiline-tooltip":!0,"pyk-tooltip-table":!0
});var R=e[0].data.length,q="";B=[];for(var G=0;x>G;G++)for(var W=0;R>W;W++)"time"===t.axis_x_data_format?cond=Date.parse(T)===Date.parse(e[G].data[W].x):cond=e[G].data[W].x===T,cond&&(B.push(e[G].data[W].y),$.push(a(e[G].data[W].y+e[G].data[W].y0)+w+t.legendsGroup_height),q+="<tr><td>"+e[G].name+"</td><td><b>"+(e[G].data[W].tooltip||e[G].data[W].y)+"</b></td></tr>");N+=6,tooltipText="<table><thead><th colspan='2'>"+T+"</th></thead><tbody>"+q+"</tbody></table>",PykCharts["boolean"](t.tooltip_enable)&&(D=1,this.tooltipPosition(tooltipText,N,S,60,70,D,_,g),this.tooltipTextShow(tooltipText)),t.crosshair_enable?this.crossHairShowStackedArea(N,w+m,N,C-k,N,$,e):null}PykCharts["boolean"](u)||(this.axisHighlightShow(B,t.selector+" .y.axis",s),this.axisHighlightShow(T,t.selector+" .x.axis",s))}}}},n.crossHairShowLineArea=function(n,a,r,i,o,s){return PykCharts["boolean"](t.crosshair_enable)&&(d3.selectAll(t.selector+" .line-cursor").style("display","block"),d3.select(t.selector+" #cross-hair-v").attr({x1:n,y1:a,x2:r,y2:i}),d3.select(t.selector+" #cross-hair-h").attr({x1:t.chart_margin_left,y1:s,x2:t.chart_width-t.chart_margin_right,y2:s}),e.focus_circle.style("display","block").attr("transform","translate("+o+","+s+")")),this},n.crossHairShowMultipleline=function(n,a,r,i,o,s,l){if(PykCharts["boolean"](t.crosshair_enable)){e.cross_hair_v.style("display","block"),d3.select(t.selector+" #cross-hair-v").attr({x1:n-5,y1:a,x2:r-5,y2:i});for(var c=0;c<l.length;c++)s[c]?d3.select(t.selector+" #f_circle"+c).style("display","block").attr("transform","translate("+(o-3)+","+s[c]+")"):d3.select(t.selector+" #f_circle"+c).style("display","none")}return this},n.crossHairShowPanelOfLine=function(e,n,a,r,i,o,s,l){return PykCharts["boolean"](t.crosshair_enable)&&(d3.selectAll(t.selector+" .line-cursor").style("display","block"),d3.selectAll(t.selector+" #cross-hair-v").attr({x1:e-5,y1:n,x2:a-5,y2:r}),d3.select(t.selector+" #"+l+"-"+s+" #cross-hair-h").attr({x1:t.chart_margin_left,y1:o,x2:t.w-t.chart_margin_right,y2:o}),d3.select(t.selector+" #"+l+"-"+s+" .focus").style("display","block").attr("transform","translate("+(i-5)+","+o+")")),this},n.crossHairShowStackedArea=function(e,n,a,r,i,o,s){if(PykCharts["boolean"](t.crosshair_enable)){d3.selectAll(t.selector+" .line-cursor").style("display","block"),d3.selectAll(t.selector+" #cross-hair-v").attr({x1:e-5,y1:n,x2:a-5,y2:r});for(var l=0;l<s.length;l++)d3.select(t.selector+" #f_circle"+l).style("display","block").attr("transform","translate("+(i-3)+","+o[l]+")")}return this},n.crossHairHide=function(n){return PykCharts["boolean"](t.crosshair_enable)&&(e.cross_hair_v.style("display","none"),"lineChart"===n||"areaChart"===n?(e.cross_hair_h.style("display","none"),e.focus_circle.style("display","none")):("multilineChart"===n||"stackedAreaChart"===n)&&(d3.selectAll(t.selector+" .line-cursor").style("display","none"),d3.selectAll(t.selector+" .focus").style("display","none"))),this},n.tooltipPosition=function(n,a,r,i,o,s,l,c,u){if(PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format){if(void 0!==a){var h=t.k.__proto__._offset,d=t.selector.substr(1,t.selector.length),p=document.getElementById(d),f=(document.querySelector("#tooltip-svg-container-"+s+"-pyk-tooltip"+d)?parseFloat(d3.select("#tooltip-svg-container-"+s+"-pyk-tooltip"+d).style("width")):0,document.querySelector("#tooltip-svg-container-"+s+"-pyk-tooltip"+d)?parseFloat(d3.select("#tooltip-svg-container-"+s+"-pyk-tooltip"+d).style("height")):0),_=d3.select("#tooltip-svg-container-"+s+"-pyk-tooltip"+d),g=h(p).left,m=h(p).top;if("lineChart"===u||"areaChart"===u)var v=r*c;else var v=r-f/2*c;_.style({display:"block",top:v+m+"px",left:(a+t.chart_margin_left)*l+g+"px"})}else e.tooltip.style({display:"block",top:PykCharts.getEvent().pageY-20+"px",left:PykCharts.getEvent().pageX+30+"px"});return e.tooltip}},n.tooltipTextShow=function(n,a,r){var i=t.selector.substr(1,t.selector.length);return PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format?("panels_of_line"===a?d3.selectAll("#tooltip-svg-container-"+r+"-pyk-tooltip"+i).html(n):e.tooltip.html(n),this):void 0},n.tooltipHide=function(n,a,r){return PykCharts["boolean"](t.tooltip_enable)||PykCharts["boolean"](t.annotation_enable)||"string"===t.axis_x_data_format||"string"===t.axis_y_data_format?"yes"===a&&"multilineChart"===r?d3.selectAll(".pyk-tooltip").style("display","none"):e.tooltip.style("display","none"):void 0},n},PykCharts.multiD.line=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.crossHair(e),PykCharts.annotation(e),PykCharts.scaleFunction(e),PykCharts.grid(e),!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var r=n.multiDimensionalCharts,i=n.stylesheet;t.optional,e.pointer_overflow_enable=t.pointer_overflow_enable?t.pointer_overflow_enable.toLowerCase():i.pointer_overflow_enable,e.crosshair_enable=t.crosshair_enable?t.crosshair_enable.toLowerCase():r.crosshair_enable,e.curvy_lines_enable=t.curvy_lines_enable?t.curvy_lines_enable.toLowerCase():r.curvy_lines_enable,e.interpolate=PykCharts["boolean"](e.curvy_lines_enable)?"cardinal":"linear",e.panels_enable="no",e.executeData=function(n){var a=e.k.validator().validatingJSON(n);e.selector.substring(1,e.selector.length),e.stop||a===!1||(e.data=e.k.__proto__._groupBy("line",n),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"string"===e.axis_x_data_format?e.data_sort_enable="no":(e.data_sort_enable="yes",e.data_sort_type="time"===e.axis_x_data_format?"date":"numerically",e.data_sort_order="ascending"),PykCharts.multiD.lineFunctions(t,e,"line"))},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.multiSeriesLine=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.crossHair(e),PykCharts.annotation(e),PykCharts.scaleFunction(e),PykCharts.grid(e),!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var r=n.multiDimensionalCharts,i=n.stylesheet;t.optional,e.pointer_overflow_enable=t.pointer_overflow_enable?t.pointer_overflow_enable.toLowerCase():i.pointer_overflow_enable,e.crosshair_enable=t.crosshair_enable?t.crosshair_enable.toLowerCase():r.crosshair_enable,e.curvy_lines_enable=t.curvy_lines_enable?t.curvy_lines_enable.toLowerCase():r.curvy_lines_enable,e.interpolate=PykCharts["boolean"](e.curvy_lines_enable)?"cardinal":"linear",e.panels_enable="no",e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("line",n),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"string"===e.axis_x_data_format?e.data_sort_enable="no":(e.data_sort_enable="yes",e.data_sort_type="time"===e.axis_x_data_format?"date":"numerically",e.data_sort_order="ascending"),void PykCharts.multiD.lineFunctions(t,e,"multi_series_line"))},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.panelsOfLine=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.crossHair(e),PykCharts.annotation(e),PykCharts.scaleFunction(e),PykCharts.grid(e),!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var r=n.multiDimensionalCharts,i=n.stylesheet;t.optional,e.pointer_overflow_enable=t.pointer_overflow_enable?t.pointer_overflow_enable.toLowerCase():i.pointer_overflow_enable,e.crosshair_enable=t.crosshair_enable?t.crosshair_enable.toLowerCase():r.crosshair_enable,e.curvy_lines_enable=t.curvy_lines_enable?t.curvy_lines_enable.toLowerCase():r.curvy_lines_enable,e.interpolate=PykCharts["boolean"](e.curvy_lines_enable)?"cardinal":"linear",e.panels_enable="yes",e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("line",n),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"string"===e.axis_x_data_format?e.data_sort_enable="no":(e.data_sort_enable="yes",e.data_sort_type="time"===e.axis_x_data_format?"date":"numerically",e.data_sort_order="ascending"),void PykCharts.multiD.lineFunctions(t,e,"panels_of_line"))},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.lineFunctions=function(t,e,a){var r=e,o=r.selector.substring(1,r.selector.length);r.compare_data=r.data,r.data_length=r.data.length,r.k.remove_loading_bar(o),r.dataTransformation=function(){for(r.group_arr=[],r.new_data=[],r.ticks=[],r.x_arr=[],j=0;j<r.data_length;j++)r.group_arr[j]=r.data[j].name;r.uniq_group_arr=r.k.__proto__._unique(r.group_arr),r.uniq_color_arr=[];for(var t=r.uniq_group_arr.length,e=0;e<r.data_length;e++)r.x_arr[e]=r.data[e].x;var n=r.k.__proto__._unique(r.x_arr);for(e=0;t>e;e++)if(r.chart_color[e])r.uniq_color_arr[e]=r.chart_color[e];else{for(l=0;l<r.data_length;l++)if(r.uniq_group_arr[e]===r.data[l].name&&r.data[l].color){r.uniq_color_arr[e]=r.data[l].color;break}PykCharts["boolean"](r.uniq_color_arr[e])||(r.uniq_color_arr[e]=r.default_color[0])}for(r.flag=0,e=0;t>e;e++)for(r.new_data[e]={name:r.uniq_group_arr[e],data:[],color:r.uniq_color_arr[e]},l=0;l<r.data_length;l++)r.uniq_group_arr[e]===r.data[l].name&&r.new_data[e].data.push({x:r.data[l].x,y:r.data[l].y,tooltip:r.data[l].tooltip,annotation:r.data[l].annotation||""});r.new_data_length=r.new_data.length;for(var a=n.length,i=0;i<r.new_data_length;i++){for(var o=r.k.__proto__._unique(r.x_arr),s=r.new_data[i].data.length,c=0;s>c;c++)for(var e=0;a>e;e++)if(r.new_data[i].data[c].x==o[e]){o[e]=void 0;break}for(var u=0;a>u;u++)if(void 0!=o[u]){var h={x:o[u],y:"NA",tooltip:0,annotation:""};r.new_data[i].data.splice(u,0,h)}}},r.calculatePanelInRow=function(){var t,e=parseInt(r.k._getHighestParentsAttribute(r.selector,"width"));t=e?e:d3.select("body").style("width"),r.no_of_containers_in_row=Math.floor(parseInt(t)/r.chart_width),r.no_of_containers_in_row>r.new_data.length&&(r.no_of_containers_in_row=r.new_data.length),t<r.chart_width&&(r.no_of_containers_in_row=1)},r.render=function(){var e=r.selector.substring(1,r.selector.length);if(r.container_id=e+"_svg",r.dataLineGroup=[],r.clicked,r.multid=new PykCharts.multiD.configuration(r),r.fillColor=new PykCharts.Configuration.fillChart(r,null,t),r.transitions=new PykCharts.Configuration.transition(r),PykCharts["boolean"](r.panels_enable)&&(r.calculatePanelInRow(),r.new_width=r.no_of_containers_in_row*r.chart_width),"default"===r.mode){if(r.k.title(r.new_width),PykCharts["boolean"](r.panels_enable)){if(r.w=r.chart_width,r.chart_height=r.chart_height,r.chart_margin_left=r.chart_margin_left,r.chart_margin_right=r.chart_margin_right,r.k.backgroundColor(r)["export"](r,r.container_id+"-","lineChart",r.panels_enable,r.new_data,r.new_width).emptyDiv(r.selector).subtitle(r.new_width),d3.select(r.selector).append("div").attr("id","panels_of_line_main_div"),r.k.liveData(r),r.optionalFeature().chartType(),r.reducedWidth=r.w-r.chart_margin_left-r.chart_margin_right,r.reducedHeight=r.chart_height-r.chart_margin_top-r.chart_margin_bottom,r.fill_data=[],"time"===r.axis_x_data_format){for(i=0;i<r.new_data_length;i++)r.new_data[i].data.forEach(function(t){t.x=r.k.dateConversion(t.x)});r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)})}r.renderPanelOfLines()}else{r.k.backgroundColor(r)["export"](r,"#"+r.container_id+"-1","lineChart").emptyDiv(r.selector).subtitle(),r.w=r.chart_width,r.reducedWidth=r.w-r.chart_margin_left-r.chart_margin_right,r.reducedHeight=r.chart_height-r.chart_margin_top-r.chart_margin_bottom;var n=r.selector.substr(1,r.selector.length);if(d3.selectAll("#tooltip-svg-container-1-pyk-tooltip"+n).remove(),r.k.liveData(r).makeMainDiv(r.selector,1).tooltip(!0,r.selector,1,r.flag),r.optionalFeature().chartType(),"time"===r.axis_x_data_format){for(i=0;i<r.new_data_length;i++)r.new_data[i].data.forEach(function(t){t.x=r.k.dateConversion(t.x)});r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)})}try{if("multilineChart"===r.type&&"line"===a)throw"Invalid data in the JSON"}catch(o){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+r.selector+'."'+o+'"  Visit www.pykcharts.com/errors#error_6')}r.renderLineChart()}r.k.createFooter(r.new_width).lastUpdatedAt().credits().dataSource(),PykCharts["boolean"](r.annotation_enable)&&r.annotation()}else if("infographics"===r.mode)if(PykCharts["boolean"](r.panels_enable)){if(r.k.backgroundColor(r)["export"](r,"#"+r.container_id+"-","lineChart",r.panels_enable,r.new_data,r.new_width).emptyDiv(r.selector),d3.select(r.selector).append("div").attr("id","panels_of_line_main_div"),r.optionalFeature().chartType(),r.w=r.chart_width,r.chart_height=r.chart_height,"time"===r.axis_x_data_format){for(i=0;i<r.new_data_length;i++)r.new_data[i].data.forEach(function(t){t.x=r.k.dateConversion(t.x)});r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)})}r.reducedWidth=r.w-r.chart_margin_left-r.chart_margin_right,r.reducedHeight=r.chart_height-r.chart_margin_top-r.chart_margin_bottom,r.fill_data=[],r.renderPanelOfLines()}else{if(r.k.backgroundColor(r)["export"](r,"#"+r.container_id+"-0","lineChart").emptyDiv(r.selector),r.w=r.chart_width,r.reducedWidth=r.w-r.chart_margin_left-r.chart_margin_right,r.reducedHeight=r.chart_height-r.chart_margin_top-r.chart_margin_bottom,r.k.makeMainDiv(r.selector,1),r.optionalFeature().chartType(),"time"===r.axis_x_data_format){for(i=0;i<r.new_data_length;i++)r.new_data[i].data.forEach(function(t){t.x=r.k.dateConversion(t.x)});r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)})}try{if("multilineChart"===r.type&&"line"===a)throw"Invalid data in the JSON"}catch(o){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+r.selector+'."'+o+'"  Visit www.pykcharts.com/errors#error_6')}r.renderLineChart()}if(PykCharts["boolean"](r.panels_enable)){var s=r.k.resize(null,r.new_width);r.k.__proto__._ready(s),window.addEventListener("resize",function(t){return r.calculatePanelInRow(),r.k.resize(null,r.new_width)})}else{var s=r.k.resize(r.svgContainer);r.k.__proto__._ready(s),window.addEventListener("resize",function(t){return r.k.resize(r.svgContainer)})}},r.refresh=function(e){r.executeRefresh=function(t){r.data=r.k.__proto__._groupBy("line",t),r.data_length=r.data.length;var e=r.k.checkChangeInData(r.data,r.compare_data);r.compare_data=e[0];var n=e[1];if(r.dataTransformation(),(n||PykCharts["boolean"](r.zoom_enable)&&r.count>1&&r.count<=r.zoom_level||r.transition_duration)&&(r.k.lastUpdatedAt("liveData"),r.mouseEvent.tooltipHide(null,r.panels_enable,r.type),r.mouseEvent.crossHairHide(r.type),r.mouseEvent.axisHighlightHide(r.selector+" .x.axis"),r.mouseEvent.axisHighlightHide(r.selector+" .y.axis")),r.optionalFeature().hightLightOnload(),"time"===r.axis_x_data_format){for(var a=0;a<r.new_data_length;a++)r.new_data[a].data.forEach(function(t){t.x=r.k.dateConversion(t.x)});r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)})}if(PykCharts["boolean"](r.panels_enable)){for(var a=0;a<r.previous_length;a++){var i=document.querySelector(r.selector+" #panels_of_line_main_div #chart-container-"+a);i.parentNode.removeChild(i)}r.renderPanelOfLines()}"multilineChart"!==r.type||PykCharts["boolean"](r.panels_enable)||(document.querySelector(r.selector+" #chart-container-1").innerHTML=null,r.renderLineChart()),"lineChart"===r.type&&(r.optionalFeature().createChart("liveData").ticks(),r.k.xAxis(r.svgContainer,r.xGroup,r.xScale,r.extra_left_margin,r.xdomain,r.x_tick_values).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values).yGrid(r.svgContainer,r.group,r.yScale).xGrid(r.svgContainer,r.group,r.xScale),PykCharts["boolean"](r.annotation_enable)&&r.annotation())},PykCharts["boolean"](r.interactive_enable)?(r.k.dataFromPykQuery(e),r.k.dataSourceFormatIdentification(r.data,r,"executeRefresh")):r.k.dataSourceFormatIdentification(t.data,r,"executeRefresh")},r.optionalFeature=function(){var t=r.selector.substring(1,r.selector.length),e={chartType:function(){for(var t=0;t<r.data_length;t++)for(var e=t+1;e<r.data_length;e++)if(r.data[t].x===r.data[e].x){r.type="multilineChart";break}return r.type=r.type||"lineChart",this},hightLightOnload:function(){if("multilineChart"===r.type&&r.new_data_length>0&&r.highlight)for(var t=0;t<r.uniq_group_arr.length;t++)r.highlight.toLowerCase()===r.uniq_group_arr[t].toLowerCase()?r.new_data[t].highlight=!0:r.new_data[t].highlight=!1;return this},svgContainer:function(e){var n=document.getElementById(t);return"multilineChart"!==r.type||n.classList.contains("PykCharts-line-chart")?"lineChart"!==r.type||n.classList.contains("PykCharts-line-chart")||(n.className+=" PykCharts-twoD PykCharts-line-chart"):n.className+=" PykCharts-twoD PykCharts-line-chart PykCharts-multi-series2D",r.svgContainer=d3.select(r.selector+" #chart-container-"+e).append("svg:svg").attr({id:r.container_id+"-"+e,width:r.w,height:r.chart_height,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+r.w+" "+r.chart_height}),PykCharts["boolean"](r.pointer_overflow_enable)&&!PykCharts["boolean"](r.panels_enable)&&r.svgContainer.style("overflow","visible"),this},createGroups:function(t){return r.group=r.svgContainer.append("g").attr({id:r.type+"-svg",transform:"translate("+r.chart_margin_left+","+r.chart_margin_top+")"}),PykCharts["boolean"](r.chart_grid_y_enable)&&r.group.append("g").attr({id:"ygrid","class":"y grid-line"}),PykCharts["boolean"](r.chart_grid_x_enable)&&r.group.append("g").attr({id:"xgrid","class":"x grid-line"}),r.clip=r.svgContainer.append("svg:clipPath").attr("id","clip"+t+r.selector).append("svg:rect").attr({width:r.reducedWidth,height:r.reducedHeight}),r.chartBody=r.svgContainer.append("g").attr({id:"clipPath","clip-path":"url(#clip"+t+r.selector+")",transform:"translate("+r.chart_margin_left+","+r.chart_margin_top+")"}),this},axisContainer:function(){return(PykCharts["boolean"](r.axis_x_enable)||r.axis_x_title)&&(r.xGroup=r.group.append("g").attr({id:"xaxis","class":"x axis"})),(PykCharts["boolean"](r.axis_y_enable)||r.axis_y_title)&&(r.yGroup=r.group.append("g").attr({id:"yaxis","class":"y axis"})),this},createChart:function(t,e){function a(t){r.dataLineGroup[t].transition().duration(r.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,y.length+1));return function(e){return r.chart_path(r.new_data[t].data.slice(0,n(e)))}})}function i(t){r.dataLineGroup[t].transition().duration(r.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,y.length+1));return function(e){return r.chart_path(r.new_data[t].data.slice(0,n(e)))}})}function o(t){r.dataLineGroup[0].transition().duration(r.transitions.duration()).attrTween("d",function(t){var e=d3.scale.quantile().domain([0,1]).range(d3.range(1,y.length+1));return function(t){return r.chart_path(y.slice(0,e(t)))}})}r.previous_length=r.new_data.length,r.x_tick_values=r.k.processXAxisTickValues(),r.y_tick_values=r.k.processYAxisTickValues();var s,l,c,u,h,d,p,f,_,g=[];if("number"===r.axis_y_data_format?(max=d3.max(r.new_data,function(t){return d3.max(t.data,function(t){return t.y})}),min=d3.min(r.new_data,function(t){return d3.min(t.data,function(t){return t.y})}),h=[min,max],l=r.k.__proto__._domainBandwidth(h,2),f=d3.min(r.y_tick_values),_=d3.max(r.y_tick_values),l[0]>f&&(l[0]=f),l[1]<_&&(l[1]=_),c=[r.reducedHeight,0],r.yScale=r.k.scaleIdentification("linear",l,c)):"string"===r.axis_y_data_format?(r.new_data[0].data.forEach(function(t){l.push(t.y)}),c=[0,r.reducedHeight],r.yScale=r.k.scaleIdentification("ordinal",l,c,0)):"time"===r.axis_y_data_format&&(l=d3.extent(r.data,function(t){return new Date(t.x)}),f=d3.min(r.y_tick_values,function(t){return new Date(t)}),_=d3.max(r.y_tick_values,function(t){return new Date(t)}),new Date(l[0])>new Date(f)&&(l[0]=f),new Date(l[1])<new Date(_)&&(l[1]=max__tick_value),c=[r.reducedHeight,0],r.yScale=r.k.scaleIdentification("time",l,c)),r.xdomain=[],"number"===r.axis_x_data_format?(max=d3.max(r.new_data,function(t){return d3.max(t.data,function(t){return+t.x})}),min=d3.min(r.new_data,function(t){return d3.min(t.data,function(t){return+t.x})}),s=[min,max],g=r.k.__proto__._domainBandwidth(s,2),d=d3.min(r.x_tick_values),p=d3.max(r.x_tick_values),g[0]>d&&(g[0]=d),g[1]<p&&(g[1]=p),u=[0,r.reducedWidth],r.xScale=r.k.scaleIdentification("linear",g,u),r.extra_left_margin=0,r.new_data[0].data.forEach(function(t){r.xdomain.push(+t.x)})):"string"===r.axis_x_data_format?(r.new_data[0].data.forEach(function(t){g.push(t.x)}),u=[0,r.reducedWidth],r.xScale=r.k.scaleIdentification("ordinal",g,u,0),r.extra_left_margin=r.xScale.rangeBand()/2,r.xdomain=r.xScale.domain()):"time"===r.axis_x_data_format&&(max=d3.max(r.new_data,function(t){return d3.max(t.data,function(t){return t.x})}),min=d3.min(r.new_data,function(t){return d3.min(t.data,function(t){return t.x})}),g=[min,max],u=[0,r.reducedWidth],d=d3.min(r.x_tick_values,function(t){return t=r.k.dateConversion(t)}),p=d3.max(r.x_tick_values,function(t){return t=r.k.dateConversion(t)}),g[0]>d&&(g[0]=d),g[1]<p&&(g[1]=p),r.xScale=r.k.scaleIdentification("time",g,u),r.extra_left_margin=0,r.new_data[0].data.forEach(function(t){r.xdomain.push(t.x)})),r.count=1,r.zoom_event=d3.behavior.zoom(),"string"!==r.axis_y_data_format&&"string"!==r.axis_x_data_format?r.zoom_event.x(r.xScale).y(r.yScale).scale(r.count).on("zoom",r.zoomed):r.zoom_event.y(r.yScale).scale(r.count).on("zoom",r.zoomed),PykCharts["boolean"](r.zoom_enable)&&"default"===r.mode){PykCharts["boolean"](r.panels_enable)?(n=r.new_data_length,j=0):(n=2,j=1);for(var m=j;m<n;m++)d3.selectAll(r.selector+" #"+r.container_id+"-"+m).call(r.zoom_event),d3.selectAll(r.selector+" #"+r.container_id+"-"+m).on("wheel.zoom",null).on("mousewheel.zoom",null)}r.chart_path=d3.svg.line().defined(function(t){return!isNaN(t.y)}).x(function(t){return r.xScale(t.x)}).y(function(t){return r.yScale(t.y)}).interpolate(r.interpolate);var v="lineChart"===r.type?"lineChart":"yes"===r.panels_enable?"panels_of_line":"multi_series_line";if(r.chartPathClass="lineChart"===r.type?"line":"multi-line","liveData"===t&&"lineChart"===r.type){for(var m=0;m<r.new_data_length;m++){var y=r.new_data[m].data,x=r.type+"-svg-"+m;r.svgContainer.select(r.selector+" #"+x).datum(r.new_data[m].data).attr("transform","translate("+r.extra_left_margin+",0)").style("stroke",function(){return r.new_data[m].highlight&&"multilineChart"===r.type&&!r.clicked?r.highlightLine(this,null):r.clicked?r.highlightLine(r.selected,null,r.previous_color):d3.select(this).classed({"multi-line-selected":!1,"multi-line":!0,"multi-line-hover":!1}),r.fillColor.colorPieMS(r.new_data[m],r.type)}).attr("data-id",function(t,e){return r.new_data[e]}),a(m),d3.selectAll(r.selector+" text#"+(r.type+"-svg-"+m)).style("fill",function(){return r.fillColor.colorPieMS(r.new_data[m],r.type)})}"default"===r.mode&&r.svgContainer.on("mouseout",function(t){r.mouseEvent.tooltipHide(),r.mouseEvent.crossHairHide(r.type),r.mouseEvent.axisHighlightHide(r.selector+" .x.axis"),r.mouseEvent.axisHighlightHide(r.selector+" .y.axis")}).on("mousemove",function(){r.mouseEvent.crossHairPosition(r.new_data,r.xScale,r.yScale,r.dataLineGroup,r.extra_left_margin,r.xdomain,v,r.tooltipMode,null,r.container_id)})}else{if(r.clk=!0,PykCharts["boolean"](r.panels_enable))y=r.new_data[e].data,x=r.type+r.svgContainer.attr("id"),r.dataLineGroup[0]=r.chartBody.append("path"),r.dataLineGroup[0].datum(r.new_data1.data).attr({"class":"lines-hover "+r.chartPathClass,id:x,transform:"translate("+r.extra_left_margin+",0)","stroke-opacity":function(){return"saturation"===r.color_mode?(e+1)/r.new_data.length:1},"path-stroke-opacity":function(){return d3.select(this).attr("stroke-opacity")},"data-id":function(t,e){return r.new_data[e]}}).style("stroke",function(){return r.new_data[e].highlight&&r.highlightLine(this,null),r.fillColor.colorPieMS(r.new_data[e],r.type)}).on({click:function(t){"default"===r.mode&&(r.clicked=!0,r.highlightLine(PykCharts.getEvent().target,r.clicked,r.previous_color))},mouseover:function(t){this===r.selected||"saturation"!==r.color_mode&&!r.hover||"default"!==r.mode||(r.previous_color=d3.select(this).attr("stroke-opacity"),r.click_color=d3.select(this).style("stroke"),d3.select(this).classed({"multi-line-hover":!0,"multi-line":!1}).style("stroke","orange"))},mouseout:function(t,n){this===r.selected||"saturation"!==r.color_mode&&!r.hover||"default"!==r.mode||d3.select(this).classed({"multi-line-hover":!1,"multi-line":!0}).style("stroke",function(){return r.new_data[e].highlight&&r.highlightLine(this,null,r.previous_color),r.click_color}).attr("stroke-opacity",function(){return"saturation"===r.color_mode?r.previous_color:1})}}),o(e);else for(var m,m=0;m<r.new_data_length;m++){var x=r.type+"-svg-"+m;r.dataLineGroup[m]=r.chartBody.append("path");var y=r.new_data[m].data;r.dataLineGroup[m].datum(r.new_data[m].data).attr({"class":"lines-hover "+r.chartPathClass,id:x,transform:"translate("+r.extra_left_margin+",0)","stroke-opacity":function(){return"saturation"===r.color_mode?(m+1)/r.new_data.length:1},"path-stroke-opacity":function(){return d3.select(this).attr("stroke-opacity")}}).style("stroke",function(){return r.new_data[m].highlight&&r.highlightLine(this,null),r.fillColor.colorPieMS(r.new_data[m],r.type)}),i(m)}"lineChart"===r.type&&"default"===r.mode?r.svgContainer.on("mouseout",function(t){r.mouseEvent.tooltipHide(),r.mouseEvent.crossHairHide(r.type),r.mouseEvent.axisHighlightHide(r.selector+" .x.axis"),r.mouseEvent.axisHighlightHide(r.selector+" .y.axis")}).on("mousemove",function(){r.mouseEvent.crossHairPosition(r.new_data,r.xScale,r.yScale,r.dataLineGroup,r.extra_left_margin,r.xdomain,v,r.tooltipMode,null,r.container_id)}):"multilineChart"===r.type&&"default"===r.mode&&r.svgContainer.on("mouseout",function(t){r.mouseEvent.tooltipHide(null,r.panels_enable,r.type),r.mouseEvent.crossHairHide(r.type),r.mouseEvent.axisHighlightHide(r.selector+" .x.axis"),r.mouseEvent.axisHighlightHide(r.selector+" .y.axis")}).on("mousemove",function(){var t=[];t[0]=d3.select(r.selector+" #"+this.id+" .lines-hover"),r.mouseEvent.crossHairPosition(r.new_data,r.xScale,r.yScale,t,r.extra_left_margin,r.xdomain,v,r.tooltipMode,r.panels_enable,r.container_id,r.no_of_containers_in_row)})}return this},ticks:function(t){function e(){r.ticks.text(function(t,e){return t.name}).text(function(t,e){return r.ticks_text_width[e]=this.getBBox().width,t.name}).attr({dx:5,dy:5}).style({"font-size":r.pointer_size+"px","font-weight":function(t){return t.highlight?"bold":r.pointer_weight},"font-family":r.pointer_family,visibility:"visible",fill:function(t,e){return r.fillColor.colorPieMS(r.new_data[e],r.type)},"pointer-events":"none"})}if(PykCharts["boolean"](r.pointer_size))if(PykCharts["boolean"](r.panels_enable)){var n=r.type+r.svgContainer.attr("id");"bottom"!==r.axis_x_position||"left"!==r.axis_y_position&&"right"!==r.axis_y_position?"top"!==r.axis_x_position||"left"!==r.axis_y_position&&"right"!==r.axis_y_position||(r.ticks[0]=r.svgContainer.append("text").attr({id:n,x:r.w-r.chart_margin_left,y:r.chart_height-r.chart_margin_bottom,dy:10,"text-anchor":"end"}).style({"font-size":r.pointer_size+"px","font-weight":r.pointer_weight,"font-family":r.pointer_family,fill:function(){return r.fillColor.colorPieMS(r.new_data1,r.type)}}).html(r.new_data1.name)):r.ticks[0]=r.svgContainer.append("text").attr({id:n,x:r.chart_margin_left,y:r.chart_margin_top,dy:-5}).style({"font-size":r.pointer_size+"px","font-weight":r.pointer_weight,"font-family":r.pointer_family,fill:function(){return r.fillColor.colorPieMS(r.new_data1,r.type)}}).html(r.new_data1.name)}else r.ticks_text_width=[],tickPosition=function(t,e){var n,a,i,o=r.new_data[e].data.length;if("left"===r.axis_y_position)if(n=r.xScale(r.new_data[e].data[r.new_data[e].data.length-1].x)+r.extra_left_margin+r.chart_margin_left,"NA"!==r.new_data[e].data[r.new_data[e].data.length-1].y)a=r.yScale(r.new_data[e].data[r.new_data[e].data.length-1].y)+r.chart_margin_top;else{for(i=0;o>i&&"NA"!==r.new_data[e].data[i].y;i++);console.log(r.new_data,e,r.new_data[e].data.length,i),a=r.yScale(r.new_data[e].data[i-1].y)+r.chart_margin_top}else"right"===r.axis_y_position&&(n=r.xScale(r.new_data[e].data[0].x)+r.extra_left_margin+r.chart_margin_left-10,a=r.yScale(r.new_data[e].data[0].y)+r.chart_margin_top);return text_x=n,text_y=a,text_rotate=0,"translate("+text_x+","+text_y+") rotate("+text_rotate+")"},orient=function(){return"left"===r.axis_y_position?"start":"right"===r.axis_y_position?"end":void 0},r.ticks=r.svgContainer.selectAll(".legend-heading").data(r.new_data),r.ticks.enter().append("text"),r.ticks.attr({id:function(t,e){return r.type+"-svg-"+e},"class":"legend-heading",transform:tickPosition,"text-anchor":orient}),r.ticks.text(function(t,e){return""}),setTimeout(e,r.transitions.duration()),r.ticks.exit().remove();return this}};return e},r.zoomed=function(){if(PykCharts["boolean"](r.panels_enable))for(var t=0;t<r.new_data_length;t++){var e=r.type;currentContainer=d3.selectAll("#"+r.container_id+"-"+t),r.k.isOrdinal(currentContainer,".x.axis",r.xScale,r.xdomain,r.extra_left_margin),r.k.isOrdinal(currentContainer,".x.grid",r.xScale),r.k.isOrdinal(currentContainer,".y.axis",r.yScale,r.ydomain),r.k.isOrdinal(currentContainer,".y.grid",r.yScale),currentContainer.select("#"+e+r.container_id+"-"+t).attr({"class":"lines-hover "+r.chartPathClass,d:r.chart_path})}else{PykCharts["boolean"](r.pointer_overflow_enable)&&r.svgContainer.style("overflow","hidden"),r.k.isOrdinal(r.svgContainer,".x.axis",r.xScale,r.xdomain,r.extra_left_margin),r.k.isOrdinal(r.svgContainer,".x.grid",r.xScale),r.k.isOrdinal(r.svgContainer,".y.axis",r.yScale,r.ydomain),r.k.isOrdinal(r.svgContainer,".y.grid",r.yScale);for(var t=0;t<r.new_data_length;t++){var e=r.type+"-svg-"+t;r.svgContainer.select(r.selector+" #"+e).attr({"class":"lines-hover "+r.chartPathClass,d:r.chart_path})}}"dblclick"===PykCharts.getEvent().sourceEvent.type&&r.count++,r.mouseEvent.tooltipHide(),r.mouseEvent.crossHairHide(r.type),r.mouseEvent.axisHighlightHide(r.selector+" .x.axis"),r.mouseEvent.axisHighlightHide(r.selector+" .y.axis"),r.count===r.zoom_level+1&&r.zoomOut(),PykCharts["boolean"](r.annotation_enable)&&r.annotation(),r.optionalFeature().ticks()},r.zoomOut=function(){if(PykCharts["boolean"](r.pointer_overflow_enable)&&!PykCharts["boolean"](r.panels_enable)&&r.svgContainer.style("overflow","visible"),PykCharts["boolean"](r.panels_enable)){for(var t=0;t<r.previous_length;t++){var e=document.querySelector(r.selector+" #panels_of_line_main_div #chart-container-"+t);e.parentNode.removeChild(e)}r.renderPanelOfLines()}"lineChart"===r.type?r.optionalFeature().createChart("liveData"):"multilineChart"!==r.type||PykCharts["boolean"](r.panels_enable)||(document.querySelector(r.selector+" #chart-container-1").innerHTML=null,
r.renderLineChart()),r.k.isOrdinal(r.svgContainer,".x.axis",r.xScale,r.xdomain,r.extra_left_margin),r.k.isOrdinal(r.svgContainer,".x.grid",r.xScale),r.k.isOrdinal(r.svgContainer,".y.axis",r.yScale,r.ydomain),r.k.isOrdinal(r.svgContainer,".y.grid",r.yScale)},r.onBrush=function(t,e){r.addEvents(t,e)},r.highlightLine=function(t,e,n){r.selected_line=t,r.selected_line_data=r.selected_line.__data__,r.selected_line_data_len=r.selected_line_data.length,r.deselected=r.selected,r.selected=t,"multilineChart"!==r.type||"saturation"!==r.color_mode&&!r.hover||d3.select(r.selected).style("stroke",function(t,e){return r.click_color}),e&&(d3.select(r.selected).classed("multi-line")?(d3.selectAll(r.selector+" path.multi-line").attr("stroke-opacity",.3),"color"===r.color_mode&&d3.selectAll(r.selector+" .legend-heading").style("opacity",.3),d3.select(r.selector+" text#"+r.selected.id).style("opacity",1).style("font-weight","bold"),d3.selectAll(".lines-hover").attr("stroke-opacity",.3).classed({"multi-line-selected":!1,"multi-line":!0}),d3.select(r.selected).attr("stroke-opacity",1).classed({"multi-line-selected":!0,"multi-line":!1})):("color"===r.color_mode?d3.selectAll(r.selector+" path.multi-line").attr("stroke-opacity",n):d3.selectAll(r.selector+" path.multi-line").attr("stroke-opacity",function(){return d3.select(this).attr("path-stroke-opacity")}),d3.selectAll(r.selector+" .legend-heading").style("opacity",1),d3.select(r.selector+" text#"+r.selected.id).style({opacity:1,"font-weight":"normal"}),d3.select(r.selected).attr("stroke-opacity",n).classed({"multi-line-selected":!1,"multi-line":!0})))},r.annotation=function(){function t(t,e){function n(){i.attr("class","PykCharts-annotation-line").attr("d",function(t,e){var n=[{x:parseInt(r.xScale(t.x)-.5*a)+r.extra_left_margin+r.chart_margin_left,y:parseInt(r.yScale(t.y)-a+r.chart_margin_top)},{x:parseInt(r.xScale(t.x)+.5*a)+r.extra_left_margin+r.chart_margin_left,y:parseInt(r.yScale(t.y)-a+r.chart_margin_top)},{x:parseInt(r.xScale(t.x))+r.extra_left_margin+r.chart_margin_left,y:parseInt(r.yScale(t.y)+r.chart_margin_top)}];return r.line(n)}).attr("fill",r.annotation_background_color)}var i=d3.select(r.selector+" #"+r.container_id+"-"+e).selectAll(r.selector+" .PykCharts-annotation-line").data(t);i.enter().append("path"),i.attr("d",function(t,e){var n=[{x:parseInt(r.xScale(t.x))+r.extra_left_margin+r.chart_margin_left,y:parseInt(r.yScale(t.y)-a+r.chart_margin_top)},{x:parseInt(r.xScale(t.x))+r.extra_left_margin+r.chart_margin_left,y:parseInt(r.yScale(t.y)-a+r.chart_margin_top)}];return r.line(n)}),setTimeout(n,r.transitions.duration()),i.exit().remove()}if(r.line=d3.svg.line().interpolate("linear-closed").x(function(t,e){return t.x}).y(function(t,e){return t.y}),PykCharts["boolean"](r.panels_enable)){if(PykCharts["boolean"](r.panels_enable))for(var e=0;e<r.new_data_length;e++){var n=[],a=12;r.new_data[e].data.map(function(t){t.annotation&&n.push({annotation:t.annotation,x:t.x,y:t.y})}),t(n,e),r.k.annotation(r.selector+" #"+r.container_id+"-"+e,n,r.xScale,r.yScale)}}else{for(var a=12,n=[],e=0;e<r.new_data_length;e++)r.new_data[e].data.map(function(t){t.annotation&&n.push({annotation:t.annotation,x:t.x,y:t.y})});t(n,1),r.k.annotation(r.selector+" #svg-1",n,r.xScale,r.yScale)}},r.renderPanelOfLines=function(){for(var t=0;t<r.new_data_length;t++){var e=r.selector.substr(1,r.selector.length);d3.selectAll("#tooltip-svg-container-"+t+"-pyk-tooltip"+e).remove(),r.k.makeMainDiv(r.selector+" #panels_of_line_main_div",t).tooltip(!0,r.selector,t),r.new_data1=r.new_data[t],r.fill_data[0]=r.new_data1,r.optionalFeature().svgContainer(t).createGroups(t),r.k.crossHair(r.svgContainer,1,r.fill_data,r.fillColor,r.type),r.mouseEvent=new PykCharts.crossHairMovement(r),r.optionalFeature().createChart(null,t).ticks(t).axisContainer(),r.k.xAxis(r.svgContainer,r.xGroup,r.xScale,r.extra_left_margin,r.xdomain,r.x_tick_values).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values).xAxisTitle(r.xGroup).yAxisTitle(r.yGroup),"default"===r.mode&&r.k.yGrid(r.svgContainer,r.group,r.yScale).xGrid(r.svgContainer,r.group,r.xScale)}r.k.exportSVG(r,r.container_id+"-","lineChart",r.panels_enable,r.new_data),r.k.emptyDiv(r.selector)},r.renderLineChart=function(){function t(){PykCharts["boolean"](r.pointer_size)&&(e=d3.max(r.ticks_text_width,function(t){return t})),r.k.exportSVG(r,"#"+r.container_id+"-1","lineChart",void 0,void 0,e)}r.optionalFeature().svgContainer(1).createGroups(1).hightLightOnload(),r.k.crossHair(r.svgContainer,r.new_data_length,r.new_data,r.fillColor,r.type),r.mouseEvent=new PykCharts.crossHairMovement(r),r.optionalFeature().createChart().ticks().axisContainer(),r.k.xAxis(r.svgContainer,r.xGroup,r.xScale,r.extra_left_margin,r.xdomain,r.x_tick_values).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values).xAxisTitle(r.xGroup).yAxisTitle(r.yGroup),PykCharts["boolean"](r.interactive_enable)&&(r.brush=new PykCharts.Configuration.renderBrush(r,r.xScale,r.group,r.reducedHeight)),"default"===r.mode&&r.k.yGrid(r.svgContainer,r.group,r.yScale).xGrid(r.svgContainer,r.group,r.xScale);var e=0;setTimeout(t,r.transitions.duration())},r.dataTransformation(),r.render()},PykCharts.multiD.area=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.crossHair(e),PykCharts.annotation(e),PykCharts.scaleFunction(e),PykCharts.grid(e),e.k.storeInitialDivHeight(),!e.stop){"default"===e.mode&&e.k.loading();var r=n.multiDimensionalCharts;n.stylesheet,t.optional,e.crosshair_enable=t.crosshair_enable?t.crosshair_enable.toLowerCase():r.crosshair_enable,e.curvy_lines_enable=t.curvy_lines_enable?t.curvy_lines_enable.toLowerCase():r.curvy_lines_enable,e.panels_enable="no",e.interpolate=PykCharts["boolean"](e.curvy_lines_enable)?"cardinal":"linear",e.w=e.chart_width-e.chart_margin_left-e.chart_margin_right,e.h=e.chart_height-e.chart_margin_top-e.chart_margin_bottom,e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("area",n),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.compare_data=e.data,e.data_length=e.data.length,e.k.remove_loading_bar(r),"string"===e.axis_x_data_format?e.data_sort_enable="no":(e.data_sort_enable="yes",e.data_sort_type="time"===e.axis_x_data_format?"date":"numerically",e.data_sort_order="ascending"),PykCharts.multiD.areaFunctions(t,e,"area"),e.dataTransformation(),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.stackedArea=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){if(e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.crossHair(e),PykCharts.annotation(e),PykCharts.scaleFunction(e),PykCharts.grid(e),!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var r=n.multiDimensionalCharts;n.stylesheet,t.optional,e.crosshair_enable=t.crosshair_enable?t.crosshair_enable.toLowerCase():r.crosshair_enable,e.curvy_lines_enable=t.curvy_lines_enable?t.curvy_lines_enable.toLowerCase():r.curvy_lines_enable,e.panels_enable="no",e.interpolate=PykCharts["boolean"](e.curvy_lines_enable)?"cardinal":"linear",e.w=e.chart_width-e.chart_margin_left-e.chart_margin_right,e.h=e.chart_height-e.chart_margin_top-e.chart_margin_bottom,e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("area",n),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.compare_data=e.data,e.data_length=e.data.length,e.k.remove_loading_bar(r),"string"===e.axis_x_data_format?e.data_sort_enable="no":(e.data_sort_enable="yes",e.data_sort_type="time"===e.axis_x_data_format?"date":"numerically",e.data_sort_order="ascending"),PykCharts.multiD.areaFunctions(t,e,"stacked_area"),e.dataTransformation(),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.areaFunctions=function(t,e,n){var a=e;a.dataTransformation=function(){a.group_arr=[],a.new_data=[],a.ticks=[],a.x_arr=[];for(var t=0;t<a.data_length;t++)a.group_arr[t]=a.data[t].name;a.uniq_group_arr=a.k.__proto__._unique(a.group_arr),a.uniq_color_arr=[];for(var e=a.uniq_group_arr.length,n=0;n<a.data_length;n++)a.x_arr[n]=a.data[n].x;a.uniq_x_arr=a.k.__proto__._unique(a.x_arr);for(var n=0;e>n;n++)if(a.chart_color[n])a.uniq_color_arr[n]=a.chart_color[n];else{for(var r=0;r<a.data_length;r++)if(a.uniq_group_arr[n]===a.data[r].name&&a.data[r].color){a.uniq_color_arr[n]=a.data[r].color;break}PykCharts["boolean"](a.uniq_color_arr[n])||(a.uniq_color_arr[n]=a.default_color[0])}a.flag=0;for(var n=0;e>n;n++){a.new_data[n]={name:a.uniq_group_arr[n],data:[],color:a.uniq_color_arr[n]};for(var r=0;r<a.data_length;r++)a.uniq_group_arr[n]===a.data[r].name&&a.new_data[n].data.push({x:a.data[r].x,y:a.data[r].y,tooltip:a.data[r].tooltip,annotation:a.data[r].annotation||""})}a.new_data_length=a.new_data.length;for(var i=a.uniq_x_arr.length,o=0;o<a.new_data_length;o++){for(var s=a.k.__proto__._unique(a.x_arr),l=a.new_data[o].data.length,c=0;l>c;c++)for(var n=0;i>n;n++)if(a.new_data[o].data[c].x===s[n]){s[n]=void 0;break}for(var u=0;i>u;u++)if(void 0!=s[u]){var h={x:s[u],y:0,tooltip:0,annotation:""};a.new_data[o].data.splice(u,0,h)}}for(var n=0;n<a.new_data_length;n++)a.new_data[n].data=a.k.__proto__._sortData(a.new_data[n].data,"x","name",a)},a.render=function(){var e=a.selector.substring(1,a.selector.length);a.container_id=e+"_svg",a.dataLineGroup=[],a.dataLineGroupBorder=[],a.multid=new PykCharts.multiD.configuration(a),a.fillColor=new PykCharts.Configuration.fillChart(a,null,t),a.transitions=new PykCharts.Configuration.transition(a),a.border=new PykCharts.Configuration.border(a),a.xdomain=[],a.optional_feature().chartType();try{if("stackedAreaChart"===a.type&&"area"===n)throw"Invalid data in the JSON"}catch(r){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+a.selector+'."'+r+'"  Visit www.pykcharts.com/errors#error_7')}if("time"===a.axis_x_data_format)for(var i=0;i<a.new_data_length;i++)a.new_data[i].data.forEach(function(t){t.x=a.k.dateConversion(t.x),a.xdomain.push(t.x)}),a.data.forEach(function(t){t.x=a.k.dateConversion(t.x)});if("default"===a.mode){var o=a.selector.substr(1,a.selector.length);d3.selectAll("#tooltip-svg-container-1-pyk-tooltip"+o).remove(),a.k.title().backgroundColor(a)["export"](a,"#"+a.container_id+"-1","areaChart").liveData(a).emptyDiv(a.selector).subtitle().makeMainDiv(a.selector,1).tooltip(!0,a.selector,1),a.renderChart(),a.k.xAxis(a.svgContainer,a.xGroup,a.xScale,a.extra_left_margin,a.xdomain,a.x_tick_values,a.legendsGroup_height).yAxis(a.svgContainer,a.yGroup,a.yScale,a.ydomain,a.y_tick_values,a.legendsGroup_width).yGrid(a.svgContainer,a.group,a.yScale,a.legendsGroup_width).xGrid(a.svgContainer,a.group,a.xScale,a.legendsGroup_height).xAxisTitle(a.xGroup,a.legendsGroup_height,a.legendsGroup_width).yAxisTitle(a.yGroup).createFooter().lastUpdatedAt().credits().dataSource(),PykCharts["boolean"](a.annotation_enable)&&a.annotation()}else"infographics"===a.mode&&(a.k.backgroundColor(a)["export"](a,"#"+a.container_id+"-1","areaChart").emptyDiv(a.selector).makeMainDiv(a.selector,1),a.optional_feature().svgContainer(1).legendsContainer().createGroups(1).createChart().axisContainer(),a.k.xAxis(a.svgContainer,a.xGroup,a.xScale,a.extra_left_margin,a.xdomain,a.x_tick_values,a.legendsGroup_height).yAxis(a.svgContainer,a.yGroup,a.yScale,a.ydomain,a.y_tick_values,a.legendsGroup_width).xAxisTitle(a.xGroup,a.legendsGroup_height,a.legendsGroup_width).yAxisTitle(a.yGroup));PykCharts["boolean"](a.interactive_enable)&&(a.brush=new PykCharts.Configuration.renderBrush(a,a.xScale,a.group,a.h)),a.k.exportSVG(a,"#"+a.container_id+"-1","areaChart"),a.mouseEvent=new PykCharts.crossHairMovement(a);var s=a.k.resize(a.svgContainer);a.k.__proto__._ready(s),window.addEventListener("resize",function(t){return a.k.resize(a.svgContainer)})},a.refresh=function(e){a.xdomain=[],a.executeRefresh=function(t){a.data=a.k.__proto__._groupBy("area",t),a.data_length=a.data.length,a.dataTransformation();var e=a.k.checkChangeInData(a.data,a.compare_data);a.compare_data=e[0];var n=e[1];if((n||PykCharts["boolean"](a.zoom_enable)&&a.count>1&&a.count<=a.zoom_level||a.transition_duration)&&(a.k.lastUpdatedAt("liveData"),a.mouseEvent.tooltipHide(),a.mouseEvent.crossHairHide(a.type),a.mouseEvent.axisHighlightHide(a.selector+" .x.axis"),a.mouseEvent.axisHighlightHide(a.selector+" .y.axis")),"time"===a.axis_x_data_format)for(var r=0;r<a.new_data_length;r++)a.new_data[r].data.forEach(function(t){t.x=a.k.dateConversion(t.x),a.xdomain.push(t.x)}),a.data.forEach(function(t){t.x=a.k.dateConversion(t.x)});"stackedAreaChart"===a.type?(document.querySelector(a.selector+" #chart-container-1").innerHTML=null,a.renderChart()):a.optional_feature().createChart("liveData"),a.k.xAxis(a.svgContainer,a.xGroup,a.xScale,a.extra_left_margin,a.xdomain,a.x_tick_values,a.legendsGroup_height).yAxis(a.svgContainer,a.yGroup,a.yScale,a.ydomain,a.y_tick_values,a.legendsGroup_width).yGrid(a.svgContainer,a.group,a.yScale,a.legendsGroup_width).xGrid(a.svgContainer,a.group,a.xScale,a.legendsGroup_height),PykCharts["boolean"](a.annotation_enable)&&a.annotation()},PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeRefresh")):a.k.dataSourceFormatIdentification(t.data,a,"executeRefresh")},a.optional_feature=function(){var t=a.selector.substring(1,a.selector.length),e={chartType:function(){for(var t=1;t<a.data_length;t++)if(a.data[0].x===a.data[t].x){a.type="stackedAreaChart";break}return a.type=a.type||"areaChart",this},svgContainer:function(e){var n=document.getElementById(t);return n.classList.contains("PykCharts-line-chart")||(n.className+=" PykCharts-twoD PykCharts-line-chart PykCharts-multi-series2D"),a.svgContainer=d3.select(a.selector+" #chart-container-"+e).append("svg:svg").attr({id:a.container_id+"-"+e,width:a.chart_width,height:a.chart_height,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+a.chart_width+" "+a.chart_height}),this},createGroups:function(t){return a.group=a.svgContainer.append("g").attr({id:a.type+"-group",transform:"translate("+a.chart_margin_left+","+(a.chart_margin_top+a.legendsGroup_height)+")"}),PykCharts["boolean"](a.chart_grid_y_enable)&&a.group.append("g").attr({id:"ygrid","class":"y grid-line"}),PykCharts["boolean"](a.chart_grid_x_enable)&&a.group.append("g").attr({id:"xgrid","class":"x grid-line"}),a.clip=a.svgContainer.append("svg:clipPath").attr("id","clip"+t+a.selector).append("svg:rect").attr({width:a.w-a.legendsGroup_width,height:a.h-a.legendsGroup_height}),a.chartBody=a.svgContainer.append("g").attr({id:"clipPath","clip-path":"url(#clip"+t+a.selector+" )",transform:"translate("+a.chart_margin_left+","+(a.chart_margin_top+a.legendsGroup_height)+")"}),a.stack_layout=d3.layout.stack().values(function(t){return t.data}),this},legendsContainer:function(t){return PykCharts["boolean"](a.legends_enable)&&"stackedAreaChart"===a.type&&"default"===a.mode?a.legendsGroup=a.svgContainer.append("g").attr("id","stackedArea-legends").style("visibility","visible").attr("transform","translate(0,10)"):(a.legendsGroup_height=0,a.legendsGroup_width=0),this},axisContainer:function(){return(PykCharts["boolean"](a.axis_x_enable)||a.axis_x_title)&&(a.xGroup=a.group.append("g").attr({id:"xaxis","class":"x axis"})),(PykCharts["boolean"](a.axis_y_enable)||a.axis_y_title)&&(a.yGroup=a.group.append("g").attr({id:"yaxis","class":"y axis"})),this},createChart:function(t){function e(t){a.dataLineGroup[t].transition().duration(a.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,v.length+1));return function(e){return a.chart_path(a.new_data[t].data.slice(0,n(e)))}})}function r(t){a.dataLineGroupBorder[t].transition().duration(a.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,a.layers[t].data.length+1));return function(e){return a.chart_path_border(a.layers[t].data.slice(0,n(e)))}})}function i(t){a.dataLineGroup[t].transition().duration(a.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,v.length+1));return function(e){return a.chart_path(a.new_data[t].data.slice(0,n(e)))}})}function o(t){a.dataLineGroupBorder[t].transition().duration(a.transitions.duration()).attrTween("d",function(e){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,a.layers[t].data.length+1));return function(e){return a.chart_path_border(a.layers[t].data.slice(0,n(e)))}})}a.legend_text=[],a.layers=a.stack_layout(a.new_data);var s,l,c,u,h,d,p,f,_,g=[];if(a.count=1,a.x_tick_values=a.k.processXAxisTickValues(),a.y_tick_values=a.k.processYAxisTickValues(),"number"===a.axis_y_data_format?(max=d3.max(a.layers,function(t){return d3.max(t.data,function(t){return t.y0+t.y})}),min=0,h=[min,max],l=a.k.__proto__._domainBandwidth(h,1),c=[a.h-a.legendsGroup_height,0],f=d3.min(a.y_tick_values),_=d3.max(a.y_tick_values),l[0]>f&&(l[0]=f),l[1]<_&&(l[1]=_),a.yScale=a.k.scaleIdentification("linear",l,c)):"string"===a.axis_y_data_format?(a.new_data[0].data.forEach(function(t){l.push(t.y)}),c=[0,a.h],a.yScale=a.k.scaleIdentification("ordinal",l,c,0)):"time"===a.axis_y_data_format&&(a.layers.data.forEach(function(t){t.y0=new Date(t.y0),t.y=new Date(t.y)}),max=d3.max(a.layers,function(t){return d3.max(t.data,function(t){return t.y0+t.y})}),min=0,l=[min,max],c=[a.h,0],f=d3.min(a.y_tick_values,function(t){return new Date(t)}),_=d3.max(a.y_tick_values,function(t){return new Date(t)}),new Date(l[0])>new Date(f)&&(l[0]=f),new Date(l[1])<new Date(_)&&(l[1]=_),a.yScale=a.k.scaleIdentification("time",l,c)),"number"===a.axis_x_data_format?(max=d3.max(a.new_data,function(t){return d3.max(t.data,function(t){return+t.x})}),min=d3.min(a.new_data,function(t){return d3.min(t.data,function(t){return+t.x})}),s=[min,max],g=a.k.__proto__._domainBandwidth(s,2),u=[0,a.w-a.legendsGroup_width],d=d3.min(a.x_tick_values),p=d3.max(a.x_tick_values),g[0]>d&&(g[0]=d),g[1]<p&&(g[1]=p),a.xScale=a.k.scaleIdentification("linear",g,u),a.extra_left_margin=0,a.new_data[0].data.forEach(function(t){a.xdomain.push(+t.x)})):"string"===a.axis_x_data_format?(a.new_data[0].data.forEach(function(t){g.push(t.x)}),u=[0,a.w-a.legendsGroup_width],a.xScale=a.k.scaleIdentification("ordinal",g,u,0),a.extra_left_margin=a.xScale.rangeBand()/2,a.xdomain=a.xScale.domain()):"time"===a.axis_x_data_format&&(max=d3.max(a.new_data,function(t){return d3.max(t.data,function(t){return t.x})}),min=d3.min(a.new_data,function(t){return d3.min(t.data,function(t){return t.x})}),g=[min,max],u=[0,a.w-a.legendsGroup_width],d=d3.min(a.x_tick_values,function(t){return a.k.dateConversion(t)}),p=d3.max(a.x_tick_values,function(t){return a.k.dateConversion(t)}),new Date(g[0])>new Date(d)&&(g[0]=d),new Date(g[1])<new Date(p)&&(g[1]=p),a.xScale=a.k.scaleIdentification("time",g,u),a.extra_left_margin=0,a.new_data[0].data.forEach(function(t){a.xdomain.push(t.x)})),a.ydomain=a.yScale.domain(),a.zoom_event=d3.behavior.zoom(),"string"!==a.axis_y_data_format&&"string"!==a.axis_x_data_format?a.zoom_event.x(a.xScale).y(a.yScale).scale(a.count).on("zoom",a.zoomed):a.zoom_event.y(a.yScale).scale(a.count).on("zoom",a.zoomed),PykCharts["boolean"](a.zoom_enable)&&"default"===a.mode&&(a.svgContainer.call(a.zoom_event),a.svgContainer.on({"wheel.zoom":null,"mousewheel.zoom":null})),a.chart_path=d3.svg.area().x(function(t){return a.xScale(t.x)}).y0(function(t){return a.yScale(t.y0)}).y1(function(t){return a.yScale(t.y0+t.y)}).interpolate(a.interpolate),a.chart_path_border=d3.svg.line().x(function(t){return a.xScale(t.x)}).y(function(t){return a.yScale(t.y0+t.y)}).interpolate(a.interpolate),a.chartPathClass="areaChart"===a.type?"area":"stacked-area","liveData"===t){for(var m=0;m<a.new_data_length;m++){var v=a.new_data[m].data;n=a.chartPathClass+m,a.svgContainer.select("#"+n).datum(a.layers[m].data).attr("transform","translate("+a.extra_left_margin+",0)").style({stroke:a.border.color(),"stroke-width":a.border.width(),"stroke-dasharray":a.border.style()}),e(m),a.svgContainer.select("#border-stacked-area"+m).datum(a.layers[m].data).attr("transform","translate("+a.extra_left_margin+",0)"),r(m)}"areaChart"===a.type&&a.svgContainer.on("mouseout",function(t){a.mouseEvent.tooltipHide(),a.mouseEvent.crossHairHide(a.type),a.mouseEvent.axisHighlightHide(a.selector+" .x.axis"),a.mouseEvent.axisHighlightHide(a.selector+" .y.axis")}).on("mousemove",function(){a.mouseEvent.crossHairPosition(a.new_data,a.xScale,a.yScale,a.dataLineGroup,a.extra_left_margin,a.xdomain,a.type,a.tooltip_mode)})}else{for(var m=0;m<a.new_data_length;m++){var v=a.new_data[m].data;n=a.chartPathClass+m,a.dataLineGroup[m]=a.chartBody.append("path"),a.dataLineGroup[m].datum(a.layers[m].data).attr({"class":a.chartPathClass,id:n,"fill-opacity":function(){return"stackedAreaChart"===a.type&&"saturation"===a.color_mode?(m+1)/a.new_data.length:void 0},"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},transform:"translate("+a.extra_left_margin+",0)","data-id":function(t,e){return a.new_data[e]}}).style("fill",function(t){return a.fillColor.colorPieMS(a.new_data[m],a.type)}),i(m),a.dataLineGroupBorder[m]=a.chartBody.append("path"),a.dataLineGroupBorder[m].datum(a.layers[m].data).attr({"class":"area-border",id:"border-stacked-area"+m,transform:"translate("+a.extra_left_margin+",0)"}).style({stroke:a.border.color(),"stroke-width":a.border.width(),"stroke-dasharray":a.border.style(),"pointer-events":"none"}),o(m)}a.svgContainer.on("mouseout",function(t){a.mouseEvent.tooltipHide(),a.mouseEvent.crossHairHide(a.type),a.mouseEvent.axisHighlightHide(a.selector+" .x.axis"),a.mouseEvent.axisHighlightHide(a.selector+" .y.axis")}).on("mousemove",function(){if("areaChart"===a.type)a.mouseEvent.crossHairPosition(a.new_data,a.xScale,a.yScale,a.dataLineGroup,a.extra_left_margin,a.xdomain,a.type,a.tooltip_mode);else if("stackedAreaChart"===a.type){var t=[];t[0]=d3.select(a.selector+" #"+this.id+" .stacked-area"),a.mouseEvent.crossHairPosition(a.new_data,a.xScale,a.yScale,t,a.extra_left_margin,a.xdomain,a.type,a.tooltipMode,a.color_from_data,"no")}})}return d3.selectAll(a.selector+" ."+a.chartPathClass).on({mouseover:function(){"default"===a.mode&&a.mouseEvent.highlight(a.selector+" ."+a.chartPathClass,this)},mouseout:function(){"default"===a.mode&&a.mouseEvent.highlightHide(a.selector+" ."+a.chartPathClass)}}),this},legends:function(){return PykCharts["boolean"](a.legends_enable)&&"stackedAreaChart"===a.type&&"default"===a.mode&&a.multid.legendsPosition(a,"stackedArea",a.new_data),this}};return e},a.zoomed=function(){for(a.k.isOrdinal(a.svgContainer,".x.axis",a.xScale,a.xdomain,a.extra_left_margin),a.k.isOrdinal(a.svgContainer,".x.grid",a.xScale),a.k.isOrdinal(a.svgContainer,".y.axis",a.yScale,a.ydomain),a.k.isOrdinal(a.svgContainer,".y.grid",a.yScale),i=0;i<a.new_data_length;i++)n=a.chartPathClass+i,a.svgContainer.select(a.selector+" #"+n).attr({"class":a.chartPathClass,d:a.chart_path}),a.svgContainer.select(a.selector+" #border-stacked-area"+i).attr({"class":"area-border",d:a.chart_path_border});"dblclick"===PykCharts.getEvent().sourceEvent.type&&a.count++,a.mouseEvent.tooltipHide(),a.mouseEvent.crossHairHide(a.type),a.mouseEvent.axisHighlightHide(a.selector+" .x.axis"),a.mouseEvent.axisHighlightHide(a.selector+" .y.axis"),a.count===a.zoom_level+1&&a.zoomOut(),PykCharts["boolean"](a.annotation_enable)&&a.annotation()},a.zoomOut=function(){a.optional_feature().createChart("liveData"),a.k.isOrdinal(a.svgContainer,".x.axis",a.xScale,a.xdomain,a.extra_left_margin),a.k.isOrdinal(a.svgContainer,".x.grid",a.xScale),a.k.isOrdinal(a.svgContainer,".y.axis",a.yScale,a.ydomain),a.k.isOrdinal(a.svgContainer,".y.grid",a.yScale)},a.onBrush=function(t,e){a.addEvents(t,e)},a.annotation=function(){function t(){r.attr("class","PykCharts-annotation-line").attr("d",function(t,n){var r=[{x:parseInt(a.xScale(t.x)-.5*e)+a.extra_left_margin+a.chart_margin_left,y:parseInt(a.yScale(t.y)-e+a.chart_margin_top+a.legendsGroup_height)},{x:parseInt(a.xScale(t.x)+.5*e)+a.extra_left_margin+a.chart_margin_left,y:parseInt(a.yScale(t.y)-e+a.chart_margin_top+a.legendsGroup_height)},{x:parseInt(a.xScale(t.x))+a.extra_left_margin+a.chart_margin_left,y:parseInt(a.yScale(t.y)+a.chart_margin_top+a.legendsGroup_height)}];return a.line(r)}).attr("fill",a.annotation_background_color)}a.line=d3.svg.line().interpolate("linear-closed").x(function(t,e){return t.x}).y(function(t,e){return t.y});var e=12,n=[];if("areaChart"===a.type)a.new_data[0].data.map(function(t){t.annotation&&n.push({annotation:t.annotation,x:t.x,y:t.y})});else if("stackedAreaChart"===a.type&&"default"===a.mode)for(i=0;i<a.new_data_length;i++)a.new_data[i].data.map(function(t){t.annotation&&n.push({annotation:t.annotation,x:t.x,y:t.y+t.y0})});var r=a.svgContainer.selectAll(" .PykCharts-annotation-line").data(n);r.enter().append("path"),r.attr("d",function(t,n){var r=[{x:parseInt(a.xScale(t.x))+a.extra_left_margin+a.chart_margin_left,y:parseInt(a.yScale(t.y)-e+a.chart_margin_top+a.legendsGroup_height)},{x:parseInt(a.xScale(t.x))+a.extra_left_margin+a.chart_margin_left,y:parseInt(a.yScale(t.y)-e+a.chart_margin_top+a.legendsGroup_height)}];return a.line(r)}),setTimeout(t,a.transitions.duration()),r.exit().remove(),a.k.annotation(a.selector+" #"+a.container_id+"-1",n,a.xScale,a.yScale)},a.renderChart=function(){a.optional_feature().svgContainer(1).legendsContainer().legends().createGroups(1).createChart().axisContainer(),a.k.crossHair(a.svgContainer,a.new_data_length,a.new_data,a.fillColor,a.type)}},PykCharts.multiD.bar=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({}),a=n.multiDimensionalCharts;this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e),e.data_sort_enable=t.data_sort_enable?t.data_sort_enable.toLowerCase():a.data_sort_enable,e.data_sort_type=PykCharts["boolean"](e.data_sort_enable)&&t.data_sort_type?t.data_sort_type.toLowerCase():a.data_sort_type,e.data_sort_order=PykCharts["boolean"](e.data_sort_enable)&&t.data_sort_order?t.data_sort_order.toLowerCase():a.data_sort_order;try{if("ascending"!==e.data_sort_order&&"descending"!==e.data_sort_order)throw e.data_sort_order=a.data_sort_order,"data_sort_order"}catch(r){e.k.warningHandling(r,"9")}e.stop||(e.k.storeInitialDivHeight(),e.panels_enable="no","default"===e.mode&&e.k.loading(),e.multiD=new PykCharts.multiD.configuration(e),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("bar",t),e.compare_data=e.k.__proto__._groupBy("bar",t),e.axis_x_data_format="number",e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),"time"===e.axis_y_data_format&&(e.axis_y_data_format="string"),e.k.remove_loading_bar(a),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.transformData=function(){var n=[],a=[];if(e.optionalFeatures().sort(),void 0!=t.chart_color&&0!=t.chart_color.length)e.chart_color[0]=t.chart_color[0];else for(var r=0,i=e.data.length;i>r;r++)if(void 0!=e.data[r].color&&""!=e.data[r].color){e.chart_color[0]=e.data[r].color,(void 0==t.axis_y_pointer_color||""==t.axis_y_pointer_color)&&(e.axis_y_pointer_color=e.chart_color[0]);break}e.data.forEach(function(t){t.x="number"===e.axis_x_data_format?parseFloat(t.x):t.x,t.name=t.y,t.color=e.chart_color[0]});for(var o=0,i=e.data.length;i>o;o++)n[o]=e.data[o].group;a=e.k.__proto__._unique(n),e.no_of_groups=a.length},this.render=function(){var n=e.selector.substring(1,e.selector.length),a=n+"_svg";e.border=new PykCharts.Configuration.border(e),e.transitions=new PykCharts.Configuration.transition(e),e.mouseEvent1=new PykCharts.Configuration.mouseEvent(t),e.fillColor=new PykCharts.Configuration.fillChart(e,null,t),e.transformData();try{if(e.no_of_groups>1)throw"Invalid data in the JSON"}catch(r){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+e.selector+'. "'+r+'"  Visit www.pykcharts.com/errors#error_9')}e.map_group_data=e.multiD.mapGroup(e.data),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+a,"barChart").emptyDiv(e.selector).subtitle().makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).createGroups(),e.k.liveData(e).tooltip().createFooter().lastUpdatedAt().credits().dataSource(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().createColumn().axisContainer().ticks(),e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values).xAxisTitle(e.xgroup).yAxisTitle(e.ygroup),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values,null,"bar",null,e),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values,null,null,null,e)):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+a,"barChart").emptyDiv(e.selector).makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).createGroups(),e.k.liveData(e).tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().createColumn().axisContainer().ticks(),e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values).xAxisTitle(e.xgroup).yAxisTitle(e.ygroup),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values,null,"bar",null,e),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values,null,null,null,e)),e.k.exportSVG(e,"#"+a,"barChart");var i=e.k.resize(e.svgContainer);e.k.__proto__._ready(i),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer,"")})},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("bar",t),e.refresh_data=e.k.__proto__._groupBy("bar",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];e.transformData(),"time"===e.axis_x_data_format&&e.data.forEach(function(t){t.x=e.k.dateConversion(t.x)}),e.map_group_data=e.multiD.mapGroup(e.data),a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createColumn().ticks(),e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values,null,"bar"),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values)},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.optionalFeatures=function(){var t=e.selector.substring(1,e.selector.length),n={svgContainer:function(n,a){return document.getElementById(t).className+=" PykCharts-twoD",e.svgContainer=d3.select(e.selector+" #chart-container-"+a).append("svg:svg").attr({width:e.chart_width,height:e.chart_height,id:n,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height}),this},createGroups:function(t){return e.group=e.svgContainer.append("g").attr({
id:"bar-group",transform:"translate("+e.chart_margin_left+","+e.chart_margin_top+")"}),PykCharts["boolean"](e.chart_grid_y_enable)&&e.group.append("g").attr({id:"ygrid","class":"y grid-line"}),this},newYAxis:function(){if(PykCharts["boolean"](e.axis_y_enable)){"right"===e.axis_y_position&&gsvg.attr("transform","translate("+(e.chart_width-e.chart_margin_left-e.chart_margin_right)+",0)");var t=d3.svg.axis().scale(e.yScale).orient(e.axis_y_pointer_position).tickSize(0).outerTickSize(e.axis_y_outer_pointer_length);e.new_yAxisgroup.style("stroke",function(){return e.axis_y_line_color}).call(t),d3.selectAll(e.selector+" .y.new-axis text").style({display:function(){return"none"},stroke:"none"})}return this},axisContainer:function(){return(PykCharts["boolean"](e.axis_x_enable)||e.axis_x_title)&&(e.xgroup=e.group.append("g").attr({id:"xaxis","class":"x axis"}).style("stroke","none")),(PykCharts["boolean"](e.axis_y_enable)||e.axis_y_title)&&(e.ygroup=e.group.append("g").attr({id:"yaxis","class":"y axis"}),e.new_yAxisgroup=e.group.append("g").attr({id:"new-yaxis","class":"y new-axis"}).style("stroke","blue")),this},createColumn:function(){e.x_tick_values=e.k.processXAxisTickValues(),e.y_tick_values=e.k.processYAxisTickValues(),e.reducedWidth=e.chart_width-e.chart_margin_left-e.chart_margin_right,e.reducedHeight=e.chart_height-e.chart_margin_top-e.chart_margin_bottom;var t,n,a,r,i,o,s,l,c=(e.chart_height-e.chart_margin_top-e.chart_margin_bottom,[]),u=[];"number"===e.axis_y_data_format?(r=[0,d3.max(e.data,function(t){return t.y})],u=e.k._domainBandwidth(r,1),n=[e.chart_height-e.chart_margin_top-e.chart_margin_bottom,0],s=d3.min(e.y_tick_values),l=d3.max(e.y_tick_values),u[0]>s&&(u[0]=s),u[1]<l&&(u[1]=l),e.data.sort(function(t,e){return t.y-e.y}),e.yScale1=e.k.scaleIdentification("linear",u,n),y_data1=e.data.map(function(t){return t.y}),y_range1=[0,e.chart_height-e.chart_margin_top-e.chart_margin_bottom],e.yScale=e.k.scaleIdentification("ordinal",y_data1,y_range1,.3),e.extra_top_margin=e.yScale.rangeBand()/2):"string"===e.axis_y_data_format&&(u=e.data.map(function(t){return t.y}),n=[0,e.chart_height-e.chart_margin_top-e.chart_margin_bottom],e.yScale=e.k.scaleIdentification("ordinal",u,n,.3),e.extra_top_margin=e.yScale.rangeBand()/2),"number"===e.axis_x_data_format&&(t=[0,d3.max(e.data,function(t){return+t.x})],c=e.k._domainBandwidth(t,1),a=[0,e.reducedWidth],i=d3.min(e.x_tick_values),o=d3.max(e.x_tick_values),c[0]>i&&(c[0]=i),c[1]<o&&(c[1]=o),e.xScale=e.k.scaleIdentification("linear",c,a),e.extra_left_margin=0),e.x_domain=e.xScale.domain(),e.y_domain=e.yScale.domain(),e.bar=e.group.selectAll(".bar-rect").data(e.data),e.bar.enter().append("g").attr("class","bar-rect").append("svg:rect"),e.bar.attr("class","bar-rect").select("rect").attr({"class":"hbar",y:function(t){return e.yScale(t.y)},x:0,height:function(t){return e.yScale.rangeBand(t.y)},width:0,fill:function(t){return e.fillColor.colorPieMS(t)},stroke:e.border.color(),"stroke-width":e.border.width(),"stroke-dasharray":e.border.style(),"data-id":function(t,e){return t.name}}).on({mouseover:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent1.highlight(e.selector+" .hbar",this),PykCharts["boolean"](e.tooltip_enable)&&(e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip?t.tooltip:t.x)))},mouseout:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent1.highlightHide(e.selector+" .hbar"),PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipHide(t),e.mouseEvent.axisHighlightHide(e.selector+" .y.axis"))},mousemove:function(t){"default"===e.mode&&(PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipPosition(t),e.mouseEvent.axisHighlightShow([t.y],e.selector+" .y.axis",e.y_domain))},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr("width",function(t){return e.xScale(t.x)}),e.bar.exit().remove();var h=d3.transform(d3.select(d3.selectAll(e.selector+" .bar-rect")[0][e.data.length-1]).attr("transform")),d=(h.translate[0],h.translate[1]);return n=[e.reducedHeight-d-e.yScale.rangeBand()/2,d+e.yScale.rangeBand()/2],e.yScale1=e.k.scaleIdentification("linear",u,n),this},ticks:function(){function t(){n.attr({x:function(t){return e.xScale(t.x)},y:function(t){return e.yScale(t.name)+e.yScale.rangeBand(t.y)/2},dx:4,dy:4}).text(function(t){return t.x})}if(e.pointer_size){var n=e.group.selectAll(".ticks_label").data(e.data);n.enter().append("text"),n.attr("class","ticks_label").attr("fill",e.pointer_color).style({"font-weight":e.pointer_weight,"font-size":e.pointer_size+"px","font-family":e.pointer_family}).text(""),setTimeout(t,e.transitions.duration())}return this},sort:function(){if("string"===e.axis_y_data_format){try{if("alphabetically"!==e.data_sort_type&&"numerically"!==e.data_sort_type)throw e.data_sort_type=a.data_sort_type,"data_sort_type"}catch(t){e.k.warningHandling(t,"8")}var n="";switch(e.data_sort_type){case"alphabetically":case"date":n="y";break;case"numerically":n="x"}e.data=e.k.__proto__._sortData(e.data,n,"group",e,"notApplicable")}}};return n}},PykCharts.multiD.groupedBar=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({}),a=n.multiDimensionalCharts;this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e),e.data_sort_enable=t.data_sort_enable?t.data_sort_enable.toLowerCase():a.data_sort_enable,e.data_sort_type=PykCharts["boolean"](e.data_sort_enable)&&t.data_sort_type?t.data_sort_type.toLowerCase():a.data_sort_type,e.data_sort_order=PykCharts["boolean"](e.data_sort_enable)&&t.data_sort_order?t.data_sort_order.toLowerCase():a.data_sort_order;try{if("ascending"!==e.data_sort_order&&"descending"!==e.data_sort_order)throw e.data_sort_order=a.data_sort_order,"data_sort_order"}catch(r){e.k.warningHandling(r,"9")}e.stop||(e.k.storeInitialDivHeight(),e.panels_enable="no","default"===e.mode&&e.k.loading(),e.multiD=new PykCharts.multiD.configuration(e),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("bar",t),e.compare_data=e.k.__proto__._groupBy("bar",t),e.axis_x_data_format="number",e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),"time"===e.axis_y_data_format&&(e.axis_y_data_format="string"),e.k.remove_loading_bar(a),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},e.dataTransformation=function(){PykCharts["boolean"](e.data_sort_enable)&&(e.data=e.optionalFeatures().sort(e.data,"group")),e.group_arr=[],e.new_data=[],e.data_length=e.data.length;for(var t=0;t<e.data_length;t++)e.group_arr[t]=e.data[t].y;e.uniq_group_arr=e.k.__proto__._unique(e.group_arr);for(var n=e.uniq_group_arr.length,a=0;n>a;a++){e.new_data[a]={name:e.uniq_group_arr[a],data:[]};for(var r=0;r<e.data_length;r++)e.uniq_group_arr[a]===e.data[r].y&&e.new_data[a].data.push({x:e.data[r].x,name:e.data[r].group,tooltip:e.data[r].tooltip,color:e.data[r].color})}if(e.new_data_length=e.new_data.length,!PykCharts["boolean"](e.data_sort_enable))for(var i=0;i<e.new_data_length;i++)e.new_data[i].data=e.optionalFeatures().sort(e.new_data[i].data,"name")},e.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("bar",t),e.refresh_data=e.k.__proto__._groupBy("bar",t),e.dataTransformation(),e.optionalFeatures().mapColors();var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createChart().legends().ticks().highlightRect(),e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.yGroup,e.yScale1,e.ydomain,e.y_tick_values,e.legendsGroup_width,"groupbar"),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width)},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},e.render=function(){var e=this,n=e.selector.substring(1,e.selector.length),a=n+"_svg";e.dataTransformation(),e.optionalFeatures().mapColors(),e.border=new PykCharts.Configuration.border(e),e.transitions=new PykCharts.Configuration.transition(e),e.mouseEvent1=new PykCharts.Configuration.mouseEvent(e),e.fillColor=new PykCharts.Configuration.fillChart(e,null,t),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+a,"groupbarChart").emptyDiv(e.selector).subtitle().makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).legendsContainer(1),e.k.liveData(e).tooltip().createFooter().lastUpdatedAt().credits().dataSource(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().legends().createGroups(1).createChart().axisContainer().highlightRect().ticks(),e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height).xAxisTitle(e.xGroup).yAxisTitle(e.yGroup),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.yGroup,e.yScale1,e.ydomain,e.y_tick_values,e.legendsGroup_width,"groupbar"),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width)):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+a,"groupbarChart").emptyDiv(e.selector).makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).legendsContainer(1).createGroups(1).createChart().axisContainer().highlightRect(),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height).xAxisTitle(e.xGroup).yAxisTitle(e.yGroup),"string"!==e.axis_y_data_format?(e.k.yAxis(e.svgContainer,e.yGroup,e.yScale1,e.ydomain,e.y_tick_values,e.legendsGroup_width,"groupbar"),e.optionalFeatures().newYAxis()):e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width)),e.k.exportSVG(e,"#"+a,"groupbarChart");var r=e.k.resize(e.svgContainer);e.k.__proto__._ready(r),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},e.optionalFeatures=function(){var t=this,e=t.selector.substring(1,t.selector.length),n={svgContainer:function(n,a){return document.getElementById(e).className+=" PykCharts-twoD",t.svgContainer=d3.select(t.selector+" #chart-container-"+a).append("svg:svg").attr({width:t.chart_width,height:t.chart_height,id:n,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+t.chart_width+" "+t.chart_height}),this},createGroups:function(e){return t.group=t.svgContainer.append("g").attr({id:"groupedBar-group",transform:"translate("+t.chart_margin_left+","+(t.chart_margin_top+t.legendsGroup_height)+")"}),this},legendsContainer:function(e){return PykCharts["boolean"](t.legends_enable)&&"default"===t.mode?t.legendsGroup=t.svgContainer.append("g").attr({id:"groupedBar-legends","class":"legends",transform:"translate(0,10)"}).style("visibility","hidden"):(t.legendsGroup_height=0,t.legendsGroup_width=0),this},axisContainer:function(){return(PykCharts["boolean"](t.axis_x_enable)||t.axis_x_title)&&(t.xGroup=t.group.append("g").attr({"class":"x axis",id:"xaxis"}).style("stroke","black")),(PykCharts["boolean"](t.axis_y_enable)||t.axis_y_title)&&(t.yGroup=t.group.append("g").attr({"class":"y axis",id:"yaxis"}).style("stroke","blue"),t.new_yAxisgroup=t.group.append("g").attr({"class":"y new-axis",id:"new-yaxis"}).style("stroke","blue")),this},createChart:function(){t.reduced_width=t.chart_width-t.chart_margin_left-t.chart_margin_right-t.legendsGroup_width,t.reduced_height=t.chart_height-t.chart_margin_top-t.chart_margin_bottom-t.legendsGroup_height,t.getuniqueGroups=t.data.map(function(t){return t.group}),t.getuniqueGroups=t.k.__proto__._unique(t.getuniqueGroups),t.getuniqueGroups.sort(function(t,e){return t>e?1:-1}),t.x_tick_values=t.k.processXAxisTickValues(),t.y_tick_values=t.k.processYAxisTickValues();var e,n,a,r,i,o,s,l,c,u=[];"number"===t.axis_y_data_format?(max=d3.max(t.new_data,function(t){return t.name}),min=d3.min(t.new_data,function(t){return t.name}),i=[min,max],n=i,l=d3.min(t.y_tick_values),c=d3.max(t.y_tick_values),n[0]>l&&(n[0]=l),n[1]<c&&(n[1]=c),t.new_data.sort(function(t,e){return t.name-e.name}),y_data1=t.new_data.map(function(t){return t.name}),y_range1=[t.reduced_height,0],t.yScale=t.k.scaleIdentification("ordinal",y_data1,y_range1,.3),t.extra_top_margin=t.yScale.rangeBand()/2,t.y1=d3.scale.ordinal().domain(t.getuniqueGroups).rangeRoundBands([t.yScale.rangeBand(),0]),t.extra_top_margin=0):"string"===t.axis_y_data_format&&(n=t.new_data.map(function(t){return t.name}),a=[0,t.reduced_height],t.yScale=t.k.scaleIdentification("ordinal",n,a,.3),t.extra_top_margin=t.yScale.rangeBand()/2,t.y1=d3.scale.ordinal().domain(t.getuniqueGroups).rangeRoundBands([0,t.yScale.rangeBand()])),"number"===t.axis_x_data_format&&(t.max_x_value=d3.max(t.new_data,function(t){return d3.max(t.data,function(t){return t.x})}),e=[0,t.max_x_value],u=t.k._domainBandwidth(e,1),r=[0,t.reduced_width],o=d3.min(t.x_tick_values),s=d3.max(t.x_tick_values),u[0]>o&&(u[0]=o),u[1]<s&&(u[1]=s),t.xScale=t.k.scaleIdentification("linear",u,r),t.extra_left_margin=0),t.xdomain=t.xScale.domain(),t.ydomain=t.yScale.domain(),t.highlight_x_positions=[];var h=t.group.selectAll(".groupedBar-rect").data(t.new_data);h.enter().append("g").attr("class","groupedBar-rect"),t.highlight_y_positions="",h.attr("transform",function(e){return t.optionalFeatures().checkIfHighLightDataExists(e.name),t.highlight_group_exits&&(t.flag=!0,t.highlight_y_positions=t.yScale(e.name)),"translate(0,"+t.yScale(e.name)+")"}).on({mouseout:function(e){"default"===t.mode&&(PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlightGroupHide(t.selector+" .groupedBar-rect","rect"),t.mouseEvent.axisHighlightHide(t.selector+" .y.axis"))},mousemove:function(e){"default"===t.mode&&(PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlightGroup(t.selector+" .groupedBar-rect",this,"rect"),t.mouseEvent.axisHighlightShow(e.name,t.selector+" .y.axis",t.ydomain,"bar"))}});var d=h.selectAll("rect").data(function(t){return t.data});d.enter().append("rect"),d.attr({height:0,y:function(e){return t.y1(e.name)},x:0,width:0,height:function(e){return.98*t.y1.rangeBand()},fill:function(e,n){return t.fillColor.colorGroup(e)},"fill-opacity":function(e,n){return"saturation"===t.color_mode?(n+1)/t.no_of_groups:1},stroke:t.border.color(),"stroke-width":t.border.width(),"stroke-dasharray":t.border.style(),"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,e){return t.name}}).on({mouseover:function(e){if("default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)){var n=e.tooltip?e.tooltip:e.x;t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(n)}},mouseout:function(e){"default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)&&t.mouseEvent.tooltipHide(e)},mousemove:function(e){"default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)&&t.mouseEvent.tooltipPosition(e)},click:function(e,n){PykCharts["boolean"](t.click_enable)&&t.addEvents(e.name,d3.select(this).attr("data-id"))}}).transition().duration(t.transitions.duration()).attr("width",function(e){return t.xScale(e.x)}),d.exit().remove(),h.exit().remove();var p=d3.transform(d3.select(d3.selectAll(".groupedBar-rect")[0][t.new_data.length-1]).attr("transform")),f=(p.translate[0],p.translate[1]);return a=[t.reduced_height-f-2*t.y1.rangeBand(),f+2*t.y1.rangeBand()],t.yScale1=t.k.scaleIdentification("linear",n,a),this},ticks:function(){function e(){a.attr({x:function(e){return t.xScale(e.x)},y:function(e){return t.y1(e.name)+t.y1.rangeBand()/2},dx:4,dy:2}).transition().text(function(t){return t.x?t.x.toFixed():void 0}).attr({"pointer-events":"none"}).text(function(e){return e.x&&(t.txt_width=this.getBBox().width,t.txt_height=this.getBBox().height,e.x&&t.txt_width<t.xScale(e.x)&&t.txt_height<t.y1.rangeBand())?e.x:void 0})}if(t.pointer_size){var n=t.group.selectAll(".groupedBar-ticks").data(t.new_data);n.enter().append("g").attr("class","groupedBar-ticks"),n.attr("transform",function(e){return"translate(0,"+t.yScale(e.name)+")"});var a=n.selectAll(".ticks_label").data(function(t){return t.data});a.enter().append("text"),a.attr("class","ticks_label").style("font-weight",t.pointer_weight).style("font-size",t.pointer_size+"px").attr("fill",t.pointer_color).style("font-family",t.pointer_family).text(""),setTimeout(e,t.transitions.duration()),a.exit().remove(),n.exit().remove()}return this},mapColors:function(){t.no_of_groups=d3.max(t.new_data,function(t){return t.data.length});for(var e=0;e<t.new_data_length;e++)if(t.new_data[e].data.length===t.no_of_groups){t.group_data=t.new_data[e].data,t.group_data_length=t.group_data.length;break}for(var e=0;e<t.group_data_length;e++)"color"===t.color_mode&&t.chart_color[e]?t.group_data[e].color=t.chart_color[e]:t.group_data[e].color=t.default_color[0];t.new_data.forEach(function(e){e.data.forEach(function(e){for(var n=0;n<t.group_data_length;n++)if(t.group_data[n].name===e.name){e.color=t.group_data[n].color;break}})})},legends:function(){if(PykCharts["boolean"](t.legends_enable)){var e,n=t.group_data;e=n.map(function(t){return t.color}),n=n.map(function(t){return t.name}),n=t.k.__proto__._unique(n),t.multiD.legendsPosition(t,"groupBar",n,e)}return this},checkIfHighLightDataExists:function(e){return t.highlight&&("number"===t.axis_y_data_format?t.highlight_group_exits=t.highlight===e:"string"===t.axis_y_data_format&&(t.highlight_group_exits=t.highlight.toLowerCase()===e.toLowerCase())),this},highlightRect:function(){function e(){y=t.highlight_y_positions-5;var e=t.group.selectAll(".highlight-groupedBar-rect").data([t.highlight]);e.enter().append("rect"),e.attr("class","highlight-groupedBar-rect").attr({x:0,y:y,height:t.y1.rangeBand()*t.group_data_length+10,width:t.reduced_width+5,fill:"none",stroke:t.highlight_color,"stroke-width":"1.5px","stroke-dasharray":"5,5","stroke-opacity":1}),e.exit().remove(),PykCharts["boolean"](t.highlight_y_positions)?highlight_array=t.highlight:e.remove()}return t.flag&&setTimeout(e,t.transitions.duration()),this},newYAxis:function(){if(PykCharts["boolean"](t.axis_y_enable)){"right"===t.axis_y_position&&t.new_yAxisgroup.attr("transform","translate("+(t.chart_width-t.chart_margin_left-t.chart_margin_right-t.legendsGroup_width)+",0)");var e=d3.svg.axis().scale(t.yScale).orient(t.axis_y_pointer_position).tickSize(0).outerTickSize(t.axis_y_outer_pointer_length);t.new_yAxisgroup.style("stroke",function(){return t.axis_y_line_color}).call(e),d3.selectAll(t.selector+" .y.new-axis text").style({display:function(){return"none"},stroke:"none"})}return this},sort:function(e,n){if("string"===t.axis_y_data_format){try{if("alphabetically"!==t.data_sort_type)throw t.data_sort_type=a.data_sort_type,"data_sort_type"}catch(r){t.k.warningHandling(r,"8")}return e=t.k.__proto__._sortData(e,"y",n,t)}return e}};return n}},PykCharts.multiD.column=function(t){var e=this;e.interval="",new PykCharts.Configuration.Theme({}),this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e),PykCharts.grid(e),e.stop||(e.panels_enable="no",e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.multiD=new PykCharts.multiD.configuration(e),e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("column",n),e.compare_data=e.k.__proto__._groupBy("column",n),e.axis_y_data_format="number",PykCharts["boolean"](e.axis_x_formatting_enable)?e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data):e.axis_x_data_format="string",t.axis_x_tick_format&&(e.axis_x_data_format="string"),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.k.remove_loading_bar(r),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},this.transformData=function(){var n=[],a=[];if(0!=t.chart_color&&void 0!=t.chart_color)e.chart_color[0]=t.chart_color[0];else for(var r=0,i=e.data.length;i>r;r++)if(""!=e.data[r].color&&void 0!=e.data[r].color){e.chart_color[0]=e.data[r].color,(void 0==t.axis_x_pointer_color||""==t.axis_x_pointer_color)&&(e.axis_x_pointer_color=e.chart_color[0]);break}e.data.forEach(function(t){t.name=t.x,t.color=e.chart_color[0]});for(var o=0,i=e.data.length;i>o;o++)n[o]=e.data[o].group;a=e.k.__proto__._unique(n),e.no_of_groups=a.length},this.render=function(){var n=e.selector.substring(1,e.selector.length),a=n+"_svg";e.border=new PykCharts.Configuration.border(e),e.transitions=new PykCharts.Configuration.transition(e),e.mouseEvent1=new PykCharts.Configuration.mouseEvent(t),e.fillColor=new PykCharts.Configuration.fillChart(e,null,t),e.transformData();try{if(e.no_of_groups>1)throw"Invalid data in the JSON"}catch(r){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+e.selector+'. "'+r+'"  Visit www.pykcharts.com/errors#error_8')}"time"===e.axis_x_data_format&&e.data.forEach(function(t){t.x=e.k.dateConversion(t.x)}),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+a,"columnChart").emptyDiv(e.selector).subtitle().makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).createGroups(),e.k.liveData(e).tooltip().createFooter().lastUpdatedAt().credits().dataSource(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().createColumn().axisContainer(),e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values).yGrid(e.svgContainer,e.group,e.yScale).xAxisTitle(e.xgroup).yAxisTitle(e.ygroup),"string"!==e.axis_x_data_format?(e.k.xAxis(e.svgContainer,e.xgroup,e.xScale1,e.extra_left_margin,e.x_domain,e.x_tick_values,null,"bar",e),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values,null,null,e)):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+a,"columnChart").emptyDiv(e.selector).makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).createGroups(),e.k.liveData(e).tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().createColumn().axisContainer(),e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values).xAxisTitle(e.xgroup).yAxisTitle(e.ygroup),"string"!==e.axis_x_data_format?(e.k.xAxis(e.svgContainer,e.xgroup,e.xScale1,e.extra_left_margin,e.x_domain,e.x_tick_values,null,"bar"),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values)),e.k.exportSVG(e,"#"+a,"columnChart");var i=e.k.resize(e.svgContainer);e.k.__proto__._ready(i),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("column",t),e.refresh_data=e.k.__proto__._groupBy("column",t);var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];e.transformData(),"time"===e.axis_x_data_format&&e.data.forEach(function(t){t.x=e.k.dateConversion(t.x),t.color=e.chart_color[0]});try{if(e.no_of_groups>1)throw"Invalid data in the JSON"}catch(r){return void console.error("%c[Error - Pykih Charts] ","color: red;font-weight:bold;font-size:14px"," at "+e.selector+'. "'+r+'"  Visit www.pykcharts.com/errors#error_8')}a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createColumn(),e.k.yAxis(e.svgContainer,e.ygroup,e.yScale,e.y_domain,e.y_tick_values).yGrid(e.svgContainer,e.group,e.yScale),"string"!==e.axis_x_data_format?(e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values,null,"bar"),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xgroup,e.xScale,e.extra_left_margin,e.x_domain,e.x_tick_values)},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.optionalFeatures=function(){var t=e.selector.substring(1,e.selector.length),n={svgContainer:function(n,a){return document.getElementById(t).className+=" PykCharts-twoD",e.svgContainer=d3.select(e.selector+" #chart-container-"+a).append("svg:svg").attr({width:e.chart_width,height:e.chart_height,id:n,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+e.chart_width+" "+e.chart_height}),this},createGroups:function(t){return e.group=e.svgContainer.append("g").attr({id:"column-group",transform:"translate("+e.chart_margin_left+","+e.chart_margin_top+")"}),PykCharts["boolean"](e.chart_grid_y_enable)&&e.group.append("g").attr({id:"ygrid","class":"y grid-line"}),this},axisContainer:function(){return(PykCharts["boolean"](e.axis_x_enable)||e.axis_x_title)&&(e.xgroup=e.group.append("g").attr({id:"xaxis","class":"x axis"}).style("stroke","none")),(PykCharts["boolean"](e.axis_y_enable)||e.axis_y_title)&&(e.ygroup=e.group.append("g").attr({id:"yaxis","class":"y axis"}),e.new_xAxisgroup=e.group.append("g").attr({"class":"x new-axis",id:"new-xaxis"}).style("stroke","blue")),this},createColumn:function(){e.x_tick_values=e.k.processXAxisTickValues(),e.y_tick_values=e.k.processYAxisTickValues(),e.reducedWidth=e.chart_width-e.chart_margin_left-e.chart_margin_right;var t,n,a,r,i,o,s,l,c=e.chart_height-e.chart_margin_top-e.chart_margin_bottom,u=[],h=[];"number"===e.axis_y_data_format?(r=[0,d3.max(e.data,function(t){return t.y})],h=e.k._domainBandwidth(r,1),n=[e.chart_height-e.chart_margin_top-e.chart_margin_bottom,0],s=d3.min(e.y_tick_values),l=d3.max(e.y_tick_values),h[0]>s&&(h[0]=s),h[1]<l&&(h[1]=l),e.yScale=e.k.scaleIdentification("linear",h,n),e.extra_top_margin=0):"string"===e.axis_y_data_format?(h=e.data.map(function(t){return t.y}),n=[0,e.chart_height-e.chart_margin_top-e.chart_margin_bottom],e.yScale=e.k.scaleIdentification("ordinal",h,n,.3),e.extra_top_margin=e.yScale.rangeBand()/2):"time"===e.axis_y_data_format&&(h=d3.extent(e.data,function(t){return parseDate(t.y)}),s=d3.min(e.y_tick_values,function(t){return new Date(t)}),l=d3.max(e.y_tick_values,function(t){return new Date(t)}),new Date(h[0])>new Date(s)&&(h[0]=s),new Date(h[1])<new Date(l)&&(h[1]=max__tick_value),n=[e.chart_height-e.chart_margin_top-e.chart_margin_bottom,0],e.yScale=e.k.scaleIdentification("time",h,n),e.extra_top_margin=0),"number"===e.axis_x_data_format?(t=[d3.min(e.data,function(t){return+t.x}),d3.max(e.data,function(t){return+t.x})],u=e.k._domainBandwidth(t),a=[0,e.reducedWidth],i=d3.min(e.x_tick_values),o=d3.max(e.x_tick_values),u[0]>i&&(u[0]=i),u[1]<o&&(u[1]=o),e.data.sort(function(t,e){return t.x-e.x}),e.xScale1=e.k.scaleIdentification("linear",u,a),x_data1=e.data.map(function(t){return t.x}),x_range1=[0,e.reducedWidth],e.xScale=e.k.scaleIdentification("ordinal",x_data1,x_range1,.3),e.extra_left_margin=e.xScale.rangeBand()/2):"string"===e.axis_x_data_format?(u=e.data.map(function(t){return t.x}),a=[0,e.reducedWidth],e.xScale=e.k.scaleIdentification("ordinal",u,a,.3),e.extra_left_margin=e.xScale.rangeBand()/2):"time"===e.axis_x_data_format&&(max=d3.max(e.data,function(t){return t.x}),min=d3.min(e.data,function(t){return t.x}),t=[min.getTime(),max.getTime()],i=d3.min(e.x_tick_values,function(t){return e.k.dateConversion(t)}),o=d3.max(e.x_tick_values,function(t){return e.k.dateConversion(t)}),u[0]>i&&(u[0]=i),u[1]<o&&(u[1]=o),a=[0,e.reducedWidth],e.xScale=e.k.scaleIdentification("time",t,a),e.data.sort(function(t,e){return t.x<e.x?-1:t.x>e.x?1:void 0}),e.xScale1=e.k.scaleIdentification("linear",u,a),x_data1=e.data.map(function(t){return t.x}),x_range1=[0,e.reducedWidth],e.xScale=e.k.scaleIdentification("ordinal",x_data1,x_range1,.3),e.extra_left_margin=e.xScale.rangeBand()/2),e.x_domain=e.xScale.domain(),e.y_domain=e.yScale.domain(),e.bar=e.group.selectAll(".column-rect").data(e.data),e.bar.enter().append("g").attr("class","column-rect").append("svg:rect"),e.bar.attr("class","column-rect").select("rect").attr({"class":"vcolumn",x:function(t){return e.xScale(t.x)},y:c,height:0,width:function(t){return e.xScale.rangeBand(t.x)},fill:function(t){return e.fillColor.colorPieMS(t)},stroke:e.border.color(),"stroke-width":e.border.width(),"stroke-dasharray":e.border.style(),"data-id":function(t,e){return t.name}}).on({mouseover:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent1.highlight(e.selector+" .vcolumn",this),PykCharts["boolean"](e.tooltip_enable)&&(e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(t.tooltip?t.tooltip:e.k.appendUnits(t.y))))},mouseout:function(t){"default"===e.mode&&(PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent1.highlightHide(e.selector+" .vcolumn"),PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipHide(t),e.mouseEvent.axisHighlightHide(e.selector+" .x.axis"))},mousemove:function(t){"default"===e.mode&&(PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipPosition(t),e.mouseEvent.axisHighlightShow(t.x,e.selector+" .x.axis",e.x_domain))},click:function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.name,d3.select(this).attr("data-id"))}}).transition().duration(e.transitions.duration()).attr({y:function(t){return e.yScale(t.y)},height:function(t){return c-e.yScale(t.y)}}),e.bar.exit().remove();var d=d3.transform(d3.select(d3.selectAll(e.selector+" .column-rect")[0][e.data.length-1]).attr("transform")),p=d.translate[0];return d.translate[1],a=[p+e.xScale.rangeBand(),e.reducedWidth-p-e.xScale.rangeBand()],e.xScale1=e.k.scaleIdentification("linear",u,a),this},newXAxis:function(){if(PykCharts["boolean"](e.axis_x_enable)){"bottom"===e.axis_x_position&&e.new_xAxisgroup.attr("transform","translate(0,"+(e.chart_height-e.chart_margin_top-e.chart_margin_bottom)+")");var t=d3.svg.axis().scale(e.xScale).orient(e.axis_x_pointer_position).tickSize(0).ticks(e.axis_x_no_of_axis_value).outerTickSize(e.axis_x_outer_pointer_length);e.new_xAxisgroup.style("stroke",function(){return e.axis_x_line_color}).call(t),d3.selectAll(e.selector+" .x.new-axis text").style({display:function(){return"none"},stroke:"none"})}return this}};return n}},PykCharts.multiD.groupedColumn=function(t){var e=this;e.interval="",new PykCharts.Configuration.Theme({}),this.execute=function(n){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e),PykCharts.grid(e),e.stop||(e.panels_enable="no",e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.multiD=new PykCharts.multiD.configuration(e),e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("column",t),e.compare_data=e.k.__proto__._groupBy("column",t),e.axis_y_data_format="number",e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.k.remove_loading_bar(a),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},e.dataTransformation=function(){e.group_arr=[],e.new_data=[],e.data_length=e.data.length;for(var t=0;t<e.data_length;t++)e.group_arr[t]=e.data[t].x;e.uniq_group_arr=e.k.__proto__._unique(e.group_arr);for(var n=e.uniq_group_arr.length,a=0;n>a;a++){e.new_data[a]={name:e.uniq_group_arr[a],data:[]};for(var r=0;r<e.data_length;r++)e.uniq_group_arr[a]===e.data[r].x&&e.new_data[a].data.push({
y:e.data[r].y,name:e.data[r].group,tooltip:e.data[r].tooltip,color:e.data[r].color})}e.new_data_length=e.new_data.length},e.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("column",t),e.refresh_data=e.k.__proto__._groupBy("column",t),e.map_group_data=e.multiD.mapGroup(e.data),e.dataTransformation(),e.optionalFeatures().mapColors(),"time"===e.axis_x_data_format&&(e.new_data.forEach(function(t){t.name=e.k.dateConversion(t.name)}),e.data.forEach(function(t){t.x=e.k.dateConversion(t.x)}));var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createChart().legends().highlightRect(),e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width).yGrid(e.svgContainer,e.group,e.yScale,e.legendsGroup_width),"string"!==e.axis_y_data_format?(e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height,"groupcolumn"),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height)},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},e.render=function(){var e=this,n=e.selector.substring(1,e.selector.length),a=n+"_svg";e.map_group_data=e.multiD.mapGroup(e.data),e.dataTransformation(),e.optionalFeatures().mapColors(),"time"===e.axis_x_data_format&&(e.new_data.forEach(function(t){t.name=e.k.dateConversion(t.name)}),e.data.forEach(function(t){t.x=e.k.dateConversion(t.x)})),e.border=new PykCharts.Configuration.border(e),e.transitions=new PykCharts.Configuration.transition(e),e.mouseEvent1=new PykCharts.Configuration.mouseEvent(e),e.fillColor=new PykCharts.Configuration.fillChart(e,null,t),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+a,"groupColumnChart").emptyDiv(e.selector).subtitle().makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).legendsContainer(1),e.k.liveData(e).tooltip().createFooter().lastUpdatedAt().credits().dataSource(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().legends().createGroups(1).createChart().axisContainer().highlightRect(),e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width).yGrid(e.svgContainer,e.group,e.yScale,e.legendsGroup_width).xAxisTitle(e.xGroup).yAxisTitle(e.yGroup),"string"!==e.axis_y_data_format?(e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height,"groupcolumn"),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height)):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+a,"groupColumnChart").emptyDiv(e.selector).makeMainDiv(e.selector,1),e.optionalFeatures().svgContainer(a,1).legendsContainer(1).createGroups(1).createChart().axisContainer().highlightRect(),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.k.yAxis(e.svgContainer,e.yGroup,e.yScale,e.ydomain,e.y_tick_values,e.legendsGroup_width).xAxisTitle(e.xGroup).yAxisTitle(e.yGroup),"string"!==e.axis_y_data_format?(e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height,"groupcolumn"),e.optionalFeatures().newXAxis()):e.k.xAxis(e.svgContainer,e.xGroup,e.xScale,e.extra_left_margin,e.xdomain,e.x_tick_values,e.legendsGroup_height)),e.k.exportSVG(e,"#"+a,"groupColumnChart");var r=e.k.resize(e.svgContainer);e.k.__proto__._ready(r),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},e.optionalFeatures=function(){var t=this,e=t.selector.substring(1,t.selector.length),n={svgContainer:function(n,a){return document.getElementById(e).className+=" PykCharts-twoD",t.svgContainer=d3.select(t.selector+" #chart-container-"+a).append("svg:svg").attr({width:t.chart_width,height:t.chart_height,id:n,"class":"svgcontainer",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+t.chart_width+" "+t.chart_height}),this},createGroups:function(e){return t.group=t.svgContainer.append("g").attr({id:"groupedColumn-group",transform:"translate("+t.chart_margin_left+","+(t.chart_margin_top+t.legendsGroup_height)+")"}),PykCharts["boolean"](t.chart_grid_y_enable)&&t.group.append("g").attr({id:"ygrid","class":"y grid-line"}),this},legendsContainer:function(e){return PykCharts["boolean"](t.legends_enable)&&"default"===t.mode?t.legendsGroup=t.svgContainer.append("g").attr({id:"groupedColumn-legends","class":"legends",transform:"translate(0,10)"}).style("visibility","hidden"):(t.legendsGroup_height=0,t.legendsGroup_width=0),this},axisContainer:function(){return(PykCharts["boolean"](t.axis_x_enable)||t.axis_x_title)&&(t.xGroup=t.group.append("g").attr({"class":"x axis",id:"xaxis"}).style("stroke","black"),t.new_xAxisgroup=t.group.append("g").attr({"class":"x new-axis",id:"new-xaxis"}).style("stroke","blue")),(PykCharts["boolean"](t.axis_y_enable)||t.axis_y_title)&&(t.yGroup=t.group.append("g").attr({"class":"y axis",id:"yaxis"}).style("stroke","blue")),this},createChart:function(){t.reduced_width=t.chart_width-t.chart_margin_left-t.chart_margin_right-t.legendsGroup_width,t.reduced_height=t.chart_height-t.chart_margin_top-t.chart_margin_bottom-t.legendsGroup_height,t.getuniqueGroups=t.data.map(function(t){return t.group}),t.getuniqueGroups=t.k.__proto__._unique(t.getuniqueGroups),t.x_tick_values=t.k.processXAxisTickValues(),t.y_tick_values=t.k.processYAxisTickValues();var e,n,a,r,i,o,s,l,c,u=[];"number"===t.axis_y_data_format&&(t.max_y_value=d3.max(t.new_data,function(t){return d3.max(t.data,function(t){return t.y})}),i=[0,t.max_y_value],n=t.k.__proto__._domainBandwidth(i,1),l=d3.min(t.y_tick_values),c=d3.max(t.y_tick_values),n[0]>l&&(n[0]=l),n[1]<c&&(n[1]=c),a=[t.reduced_height,0],t.yScale=t.k.scaleIdentification("linear",n,a)),"number"===t.axis_x_data_format?(max=d3.max(t.new_data,function(t){return t.name}),min=d3.min(t.new_data,function(t){return t.name}),e=[min,max],u=[min,max],o=d3.min(t.x_tick_values),s=d3.max(t.x_tick_values),u[0]>o&&(u[0]=o),u[1]<s&&(u[1]=s),t.new_data.sort(function(t,e){return t.name-e.name}),r=[0,t.reduced_width],t.xScale1=t.k.scaleIdentification("linear",u,r),x_data1=t.new_data.map(function(t){return t.name}),x_range1=[0,t.reduced_width],t.xScale=t.k.scaleIdentification("ordinal",x_data1,x_range1,.2),t.extra_left_margin=t.xScale.rangeBand()/2,t.xdomain=t.xScale.domain(),t.x1=d3.scale.ordinal().domain(t.getuniqueGroups).rangeRoundBands([0,t.xScale.rangeBand()])):"string"===t.axis_x_data_format?(u=t.new_data.map(function(t){return t.name}),r=[0,t.reduced_width],t.xScale=t.k.scaleIdentification("ordinal",u,r,.2),t.extra_left_margin=t.xScale.rangeBand()/2,t.xdomain=t.xScale.domain(),t.x1=d3.scale.ordinal().domain(t.getuniqueGroups).rangeRoundBands([0,t.xScale.rangeBand()])):"time"===t.axis_x_data_format&&(max=d3.max(t.new_data,function(t){return t.name}),min=d3.min(t.new_data,function(t){return t.name}),e=[min.getTime(),max.getTime()],u=[min,max],r=[0,t.reduced_width],o=d3.min(t.x_tick_values,function(e){return e=t.k.dateConversion(e)}),s=d3.max(t.x_tick_values,function(e){return e=t.k.dateConversion(e)}),u[0]>o&&(u[0]=o),u[1]<s&&(u[1]=s),t.xScale=t.k.scaleIdentification("time",u,r),t.new_data.sort(function(t,e){return new Date(t.name)<new Date(e.name)?-1:new Date(t.name)>new Date(e.name)?1:void 0}),x_data1=t.new_data.map(function(t){return t.name}),x_range1=[0,t.reduced_width],t.xScale1=t.k.scaleIdentification("ordinal",x_data1,x_range1,.2),x_data1=t.new_data.map(function(t){return t.name}),x_range1=[0,t.reduced_width],t.xScale=t.k.scaleIdentification("ordinal",x_data1,x_range1,.2),t.extra_left_margin=t.xScale.rangeBand()/2,t.xdomain=t.xScale.domain(),t.x1=d3.scale.ordinal().domain(t.getuniqueGroups).rangeRoundBands([0,t.xScale.rangeBand()])),t.xdomain=t.xScale.domain(),t.ydomain=t.yScale.domain(),t.highlight_y_positions=[];var h=t.group.selectAll(".groupedColumn-rect").data(t.new_data);h.enter().append("g").attr("class","groupedColumn-rect"),h.attr("transform",function(e){return t.optionalFeatures().checkIfHighLightDataExists(e.name),t.highlight_group_exits&&(t.flag=!0,t.highlight_x_positions=t.xScale(e.name)),"translate("+t.xScale(e.name)+",0)"}).on({mouseout:function(e){"default"===t.mode&&(PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlightGroupHide(t.selector+" .groupedColumn-rect","rect"),t.mouseEvent.axisHighlightHide(t.selector+" .x.axis"))},mousemove:function(e){"default"===t.mode&&(PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlightGroup(t.selector+" .groupedColumn-rect",this,"rect"),t.mouseEvent.axisHighlightShow(e.name,t.selector+" .x.axis",t.xdomain))}});var d=h.selectAll("rect").data(function(t){return t.data});d.enter().append("rect"),d.attr("height",0).attr({x:function(e){return t.x1(e.name)},y:t.reduced_height,width:function(e){return.98*t.x1.rangeBand()},fill:function(e,n){return t.fillColor.colorGroup(e)},"fill-opacity":function(e,n){return"saturation"===t.color_mode?(n+1)/t.no_of_groups:1},stroke:t.border.color(),"srtoke-width":t.border.width(),"stroke-dasharray":t.border.style(),"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,e){return t.name}}).on({mouseover:function(e){if("default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)){var n=e.tooltip?e.tooltip:e.y;t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(n)}},mouseout:function(e){"default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)&&t.mouseEvent.tooltipHide(e)},mousemove:function(e){"default"===t.mode&&PykCharts["boolean"](t.tooltip_enable)&&t.mouseEvent.tooltipPosition(e)},click:function(e,n){PykCharts["boolean"](t.click_enable)&&t.addEvents(e.name,d3.select(this).attr("data-id"))}}).transition().duration(t.transitions.duration()).attr({height:function(e){return t.reduced_height-t.yScale(e.y)},y:function(e){return t.flag&&t.highlight_y_positions.push(t.yScale(e.y)),t.yScale(e.y)}}),h.exit().remove(),d.exit().remove();var p=d3.transform(d3.select(d3.selectAll(".groupedColumn-rect")[0][t.new_data.length-1]).attr("transform")),f=p.translate[0];return p.translate[1],r=[t.reduced_height-f-2*t.x1.rangeBand(),f+2*t.x1.rangeBand()],t.xScale1=t.k.scaleIdentification("linear",u,r),this},mapColors:function(){t.no_of_groups=d3.max(t.new_data,function(t){return t.data.length});for(var e=0;e<t.new_data_length;e++)if(t.new_data[e].data.length===t.no_of_groups){t.group_data=t.new_data[e].data,t.group_data_length=t.group_data.length;break}t.new_data.forEach(function(e){e.data.forEach(function(e){for(var n=0;n<t.group_data_length;n++)if(t.group_data[n].name===e.name){e.color=t.group_data[n].color;break}})})},legends:function(){if(PykCharts["boolean"](t.legends_enable)){var e,n=t.group_data;e=n.map(function(t){return t.color}),n=n.map(function(t){return t.name}),n=t.k.__proto__._unique(n),t.multiD.legendsPosition(t,"groupColumn",n,e)}return this},checkIfHighLightDataExists:function(e){return t.highlight&&("number"===t.axis_x_data_format?t.highlight_group_exits=t.highlight===e:"string"===t.axis_x_data_format&&(t.highlight_group_exits=t.highlight.toLowerCase()===e.toLowerCase())),this},newXAxis:function(){if(PykCharts["boolean"](t.axis_x_enable)){"bottom"===t.axis_x_position&&t.new_xAxisgroup.attr("transform","translate(0,"+(t.chart_height-t.chart_margin_top-t.chart_margin_bottom-t.legendsGroup_height)+")");var e=d3.svg.axis().scale(t.xScale).orient(t.axis_x_pointer_position).tickSize(0).outerTickSize(t.axis_x_outer_pointer_length);t.new_xAxisgroup.style("stroke",function(){return t.axis_x_line_color}).call(e),d3.selectAll(t.selector+" .x.new-axis text").style({display:function(){return"none"},stroke:"none"})}return this},highlightRect:function(){function e(){x=t.highlight_x_positions-5;var e=t.group.selectAll(".highlight-groupedColumn-rect").data([t.highlight]);e.enter().append("rect"),e.attr({"class":"highlight-groupedColumn-rect",x:x,y:0,width:t.x1.rangeBand()*t.group_data.length+10,height:t.reduced_height+5,fill:"none",stroke:t.highlight_color,"stroke-width":"1.5px","stroke-dasharray":"5,5","stroke-opacity":1}),e.exit().remove(),PykCharts["boolean"](t.highlight_x_positions)?highlight_array=t.highlight:e.remove()}return t.flag&&setTimeout(e,t.transitions.duration()),this}};return n}},PykCharts.multiD.scatter=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),e.bubbleRadius=t.scatterplot_radius?t.scatterplot_radius:n.multiDimensionalCharts.scatterplot_radius,e.panels_enable="no",PykCharts.scaleFunction(e);try{if(!e.k.__proto__._isNumber(e.bubbleRadius))throw e.bubbleRadius=n.multiDimensionalCharts.scatterplot_radius,"bubbleRadius"}catch(r){e.k.warningHandling(r,"1")}if(!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var i=n.multiDimensionalCharts;n.stylesheet,e.multiD=new PykCharts.multiD.configuration(e),e.scatterplot_pointer_enable=t.scatterplot_pointer_enable?t.scatterplot_pointer_enable.toLowerCase():i.scatterplot_pointer_enable,e.zoomed_out=!0,PykCharts["boolean"](e.panels_enable)?e.radius_range=[2*e.k.__proto__._radiusCalculation(1.1),2*e.k.__proto__._radiusCalculation(2.6)]:e.radius_range=[2*e.k.__proto__._radiusCalculation(4.5),2*e.k.__proto__._radiusCalculation(11)],e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("scatterplot",n),e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"time"===e.axis_y_data_format&&""===e.axis_y_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.compare_data=e.k.__proto__._groupBy("scatterplot",n),e.k.remove_loading_bar(r);var i=new PykCharts.multiD.scatterplotFunctions(t,e,"scatterplot");i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.panelsOfScatter=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e),e.bubbleRadius=t.scatterplot_radius?t.scatterplot_radius:n.multiDimensionalCharts.scatterplot_radius,e.panels_enable="yes",e.legends_display="horizontal";try{if(!e.k.__proto__._isNumber(e.bubbleRadius))throw e.bubbleRadius=n.multiDimensionalCharts.scatterplot_radius,"bubbleRadius"}catch(r){e.k.warningHandling(r,"1")}if(!e.stop){e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading();var i=n.multiDimensionalCharts;n.stylesheet,e.multiD=new PykCharts.multiD.configuration(e),e.scatterplot_pointer_enable=t.scatterplot_pointer_enable?t.scatterplot_pointer_enable.toLowerCase():i.scatterplot_pointer_enable,e.zoomed_out=!0,PykCharts["boolean"](e.panels_enable)?e.radius_range=[2*e.k.__proto__._radiusCalculation(3.5),2*e.k.__proto__._radiusCalculation(8)]:e.radius_range=[2*e.k.__proto__._radiusCalculation(4.5),2*e.k.__proto__._radiusCalculation(11)],e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("scatterplot",n),e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"time"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"time"===e.axis_y_data_format&&""===e.axis_y_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to have passed Date data so please pass the value for axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.compare_data=e.k.__proto__._groupBy("scatterplot",n),e.k.remove_loading_bar(r);var i=new PykCharts.multiD.scatterplotFunctions(t,e,"scatterplot");i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}}},PykCharts.multiD.pulse=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),PykCharts.scaleFunction(e);var r=n.multiDimensionalCharts;n.stylesheet,e.multiD=new PykCharts.multiD.configuration(e),e.bubbleRadius=t.scatterplot_radius?t.scatterplot_radius:.6*r.scatterplot_radius,e.panels_enable="no";try{if(!e.k.__proto__._isNumber(e.bubbleRadius))throw e.bubbleRadius=.6*r.scatterplot_radius,"bubbleRadius"}catch(i){e.k.warningHandling(i,"1")}e.stop||(e.k.storeInitialDivHeight(),e.zoomed_out=!0,e.radius_range=[2*e.k.__proto__._radiusCalculation(1.1),2*e.k.__proto__._radiusCalculation(3.5)],"default"===e.mode&&e.k.loading(),e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);if(e.stop||a===!1)return void e.k.remove_loading_bar(r);e.data=e.k.__proto__._groupBy("pulse",n),e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),e.axis_x_data_format=e.k.xAxisDataFormatIdentification(e.data),"date"===e.axis_x_data_format&&""===e.axis_x_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to pass Date data so please pass axis_x_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),"date"===e.axis_y_data_format&&""===e.axis_y_time_value_datatype&&console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+'.("You seem to pass Date data so please pass axis_y_time_value_datatype")  Visit www.pykcharts.com/errors#warning_15'),e.compare_data=e.k.__proto__._groupBy("pulse",n),e.k.remove_loading_bar(r);var i=new PykCharts.multiD.scatterplotFunctions(t,e,"pulse");i.render()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}},PykCharts.multiD.scatterplotFunctions=function(t,e,n){function a(){r.zoomed_out=!1;for(var t,e=PykCharts["boolean"](r.panels_enable)?r.no_of_groups:1,n=0;e>n;n++){var a=d3.select(r.selector+" #"+r.container_id+n);r.k.isOrdinal(a,".x.axis",r.x),r.k.isOrdinal(a,".y.axis",r.yScale),r.optionalFeatures().plotCircle().label().ticks(),d3.select(r.selector+" #"+r.container_id+n).selectAll(".scatterplot-dot").attr({r:function(e){return t=r.sizes(e.weight)*PykCharts.getEvent().scale},cx:function(t){return r.x(t.x)+r.extra_left_margin},cy:function(t){return r.yScale(t.y)+r.extra_top_margin}}),d3.select(r.selector+" #"+r.container_id+n).selectAll(".scatterplot-label").attr({x:function(t){return r.x(t.x)+r.extra_left_margin},y:function(t){return r.yScale(t.y)+r.extra_top_margin+5}}).style("font-size",r.label_size+"px"),d3.select(r.selector+" #"+r.container_id+n).selectAll(".tick_label").attr({x:function(t){return r.x(t.x)},y:function(e){return r.yScale(e.y)-t}})}if("dblclick"===PykCharts.getEvent().sourceEvent.type&&r.count++,r.count===r.zoom_level+1)for(var n=0;e>n;n++){if("yes"===r.panels_enable){r.new_data=[];for(var i=0;i<r.data_length;i++)r.data[i].group===r.uniq_group_arr[n]&&r.new_data.push(r.data[i])}else r.new_data=r.data;d3.select(r.selector+" #"+r.container_id+n).call(function(){return r.zoomOut(n)}),r.count=1}}var r=e;r.refresh=function(e){r.executeRefresh=function(t){r.data=r.k.__proto__._groupBy("scatterplot",t),r.refresh_data=r.k.__proto__._groupBy("scatterplot",t);var e=r.k.checkChangeInData(r.refresh_data,r.compare_data);r.compare_data=e[0],e[1],r.uniq_group_arr=r.k.__proto__._unique(r.data.map(function(t){return t.group})),e[1]&&r.k.lastUpdatedAt("liveData"),r.map_group_data=r.multiD.mapGroup(r.data),"time"===r.axis_x_data_format&&r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)}),PykCharts["boolean"](r.panels_enable)?PykCharts["boolean"](r.panels_enable)&&"scatterplot"===n&&(document.querySelector(r.selector+" #panels_of_scatter_main_div").innerHTML=null,r.renderChart()):(r.new_data=r.data,r.optionalFeatures().createChart().legends().plotCircle().ticks(),"scatterplot"===n&&r.optionalFeatures().label(0).labelPosition()),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width)},PykCharts["boolean"](r.interactive_enable)?(r.k.dataFromPykQuery(e),r.k.dataSourceFormatIdentification(r.data,r,"executeRefresh")):r.k.dataSourceFormatIdentification(t.data,r,"executeRefresh")},r.calculatePanelInRow=function(){var t,e=parseInt(r.k._getHighestParentsAttribute(r.selector,"width"));t=e?e:d3.select("body").style("width"),r.no_of_containers_in_row=Math.floor(parseInt(t)/r.chart_width),r.no_of_containers_in_row>r.uniq_group_arr.length&&(r.no_of_containers_in_row=r.uniq_group_arr.length),t<r.chart_width&&(r.no_of_containers_in_row=1)},this.render=function(){var t=r.selector.substring(1,r.selector.length);if(r.container_id=t+"_svg",r.map_group_data=r.multiD.mapGroup(r.data),r.fillChart=new PykCharts.Configuration.fillChart(r),r.transitions=new PykCharts.Configuration.transition(r),r.border=new PykCharts.Configuration.border(r),r.uniq_group_arr=r.k.__proto__._unique(r.data.map(function(t){return t.group})),r.no_of_groups=1,PykCharts["boolean"](r.panels_enable)&&r.calculatePanelInRow(),"time"===r.axis_x_data_format&&r.data.forEach(function(t){t.x=r.k.dateConversion(t.x)}),"default"===r.mode)PykCharts["boolean"](r.panels_enable)&&"scatterplot"===n?(r.w=r.chart_width,r.chart_height=r.chart_height,r.chart_margin_left=r.chart_margin_left,r.chart_margin_right=r.chart_margin_right,r.k.title(r.new_width).backgroundColor(r)["export"](r,r.container_id,n,r.panels_enable,r.uniq_group_arr,r.new_width).emptyDiv(r.selector).subtitle(r.new_width),d3.select(r.selector).append("div").attr("id","panels_of_scatter_main_div"),r.renderChart(),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width).xAxisTitle(r.xGroup,r.legendsGroup_height,r.legendsGroup_width).yAxisTitle(r.yGroup)):(r.k.title().backgroundColor(r)["export"](r,"#"+r.container_id+"0",n).emptyDiv(r.selector).subtitle(),r.w=r.chart_width,r.chart_height=r.chart_height,r.new_data=r.data,r.k.makeMainDiv(r.selector,0),r.optionalFeatures().svgContainer(0).legendsContainer(0),r.k.liveData(r).tooltip(),r.mouseEvent=new PykCharts.Configuration.mouseEvent(r),r.sizes=new PykCharts.multiD.bubbleSizeCalculation(r,r.data,r.radius_range),r.optionalFeatures().legends().createGroups(0).createChart().ticks(),"scatterplot"===n&&r.optionalFeatures().label(0).labelPosition(),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width).xAxisTitle(r.xGroup,r.legendsGroup_height,r.legendsGroup_width).yAxisTitle(r.yGroup),r.k.exportSVG(r,"#"+r.container_id+"0",n)),r.k.createFooter(r.new_width).lastUpdatedAt().credits().dataSource();else if("infographics"===r.mode)if(PykCharts["boolean"](r.panels_enable)&&"scatterplot"===n){r.k.backgroundColor(r)["export"](r,r.container_id,n,r.panels_enable,r.uniq_group_arr,r.new_width).emptyDiv(r.selector),r.no_of_groups=r.uniq_group_arr.length,r.data_length=r.data.length,r.w=r.chart_width,r.chart_height=r.chart_height,r.chart_margin_left=r.chart_margin_left,r.chart_margin_right=r.chart_margin_right;for(var e=0;e<r.no_of_groups;e++){r.new_data=[];for(var a=0;a<r.data_length;a++)r.data[a].group===r.uniq_group_arr[e]&&r.new_data.push(r.data[a]);r.k.makeMainDiv(r.selector,e),r.optionalFeatures().svgContainer(e).legendsContainer(e),r.k.tooltip(),r.mouseEvent=new PykCharts.Configuration.mouseEvent(r),r.sizes=new PykCharts.multiD.bubbleSizeCalculation(r,r.data,r.radius_range),r.optionalFeatures().legends(e).createGroups(e).createChart().label(e).ticks(),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width).xAxisTitle(r.xGroup,r.legendsGroup_height,r.legendsGroup_width).yAxisTitle(r.yGroup)}r.optionalFeatures().labelPosition(),r.k.exportSVG(r,r.container_id,n,r.panels_enable,r.uniq_group_arr),r.k.emptyDiv(r.selector)}else r.k.backgroundColor(r)["export"](r,"#"+r.container_id+"0",n).emptyDiv(r.selector),r.w=r.chart_width,r.new_data=r.data,r.k.makeMainDiv(r.selector,0),r.optionalFeatures().svgContainer(0).legendsContainer(0),r.k.liveData(r).tooltip(),r.mouseEvent=new PykCharts.Configuration.mouseEvent(r),r.sizes=new PykCharts.multiD.bubbleSizeCalculation(r,r.data,r.radius_range),r.optionalFeatures().legends().createGroups(0).createChart().ticks(),"scatterplot"===n&&r.optionalFeatures().label(0).labelPosition(),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width).xAxisTitle(r.xGroup,r.legendsGroup_height,r.legendsGroup_width).yAxisTitle(r.yGroup),r.k.exportSVG(r,"#"+r.container_id+"0",n);if(PykCharts["boolean"](r.panels_enable)){var i=r.k.resize(void 0,r.new_width);r.k.__proto__._ready(i),window.addEventListener("resize",function(t){return r.calculatePanelInRow(),r.k.resize(void 0,r.new_width)})}else{var i=r.k.resize(r.svgContainer);r.k.__proto__._ready(i),window.addEventListener("resize",function(t){return r.k.resize(r.svgContainer)})}},r.optionalFeatures=function(){var t=r.selector.substring(1,r.selector.length),e={svgContainer:function(e){document.querySelector(r.selector+" #chart-container-"+e).style.width=r.w;var n=document.getElementById(t);return n.classList.contains("PykCharts-weighted")||(n.className+=" PykCharts-weighted"),r.svgContainer=d3.select(r.selector+" #chart-container-"+e).append("svg").attr({width:r.w,height:r.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+r.w+" "+r.chart_height,id:r.container_id+""+e,"class":"svgcontainer"}),this},createGroups:function(t){return r.group=r.svgContainer.append("g").attr({transform:"translate("+r.chart_margin_left+","+(r.chart_margin_top+r.legendsGroup_height)+")",id:"main"}),r.ticksElement=r.svgContainer.append("g").attr({transform:"translate("+r.chart_margin_left+","+(r.chart_margin_top+r.legendsGroup_height)+")",id:"main2"}),(PykCharts["boolean"](r.axis_x_enable)||r.axis_x_title)&&(r.xGroup=r.group.append("g").attr({"class":"x axis",id:"xaxis"}).style("stroke","black")),(PykCharts["boolean"](r.axis_y_enable)||r.axis_y_title)&&(r.yGroup=r.group.append("g").attr({"class":"y axis",id:"yaxis"}).style("stroke","blue")),r.clip=r.group.append("svg:clipPath").attr("id","clip"+t+r.selector).append("svg:rect").attr({width:r.w-r.chart_margin_left-r.chart_margin_right-r.legendsGroup_width,height:r.chart_height-r.chart_margin_top-r.chart_margin_bottom-r.legendsGroup_height}),r.chartBody=r.group.append("g").attr({id:"clip"+t,"clip-path":"url(#clip"+t+r.selector+")"}),this},legendsContainer:function(t){return PykCharts["boolean"](r.legends_enable)&&r.map_group_data[1]&&"default"===r.mode?r.legendsGroup=r.svgContainer.append("g").attr("id","scatterplot-legends").style("visibility","visible"):(r.legendsGroup_width=0,r.legendsGroup_height=0),this},createChart:function(t){if("scatterplot"==n){r.new_data.sort(function(t,e){return e.weight-t.weight}),r.weight=r.new_data.map(function(t){return t.weight});for(var e=r.weight.length,i=[],o=0;e>o;o++)0!==r.weight[o]&&i.push(r.weight[o]);r.weight=i,r.sorted_weight=r.weight.slice(0).reverse()}else{r.weight=r.new_data.map(function(t){return t.weight});for(var e=r.weight.length,i=[],o=0;e>o;o++)0!==r.weight[o]&&i.push(r.weight[o]);r.weight=i,r.sorted_weight=r.weight.slice(0)}if(r.sorted_weight.sort(function(t,e){return t-e}),r.x_tick_values=r.k.processXAxisTickValues(),r.y_tick_values=r.k.processYAxisTickValues(),r.group.append("text").attr({fill:"black","text-anchor":"end",x:r.w-70,y:r.chart_height+40}),r.zoomed_out===!0){var s,l,c,u,h,d,p,f,_=[],g=[];if("number"===r.axis_y_data_format?(u=d3.extent(r.data,function(t){return parseFloat(t.y)}),g=r.k.__proto__._domainBandwidth(u,2,"number"),l=[r.chart_height-r.chart_margin_top-r.chart_margin_bottom-r.legendsGroup_height,0],p=d3.min(r.y_tick_values),f=d3.max(r.y_tick_values),g[0]>p&&(g[0]=p),g[1]<f&&(g[1]=f),r.yScale=r.k.scaleIdentification("linear",g,l),r.extra_top_margin=0):"string"===r.axis_y_data_format?(r.data.forEach(function(t){g.push(t.y)}),l=[0,r.chart_height-r.chart_margin_top-r.chart_margin_bottom-r.legendsGroup_height],r.yScale=r.k.scaleIdentification("ordinal",g,l,0),r.extra_top_margin=r.yScale.rangeBand()/2):"time"===r.axis_y_data_format&&(g=d3.extent(r.data,function(t){return new Date(t.x)}),p=d3.min(r.y_tick_values,function(t){return new Date(t)}),f=d3.max(r.y_tick_values,function(t){return new Date(t)}),new Date(g[0])>new Date(p)&&(g[0]=p),new Date(g[1])<new Date(f)&&(g[1]=max__tick_value),l=[r.chart_height-r.chart_margin_top-r.chart_margin_bottom-r.legendsGroup_height,0],r.yScale=r.k.scaleIdentification("time",g,l),r.extra_top_margin=0),"number"===r.axis_x_data_format?(s=d3.extent(r.data,function(t){return parseFloat(t.x)}),_=r.k.__proto__._domainBandwidth(s,2),h=d3.min(r.x_tick_values),d=d3.max(r.x_tick_values),_[0]>h&&(_[0]=h),_[1]<d&&(_[1]=d),c=[0,r.w-r.chart_margin_left-r.chart_margin_right-r.legendsGroup_width],r.x=r.k.scaleIdentification("linear",_,c),r.extra_left_margin=0):"string"===r.axis_x_data_format?(r.data.forEach(function(t){_.push(t.x)}),c=[0,r.w-r.chart_margin_left-r.chart_margin_right-r.legendsGroup_width],r.x=r.k.scaleIdentification("ordinal",_,c,0),r.extra_left_margin=r.x.rangeBand()/2):"time"===r.axis_x_data_format&&(max=d3.max(r.data,function(t){return t.x}),min=d3.min(r.data,function(t){return t.x}),s=[min.getTime(),max.getTime()],_=r.k.__proto__._domainBandwidth(s,2,"time"),h=d3.min(r.x_tick_values,function(t){return r.k.dateConversion(t)}),d=d3.max(r.x_tick_values,function(t){return r.k.dateConversion(t)}),_[0]>h&&(_[0]=h),_[1]<d&&(_[1]=d),c=[0,r.w-r.chart_margin_left-r.chart_margin_right],r.x=r.k.scaleIdentification("time",_,c),r.extra_left_margin=0),r.xdomain=r.x.domain(),r.ydomain=r.yScale.domain(),r.x1=1,r.y1=12,r.count=1,"pulse"!==n)var m=d3.behavior.zoom().scale(r.count).x(r.x).y(r.yScale).on("zoom",a);if(PykCharts["boolean"](r.zoom_enable)&&"string"!==r.axis_y_data_format&&"string"!==r.axis_x_data_format&&"default"===r.mode){var v;v=PykCharts["boolean"](r.panels_enable)?r.no_of_groups:1;for(var o=0;o<r.no_of_groups;o++)d3.select(r.selector+" #"+r.container_id+o).call(m),d3.select(r.selector+" #"+r.container_id+o).on({"wheel.zoom":null,"mousewheel.zoom":null})}r.optionalFeatures().plotCircle(t)}return this},legends:function(t){return PykCharts["boolean"](r.legends_enable)&&r.map_group_data[1]&&"default"===r.mode&&r.multiD.legendsPosition(r,"scatter",r.map_group_data[0],void 0,t),this},ticks:function(){function t(){e.text(function(t){return t.name})}if(PykCharts["boolean"](r.scatterplot_pointer_enable)){var e=r.ticksElement.selectAll(".ticks_label").data(r.new_data);e.enter().append("text"),e.attr({"class":"ticks_label",x:function(t){return r.x(t.x)},y:function(t){return r.yScale(t.y)},"pointer-events":"none",dx:-1,dy:function(t){return-r.sizes(t.weight)-4}}).style({"text-anchor":"middle","font-family":r.label_family,
"font-size":r.label_size+"px"}).text(""),setTimeout(t,r.transitions.duration()),e.exit().remove()}return this},plotCircle:function(){return r.circlePlot=r.chartBody.selectAll(".scatterplot-dot").data(r.new_data),r.circlePlot.enter().append("circle").attr("class","scatterplot-dot"),r.circlePlot.attr({r:0,cx:function(t){return r.x(t.x)+r.extra_left_margin},cy:function(t){return r.yScale(t.y)+r.extra_top_margin},fill:function(t){return r.fillChart.colorPieW(t)},"fill-opacity":function(t){return"pulse"==n&&PykCharts["boolean"](r.variable_circle_size_enable)?1:r.multiD.opacity(t.weight,r.weight,r.data)},"data-fill-opacity":function(t){return d3.select(this).attr("fill-opacity")},"data-id":function(t){return t.x},stroke:r.border.color(),"stroke-width":r.border.width(),"stroke-dasharray":r.border.style(),"stroke-opacity":1}).on({mouseover:function(t,e){"default"===r.mode&&(PykCharts["boolean"](r.tooltip_enable)&&(tooltipText=t.tooltip?t.tooltip:"<table><thead><th colspan='2'><b>"+t.name+"</b></th></thead><tr><td>X</td><td><b>"+t.x+"</b></td></tr><tr><td>Y</td><td><b>"+t.y+"<b></td></tr><tr><td>Weight</td><td><b>"+t.weight+"</b></td></tr></table>",r.mouseEvent.tooltipPosition(t),r.mouseEvent.tooltipTextShow(tooltipText)),PykCharts["boolean"](r.chart_onhover_highlight_enable)&&(PykCharts["boolean"](r.panels_enable)?r.mouseEvent.highlight(r.selector+" #"+this.parentElement.parentElement.parentElement.parentElement.id+" .scatterplot-dot",this):r.mouseEvent.highlight(r.selector+" .scatterplot-dot",this)))},mouseout:function(t,e){"default"===r.mode&&(PykCharts["boolean"](r.tooltip_enable)&&r.mouseEvent.tooltipHide(t),PykCharts["boolean"](r.chart_onhover_highlight_enable)&&(PykCharts["boolean"](r.panels_enable)?r.mouseEvent.highlightHide(r.selector+" #"+this.parentElement.parentElement.parentElement.parentElement.id+" .scatterplot-dot"):r.mouseEvent.highlightHide(r.selector+" .scatterplot-dot")))},mousemove:function(t){"default"===r.mode&&PykCharts["boolean"](r.tooltip_enable)&&r.mouseEvent.tooltipPosition(t)},dblclick:function(){PykCharts.getEvent().stopPropagation()},mousedown:function(){PykCharts.getEvent().stopPropagation()},click:function(t,e){PykCharts["boolean"](r.click_enable)&&r.addEvents(t.x,d3.select(this).attr("data-id"))}}).transition().duration(r.transitions.duration()).attr("r",function(t){return r.sizes(t.weight)}),r.circlePlot.exit().remove(),this},label:function(t){if(PykCharts["boolean"](r.label_size)){var e=r.selector.substring(1,r.selector.length);r.circleLabel=r.chartBody.selectAll(".scatterplot-label").data(r.new_data),r.circleLabel.enter().append("text"),r.circleLabel.attr("class","scatterplot-label").attr("id",e+"-bubble-label-"+t).text(""),r.circleLabel.exit().remove()}return this},labelPosition:function(){function t(){for(var t=0;t<r.no_of_groups;t++)d3.selectAll(r.selector+"-bubble-label-"+t).attr({x:function(t){return r.x(t.x)+r.extra_left_margin},y:function(t){return r.yScale(t.y)+r.extra_top_margin+5},"text-anchor":"middle","pointer-events":"none",fill:r.label_color}).style({"font-weight":r.label_weight,"font-size":r.label_size+"px","font-family":r.label_family}).text(function(t){return t.weight}).text(function(t){return this.getBBox().width<2*r.sizes(t.weight)&&this.getBBox().height<2*r.sizes(t.weight)?t.weight:""})}return setTimeout(t,r.transitions.duration()),this}};return e},r.zoomOut=function(t){r.zoomed_out=!0,r.x1=1,r.y1=12,r.optionalFeatures().createChart(t).label().ticks();var e=d3.select(r.selector+" #"+r.container_id+t),n=e.select("#xaxis"),a=e.select("#yaxis");r.k.xAxis(e,n,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(e,a,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width),d3.select(r.selector+" #"+r.container_id+t).selectAll(".scatterplot-dot").attr({r:function(t){return r.sizes(t.weight)},cx:function(t){return r.x(t.x)+r.extra_left_margin},cy:function(t){return r.yScale(t.y)+r.extra_top_margin}}),d3.select(r.selector+" #"+r.container_id+t).selectAll(".scatterplot-label").style("font-size",r.label_size+"px").attr({x:function(t){return r.x(t.x)+r.extra_left_margin},y:function(t){return r.yScale(t.y)+r.extra_top_margin+5}})},r.renderChart=function(){r.no_of_groups=r.uniq_group_arr.length,r.data_length=r.data.length;for(var t=0;t<r.no_of_groups;t++){r.new_data=[];for(var e=0;e<r.data_length;e++)r.data[e].group===r.uniq_group_arr[t]&&r.new_data.push(r.data[e]);r.k.makeMainDiv(r.selector+" #panels_of_scatter_main_div",t),r.optionalFeatures().svgContainer(t).legendsContainer(t);var a=r.selector.substr(1,r.selector.length);d3.selectAll("#tooltip-svg-container-"+t+"-pyk-tooltip"+a).remove(),r.k.liveData(r).tooltip(!0,r.selector,t),r.mouseEvent=new PykCharts.Configuration.mouseEvent(r),r.sizes=new PykCharts.multiD.bubbleSizeCalculation(r,r.data,r.radius_range),r.optionalFeatures().legends(t).createGroups(t).createChart().label(t).ticks(),r.k.xAxis(r.svgContainer,r.xGroup,r.x,r.extra_left_margin,r.xdomain,r.x_tick_values,r.legendsGroup_height).yAxis(r.svgContainer,r.yGroup,r.yScale,r.ydomain,r.y_tick_values,r.legendsGroup_width).xAxisTitle(r.xGroup,r.legendsGroup_height,r.legendsGroup_width).yAxisTitle(r.yGroup)}r.optionalFeatures().labelPosition(),r.k.exportSVG(r,r.container_id,n,r.panels_enable,r.uniq_group_arr),r.k.emptyDiv(r.selector)}},PykCharts.multiD.spiderWeb=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){var r=n.multiDimensionalCharts;e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),e.bubbleRadius=t.spiderweb_radius?t.spiderweb_radius:.6*r.scatterplot_radius,e.spiderweb_outer_radius_percent=t.spiderweb_outer_radius_percent?t.spiderweb_outer_radius_percent:r.spiderweb_outer_radius_percent,e.panels_enable="no",e.data_sort_enable="yes",e.data_sort_type="alphabetically",e.data_sort_order="ascending";try{if(!e.k.__proto__._isNumber(e.bubbleRadius))throw e.bubbleRadius=.6*r.scatterplot_radius,"spiderweb_radius"}catch(i){e.k.warningHandling(i,"1")}try{if(!e.k.__proto__._isNumber(e.spiderweb_outer_radius_percent))throw e.bubbleRadius=r.spiderweb_outer_radius_percent,"spiderweb_outer_radius_percent"}catch(i){e.k.warningHandling(i,"1")}e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.spiderweb_outer_radius_percent>100&&(e.spiderweb_outer_radius_percent=100),e.multiD=new PykCharts.multiD.configuration(e),e.inner_radius=0,e.executeData=function(t){var n=e.k.validator().validatingJSON(t),a=e.selector.substring(1,e.selector.length);return e.stop||n===!1?void e.k.remove_loading_bar(a):(e.data=e.k.__proto__._groupBy("spiderweb",t),e.compare_data=e.k.__proto__._groupBy("spiderweb",t),e.k.remove_loading_bar(a),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))},e.dataTransformation=function(){e.group_arr=[],e.uniq_group_arr=[],e.x_arr=[],e.uniq_x_arr=[],e.data=e.k.__proto__._sortData(e.data,"x","group",e),e.data_length=e.data.length;for(var t=0;t<e.data_length;t++)e.group_arr[t]=e.data[t].group;e.uniq_group_arr=e.k.__proto__._unique(e.group_arr);for(var n=e.uniq_group_arr.length,a=0;a<e.data_length;a++)e.x_arr[a]=e.data[a].x;e.k.__proto__._unique(e.x_arr),e.new_data=[];for(var a=0;n>a;a++){e.new_data[a]={name:e.uniq_group_arr[a],data:[]};for(var r=0;r<e.data_length;r++)e.uniq_group_arr[a]===e.data[r].group&&e.new_data[a].data.push({x:e.data[r].x,y:e.data[r].y,weight:e.data[r].weight,color:e.data[r].color,tooltip:e.data[r].tooltip})}e.new_data_length=e.new_data.length},e.refresh=function(n){e.executeRefresh=function(t){e.data=e.k.__proto__._groupBy("spiderweb",t),e.refresh_data=e.k.__proto__._groupBy("spiderweb",t),e.map_group_data=e.multiD.mapGroup(e.data),e.dataTransformation();var n=e.k.checkChangeInData(e.refresh_data,e.compare_data);e.compare_data=n[0];var a=n[1];a&&e.k.lastUpdatedAt("liveData"),e.optionalFeatures().createChart().legends().xAxis().yAxis()},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(n),e.k.dataSourceFormatIdentification(e.data,e,"executeRefresh")):e.k.dataSourceFormatIdentification(t.data,e,"executeRefresh")},this.render=function(){e.fillChart=new PykCharts.Configuration.fillChart(e);var t=e.selector.substring(1,e.selector.length),n=t+"_svg";e.border=new PykCharts.Configuration.border(e),e.map_group_data=e.multiD.mapGroup(e.data),e.dataTransformation(),"default"===e.mode?(e.k.title().backgroundColor(e)["export"](e,"#"+n,"spiderweb").emptyDiv(e.selector).subtitle().makeMainDiv(e.selector,1),e.h=e.chart_height,e.optionalFeatures().svgContainer(n,1).legendsContainer(1),e.k.liveData(e).tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e),e.optionalFeatures().legends().createGroups(),e.spiderweb_outer_radius_percent=e.k.__proto__._radiusCalculation(e.spiderweb_outer_radius_percent,"spiderweb"),e.radius_range=[3*e.spiderweb_outer_radius_percent/100,.09*e.spiderweb_outer_radius_percent],e.sizes=new PykCharts.multiD.bubbleSizeCalculation(e,e.data,e.radius_range),e.optionalFeatures().createChart().xAxis().yAxis(),e.k.createFooter().lastUpdatedAt().credits().dataSource()):"infographics"===e.mode&&(e.k.backgroundColor(e)["export"](e,"#"+n,"spiderweb").emptyDiv(e.selector),e.k.makeMainDiv(e.selector,1),e.h=e.chart_height,e.optionalFeatures().svgContainer(n,1).legendsContainer().createGroups(),e.spiderweb_outer_radius_percent=e.k.__proto__._radiusCalculation(e.spiderweb_outer_radius_percent,"spiderweb"),e.radius_range=[3*e.spiderweb_outer_radius_percent/100,.09*e.spiderweb_outer_radius_percent],e.sizes=new PykCharts.multiD.bubbleSizeCalculation(e,e.data,e.radius_range),e.optionalFeatures().createChart().xAxis().yAxis(),e.k.tooltip(),e.mouseEvent=new PykCharts.Configuration.mouseEvent(e)),e.k.exportSVG(e,"#"+n,"spiderweb");var a=e.k.resize(e.svgContainer);e.k.__proto__._ready(a),window.addEventListener("resize",function(t){return e.k.resize(e.svgContainer)})},this.degrees=function(t){return t/Math.PI*180-90},this.optionalFeatures=function(){var t=this,e=t.selector.substring(1,t.selector.length),n={svgContainer:function(n,a){return document.getElementById(e).className+=" PykCharts-spider-web",t.svgContainer=d3.select(t.selector+" #chart-container-"+a).append("svg").attr({"class":"svgcontainer",id:n,width:t.chart_width,height:t.chart_height,preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+t.chart_width+" "+t.chart_height}),this},createGroups:function(){return t.group=t.svgContainer.append("g").attr({id:"spider-group",transform:"translate("+(t.chart_width-t.legendsGroup_width)/2+","+(t.h+t.legendsGroup_height+20)/2+")"}),t.ticksElement=t.svgContainer.append("g").attr("transform","translate("+(t.chart_width-t.legendsGroup_width)/2+","+(t.h+t.legendsGroup_height+20)/2+")"),this},legendsContainer:function(e){return PykCharts["boolean"](t.legends_enable)&&t.map_group_data[1]&&"default"===t.mode?t.legendsGroup=t.svgContainer.append("g").attr({"class":"spiderweb-legends",id:"legends"}):(t.legendsGroup_width=0,t.legendsGroup_height=0),this},createChart:function(){var e,n,a,r=t.new_data[0].data,i=r.length;a=d3.max(t.new_data,function(t,e){return d3.max(t.data,function(t){return t.y})}),n=d3.min(t.new_data,function(t,e){return d3.min(t.data,function(t){return t.y})}),t.yScale=d3.scale.linear().domain([n,a]).range([t.inner_radius,t.spiderweb_outer_radius_percent]),t.y_domain=[],t.nodes=[];for(var o=[],e=0;e<t.new_data_length;e++){for(var s=[],l=0;l<t.new_data[e].data.length;l++)o.push(t.yScale(t.new_data[e].data[l].y)),s[l]=t.yScale(t.new_data[e].data[l].y);t.y_domain[e]=s}t.y=d3.scale.linear().domain(d3.extent(o,function(t){return parseFloat(t)})).range([.1,.9]);for(var e=0;e<t.new_data_length;e++){for(var c=[],l=0;i>l;l++)c[l]={x:l,y:t.y(t.y_domain[e][l]),tooltip:t.new_data[e].data[l].tooltip||t.new_data[e].data[l].weight};t.nodes[e]=c}t.radius=d3.scale.linear().range([t.inner_radius,t.spiderweb_outer_radius_percent]);for(var u=0;u<t.new_data_length;u++){var h=[];for(l=0;l<t.new_data[u].data.length;l++)h[l]=t.new_data[u].data[l].tooltip;t.angle=d3.scale.ordinal().domain(d3.range(t.new_data[u].data.length+1)).rangePoints([0,2*Math.PI]),t.yAxis=[];for(var e=0;e<t.new_data[u].data.length;e++)t.yAxis.push({x:e,y:.25},{x:e,y:.5},{x:e,y:.75},{x:e,y:1});var d,p=[];t.yAxis_length=t.yAxis.length;for(var e=0;e<t.yAxis_length;e++)d=e<t.yAxis_length-4?t.yAxis[e+4]:t.yAxis[e-t.yAxis_length+4],p.push({source:t.yAxis[e],target:d});for(var f,_=[],e=0;e<t.nodes[u].length;e++)e<t.nodes[u].length-1?(d=t.nodes[u][e+1],f=t.fillChart.colorPieW(t.new_data[u].data[e])):(d=t.nodes[u][0],f=t.fillChart.colorPieW(t.new_data[u].data[e])),_.push({source:t.nodes[u][e],target:d,color:f});var g=t.group.selectAll("#link"+u).data(_);g.enter().append("path").attr("class","link"),g.attr({"class":"link",stroke:function(t){return t.color},"stroke-opacity":1,id:"link"+u,d:d3.customHive.link().angle(function(e){return t.angle(e.x)}).radius(function(e){return t.radius(e.y)})}),g.exit().remove(),t.weight=t.new_data[u].data.map(function(t){return t.weight});for(var m=t.weight.length,v=[],e=0;m>e;e++)0!==t.weight[e]&&v.push(t.weight[e]);t.weight=v,t.sorted_weight=t.weight.slice(0),t.sorted_weight.sort(function(t,e){return t-e});var y=t.group.selectAll(".node"+u).data(t.nodes[u]);y.enter().append("circle").attr({"class":"dot node"+u,transform:function(e){return"rotate("+t.degrees(t.angle(e.x))+")"}}),y.attr({"class":"dot node"+u,cx:function(e){return t.radius(e.y)},r:function(e,n){return t.sizes(t.new_data[u].data[n].weight)},"fill-opacity":function(e,n){return t.multiD.opacity(t.new_data[u].data[n].weight,t.weight,t.data)},"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},stroke:t.border.color(),"stroke-width":t.border.width(),"stroke-dasharray":t.border.style(),"data-id":function(e,n){return t.new_data[0].data[n].x}}).style("fill",function(e,n){return t.fillChart.colorPieW(t.new_data[u].data[n])}).on({mouseover:function(e,n){"default"===t.mode&&(t.mouseEvent.tooltipPosition(e),t.mouseEvent.tooltipTextShow(e.tooltip),PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlight(t.selector+" .dot",this))},mouseout:function(e){"default"===t.mode&&(t.mouseEvent.tooltipHide(e),PykCharts["boolean"](t.chart_onhover_highlight_enable)&&t.mouseEvent.highlightHide(t.selector+" .dot"))},mousemove:function(e){"default"===t.mode&&t.mouseEvent.tooltipPosition(e)},click:function(e,n){PykCharts["boolean"](t.click_enable)&&t.addEvents(t.new_data[0].data[n].x,d3.select(this).attr("data-id"))}}),y.exit().remove()}return t.group.selectAll(".axis").data(d3.range(t.new_data[0].data.length)).enter().append("line").attr({"class":"axis",transform:function(e){return"rotate("+t.degrees(t.angle(e))+")"},x1:t.radius.range()[0],x2:t.radius.range()[1]}),t.group.selectAll(".grid").data(p).enter().append("path").attr({"class":"grid",d:d3.customHive.link().angle(function(e){return t.angle(e.x)}).radius(function(e){return t.radius(e.y)})}),this},legends:function(){return PykCharts["boolean"](t.legends_enable)&&t.map_group_data[1]&&"default"===t.mode&&t.multiD.legendsPosition(t,"spiderWeb",t.map_group_data[0]),this},xAxis:function(){t.length=t.new_data[0].data.length;var e=t.group.selectAll("text.x-axis-title").data(t.nodes[0]);return e.enter().append("text").attr("class","x-axis-title"),e.attr({transform:function(e,n){return"translate("+-t.spiderweb_outer_radius_percent+","+-t.spiderweb_outer_radius_percent+")"},x:function(e,n){return t.spiderweb_outer_radius_percent*(1-.2*Math.sin(2*n*Math.PI/t.length))+1.25*t.spiderweb_outer_radius_percent*Math.sin(2*n*Math.PI/t.length)},y:function(e,n){return t.spiderweb_outer_radius_percent*(1-.6*Math.cos(2*n*Math.PI/t.length))-.47*t.spiderweb_outer_radius_percent*Math.cos(2*n*Math.PI/t.length)}}).style({"text-anchor":"middle","font-size":t.axis_x_pointer_size+"px","font-family":t.axis_x_pointer_family,"font-weight":t.axis_x_pointer_weight,fill:t.axis_x_pointer_color}),e.text(function(e,n){return t.new_data[0].data[n].x}),e.exit().remove(),this},yAxis:function(){for(var e=t.yScale.domain(),n=e[1]/4,a=[],r=4,i=0;r>=0;r--,i++)a[i]=r*n;var o=t.ticksElement.selectAll("text.y-axis-ticks").data(a);return o.enter().append("text").attr("class","y-axis-ticks"),o.style("text-anchor","start").attr({transform:"translate(5,"+-t.spiderweb_outer_radius_percent+")",x:0,y:function(e,n){return n*(t.spiderweb_outer_radius_percent/4)},dy:-2}),o.text(function(t,e){return t}).style({"font-size":t.axis_y_pointer_size+"px","font-family":t.axis_y_pointer_family,"font-weight":t.axis_y_pointer_weight,fill:t.axis_y_pointer_color}),o.exit().remove(),this},sort:function(){if("string"===t.axis_y_data_format)try{if("alphabetically"!==t.data_sort_type)throw t.data_sort_type=multiDimensionalCharts.data_sort_type,"data_sort_type";t.data=t.k.__proto__._sortData(t.data,"y","group",t)}catch(e){t.k.warningHandling(e,"8")}return this}};return n}},PykCharts.multiD.waterfall=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({}),a=n.multiDimensionalCharts;this.execute=function(r){e=new PykCharts.validation.processInputs(e,t,"multiDimensionalCharts"),e.calculate_total=t.calculate_total?t.calculate_total:a.calculate_total,e.calculate_total_of=t.calculate_total_of?t.calculate_total_of:[],e.axis_y_background_color=t.axis_y_background_color?t.axis_y_background_color:n.multiDimensionalCharts.axis_y_background_color,PykCharts.scaleFunction(e),e.color_mode="color",e.grid_y_enable="no",e.grid_color="#fff",e.panels_enable="no",e.longest_tick_width=0,e.ticks_formatter=d3.format("s");try{if(0==e.chart_color.length)throw e.chart_color=["rgb(255, 60, 131)","rgb(0, 185, 250)","grey"],"chart_color";if(1==e.chart_color.length)throw e.chart_color.push("rgb(0, 185, 250)","grey"),"chart_color";if(2==e.chart_color.length)throw e.chart_color.push("grey"),"chart_color"}catch(i){console.warn("%c[Warning - Pykih Charts] ","color: #F8C325;font-weight:bold;font-size:14px"," at "+e.selector+".(\"You seem to have passed less than three colors for '"+i+"', in a waterfall chart.\")  Visit www.pykcharts.com/errors#warning_18")}e.stop||(e.k.storeInitialDivHeight(),"default"===e.mode&&e.k.loading(),e.multiD=new PykCharts.multiD.configuration(e),e.executeData=function(n){var a=e.k.validator().validatingJSON(n),r=e.selector.substring(1,e.selector.length);return e.stop||a===!1?void e.k.remove_loading_bar(r):(e.data=e.k.__proto__._groupBy("waterfall",n),e.compare_data=e.k.__proto__._groupBy("waterfall",n),e.axis_y_data_format=e.k.yAxisDataFormatIdentification(e.data),e.axis_x_data_format="number",e.k.remove_loading_bar(r),PykCharts.multiD.waterfallFunctions(t,e,"waterfall"),void e.render())},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(r),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData"))}},PykCharts.multiD.waterfallFunctions=function(t,e,n){var a=e;a.refresh=function(e){for(var n=document.querySelectorAll(".custom-axis"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r]);a.executeRefresh=function(t){a.data=a.k.__proto__._groupBy("waterfall",t),a.refresh_data=a.k.__proto__._groupBy("waterfall",t);var e=a.k.checkChangeInData(a.refresh_data,a.compare_data);a.compare_data=e[0];var n=e[1];n&&a.k.lastUpdatedAt("liveData"),a.groupData(),a.sortData(),a.calculateRiverData(),a.optionalFeatures().createScales().ticks().createChart(),a.k.yAxis(a.svgContainer,a.yGroup,a.yScale,a.yDomain,a.y_tick_values,void 0,void 0,a.tick_format_function),a.xaxis()},PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeRefresh")):a.k.dataSourceFormatIdentification(t.data,a,"executeRefresh")},a.render=function(){var t=this,e=t.selector.substring(1,t.selector.length);t.container_id=e+"_svg",t.groupData(),t.sortData(),t.calculateRiverData(),t.transitions=new PykCharts.Configuration.transition(t),t.mouseEvent1=new PykCharts.Configuration.mouseEvent(t),t.border=new PykCharts.Configuration.border(t),t.reducedWidth=t.chart_width-t.chart_margin_left-t.chart_margin_right,t.reducedHeight=t.chart_height-t.chart_margin_top-t.chart_margin_bottom,"default"===t.mode?(t.k.title().backgroundColor(t)["export"](t,"#"+t.container_id,"waterfallChart").subtitle().makeMainDiv(t.selector,1),t.optionalFeatures(e).svgContainer(1,t.container_id).createGroups(),t.k.liveData(t).tooltip().createFooter().lastUpdatedAt().credits().dataSource(),t.mouseEvent=new PykCharts.Configuration.mouseEvent(t),t.optionalFeatures(e).axisContainer().createScales().ticks().createChart()):"infographics"===t.mode&&(t.k.backgroundColor(t)["export"](t,"#"+t.container_id,"waterfallChart").emptyDiv().makeMainDiv(t.selector,1),t.optionalFeatures(e).svgContainer(1,t.container_id).createGroups().axisContainer().createScales().ticks().createChart(),t.k.tooltip(),t.mouseEvent=new PykCharts.Configuration.mouseEvent(t)),t.k.yAxis(t.svgContainer,t.yGroup,t.yScale,t.yDomain,t.y_tick_values,void 0,void 0,t.tick_format_function).yAxisTitle(t.yGroup,void 0),t.xaxis(),t.optionalFeatures().axis_background(t.container_id),t.k.exportSVG(t,"#"+t.container_id,"waterfallChart");var n=t.k.resize(t.svgContainer);t.k.__proto__._ready(n),window.addEventListener("resize",function(e){return t.k.resize(t.svgContainer)})},a.optionalFeatures=function(t){var e=this,n={svgContainer:function(n,a){return document.getElementById(t).className+=" PykCharts-twoD",e.svgContainer=d3.select(e.selector+" #chart-container-"+n).append("svg:svg").attr("width",e.chart_width).attr("height",e.chart_height).attr("id",a).attr("class","svgcontainer").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+e.chart_width+" "+e.chart_height),e.background_rect=e.svgContainer.selectAll(".background-rect").data(["rect"]),e.background_rect.enter().append("rect").attr("class","background-rect"),e.background_rect.attr("y",e.chart_margin_top).attr("width",e.longest_tick_width).attr("height",e.reducedHeight).attr("fill",e.axis_y_background_color),this},createGroups:function(){return e.group=e.svgContainer.append("g").attr("id","chartsvg").attr("transform","translate("+e.chart_margin_left+","+e.chart_margin_top+")"),this},createScales:function(){e.y_values=[],e.x_values=[];for(var t=e.river_data.length,n=[],a=0;t>a;a++)n.push(e.river_data[a].y),e.y_values.push(e.river_data[a].unique_name),e.x_values.push(e.river_data[a].end);return e.y_values.reverse(),n.reverse(),e.tick_format_function=function(t){var e=t.lastIndexOf("-");return-1!=e?t.substring(0,e):t},e.yScale=d3.scale.ordinal().domain(e.y_values).rangeRoundBands([e.reducedHeight,0],.1),e.yDomain=n,e.data_length=e.data.length,e.bars=e.group.selectAll(".bar").data(e.river_data),e.bars.attr("transform",function(t){return"translate(5, "+e.yScale(t.unique_name)+")"}),e.bars.enter().append("g").attr("class",function(t){return"bar "+t.group}).attr("transform",function(t){return"translate(5, "+e.yScale(t.unique_name)+")"}),this},axisContainer:function(){return(PykCharts["boolean"](e.axis_y_enable)||e.axis_y_title)&&(e.yGroup=e.group.append("g").attr("id","yaxis").attr("class","y axis")),this},createChart:function(){e.y_tick_values=e.k.processYAxisTickValues(),e.xScale=d3.scale.linear().domain([0,d3.max(e.x_values,function(t){return t})]).range([0,e.reducedWidth-e.longest_tick_width-15]);var t=e.bars.selectAll(".rect").data(function(t){return[t]});t.enter().append("rect").attr("class","rect").attr("stroke",e.border.color()).attr("stroke-width",e.border.width()).attr("stroke-dasharray",e.border.style()).attr("stroke-opacity",1);var n=0;return t.attr("x",function(t){return e.xScale(t.start)+e.longest_tick_width+15}).attr("height",e.yScale.rangeBand()).attr("width",0).attr("fill",function(t,e){return t.color}).attr("fill-opacity",1).attr("data-id",function(t,e){return t.unique_name}).on("mouseover",function(t){if("default"===e.mode){if(PykCharts["boolean"](e.tooltip_enable)){var n=t.tooltip?t.tooltip:"<table><thead><th colspan='2'><b>"+t.y+"</b></th></thead><tr><td>Start</td><td><b>"+e.ticks_formatter(t.start)+"</b></td></tr><tr><td>Weight</td><td><b>"+e.ticks_formatter(t.x)+"</b></td></tr></table>";e.mouseEvent.tooltipPosition(t),e.mouseEvent.tooltipTextShow(n)}e.mouseEvent.axisHighlightShow(t.unique_name,e.selector+" .y.axis",e.y_values,"waterfall"),PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlight(e.selector+" .rect",this)}}).on("mouseout",function(t){"default"===e.mode&&(PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipHide(t),e.mouseEvent.axisHighlightHide(e.selector+" .y.axis"),PykCharts["boolean"](e.chart_onhover_highlight_enable)&&e.mouseEvent.highlightHide(e.selector+" .rect"))}).on("mousemove",function(t){"default"===e.mode&&PykCharts["boolean"](e.tooltip_enable)&&e.mouseEvent.tooltipPosition(t)}).on("click",function(t,n){PykCharts["boolean"](e.click_enable)&&e.addEvents(t.unique_name,d3.select(this).attr("data-id"))}).transition().duration(e.transitions.duration()).delay(function(t){return n++,n/e.data_length*e.transitions.duration()}).attr("x",function(t){return e.xScale("negative"==t.group?t.end:t.start)+e.longest_tick_width+15}).attr("width",function(t){return Math.abs(e.xScale(t.x))}),t.exit().remove(),e.bars.exit().remove(),this},ticks:function(){if(e.pointer_size){var t=e.bars.selectAll(".ticks-text").data(function(t){return[t]});t.enter().append("text").attr("class","ticks-text").style("font-weight",e.pointer_weight).style("font-size",e.pointer_size+"px").style("font-family",e.pointer_family).text(""),t.text(function(t){return e.ticks_formatter(t.x)}).style("visibility","hidden").attr("y",function(t){return e.yScale.rangeBand()/2+this.getBBox().height/3}).attr("dx",".25em").attr("fill",function(t){return e.longest_tick_width=e.longest_tick_width<this.getBBox().width?this.getBBox().width:e.longest_tick_width,"negative"==t.group?e.chart_color[0]:"positive"==t.group?e.chart_color[1]:void 0}).style("visibility","visible"),t.exit().remove()}return this},axis_background:function(t){if(PykCharts["boolean"](e.axis_y_enable)&&e.axis_y_pointer_size){for(var n=document.querySelectorAll("#"+t+" #yaxis .tick text"),a=n.length,r=[],i=0;a>i;i++)r.push(n[i].getBBox().width);var o=d3.max(r,function(t){return t});e.background_rect.attr("x",e.chart_margin_left-o-10).attr("width",o+10),e.background_rect.exit().remove()}return this}};return n},a.groupData=function(){for(a.group_arr=[],a.new_data=[],a.ticks=[],a.x_arr=[],j=0;j<a.data.length;j++)a.group_arr[j]=a.data[j].group;a.uniq_group_arr=a.k.__proto__._unique(a.group_arr);for(var t=a.uniq_group_arr.length,e=0;e<a.data.length;e++)a.x_arr[e]=+a.data[e].x;a.k.__proto__._unique(a.x_arr),a.flag=0;for(var e=0;t>e;e++){a.new_data[e]={name:a.uniq_group_arr[e],data:[]};for(var n=0;n<a.data.length;n++)a.uniq_group_arr[e]===a.data[n].group&&a.new_data[e].data.push({x:+a.data[n].x,y:a.data[n].y,tooltip:a.data[n].tooltip,name:a.data[n].group,unique_name:a.data[n].group?a.data[n].y+"-"+a.data[n].group:a.data[n].y})}a.new_data_length=a.new_data.length},a.dataTransformation=function(t){for(var e=0,n=0,r=t.data,i="Total",o=(r.length,0);o<a.data.length;o++)n+=a.data[o].x,e>n&&(e=n);return t.name&&(i=i+" "+t.name),e=0>e?Math.abs(e):0,r=a.rivergroup(e,r,i,e,t.name)},a.check_total_is_present=function(t){for(var e=!1,n=0;n<a.calculate_total_of.length;n++)if(t===a.calculate_total_of[n]){e=!0;break}return e},a.rivergroup=function(t,e,n,r,i){for(var o=0;o<e.length;o++)e[o].start=r,r+=e[o].x,e[o].end=r,e[o].group=e[o].x>0?"positive":"negative",e[o].color=e[o].x>0?a.chart_color[1]:a.chart_color[0],e[o].name=e[o].name,a.river_data.push(e[o]);return total_start=t,total_end=e[e.length-1].end,total_weight=total_end-total_start,totol_group=total_weight<0?"negative":"positive",a.river_data.push({y:n,x:total_weight,end:total_end,start:total_start,group:totol_group,color:a.chart_color[2],name:e[e.length-1].name,unique_name:i?n+"-"+i:n}),e},a.calculateRiverData=function(){a.river_data=[];for(var t,e=0;e<a.new_data_length;e++)if(0===e)a.dataTransformation(a.new_data[e]);else{var n=a.river_data.length;t=a.river_data[n-1];var r=a.check_total_is_present(t.name);PykCharts["boolean"](a.calculate_total)?!r&&a.calculate_total_of.length&&a.river_data.pop():a.river_data.pop(),name="Total "+a.new_data[e].name,a.rivergroup(a.river_data[0].start,a.new_data[e].data,name,t.end,a.new_data[e].name)}r=a.check_total_is_present(a.river_data[a.river_data.length-1].name),PykCharts["boolean"](a.calculate_total)?!r&&a.calculate_total_of.length&&a.river_data.pop():a.river_data.pop()},a.xaxis=function(){function t(t,e,n,r){a.group.append("line").attr("x1",t).attr("y1",n).attr("x2",e).attr("y2",r).attr("class","custom-axis").attr("stroke",a.axis_x_line_color).attr("stroke-width",1).style("shape-rendering","crispEdges")}var e=a.xScale.domain(),n=a.xScale(e[0])+a.longest_tick_width+15,r=a.xScale(e[1])+a.longest_tick_width+15,i=5,o=a.xScale(a.new_data[0].data[0].start)+a.longest_tick_width+15;if(PykCharts["boolean"](a.axis_x_enable)){t(n+i,r+i+1,a.reducedHeight,a.reducedHeight),t(n+i,n+i,a.reducedHeight,a.reducedHeight+a.axis_x_outer_pointer_length),t(r+i,r+i,a.reducedHeight,a.reducedHeight+a.axis_x_pointer_length),t(o+i,o+i,a.reducedHeight,a.reducedHeight+a.axis_x_pointer_length);var s=a.group.selectAll(".custom-axis-text").data([0]);s.enter().append("text"),s.attr("class","custom-axis-text").attr("x",o+i).attr("y",a.reducedHeight+a.axis_x_pointer_length).attr("dy",12).attr("text-anchor","middle").attr("fill",a.axis_x_pointer_color).style("font-family",a.axis_x_pointer_family).style("font-size",a.axis_x_pointer_size).style("font-weight",a.axis_x_pointer_weight).text("0"),s.exit().remove()}},a.sortData=function(){if("number"===a.axis_y_data_format||"time"===a.axis_y_data_format)for(var t=0;t<a.new_data_length;t++)a.new_data[t].data=a.k.__proto__._sortData(a.new_data[t].data,void 0,"y",a)}},PykCharts.maps={},PykCharts.maps.processInputs=function(t,e){var n=new PykCharts.Configuration.Theme({}),a=n.stylesheet,r=(n.functionality,n.mapsTheme);if(e.optional,t.timeline_duration="timeline_duration"in e?e.timeline_duration:r.timeline_duration,t.margin_left=e.timeline_margin_left?e.timeline_margin_left:r.timeline_margin_left,t.margin_right=e.timeline_margin_right?e.timeline_margin_right:r.timeline_margin_right,t.margin_top=e.timeline_margin_top?e.timeline_margin_top:r.timeline_margin_top,t.margin_bottom=e.timeline_margin_bottom?e.timeline_margin_bottom:r.timeline_margin_bottom,t.tooltip_position_top=e.tooltip_position_top?e.tooltip_position_top:r.tooltip_position_top,t.tooltip_position_left=e.tooltip_position_left?e.tooltip_position_left:r.tooltip_position_left,t.tooltipTopCorrection=d3.select(t.selector).style("top"),t.tooltipLeftCorrection=d3.select(t.selector).style("left"),t.chart_color=e.chart_color?e.chart_color:[],t.saturation_color=e.saturation_color?e.saturation_color:"",t.palette_color=e.palette_color?e.palette_color:r.palette_color,t.label_enable=e.label_enable?e.label_enable.toLowerCase():r.label_enable,t.chart_onhover_effect=e.chart_onhover_effect?e.chart_onhover_effect.toLowerCase():r.chart_onhover_effect,t.default_zoom_level=e.default_zoom_level?e.default_zoom_level:80,t.k=new PykCharts.Configuration(t),t.total_no_of_colors=e.total_no_of_colors&&t.k.__proto__._isNumber(parseInt(e.total_no_of_colors,10))?parseInt(e.total_no_of_colors,10):r.total_no_of_colors,t.default_color=e.default_color?e.default_color:a.chart_color,t.k.validator().validatingSelector(t.selector.substring(1,t.selector.length)).isArray(t.chart_color,"chart_color").validatingDataType(t.margin_left,"timeline_margin_left",r.timeline_margin_left,"margin_left").validatingDataType(t.margin_right,"timeline_margin_right",r.timeline_margin_right,"margin_right").validatingDataType(t.margin_top,"timeline_margin_top",r.timeline_margin_top,"margin_top").validatingDataType(t.margin_bottom,"timeline_margin_bottom",r.timeline_margin_bottom,"margin_bottom").validatingDataType(t.tooltip_position_top,"tooltip_position_top",r.tooltip_position_top).validatingDataType(t.tooltip_position_left,"tooltip_position_left",r.tooltip_position_left).validatingColor(t.highlight_color,"highlight_color",a.highlight_color).validatingColor(t.saturation_color,"saturation_color",a.saturation_color),t.chart_color.constructor===Array&&t.chart_color[0]&&t.k.validator().validatingColor(t.chart_color[0],"chart_color",a.chart_color),"saturation"===t.color_mode)try{if(t.total_no_of_colors<3||t.total_no_of_colors>9)throw t.total_no_of_colors=r.total_no_of_colors,"total_no_of_colors"}catch(i){t.k.warningHandling(i,"10")}try{if("shadow"!==t.chart_onhover_effect.toLowerCase()&&"none"!==t.chart_onhover_effect.toLowerCase()&&"highlight_border"!==t.chart_onhover_effect.toLowerCase()&&"color_saturation"!==t.chart_onhover_effect.toLowerCase())throw t.chart_onhover_effect=r.chart_onhover_effect,
"chart_onhover_effect"}catch(i){t.k.warningHandling(i,"12")}try{if(!t.k.__proto__._isNumber(t.default_zoom_level))throw t.default_zoom_level=80,"default_zoom_level"}catch(i){t.k.warningHandling(i,"1")}return t.timeline_duration=1e3*t.timeline_duration,t},PykCharts.maps.oneLayer=function(t){var e=this;e.interval="";var n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"maps"),e=PykCharts.maps.processInputs(e,t),e.executeData=function(a){var r=e.k.validator().validatingJSON(a),i=e.selector.substring(1,e.selector.length);return e.stop||r===!1?void e.k.remove_loading_bar(i):(e.k.storeInitialDivHeight(),e.data=a,e.data_length=e.data.length,e.compare_data=a,e.k.totalColors(e.total_no_of_colors).colorType(e.color_mode).loading(e.loading).tooltip(),d3.json(PykCharts.assets+"ref/"+e.map_code+"-topo.json",function(a,r){if(a&&404===a.status)return e.k.errorHandling("map_code","3"),void e.k.remove_loading_bar(i);e.map_data=r;for(var o=e.map_data.objects.geometries.length,s=0;o>s;s++){var l=e.map_data.objects.geometries[s].properties.NAME_1.replace("'","&#39;");e.map_data.objects.geometries[s].properties.NAME_1=l}d3.json(PykCharts.assets+"ref/colorPalette.json",function(a){e.color_palette_data=a;var r=e.k.__proto__._where(e.color_palette_data,{name:e.palette_color});try{if(!r.length)throw e.palette_color=n.mapsTheme.palette_color,"palette_color"}catch(i){e.k.warningHandling(i,"11")}d3.select(e.selector).html(""),d3.select(e.selector).style("height","auto");var o=new PykCharts.maps.mapFunctions(t,e,"oneLayer");o.render()})}),e.extent_size=d3.extent(e.data,function(t){return parseInt(t.size,10)}),void(e.difference=e.extent_size[1]-e.extent_size[0]))},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}},PykCharts.maps.timelineMap=function(t){var e=this,n=new PykCharts.Configuration.Theme({});this.execute=function(a){e=new PykCharts.validation.processInputs(e,t,"maps"),e=PykCharts.maps.processInputs(e,t),PykCharts.scaleFunction(e),e.executeData=function(a){var r=e.k.validator().validatingJSON(a),i=e.selector.substring(1,e.selector.length);if(e.stop||r===!1)return void e.k.remove_loading_bar(i);e.k.storeInitialDivHeight(),e.timeline_data=a,e.compare_data=a;var o=d3.extent(a,function(t){return t.timestamp});a.length,e.data=e.k.__proto__._where(a,{timestamp:o[0]}),e.data_length=e.data.length,e.redeced_width=e.chart_width-2*e.margin_left-e.margin_left,e.k.totalColors(e.total_no_of_colors).colorType(e.color_mode).loading(e.loading).tooltip(e.tooltip_enable),d3.json(PykCharts.assets+"ref/"+e.map_code+"-topo.json",function(a){e.map_data=a;for(var r=e.map_data.objects.geometries.length,i=0;r>i;i++){var o=e.map_data.objects.geometries[i].properties.NAME_1.replace("'","&#39;");e.map_data.objects.geometries[i].properties.NAME_1=o}d3.json(PykCharts.assets+"ref/colorPalette.json",function(a){e.color_palette_data=a;var r=e.k.__proto__._where(e.color_palette_data,{name:e.palette_color});try{if(!r.length)throw e.palette_color=n.mapsTheme.palette_color,"palette_color"}catch(i){e.k.warningHandling(i,"11")}var o=d3.extent(e.timeline_data,function(t){return t.timestamp});e.data=e.k.__proto__._where(e.timeline_data,{timestamp:o[0]}),e.data_length=e.data.length,e.data.sort(function(t,e){return t.timestamp-e.timestamp}),d3.select(e.selector).html("");var s=new PykCharts.maps.mapFunctions(t,e,"timeline");s.render()})}),e.extent_size=d3.extent(e.data,function(t){return parseInt(t.size,10)}),e.difference=e.extent_size[1]-e.extent_size[0]},PykCharts["boolean"](e.interactive_enable)?(e.k.dataFromPykQuery(a),e.k.dataSourceFormatIdentification(e.data,e,"executeData")):e.k.dataSourceFormatIdentification(t.data,e,"executeData")}},PykCharts.maps.mapFunctions=function(t,e,n){var a=e,r=a.selector.substring(1,a.selector.length),i=r+"_svg";this.render=function(){a.border=new PykCharts.Configuration.border(a),a.mouseEvent=new PykCharts.Configuration.mouseEvent(a),a.k.title().backgroundColor(a),"oneLayer"===n&&a.k["export"](a,"#"+i,n).emptyDiv().subtitle().exportSVG(a,"#"+i,n),a.current_palette=a.k.__proto__._where(a.color_palette_data,{name:a.palette_color,number:a.total_no_of_colors})[0],"timeline"===n&&a.k.subtitle(),a.optionalFeatures().svgContainer(i).legendsContainer(a.legends_enable).legends(a.legends_enable).createMap().label(a.label_enable),a.redeced_height=a.chart_height-a.margin_top-a.margin_bottom,a.k.createFooter().lastUpdatedAt().credits().dataSource(),"timeline"===n&&(a.optionalFeatures().axisContainer(!0),a.renderDataForTimescale(),a.backgroundColor(),a.renderButtons(),a.renderTimeline());var t=a.k.resize(a.svgContainer);a.k.__proto__._ready(t),window.addEventListener("resize",function(t){return a.k.resize(a.svgContainer)})},a.refresh=function(e){a.executeRefresh=function(t){a.data=t,a.data_length=a.data.length,a.refresh_data=t;var e=a.k.checkChangeInData(a.refresh_data,a.compare_data);a.compare_data=e[0];var n=e[1];n&&a.k.lastUpdatedAt("liveData"),a.extent_size=d3.extent(a.data,function(t){return parseInt(t.size,10)}),a.difference=a.extent_size[1]-a.extent_size[0],a.optionalFeatures().legends(a.legends_enable).createMap()},"oneLayer"===n&&(PykCharts["boolean"](a.interactive_enable)?(a.k.dataFromPykQuery(e),a.k.dataSourceFormatIdentification(a.data,a,"executeRefresh")):a.k.dataSourceFormatIdentification(t.data,a,"executeRefresh"))},a.optionalFeatures=function(){var t=a.selector.substring(1,a.selector.length),e={legends:function(t){return PykCharts["boolean"](t)&&a.renderLegend(),this},legendsContainer:function(t){return PykCharts["boolean"](t)&&"saturation"===a.color_mode?a.legendsContainer=a.svgContainer.append("g").attr("id","legend-container"):(a.legendsGroup_height=0,a.legendsGroup_width=0),this},label:function(t){return PykCharts["boolean"](t)&&a.renderLabel(),this},svgContainer:function(e){document.getElementById(t).style.width="100%",a.svgContainer=d3.select(a.selector).append("svg").attr({width:a.chart_width,height:a.chart_height,id:e,"class":"PykCharts-map",preserveAspectRatio:"xMinYMin",viewBox:"0 0 "+a.chart_width+" "+a.chart_height}),a.map_cont=a.svgContainer.append("g").attr("id","map_group");var n=a.map_cont.append("defs"),r=n.append("filter").attr("id","dropshadow");r.append("feGaussianBlur").attr({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),r.append("feOffset").attr({"in":"blur",dx:1,dy:1,result:"offsetBlur"});var i=r.append("feMerge");return i.append("feMergeNode").attr('in", "offsetBlur'),i.append("feMergeNode").attr("in","SourceGraphic"),this},createMap:function(){var e=a.chart_width-a.legendsGroup_width,n=a.chart_height-a.legendsGroup_height-a.margin_bottom-a.margin_top-10,r=150,i=[e/2,n/2];if(document.getElementById(t).style.backgroundColor=a.background_color,a.group=a.map_cont.selectAll(".map_group").data(topojson.feature(a.map_data,a.map_data.objects).features),a.group.enter().append("g").attr("class","map_group").append("path"),"world"===a.map_code||"world_with_antarctica"===a.map_code)var o=[0,0];else var o=d3.geo.centroid(topojson.feature(a.map_data,a.map_data.objects));var s=d3.geo.mercator().center(o).scale(r).translate(i);a.path=d3.geo.path().projection(s);var l=a.path.bounds(topojson.feature(a.map_data,a.map_data.objects)),c=r*e/(l[1][0]-l[0][0]),u=r*n/(l[1][1]-l[0][1]),r=u>c?c:u,i=[e-(l[0][0]+l[1][0])/2,n-(l[0][1]+l[1][1])/2];s=d3.geo.mercator().center(o).scale(a.default_zoom_level/100*r).translate(i),a.path=a.path.projection(s);var h=d3.select("#pyk-tooltip");return a.chart_data=a.group.select("path").attr({d:a.path,"class":"area",iso2:function(t){return t.properties.iso_a2},area_name:function(t){return t.properties.NAME_1},fill:a.renderColor,prev_fill:function(t){return d3.select(this).attr("fill")},"fill-opacity":a.renderOpacity,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")},"data-id":function(t,e){return t.properties.iso_a2}}).style({stroke:a.border.color(),"stroke-width":a.border.width(),"stroke-dasharray":a.border.style()}).on({mouseover:function(t){var e=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0];if(e){if(PykCharts["boolean"](a.tooltip_enable)){var n=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0].tooltip?a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0].tooltip:"<table><thead><th colspan='2'><b>"+t.properties.NAME_1+"</b></th></thead><tr><td>Size</td><td><b>"+a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0].size+"</b></td></tr></table>";h.style("display","block"),h.html(n),"moving"===a.tooltip_mode?h.style("top",function(){return PykCharts.getEvent().pageY-20+"px"}).style("left",function(){return PykCharts.getEvent().pageX+20+"px"}):"fixed"===a.tooltip_mode&&h.style("top",a.tooltip_position_top+"px").style("left",a.tooltip_position_left+"px")}"color_saturation"===a.onhover1&&PykCharts["boolean"](a.chart_onhover_highlight_enable)?a.mouseEvent.highlight(a.selector+" .area",this):a.bodColor(t)}},mouseout:function(t){PykCharts["boolean"](a.tooltip_enable)&&h.style("display","none"),a.bodUncolor(t),a.mouseEvent.highlightHide(a.selector+" .area")},click:function(t){PykCharts["boolean"](a.click_enable)&&a.addEvents(t.properties.iso_a2,d3.select(this).attr("data-id"))}}),a.group.exit().remove(),this},enableClick:function(t){return PykCharts["boolean"](t)?(a.chart_data.on("click",a.clicked),a.onhover1=a.chart_onhover_effect):a.onhover1=a.chart_onhover_effect,this},axisContainer:function(t){return PykCharts["boolean"](t)&&(a.gxaxis=a.svgContainer.append("g").attr({id:"xaxis","class":"x axis",transform:"translate("+2*a.margin_left+","+a.redeced_height+")"})),this}};return e},a.renderColor=function(t,e){if(!PykCharts["boolean"](t))return!1;var n,r=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2});if(r.length>0){if("color"===a.color_mode)return a.chart_color[0]?a.chart_color[0]:r.length>0&&PykCharts["boolean"](r[0].color)?r[0].color:a.default_color[0];if("saturation"===a.color_mode){if(a.highlight===a.map_data.objects.geometries[e].properties.iso_a2)return a.highlight_color;if(""!==a.saturation_color)return a.saturation_color;if(""!==a.palette_color)for(n=r[0].size,e=0;e<a.current_palette.colors.length;e++)if(n>=a.extent_size[0]+e*(a.difference/a.current_palette.colors.length)&&n<=a.extent_size[0]+(e+1)*(a.difference/a.current_palette.colors.length))return 1===a.data.length?a.current_palette.colors[a.current_palette.colors.length-1]:a.current_palette.colors[e]}return a.default_color[0]}return a.default_color[0]},a.renderOpacity=function(t){var e=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0];return"undefined"!=typeof e&&""!==a.saturation_color&&"saturation"===a.color_mode?(a.oneninth=+d3.format(".2f")(a.difference/a.total_no_of_colors),a.opacity=(parseInt(a.extent_size[0])+parseInt(a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0].size)+parseInt(a.oneninth))/a.difference,a.opacity):1},a.renderLegend=function(){var t;if("saturation"===a.color_mode){if("vertical"===a.legends_display){var e=0,n=0;""===a.palette_color?(a.legendsContainer.attr("height",290),a.legendsGroup_height=0):(a.legendsContainer.attr("height",30*a.current_palette.number+20),a.legendsGroup_height=0),text_parameter1="x",text_parameter2="y",rect_parameter1="width",rect_parameter2="height",rect_parameter3="x",rect_parameter4="y",rect_parameter1value=13,rect_parameter2value=13,l=function(t,e){return 38},c=function(t,e){return 20};var r=function(t){return n++,24*n+12},i=function(t){return e++,24*e+23}}else if("horizontal"===a.legends_display){var o=0,s=0;""===a.palette_color?(o=9,s=9):(o=a.current_palette.number,s=a.current_palette.number,a.legendsContainer.attr("height",30*a.current_palette.number+20),a.legendsGroup_height=30*a.current_palette.number+20),a.legendsContainer.attr("height",50),a.legendsGroup_height=50,final_rect_x=0,final_text_x=0,legend_text_widths=[],temp_text=temp_rect=0,text_parameter1="x",text_parameter2="y",rect_parameter1="width",rect_parameter2="height",rect_parameter3="x",rect_parameter4="y";var l=function(t,e){return legend_text_widths[e]=this.getBBox().width,legend_start_x=16,final_text_x=0===e?legend_start_x:legend_start_x+temp_text,temp_text=temp_text+legend_text_widths[e]+30,final_text_x};i=30,rect_parameter1value=13,rect_parameter2value=13;var c=function(t,e){return final_rect_x=0===e?0:temp_rect,temp_rect=temp_rect+legend_text_widths[e]+30,final_rect_x};r=18}if(""!==a.saturation_color){for(var t,u=[],s=1;s<=a.total_no_of_colors;s++)u.push(s);t=d3.format(".1f")(a.extent_size[1]/a.total_no_of_colors),a.leg=function(e,n){return"<"+d3.round(t*(n+1))};var h=a.legendsContainer.selectAll(".rect").data(u);a.legends_text=a.legendsContainer.selectAll(".text").data(u),a.legends_text.enter().append("text"),a.legends_text.attr("class","text").attr("pointer-events","none").text(a.leg).attr({fill:a.legends_text_color,"font-family":a.legends_text_family,"font-size":a.legends_text_size,"font-weight":a.legends_text_weight,x:l,y:i}),h.enter().append("rect"),h.attr("class","rect").attr({x:c,y:r,width:rect_parameter1value,height:rect_parameter2value,fill:a.saturation_color,"fill-opacity":function(t,e){return(e+1)/a.total_no_of_colors}});var d,p=a.legendsContainer.node().getBBox().width;"vertical"===a.legends_display?a.legendsGroup_width=p+20:a.legendsGroup_width=0,d="vertical"===a.legends_display?a.chart_width-a.legendsGroup_width:a.chart_width-p-20,p<a.chart_width&&a.legendsContainer.attr("transform","translate("+(d-20)+",10)"),a.legendsContainer.style("visibility","visible"),a.legends_text.exit().remove(),h.exit().remove()}else{a.leg=function(t,e){return"<"+d3.round(a.extent_size[0]+(e+1)*(a.difference/a.current_palette.number))};var h=a.legendsContainer.selectAll(".rect").data(a.current_palette.colors);a.legends_text=a.legendsContainer.selectAll(".text").data(a.current_palette.colors),a.legends_text.enter().append("text"),a.legends_text.attr("class","text").attr("pointer-events","none").text(a.leg).attr({fill:a.legends_text_color,"font-family":a.legends_text_family,"font-size":a.legends_text_size,"font-weight":a.legends_text_weight,x:l,y:i}),h.enter().append("rect"),h.attr({"class":"rect",width:rect_parameter1value,height:rect_parameter2value,fill:function(t){return t},x:c,y:r});var d,p=a.legendsContainer.node().getBBox().width;"vertical"===a.legends_display?a.legendsGroup_width=p+20:a.legendsGroup_width=0,d="vertical"===a.legends_display?a.chart_width-a.legendsGroup_width:a.chart_width-p-20,p<a.chart_width&&a.legendsContainer.attr("transform","translate("+d+",10)"),a.legendsContainer.style("visibility","visible"),a.legends_text.exit().remove(),h.exit().remove()}}else{var f=document.getElementById("legend-container");f&&f.parentNode.removeChild(f)}},a.renderLabel=function(){a.group.append("text").attr({x:function(t){return a.path.centroid(t)[0]},y:function(t){return a.path.centroid(t)[1]},"text-anchor":"middle","font-size":"10px",fill:a.label_color,"pointer-events":"none"}).text(function(t){return t.properties.NAME_1.replace("&#39;","'")})},a.bodColor=function(t){var e=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2});PykCharts["boolean"](a.chart_onhover_highlight_enable)?"highlight_border"===a.onhover1?d3.select("path[area_name='"+t.properties.NAME_1+"']").style({stroke:a.border.color(),"stroke-width":parseFloat(a.border.width())+1.5+"px","stroke-dasharray":a.border.style()}):"shadow"===a.onhover1&&d3.select("path[area_name='"+t.properties.NAME_1+"']").attr({filter:"url(#dropshadow)","fill-opacity":function(){return""===a.palette_color&&"saturation"===a.color_mode?(a.oneninth_dim=+d3.format(".2f")(a.difference/a.total_no_of_colors),a.opacity_dim=(a.extent_size[0]+e[0].size+a.oneninth_dim)/a.difference,a.opacity_dim/2):.5}}):a.bodUncolor(t)},a.bodUncolor=function(t){d3.select("path[area_name='"+t.properties.NAME_1+"']").style({stroke:a.border.color(),"stroke-width":a.border.width(),"stroke-dasharray":a.border.style()}).attr({filter:null,"fill-opacity":function(){var e=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0];return"undefined"!=typeof e&&""!==a.saturation_color&&"saturation"===a.color_mode?(a.oneninth_high=+d3.format(".2f")(a.difference/a.total_no_of_colors),a.opacity_high=(parseInt(a.extent_size[0])+parseInt(e.size)+parseInt(a.oneninth_high))/a.difference,a.opacity_high):1}})},this.clicked=function(t){var e={};e.container=PykCharts.getEvent().target.ownerSVGElement.parentNode.id,e.area=t.properties,e.data=a.k.__proto__._where(a.data,{iso2:t.properties.iso_a2})[0];try{customFunction(e)}catch(n){}},a.backgroundColor=function(){function t(r){return n=r,e=d3.select(r).style("background-color"),"transparent"!==e&&"rgba(0, 0, 0, 0)"!==e?a.k.__proto__._colourBrightness(e,d3.selectAll(r)[0]):void 0!==d3.select(r)[0][0].parentNode.tagName&&"body"!==d3.select(r)[0][0].parentNode.tagName.toLowerCase()?t(d3.select(r)[0][0].parentNode):void a.k.__proto__._colourBrightness("rgb(255,255,255)",d3.select(r)[0])}var e,n;t(a.selector),d3.select(n)[0][0].classList.contains("light")||"/overview"===window.location.pathname?(a.play_image_url=PykCharts.assets+"img/play.png",a.pause_image_url=PykCharts.assets+"img/pause.png",a.marker_image_url=PykCharts.assets+"img/marker.png"):(a.play_image_url=PykCharts.assets+"img/play-light.png",a.pause_image_url=PykCharts.assets+"img/pause-light.png",a.marker_image_url=PykCharts.assets+"img/marker-light.png")},a.renderDataForTimescale=function(){a.unique=[],x_extent=d3.extent(a.timeline_data,function(t){return t.timestamp}),x_range=[0,a.redeced_width],a.xScale=a.k.scaleIdentification("linear",x_extent,x_range);for(var t=a.timeline_data.length,e=0;t>e;e++)-1===a.unique.indexOf(a.timeline_data[e].timestamp)&&a.unique.push(a.timeline_data[e].timestamp);a.unique.sort(function(t,e){return t-e}),a.k.xAxis(a.svgContainer,a.gxaxis,a.xScale),a.gxaxis&&a.gxaxis.attr("transform","translate("+2*a.margin_left+","+a.redeced_height+")")},a.renderTimeline=function(){var t=interval1=a.interval_index=1;a.play.on("click",function(){e()}),a.timeline_status="";var e=function(){if("playing"===a.timeline_status)a.play.attr("xlink:href",a.play_image_url),a.timeline_status="paused",a.interval_index=t,clearInterval(a.play_interval);else{a.timeline_status="playing",a.play.attr("xlink:href",a.pause_image_url),t=a.interval_index;var e=function(){t===a.unique.length&&(t=0),a.marker.attr("x",2*a.margin_left+a.xScale(a.unique[t])-7),a.data=a.k.__proto__._where(a.timeline_data,{timestamp:a.unique[t]}),a.data_length=a.data.length,a.data.sort(function(t,e){return t.timestamp-e.timestamp}),a.extent_size=d3.extent(a.data,function(t){return parseInt(t.size,10)}),a.difference=a.extent_size[1]-a.extent_size[0];for(var e=0;e<a.data_length;e++)d3.select(a.selector+" path[iso2='"+a.data[e].iso2+"']").attr({fill:a.renderColor,"fill-opacity":a.renderOpacity,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")}});t++};a.play_interval=setInterval(function(){e(),1===t&&(a.play.attr("xlink:href",a.play_image_url),a.interval_index=1,a.timeline_status="",clearInterval(a.play_interval))},a.timeline_duration),e()}}},a.renderButtons=function(){function t(t){if(document.getElementsByTagName("body")[0].style.cursor="pointer","playing"!==a.timeline_status){for(var e,n,r,i,o=PykCharts.getEvent().sourceEvent.pageX-a.margin_left,s=[],l=a.xScale.range(),c=a.unique.length,u=(l[1]-l[0])/c,h=0,d=0;c>d;d++)h+=u,s[d]=parseInt(h);for(var p=0;c>p;p++)if(o>=s[p]&&o<=s[p+1]){if(e=s[p],n=s[p+1],r=o-e,i=n-o,r>=i&&c-2>=p){a.marker.attr("x",2*a.margin_left+a.xScale(a.unique[p])-7),a.data=a.k.__proto__._where(a.timeline_data,{timestamp:a.unique[p]}),a.data_length=a.data.length,a.data.sort(function(t,e){return t.timestamp-e.timestamp}),a.extent_size=d3.extent(a.data,function(t){return parseInt(t.size,10)}),a.difference=a.extent_size[1]-a.extent_size[0];for(var f=0;f<a.data_length;f++)d3.select(a.selector+" path[iso2='"+a.data[f].iso2+"']").attr({fill:a.renderColor,"fill-opacity":a.renderOpacity,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")}});a.interval_index=p}}else if(o>s[p]&&p>c-2){a.marker.attr("x",2*a.margin_left+a.xScale(a.unique[p])-7),a.data=a.k.__proto__._where(a.timeline_data,{timestamp:a.unique[p]}),a.data_length=a.data.length,a.data.sort(function(t,e){return t.timestamp-e.timestamp}),a.extent_size=d3.extent(a.data,function(t){return parseInt(t.size,10)}),a.difference=a.extent_size[1]-a.extent_size[0];for(var f=0;f<a.data_length;f++)d3.select(a.selector+" path[iso2='"+a.data[f].iso2+"']").attr({fill:a.renderColor,"fill-opacity":a.renderOpacity,"data-fill-opacity":function(){return d3.select(this).attr("fill-opacity")}});a.interval_index=p}}}var e=d3.select(a.selector+" .axis").node().getBBox();drag=d3.behavior.drag().origin(Object).on("drag",t).on("dragend",function(){document.getElementsByTagName("body")[0].style.cursor="default"}),a.play=a.svgContainer.append("image").attr({"xlink:href":a.play_image_url,x:a.margin_left/2,y:a.redeced_height-a.margin_top-e.height/2,width:"24px",height:"21px"}).style("cursor","pointer"),a.marker=a.svgContainer.append("image").attr({"xlink:href":a.marker_image_url,x:2*a.margin_left+a.xScale(a.unique[0])-7,y:a.redeced_height,width:"14px",height:"12px"}).style("cursor","pointer").call(drag)}};var anonymousFunc=function(){function t(t){var e=document.createElement("script");e.type="text/javascript",e.async=!1,e.onload=function(){try{PykCharts.numberFormat=d3.format(","),d3&&d3.customHive&&topojson&&$c&&paper&&(window.PykChartsInit(),document.querySelector("body").onclick=function(){0===PykCharts.export_menu_status&&d3.selectAll(".dropdown-multipleConatiner-export").style("visibility","hidden"),PykCharts.export_menu_status=0})}catch(t){}},e.src=t;var n=document.getElementsByTagName("link")[0];n.parentNode.insertBefore(e,n)}var e=[PykCharts.assets+"lib/d3.min.js",PykCharts.assets+"lib/topojson.min.js",PykCharts.assets+"lib/custom-hive.min.js",PykCharts.assets+"lib/colors.min.js",PykCharts.assets+"lib/paper-full.min.js"];try{d3||t(e[0])}catch(n){t(e[0])}try{d3.customHive||t(e[1])}catch(n){t(e[1])}try{topojson||t(e[2])}catch(n){t(e[2])}try{$c||t(e[3])}catch(n){t(e[3])}try{paper||t(e[4])}catch(n){t(e[4])}};window.onload=anonymousFunc(),PykUtil={},PykUtil.init=function(){this.pushToArray=function(t,e){return t=a.length?a.push(e):[e]},this.concatAndUniq=function(t,e){return void 0!=t&&void 0!=e&&(t=t.concat(e).filter(function(t,e,n){return n.indexOf(t)===e})),t},this.isExactlySame=function(t,e){if(t&&e){var n=t.length===e.length&&t.every(function(t,n){return _.isEqual(t,e[n])});return n}return!1},this.subtractArray=function(t,e){if(t&&e){if(0===t.length)return t=void 0;for(var n=e.length,a=0;n>a;a++){var r=t.indexOf(e[a]);if(r>-1&&t.splice(r,1),0===t.length)return t=void 0}}return t},this.subtractObjectAttribute=function(t,e){if(t&&e){if(0===Object.keys(t).length)return t=void 0;for(var n=e.length,a=0;n>a;a++)if(t[e[a]]&&delete t[e[a]],0===Object.keys(t).length)return t=void 0}return t},this.isBlank=function(t){return t?!1:!0}};var PykQuery={};PykQuery.global_names=[],PykQuery.local_names=[],PykQuery.query_json={};var queryjson={},query_restore=!0,restoreFilters=function(){for(var t in PykQuery.query_json){for(var e,n=PykQuery.query_json[t],a=window[t],r=n.length,i=0;r>i;i++)e="local"===a.scope?!1:!0,a.addFilter([n[i]],e,!0,a.localdividtriggeringevent,!0);if(0===r&&"global"===a.scope){var o=document.getElementsByClassName("filter_list");if(o.length>0){var s=o[0].parentNode.id;a.listFilters(s)}}}};Object.defineProperty(PykQuery,"query_json",{get:function(){return queryjson},set:function(t){queryjson=t,query_restore&&restoreFilters()}});var setQueryJSON=function(t,e,n){PykQuery.query_json[t]=n};PykQuery.init=function(t,e,n,a){var r,i,o,s,l,c,u,h,d=this,p=a,f=[],g=["aggregation","unique","select","datatype","global"],m=["local","global"],v=["inbrowser","rumi"],y=["csv","json","array"],x=new PykUtil.init,b=x.isBlank,w=x.concatAndUniq,k=x.subtractArray,C=x.subtractObjectAttribute,D=function(t,e){var n="";100>t&&(n="Visit http://0.0.0.0:4567/#error_"+t),console.error("%c[Error - PykQuery] ","color: red;font-weight:bold;font-size:14px",'("'+e+'"). '+n)},P=function(t,e){console.warn("%c[Warning - PykQuery] ","color: #F8C325;font-weight:bold;font-size:14px",'("'+e+'"). Visit http://0.0.0.0:4567/#warning_'+t)};if(!(g.indexOf(t)>-1&&m.indexOf(e)>-1&&!b(n)&&v.indexOf(a)>-1))return-1===g.indexOf(t)&&D(2,n+": mode has invalid value. It should be one of "+g),-1===m.indexOf(e)&&D(3,n+": scope has invalid value. It should be one of "+m),-1===v.indexOf(a)&&D(4,n+": adapters has invalid value. It should be one of "+v),b(n)&&D(5,n+": DivID cannot be undefined"),!1;if(i=t,o=e,s=a,r="local"===o?n.replace("#",""):n,l="global"===o?_.find(PykQuery.global_names,function(t){return t===r}):null,c="local"===o?_.find(PykQuery.local_names,function(t){return t===r}):null,"global"==i&&"global"!=o)return D(1,r+": scope and mode both should be global"),!1;if(void 0==l&&"global"==o)PykQuery.global_names.push(r),flag=!0;else{if(void 0!=c||"local"!=o)return flag=!1,!1;PykQuery.local_names.push(r),flag=!0}var S,A,E,T,M=[],F=[],N={},I=[],z=[],H=2e3,L=[],B=[],j=0,O={},$=[],R=!0;switch(this.executeOnFilter=function(){},"global"===i&&"global"===o&&"inbrowser"===s&&Object.defineProperty(this,"rawdata",{get:function(){return A},set:function(t){A=t}}),"local"===o&&"inbrowser"===s&&Object.defineProperty(this,"global_divid_for_raw_data",{get:function(){return E},set:function(t){E=t}}),"rumi"===s&&(Object.defineProperty(this,"rumiparams",{get:function(){return p},set:function(t){p=t}}),Object.defineProperty(this,"dataformat",{get:function(){return T},set:function(t){y.indexOf(t.toLowerCase())>-1?T=t:D(6,"The accepted data formats are csv, json and array only. Kindly set a valid data format")}})),Object.defineProperty(this,"scope",{get:function(){return o}}),i){case"select":Object.defineProperty(this,"select",{get:function(){return I},set:function(t){I=t}});break;case"aggregation":Object.defineProperty(this,"dimensions",{get:function(){return F},set:function(t){F=w(F,t)}}),Object.defineProperty(this,"metrics",{get:function(){return N},set:function(t){if(Z(t))for(var e in t)N[e]=t[e]}});break;case"unique":Object.defineProperty(this,"unique",{get:function(){return I},set:function(t){_.each(t,function(t){I.push(t)})}});break;case"datatype":"datatype"===i&&"local"===o&&"rumi"===s&&Object.defineProperty(this,"datatype",{get:function(){return $},set:function(t){$=w($,t)}})}Object.defineProperty(this,"div_id",{get:function(){return r}}),Object.defineProperty(this,"localdividtriggeringevent",{get:function(){return u},set:function(t){u=t}}),Object.defineProperty(this,"limit",{get:function(){return H},set:function(t){H=t}}),Object.defineProperty(this,"mode",{get:function(){return i}}),Object.defineProperty(this,"offset",{get:function(){return j},set:function(t){j=t}}),Object.defineProperty(this,"impacts",{get:function(){return L},set:function(t){J(t)&&L.push(t)}}),Object.defineProperty(this,"impactedby",{get:function(){return B},set:function(t){B.push(t)}}),Object.defineProperty(this,"alias",{get:function(){return O},set:function(t){if(columns=Object.keys(t),columns.length<1)return void P(1,"Need atleast 1 alias name to add.");for(var e in t)O[e]=t[e]}}),Object.defineProperty(this,"sort",{get:function(){return z},set:function(t){for(var e=t.length,n=0;e>n;n++){var a=Object.keys(t[n])[0],r=z.length,i=!1;if(b(a))return void D(8,"Column name is undefined in sort");(b(t[n][a])||"asc"!=t[n][a]&&"desc"!=t[n][a])&&(t[n][a]="asc");for(var o=0;r>o;o++)if(z[o][a]){z[o][a]=t[n][a],i=!0;break}i||(z=w(z,t))}}}),Object.defineProperty(this,"filters",{get:function(){return M},set:function(t){M=t}}),this.addFilter=function(t,e,n,a,r){e&&"global"===o?(q(t,e,n,this,r),document.getElementsByClassName("filter_list").length>0&&rt()):e&&"local"===o?G(t,n):e||"local"!==o||q(t,e,n,this,r)};var q=function(t,e,n,a,r){for(var i=!1,o=M.length,s=t.length,l=!0,c=0;s>c;c++){var u=t[c],h=u.length,d=document.querySelectorAll("[data-id='"+u[0].selected_dom_id+"']");if(h>1){for(var p=0;h-1>p;p++)u[p].group=!0;u[h-1].group=!1}if(0===o)M.push(u),i=!0,l=!1;else{for(var f=!1,_=0;o>_;_++){var g=x.isExactlySame(u,M[_]),m=x.isExactlySame(u,M[_]);if(m&&g){P(2,"Clean up your JS: Same filter cannot add"),f=!0;break}}if(f)break;if(d.length>0&&d[0].classList.contains("pykquery-selected")&&!u.override_filter);else{for(var v=!1,y=0;h>y;y++)for(var b=u[y],w=!1,k=0;o>k;k++){var C=M[k],D=C.length;if(K(b)){for(var S=0;D>S;S++){var A=C[S],E=A.column_name,T=A.condition_type;if(E===b.column_name&&T===b.condition_type)if("values"===T||"datatype"===T){var F=x.isExactlySame(b.not_in,A["in"]),N=x.isExactlySame(b["in"],A.not_in);if(b.override_filter&&(F||N)){M[k][S]=b,R=!1,w=!0,v=!0;break}}else if("range"===T){var I=b.condition,z=A.condition;if(I.min===z.min&&I.max===z.max&&I.not===z.not){P(2,"Clean up your JS: Same filter cannot add");break}if(b.override_filter){M[k][S]=b,R=!1,w=!0,v=!0;break}}}if(w){l=!1;break}}}v||(M.push(u),i=!0,l=!1)}}}l?a.removeFilter(t,e,n):(i===!0?a&&"global"===a.scope&&n&&a.call():!R&&n&&a.call(),query_restore=r,r||setQueryJSON(a.div_id,a.scope,M),query_restore=!0)},G=function(t,e){for(var n=t.length,a=0;n>a;a++)for(var i=t[a],s=i.length,l=0;s>l;l++)i[l].local_div_id_triggering_event=r;if("local"===o)for(var c=L.length,l=0;c>l;l++)window[L[l]].addFilter(t,!0,e,r)};this.removeFilter=function(t,e,n){e&&"global"===o?(W(t,this,n),document.getElementsByClassName("filter_list").length>0&&rt()):e&&"local"===o?Y(t,this,n):e||"local"!==o||W(t,this,n)};var W=function(t,e,n){for(var a=e.filters,r=a.length,i=t.length,o=!1,s=0;i>s;s++){for(var l=t[s],c=l.length,u=!1,h=0;r>h;h++){var d=x.isExactlySame(l,a[h]),p=x.isExactlySame(l,a[h]);if(p&&d){a.splice(h,1),o=!0,u=!0;break}}if(!u&&1===c)for(var f=0;c>f;f++){var g=l[f];if(column_name=g.column_name,condition_type=g.condition_type,K(g))for(var m=0;r>m;m++){var v=a[m],y=v.length,w=a.slice(0);if(1===y)for(var k=0;r>k;k++){var C=v[k],D=(C.column_name,C.condition_type,w[k]);if(D.column_name===column_name&&D.condition_type===condition_type)if("values"===condition_type||"datatype"===condition_type)0===_.difference(D["in"],name_j["in"]).length&&0===_.difference(D.not_in,name_j.not_in).length&&(a.splice(k,1),o=!0);else if("range"===condition_type){var P=name_j.condition.min,S=name_j.condition.max;b(P)||b(S)||P===D.condition.min&&S===D.condition.max&&(a.splice(k,1),o=!0)}}}}}e&&o&&n&&e.call(),query_restore=!1,setQueryJSON(e.div_id,e.scope,a)},Y=function(t,e,n){if("local"===o)for(var a=L.length,r=0;a>r;r++)window[L[r]].removeFilter(t,e,n)},U=function(t,e){for(var n=M.length,a=t.length,r=0;a>r;r++)V(t[r],e),M=_.reject(M,function(e){for(var n=e.length,a=0;n>a;a++)return e[a].column_name==t[r]});M.length!==n&&(document.getElementsByClassName("filter_list").length>0&&rt(),e.call())},V=function(t,e){var n=e.alias,a=e.select,r=e.sort;if(n&&delete n[t],a){var i=a.indexOf(t);i>-1&&a.splice(i,1)}r&&(r=_.reject(r,function(e){return Object.keys(e)[0]==t}))};this.resetFilters=function(){if("global"===o){for(;M.length>0;)M.pop();this.call(),query_restore=!1,setQueryJSON(this.div_id,this.scope,M),document.getElementsByClassName("filter_list").length>0&&rt()}else D(9,"You cannot run resetFilters on local. Please run it on a Global")},this.resetDimensions=function(){if("local"===o){for(;this.dimensions.length>0;)V(this.dimensions[this.dimensions.length-1],this),this.dimensions.pop();query_restore=!1,setQueryJSON(this.div_id,this.scope,[])}else D(10,"Globals do not have dimensions. Please run it on a local")},this.resetDatatypes=function(){if("local"===o){for(;this.datatype.length>0;)this.datatype.pop();query_restore=!1,setQueryJSON(this.div_id,this.scope,[])}else D(11,"Globals do not have datatypes. Please run it on a local")},this.resetMetrics=function(){if("local"===o){for(var t in this.metrics)V(t,this),delete this.metrics[t];query_restore=!1,setQueryJSON(this.div_id,this.scope,[])}else D(12,"Globals do not have metrics. Please run it on a local")},this.removeDimensions=function(t){if(b(t)||0===t.length)return D(27,t+": Columns cannot be blank. Kindly pass an array of dimensions"),!1;if(this.dimensions){var e=this.dimensions.length;if(e>0&&(k(this.dimensions,t),e===this.dimensions.length))return!1}return U(t,this),query_restore=!1,setQueryJSON(this.div_id,this.scope,this.filters),!0},this.removeMetrics=function(t){if(b(t)||0===t.length)return D(27,t+": Columns cannot be blank. Kindly pass an array of metrics"),!1;if(this.metrics){var e=Object.keys(this.metrics).length;if(e>0&&(C(this.metrics,t),e===Object.keys(this.metrics).length))return!1}return U(t,this),query_restore=!1,setQueryJSON(this.div_id,this.scope,this.filters),
!0},this.destroyColumn=function(t){if("global"===o){this.removeDimensions([t]),this.removeMetrics([t]);for(var e=L.length,n=0;e>n;n++)window[L[n]].removeDimensions([t]),window[L[n]].removeMetrics([t])}else this.removeDimensions([t]),this.removeMetrics([t])};var Q=function(t,e,n){var a=t.filters;if("local"===o){var r=t.dimensions,i=t.metrics,s=t.alias,l=t.select,c=t.sort;if(r){var u=r.indexOf(e);u>-1&&(r[u]=n)}if(i&&i[e]&&(i[n]=i[e],delete i[e]),s&&s[e]&&(s[e]=s[n],delete s[e]),l){var h=l.indexOf(e);h>-1&&(l[h]=n)}if(c)for(var d=c.length,p=0;d>p;p++)c[p][e]&&(c[p][n]=c[p][e],delete c[p][e])}if(a)for(var f=a.length,p=0;f>p;p++)a[p].column_name===e&&(a[p].column_name=n,document.getElementsByClassName("filter_list").length>0&&rt())};this.changeColumnName=function(t,e,n){if("global"===o){Q(this,t,e);for(var a=L.length,r=0;a>r;r++)window[L[r]].changeColumnName(t,e,!0)}else if(Q(this,t,e),!n)for(var a=L.length,r=0;a>r;r++)window[L[r]].changeColumnName(t,e)},this.addImpacts=function(t,e){if(J(t)){len=t.length;for(var n=0;len>n;n++){L.push(t[n]);var a=window[t[n]];a.impactedby=this.div_id,"local"===this.scope?X(this,t[n]):X(a,this.div_id),e&&(B.push(t[n]),a.impacts.push(this.div_id),X(a,this.div_id))}}};var X=function(t,e){t.global_divid_for_raw_data||(t.global_divid_for_raw_data=e)},J=function(t){var e,n,a=t.length;"local"===o?(error_code=13,e="global"):(error_code=7,e="local");for(var r=0;a>r;r++)if(n=window[t[r]],n&&n.scope===o)return D(error_code,"A "+o+" can only impact a "+e),!1;return!0},K=function(t){var e=t.next;return t.condition_type,0===Object.keys(t).length?(D(14,"Empty filter object is not allowed"),!1):b(t.column_name)?(D(15,"'column_name' cannot be empty"),!1):b(e)||"OR"===e||"AND"===e?"range"===t.condition_type?b(t.condition)?(D(17,"'condition' cannot be empty"),!1):b(t.condition.min)&&b(t.condition.max)?(D(18,"Either 'min' or 'max' or both must always be present"),!1):!0:"values"===t.condition_type||"datatype"===t.condition_type?b(t.not_in)&&b(t["in"])?(D(19,"Either 'in' or 'not_in' or both must always be present with array of some value"),!1):void 0!==t.not_in&&void 0!==t["in"]&&0===t.not_in.length&&0===t["in"].length?(D(19,"Either 'in' or 'not_in' or both must always be present with array of some value"),!1):!0:(D(20,r+": 'condition_type' must be one of "+["range","values","datatype"]),!1):(D(16,"'next' must either be empty or OR or AND"),!1)},Z=function(t){var e=["min","max","avg","sum","median","count"];if(0===Object.keys(t).length)return D(21,"'metrics' object cannot be empty"),!1;for(var n in t){if(b(n))return D(22,"Column name is undefined in 'metrics'"),!1;if(b(t[n])||0===t[n].length)return D(23,"Please pass an Array of aggregation functions for column name '"+n),!1;for(var a=t[n].length,r=0;a>r;r++)if(e.indexOf(t[n][r])<=-1)return D(24,"Wrong aggregation function passed for column name '"+n),!1}return!0};this.flushToGet=function(){if("local"===o){var t=S;return S="",t}D(25,"Cannot call flushToGet to on a Global PykQuery")},this.call=function(){var t=this;if("local"===o)nt(at(t));else{for(var e=L.length,n=0;e>n;n++){var a=window[L[n]];a.filter_data=a.call()}R&&this.appendClassSelected()}return!0};var tt=function(){for(var t,e,n,a,i=_.flatten(window[r].filters),o=(i.length,B.length),s=0;o>s;s++){t=window[B[s]].filters,e=t.length;for(var l=0;e>l;l++){n=t[l],a=n.length;for(var c=0;a>c;c++)n[c]&&n[c].local_div_id_triggering_event!==r&&i.push(n[c])}}return i},et=function(){var t=f.length,e=[],n=[],a=[];if(Object.keys(PykQuery.query_json).length>0&&(a=[]),f&&f.length>0){a=[];for(var r=0;t>r;r++)f[r].hasOwnProperty("group")?e.push(f[r]):n.push(f[r]);var i=_.groupBy(n,function(t){return t.hasOwnProperty("group")?void 0:t.column_name+"-"+t.condition_type});for(var o in i){var s=i[o],l=s.length,c={column_name:s[0].column_name,condition_type:s[0].condition_type,local_div_id_triggering_event:s[0].local_div_id_triggering_event,next:s[0].next};if(s[0].hasOwnProperty("group")&&(c.group=s[0].group),"values"===s[0].condition_type||"datatype"===s[0].condition_type){for(var u=[],h=[],d=0;l>d;d++)u=s[d]["in"]?w(u,s[d]["in"]):u,h=s[d].not_in?w(h,s[d].not_in):h;c["in"]=u,c.not_in=h}else if("range"===s[0].condition_type){c.condition=[];for(var d=0;l>d;d++)c.condition.push({min:s[d].condition.min,max:s[d].condition.max,not:s[d].condition.not})}a.push(c)}}return e.concat(a)},nt=function(t){if(f=tt(),h=et(),"inbrowser"===s){var e=new PykQuery.adapter.inbrowser.init(t,h);return S=e.call(),"local"===o&&d.executeOnFilter(),S}var e=new PykQuery.adapter.rumi.init(t,p,h);return e.call(function(t){return S=t,"local"===o&&d.executeOnFilter(),S})},at=function(t){for(var e={},n=Object.getOwnPropertyNames(t),a=n.length,r=0;a>r;r++)t.propertyIsEnumerable(n[r])===!1&&(e[n[r]]=t[n[r]]);return e};this.appendClassSelected=function(){if("global"===this.scope){if(M){for(var t=document.querySelectorAll(".pykquery-selected"),e=t.length,n=M.length,a=0;e>a;a++)t[a].classList.remove("pykquery-selected");for(var a=0;n>a;a++)for(var r=M[a],i=r.length,o=0;i>o;o++)if(r[o].selected_dom_id){var s=document.querySelectorAll("[data-id='"+r[o].selected_dom_id+"']");s.length>0&&!s[0].classList.contains("pykquery-selected")&&s[0].classList.add("pykquery-selected")}}}else D(26,"Cannot call appendClassSelected() on local")},this.toSql=function(){that=this;var t,e,n=that.filters,a=that.mode,r=that.unique,i=that.metrics,o=that.select,s=that.sort,l=that.dimensions,c=that.limit,u=that.offset,h=that.div_id,d="__",p=that.columns,f=[],g=[],m=[],v="",y="FROM "+d+" ",x=[],b="",w="",k="",C="",D=!1;if(l&&"aggregation"===a){if(i&&!_.isEmpty(i))for(var P in i)for(var S=i[P].length,A=0;S>A;A++)f.push(i[P][A]+"("+P+")");if(!_.isEmpty(l))for(var E=l.length,P=0;E>P;P++)_.has(i,l[P])===!1&&(f.push(l[P]),g.push(l[P]))}if(o&&"select"===a){if(0===_.intersection(p,o).length&&o.toString()!==["*"].toString())return!1;_.each(o,function(t){f.push(t)})}if(r&&"unique"===a){if(0===_.intersection(p,r).length)return!1;_.each(r,function(t){f.push(t)})}if(v=_.isEmpty(f)&&_.isEmpty(l)&&"unique"!=a?"SELECT * ":"unique"===a?"SELECT DISTINCT "+f.join(", ")+" ":"SELECT "+f.join(", ")+" ",n&&!_.isEmpty(n)&&(t=!1,_.each(n,function(a,r){switch(x[r]="",a.condition_type){case"values":e=[],a["in"]&&0!==a["in"].length&&(D=!0,x[r]+=a.column_name+" IN (",_.each(a["in"],function(t){x[r]+=t+", "}),x[r]=x[r].slice(0,-2)+") "),a.not_in&&0!==a.not_in.length&&(x[r]+=D?"AND "+a.column_name+" NOT IN (":a.column_name+" NOT IN (",_.each(a.not_in,function(t){x[r]+=t+", "}),x[r]=x[r].slice(0,-2)+") "),a.next&&r!=n.length-1?(x[r]=x[r]+a.next,t=a.next):t=!1;break;case"range":_.isEmpty(a.condition)||(x[r]+=a.column_name+" ",a.condition.not&&(x[r]+="NOT "),x[r]+="BETWEEN "+a.condition.min+" AND "+a.condition.max+" ",a.next&&r!==n.length-1?(x[r]=x[r]+a.next,t=a.next):t=!1);break;case"data_types":}})),l&&"aggregation"===a&&(b="GROUP BY "+g.join(", ")+" "),s&&!_.isEmpty(s)){w="ORDER BY ";for(key in s)w+=key+" "+s[key]+", ";w=w.slice(0,-2)+" "}k=c?"LIMIT "+c+" ":k,C=u?"OFFSET "+u+" ":C,m=h+": \n "+v+" \n "+y+" \n WHERE";for(var T=x.length,P=0;T>P;P++)m=m+" \n	 "+x[P];return m=m+" \n "+b+" \n "+w+" \n "+k+" \n "+C,console.log(m),m},this.listFilters=function(t){var e=document.getElementById(t);e.innerHTML="",e.innerHTML="<div class='filter_list'></div>",rt()};var rt=function(){var t=document.getElementsByClassName("filter_list")[0],e=M.length,n="";t.innerHTML="";for(var a=0;e>a;a++){for(var r=M[a],i=r.length,o="",s=0;i>s;s++){var l=r[s];if(n=s!==i-1?l.next:"",l["in"])o+="<b>"+r[s].column_name+" IN</b> ("+l["in"]+") <i>"+n+" </i>";else if(l.not_in)o+="<b>"+r[s].column_name+" NOT IN</b> ("+l.not_in+")";else if(l.condition){var c="";l.condition.not&&(c="NOT"),o+="<b>"+r[s].column_name+" "+c+" BETWEEN</b> "+l.condition.min.toFixed(2)+" <b>AND</b> "+l.condition.max.toFixed(2)}}var u=document.createElement("div");u.setAttribute("class","filter_block"),u.setAttribute("style","padding: 0px 10px;"),u.setAttribute("id","filter_block"+a),t.appendChild(u);var h=document.createElement("div");h.setAttribute("class","filter_value"),h.innerHTML=o,document.getElementById("filter_block"+a).appendChild(h);var d=document.createElement("div");d.setAttribute("class","filter_remove"),d.setAttribute("id","filter_remove_"+a),d.innerHTML="<b class='glyphicon glyphicon-trash' style='font-size: 11px;cursor:pointer'></b>",document.getElementById("filter_block"+a).appendChild(d)}for(var p=document.getElementsByClassName("filter_remove"),f=p.length,a=0;f>a;a++)p[a].onclick=function(){var t=this.id.split("_");it(M[t[2]])}},it=function(t){var e=t[0].local_div_id_triggering_event;window[e].removeFilter([t],!0,!0)}},PykQuery.adapter=PykQuery.adapter||{},PykQuery.adapter.rumi={},PykQuery.adapter.rumi.init=function(t,e,n){this.call=function(a){if(!e)return!1;t.filters=n;var r={config:t,token:gon.token};$.ajax({url:rumi_api_endpoint+e+"filter/show",data:r,dataType:"json",type:"POST",async:!0,success:function(t){a(t)},error:function(){console.log("Save error.")}})}},_.mixin({sum:function(t,e,n){if(!e&&_.isEmpty(t))return 0;var a=0;if(!e&&_.isArray(t)){for(var r=t.length-1;r>-1;r-=1)a+=t[r];return a}return _.each(t,function(t,r,i){var o=e?e.call(n,t,r,i):t;a+=o}),a},mean:function(t,e,n){return!e&&_.isEmpty(t)?1/0:!e&&_.isArray(t)?_.sum(t)/t.length:_.isArray(t)&&!_.isEmpty(t)?_.sum(t,e,n)/t.length:void 0},median:function(t,e,n){if(_.isEmpty(t))return 1/0;var a=[];return!e&&_.isArray(t)?(a=_.clone(t),a.sort(function(t,e){return t-e})):_.isArray(t)&&each(t,function(t,r,i){a.push(e?e.call(n,t,r,i):t),a.sort()}),a.length%2?a[Math.floor(a.length/2)]:_.isNumber(a[a.length/2-1])&&_.isNumber(a[a.length/2])?(a[a.length/2-1]+a[a.length/2])/2:a[a.length/2-1]},nrange:function(t,e,n){if(arguments.length<=1){if(0===t)return[];e=t||0,t=0}n=arguments[2]||1*(e>t)||-1;var a=Math.max(Math.ceil((e-t)/n),0),r=0,i=new Array(a);do i[r]=t,t+=n;while((r+=1)<a);return i}}),PykQuery.adapter=PykQuery.adapter||{},PykQuery.adapter.inbrowser={},PykQuery.adapter.inbrowser.init=function(t,e){var n,a=t,r=t.global_divid_for_raw_data,r=window[r];n=r.rawdata,a.filters=e,this.call=function(){var e,n=t.mode;switch(a.filters&&a.filters.length>0&&l(a),n){case"aggregation":e=s(a);break;case"unique":break;case"datatype":}return a.sort&&a.sort>0&&(e=i(e)),e};var i=function(t){var e=a.sort,n=e.length;return t.sort(function(t,a){for(var r=0;n>r;r++){var i=Object.keys(e[r])[0],s=h(i);if(t[s]!==a[s])return o(t,a,s,e[r][i])}})},o=function(t,e,n,a){return"asc"===a?t[n]<e[n]?-1:t[n]>e[n]?1:0:t[n]>e[n]?-1:t[n]<e[n]?1:0},s=function(e){var a=e.metrics,r=e.dimensions,i=r.length;local_data=_.groupBy(n,function(t){for(var e="",n=0;i>n;n++){var a=r[n];0===n?e=t[a]:e+="<>"+t[a]}return e});var o=[];return _.map(local_data,function(e,n){for(var r={},i=n.split("<>"),s=i.length,l=0;s>l;l++)r[h(t.dimensions[l])]=i[l];for(var c=Object.keys(a),u=c.length,d=0;u>d;d++)for(var p=a[c[d]],f=p.length,l=0;f>l;l++)switch(p[l]){case"count":r[h(c[d],p[l])]=e.length;break;case"sum":r[h(c[d],p[l])]=_.sum(e,function(t){return parseInt(t[c[d]],10)})}o.push(r)}),o},l=function(t){var e,a=t.mode,r=t.filters,i=r.length;e="select"===a?t.select:[];for(var o=0;i>o;o++)switch(r[o].condition_type){case"values":c(r[o],e,a);break;case"range":u(r[o],e);break;case"datatype":}return n},c=function(t,e,a){var r=t["in"],i=t.not_in,o=t.column_name,s=n,l=s.length;n=[];for(var c=0;l>c;c++){var u=s[c][o];r&&r.indexOf(u)>-1?n.push(s[c]):i&&i.length>0&&-1===i.indexOf(u)&&n.push(s[c])}0!=e.length&&"select"===a&&(n=_.map(n,function(t){return _.pick(t,e)}))},u=function(t,e,a){var r,i,o,s=t.column_name,l=t.condition.length;n=_.filter(n,function(e){for(var n=0;l>n;n++){if(r=t.condition[n].min,i=t.condition[n].max,o=t.condition[n].not,o&&(e[s]>i||e[s]<r))return e;if(!o&&e[s]<=i&&e[s]>=r)return e}}),0!=e.length&&"select"===a&&(n=_.map(n,function(t){return _.pick(t,e)}))},h=function(t,e){var n=a.alias;return"string"==typeof n[t]?n[t]:"object"==typeof n[t]?e?n[t][e]:n[t][t]:t}};var Rumali={};$(document).ready(function(){$(".s3-publish-details").click(function(t){var e="<a href='"+$(this).attr("s3-url")+"' target='_blank'>"+$(this).attr("s3-url")+"</a>";$("#s3-published-url").html(e),$("#s3-published-last-updated").html($(this).attr("s3-published-at")),$("#s3-published-requested-at").html($(this).attr("s3-requested-at")),t.preventDefault()})}),Object.size=function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},Rumali.object={datacast_url:rumi_api_endpoint+"datacast/"},Rumali.data_objects={};var findDistinct=function(t,e){var n=[];return n=_.map(t,function(t){return t[e]}),n=_.uniq(n)},renderFilter=function(t,e,n){var a,r,i;return a=findDistinct(t,e),i=a.length,r=i>=5?smallDropDown(n,a,i):largeDropDown(n,a,i)},smallDropDown=function(t,e,n){var a="<select id="+t+' class="form-control" style="width:12.5%!important">';for(i=0;i<n;i++)a+='<option value="'+e[i]+'">'+e[i];return a+="</select>"},largeDropDown=function(t,e,n){var a="<select id="+t+' class="form-control" style="width:12.5%!important">';for(i=0;i<n;i++)a+='<option value="'+e[i]+'">'+e[i];return a+="</select>"},getJSON=function(t,e){var n=arguments;Rumali.data_objects[t]?n[2]&&n[3]&&n[4]&&n[5]?e(Rumali.data_objects[t],n[2],n[3],n[4],n[5]):e(Rumali.data_objects[t]):$.getJSON(t).done(function(a){Rumali.data_objects[t]=a,n[2]&&n[3]&&n[4]&&n[5]?e(a,n[2],n[3],n[4],n[5]):e(a)})},findKeyArray=function(t){var e=Object.keys(t);return e},renderHTMLForCard=function(t,e,n){var e=e,a=t[0].title?t[0].title:"",r=t[0].key?t[0].key:"<br/>",i=t[0].value?t[0].value:"",o=t[0].content?t[0].content:"";diff_in_value=t[0].diff_in_value?t[0].diff_in_value:"",diff_string="","number"==typeof+i&&(i=+i,i=applyConditionalFormatting(i)),"number"==typeof+diff_in_value&&(+diff_in_value>0&&(diff_string='(<span class="'+applyConditionalCssPositiveOrNegative(1)+'">'+diff_in_value,diff_string+="&#9652;</span>)"),+diff_in_value<0&&(diff_string='(<span class="'+applyConditionalCssPositiveOrNegative(2)+'">'+-1*+diff_in_value,diff_string+="&#9660;</span>)"),0===+diff_in_value&&(diff_string='(<span class="'+applyConditionalCssPositiveOrNegative(3)+'">'+diff_in_value,diff_string+="-</span>)"));var s=$("<div />").appendTo("body");s.attr("id",e);var l='<span class = "'+n+' card_layout">';l+='<span class= "col-sm-12 card_layout_header_span"><h4 class="card_layout_header"><b>'+a+"</b></h4></span>",l+='<span class= "col-sm-12 card_layout_key">'+r+"</b></span>",l+='<span class= "col-sm-12 card_layout_value">'+i+"</b>",""!==diff_in_value&&(l+=diff_string),l+='<span class= "col-sm-12 card_layout_content">'+o,l+="</span>",$("#"+e).html(l)},applyConditionalFormatting=function(t){var e=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return e},applyConditionalCssPositiveOrNegative=function(t){return 1===t?"positive_value_css":2===t?"negative_value_css":"no_class"},filterChart=function(t,e,n){var a,r=[],i=-1;for(a=0;a<t.length;a++)if(n===t[a][e]){r[++i]={};for(var o in t[a])o!==e&&(r[i][o]=t[a][o])}return r},getApiFromString=function(t){return t=t.split("."),PykCharts[t[1]][t[2]]},genereteChartInMarkdown=function(){$(".d3-pykcharts").each(function(){callGetJson(this)}),$(".card_with_value").each(function(){callGetJson(this)})},callGetJson=function(t){var e=t.id,n=Rumali.object.datacast_url+t.dataset.datacast_identifier,a=t.dataset.api,r=t.dataset.filter_present,i=t.dataset.filter_column_name||"";getJSON(n,generateChart,e,a,r,i)},generateChart=function(t,e,n,a,r){var i,o,s=document.getElementById(e);"true"==a&&(i=document.createElement("div"),i.id=e+"_chart_filters",s.appendChild(i)),o=document.createElement("div"),o.id=e+"_charts",s.appendChild(o),"true"===a?(unique_filter_html=renderFilter(t,r,i.id),$("#"+i.id).html(unique_filter_html),$("#"+i.id).change(function(){filter_val=$("#"+i.id+" option:selected").val(),parsed_data=filterChart(t,r,filter_val),createChart(parsed_data,o.id,e,n)}),$("select#"+i.id).prop("selectedIndex",0),filter_val=$("#"+i.id+" option:selected").val(),parsed_data=filterChart(t,r,filter_val),createChart(parsed_data,o.id,e,n)):(parsed_data=t,createChart(parsed_data,o.id,e,n))},createChart=function(t,e,n,a){var r=gon.chart_config_objects[n]||{};if(r.data=t,"handsontable"==a)$("#"+e).handsontable(r);else if("one-number-indicator"==a)renderHTMLForCard(t,e,"col-sm-12");else{initializer_api=getApiFromString(a),r.selector="#"+e,r.background_color="";var i=new initializer_api(r);i.execute()}};$(function(){$('[data-toggle="popover"]').popover()});